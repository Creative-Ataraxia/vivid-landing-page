function sU(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Qm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function PI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var LI={exports:{}},Ri={},ue={exports:{}},Bt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cp=Symbol.for("react.element"),oU=Symbol.for("react.portal"),aU=Symbol.for("react.fragment"),lU=Symbol.for("react.strict_mode"),uU=Symbol.for("react.profiler"),cU=Symbol.for("react.provider"),dU=Symbol.for("react.context"),hU=Symbol.for("react.forward_ref"),fU=Symbol.for("react.suspense"),pU=Symbol.for("react.memo"),mU=Symbol.for("react.lazy"),uT=Symbol.iterator;function gU(t){return t===null||typeof t!="object"?null:(t=uT&&t[uT]||t["@@iterator"],typeof t=="function"?t:null)}var OI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},II=Object.assign,DI={};function Hd(t,e,n){this.props=t,this.context=e,this.refs=DI,this.updater=n||OI}Hd.prototype.isReactComponent={};Hd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function RI(){}RI.prototype=Hd.prototype;function jb(t,e,n){this.props=t,this.context=e,this.refs=DI,this.updater=n||OI}var $b=jb.prototype=new RI;$b.constructor=jb;II($b,Hd.prototype);$b.isPureReactComponent=!0;var cT=Array.isArray,zI=Object.prototype.hasOwnProperty,qb={current:null},NI={key:!0,ref:!0,__self:!0,__source:!0};function kI(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)zI.call(e,r)&&!NI.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Cp,type:t,key:s,ref:o,props:i,_owner:qb.current}}function vU(t,e){return{$$typeof:Cp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xb(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cp}function yU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var dT=/\/+/g;function xx(t,e){return typeof t=="object"&&t!==null&&t.key!=null?yU(""+t.key):e.toString(36)}function x0(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Cp:case oU:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+xx(o,0):r,cT(i)?(n="",t!=null&&(n=t.replace(dT,"$&/")+"/"),x0(i,e,n,"",function(c){return c})):i!=null&&(Xb(i)&&(i=vU(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(dT,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",cT(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+xx(s,a);o+=x0(s,e,n,l,i)}else if(l=gU(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+xx(s,a++),o+=x0(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Km(t,e,n){if(t==null)return t;var r=[],i=0;return x0(t,r,"","",function(s){return e.call(n,s,i++)}),r}function xU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Zr={current:null},_0={transition:null},_U={ReactCurrentDispatcher:Zr,ReactCurrentBatchConfig:_0,ReactCurrentOwner:qb};Bt.Children={map:Km,forEach:function(t,e,n){Km(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Km(t,function(){e++}),e},toArray:function(t){return Km(t,function(e){return e})||[]},only:function(t){if(!Xb(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Bt.Component=Hd;Bt.Fragment=aU;Bt.Profiler=uU;Bt.PureComponent=jb;Bt.StrictMode=lU;Bt.Suspense=fU;Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_U;Bt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=II({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=qb.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)zI.call(e,l)&&!NI.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Cp,type:t.type,key:i,ref:s,props:r,_owner:o}};Bt.createContext=function(t){return t={$$typeof:dU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:cU,_context:t},t.Consumer=t};Bt.createElement=kI;Bt.createFactory=function(t){var e=kI.bind(null,t);return e.type=t,e};Bt.createRef=function(){return{current:null}};Bt.forwardRef=function(t){return{$$typeof:hU,render:t}};Bt.isValidElement=Xb;Bt.lazy=function(t){return{$$typeof:mU,_payload:{_status:-1,_result:t},_init:xU}};Bt.memo=function(t,e){return{$$typeof:pU,type:t,compare:e===void 0?null:e}};Bt.startTransition=function(t){var e=_0.transition;_0.transition={};try{t()}finally{_0.transition=e}};Bt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Bt.useCallback=function(t,e){return Zr.current.useCallback(t,e)};Bt.useContext=function(t){return Zr.current.useContext(t)};Bt.useDebugValue=function(){};Bt.useDeferredValue=function(t){return Zr.current.useDeferredValue(t)};Bt.useEffect=function(t,e){return Zr.current.useEffect(t,e)};Bt.useId=function(){return Zr.current.useId()};Bt.useImperativeHandle=function(t,e,n){return Zr.current.useImperativeHandle(t,e,n)};Bt.useInsertionEffect=function(t,e){return Zr.current.useInsertionEffect(t,e)};Bt.useLayoutEffect=function(t,e){return Zr.current.useLayoutEffect(t,e)};Bt.useMemo=function(t,e){return Zr.current.useMemo(t,e)};Bt.useReducer=function(t,e,n){return Zr.current.useReducer(t,e,n)};Bt.useRef=function(t){return Zr.current.useRef(t)};Bt.useState=function(t){return Zr.current.useState(t)};Bt.useSyncExternalStore=function(t,e,n){return Zr.current.useSyncExternalStore(t,e,n)};Bt.useTransition=function(){return Zr.current.useTransition()};Bt.version="18.2.0";(function(t){t.exports=Bt})(ue);const wU=PI(ue.exports),hT=sU({__proto__:null,default:wU},[ue.exports]);var BI={exports:{}},FI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,N){var z=D.length;D.push(N);e:for(;0<z;){var U=z-1>>>1,V=D[U];if(0<i(V,N))D[U]=N,D[z]=V,z=U;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var N=D[0],z=D.pop();if(z!==N){D[0]=z;e:for(var U=0,V=D.length,X=V>>>1;U<X;){var J=2*(U+1)-1,ee=D[J],q=J+1,re=D[q];if(0>i(ee,z))q<V&&0>i(re,ee)?(D[U]=re,D[q]=z,U=q):(D[U]=ee,D[J]=z,U=J);else if(q<V&&0>i(re,z))D[U]=re,D[q]=z,U=q;else break e}}return N}function i(D,N){var z=D.sortIndex-N.sortIndex;return z!==0?z:D.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,u=null,h=3,m=!1,g=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(D){for(var N=n(c);N!==null;){if(N.callback===null)r(c);else if(N.startTime<=D)r(c),N.sortIndex=N.expirationTime,e(l,N);else break;N=n(c)}}function b(D){if(x=!1,S(D),!g)if(n(l)!==null)g=!0,te(A);else{var N=n(c);N!==null&&Z(b,N.startTime-D)}}function A(D,N){g=!1,x&&(x=!1,v(T),T=-1),m=!0;var z=h;try{for(S(N),u=n(l);u!==null&&(!(u.expirationTime>N)||D&&!k());){var U=u.callback;if(typeof U=="function"){u.callback=null,h=u.priorityLevel;var V=U(u.expirationTime<=N);N=t.unstable_now(),typeof V=="function"?u.callback=V:u===n(l)&&r(l),S(N)}else r(l);u=n(l)}if(u!==null)var X=!0;else{var J=n(c);J!==null&&Z(b,J.startTime-N),X=!1}return X}finally{u=null,h=z,m=!1}}var E=!1,C=null,T=-1,O=5,L=-1;function k(){return!(t.unstable_now()-L<O)}function B(){if(C!==null){var D=t.unstable_now();L=D;var N=!0;try{N=C(!0,D)}finally{N?G():(E=!1,C=null)}}else E=!1}var G;if(typeof _=="function")G=function(){_(B)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,Y=H.port2;H.port1.onmessage=B,G=function(){Y.postMessage(null)}}else G=function(){y(B,0)};function te(D){C=D,E||(E=!0,G())}function Z(D,N){T=y(function(){D(t.unstable_now())},N)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,te(A))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(h){case 1:case 2:case 3:var N=3;break;default:N=h}var z=h;h=N;try{return D()}finally{h=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,N){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var z=h;h=D;try{return N()}finally{h=z}},t.unstable_scheduleCallback=function(D,N,z){var U=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?U+z:U):z=U,D){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=z+V,D={id:d++,callback:N,priorityLevel:D,startTime:z,expirationTime:V,sortIndex:-1},z>U?(D.sortIndex=z,e(c,D),n(l)===null&&D===n(c)&&(x?(v(T),T=-1):x=!0,Z(b,z-U))):(D.sortIndex=V,e(l,D),g||m||(g=!0,te(A))),D},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(D){var N=h;return function(){var z=h;h=N;try{return D.apply(this,arguments)}finally{h=z}}}})(FI);(function(t){t.exports=FI})(BI);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UI=ue.exports,Ii=BI.exports;function Be(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var VI=new Set,zf={};function Gu(t,e){Ed(t,e),Ed(t+"Capture",e)}function Ed(t,e){for(zf[t]=e,t=0;t<e.length;t++)VI.add(e[t])}var la=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gw=Object.prototype.hasOwnProperty,SU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fT={},pT={};function bU(t){return gw.call(pT,t)?!0:gw.call(fT,t)?!1:SU.test(t)?pT[t]=!0:(fT[t]=!0,!1)}function MU(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function EU(t,e,n,r){if(e===null||typeof e>"u"||MU(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Jr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Mr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mr[t]=new Jr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mr[e]=new Jr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mr[t]=new Jr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mr[t]=new Jr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mr[t]=new Jr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mr[t]=new Jr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mr[t]=new Jr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mr[t]=new Jr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mr[t]=new Jr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yb=/[\-:]([a-z])/g;function Zb(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yb,Zb);Mr[e]=new Jr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yb,Zb);Mr[e]=new Jr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yb,Zb);Mr[e]=new Jr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mr[t]=new Jr(t,1,!1,t.toLowerCase(),null,!1,!1)});Mr.xlinkHref=new Jr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mr[t]=new Jr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jb(t,e,n,r){var i=Mr.hasOwnProperty(e)?Mr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(EU(e,n,i,r)&&(n=null),r||i===null?bU(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var va=UI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,eg=Symbol.for("react.element"),Wc=Symbol.for("react.portal"),jc=Symbol.for("react.fragment"),Qb=Symbol.for("react.strict_mode"),vw=Symbol.for("react.profiler"),HI=Symbol.for("react.provider"),GI=Symbol.for("react.context"),Kb=Symbol.for("react.forward_ref"),yw=Symbol.for("react.suspense"),xw=Symbol.for("react.suspense_list"),eM=Symbol.for("react.memo"),Ua=Symbol.for("react.lazy"),WI=Symbol.for("react.offscreen"),mT=Symbol.iterator;function Ph(t){return t===null||typeof t!="object"?null:(t=mT&&t[mT]||t["@@iterator"],typeof t=="function"?t:null)}var Pn=Object.assign,_x;function sf(t){if(_x===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_x=e&&e[1]||""}return`
`+_x+t}var wx=!1;function Sx(t,e){if(!t||wx)return"";wx=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{wx=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?sf(t):""}function TU(t){switch(t.tag){case 5:return sf(t.type);case 16:return sf("Lazy");case 13:return sf("Suspense");case 19:return sf("SuspenseList");case 0:case 2:case 15:return t=Sx(t.type,!1),t;case 11:return t=Sx(t.type.render,!1),t;case 1:return t=Sx(t.type,!0),t;default:return""}}function _w(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case jc:return"Fragment";case Wc:return"Portal";case vw:return"Profiler";case Qb:return"StrictMode";case yw:return"Suspense";case xw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case GI:return(t.displayName||"Context")+".Consumer";case HI:return(t._context.displayName||"Context")+".Provider";case Kb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case eM:return e=t.displayName||null,e!==null?e:_w(t.type)||"Memo";case Ua:e=t._payload,t=t._init;try{return _w(t(e))}catch{}}return null}function AU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _w(e);case 8:return e===Qb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CU(t){var e=jI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function tg(t){t._valueTracker||(t._valueTracker=CU(t))}function $I(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=jI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function q0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ww(t,e){var n=e.checked;return Pn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function gT(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=hl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qI(t,e){e=e.checked,e!=null&&Jb(t,"checked",e,!1)}function Sw(t,e){qI(t,e);var n=hl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bw(t,e.type,n):e.hasOwnProperty("defaultValue")&&bw(t,e.type,hl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vT(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bw(t,e,n){(e!=="number"||q0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var of=Array.isArray;function ud(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+hl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Mw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Be(91));return Pn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Be(92));if(of(n)){if(1<n.length)throw Error(Be(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hl(n)}}function XI(t,e){var n=hl(e.value),r=hl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function xT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function YI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ew(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?YI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ng,ZI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ng=ng||document.createElement("div"),ng.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ng.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Nf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PU=["Webkit","ms","Moz","O"];Object.keys(vf).forEach(function(t){PU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vf[e]=vf[t]})});function JI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vf.hasOwnProperty(t)&&vf[t]?(""+e).trim():e+"px"}function QI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=JI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var LU=Pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tw(t,e){if(e){if(LU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Be(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Be(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Be(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Be(62))}}function Aw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cw=null;function tM(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pw=null,cd=null,dd=null;function _T(t){if(t=Op(t)){if(typeof Pw!="function")throw Error(Be(280));var e=t.stateNode;e&&(e=hy(e),Pw(t.stateNode,t.type,e))}}function KI(t){cd?dd?dd.push(t):dd=[t]:cd=t}function eD(){if(cd){var t=cd,e=dd;if(dd=cd=null,_T(t),e)for(t=0;t<e.length;t++)_T(e[t])}}function tD(t,e){return t(e)}function nD(){}var bx=!1;function rD(t,e,n){if(bx)return t(e,n);bx=!0;try{return tD(t,e,n)}finally{bx=!1,(cd!==null||dd!==null)&&(nD(),eD())}}function kf(t,e){var n=t.stateNode;if(n===null)return null;var r=hy(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Be(231,e,typeof n));return n}var Lw=!1;if(la)try{var Lh={};Object.defineProperty(Lh,"passive",{get:function(){Lw=!0}}),window.addEventListener("test",Lh,Lh),window.removeEventListener("test",Lh,Lh)}catch{Lw=!1}function OU(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var yf=!1,X0=null,Y0=!1,Ow=null,IU={onError:function(t){yf=!0,X0=t}};function DU(t,e,n,r,i,s,o,a,l){yf=!1,X0=null,OU.apply(IU,arguments)}function RU(t,e,n,r,i,s,o,a,l){if(DU.apply(this,arguments),yf){if(yf){var c=X0;yf=!1,X0=null}else throw Error(Be(198));Y0||(Y0=!0,Ow=c)}}function Wu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function iD(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function wT(t){if(Wu(t)!==t)throw Error(Be(188))}function zU(t){var e=t.alternate;if(!e){if(e=Wu(t),e===null)throw Error(Be(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return wT(i),t;if(s===r)return wT(i),e;s=s.sibling}throw Error(Be(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Be(189))}}if(n.alternate!==r)throw Error(Be(190))}if(n.tag!==3)throw Error(Be(188));return n.stateNode.current===n?t:e}function sD(t){return t=zU(t),t!==null?oD(t):null}function oD(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=oD(t);if(e!==null)return e;t=t.sibling}return null}var aD=Ii.unstable_scheduleCallback,ST=Ii.unstable_cancelCallback,NU=Ii.unstable_shouldYield,kU=Ii.unstable_requestPaint,Gn=Ii.unstable_now,BU=Ii.unstable_getCurrentPriorityLevel,nM=Ii.unstable_ImmediatePriority,lD=Ii.unstable_UserBlockingPriority,Z0=Ii.unstable_NormalPriority,FU=Ii.unstable_LowPriority,uD=Ii.unstable_IdlePriority,ly=null,wo=null;function UU(t){if(wo&&typeof wo.onCommitFiberRoot=="function")try{wo.onCommitFiberRoot(ly,t,void 0,(t.current.flags&128)===128)}catch{}}var Fs=Math.clz32?Math.clz32:GU,VU=Math.log,HU=Math.LN2;function GU(t){return t>>>=0,t===0?32:31-(VU(t)/HU|0)|0}var rg=64,ig=4194304;function af(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function J0(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=af(a):(s&=o,s!==0&&(r=af(s)))}else o=n&~i,o!==0?r=af(o):s!==0&&(r=af(s));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Fs(e),i=1<<n,r|=t[n],e&=~i;return r}function WU(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jU(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Fs(s),a=1<<o,l=i[o];l===-1?((a&n)===0||(a&r)!==0)&&(i[o]=WU(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Iw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function cD(){var t=rg;return rg<<=1,(rg&4194240)===0&&(rg=64),t}function Mx(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fs(e),t[e]=n}function $U(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Fs(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function rM(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Fs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var rn=0;function dD(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var hD,iM,fD,pD,mD,Dw=!1,sg=[],el=null,tl=null,nl=null,Bf=new Map,Ff=new Map,Ga=[],qU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bT(t,e){switch(t){case"focusin":case"focusout":el=null;break;case"dragenter":case"dragleave":tl=null;break;case"mouseover":case"mouseout":nl=null;break;case"pointerover":case"pointerout":Bf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ff.delete(e.pointerId)}}function Oh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Op(e),e!==null&&iM(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function XU(t,e,n,r,i){switch(e){case"focusin":return el=Oh(el,t,e,n,r,i),!0;case"dragenter":return tl=Oh(tl,t,e,n,r,i),!0;case"mouseover":return nl=Oh(nl,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Bf.set(s,Oh(Bf.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ff.set(s,Oh(Ff.get(s)||null,t,e,n,r,i)),!0}return!1}function gD(t){var e=au(t.target);if(e!==null){var n=Wu(e);if(n!==null){if(e=n.tag,e===13){if(e=iD(n),e!==null){t.blockedOn=e,mD(t.priority,function(){fD(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function w0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Cw=r,n.target.dispatchEvent(r),Cw=null}else return e=Op(n),e!==null&&iM(e),t.blockedOn=n,!1;e.shift()}return!0}function MT(t,e,n){w0(t)&&n.delete(e)}function YU(){Dw=!1,el!==null&&w0(el)&&(el=null),tl!==null&&w0(tl)&&(tl=null),nl!==null&&w0(nl)&&(nl=null),Bf.forEach(MT),Ff.forEach(MT)}function Ih(t,e){t.blockedOn===e&&(t.blockedOn=null,Dw||(Dw=!0,Ii.unstable_scheduleCallback(Ii.unstable_NormalPriority,YU)))}function Uf(t){function e(i){return Ih(i,t)}if(0<sg.length){Ih(sg[0],t);for(var n=1;n<sg.length;n++){var r=sg[n];r.blockedOn===t&&(r.blockedOn=null)}}for(el!==null&&Ih(el,t),tl!==null&&Ih(tl,t),nl!==null&&Ih(nl,t),Bf.forEach(e),Ff.forEach(e),n=0;n<Ga.length;n++)r=Ga[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ga.length&&(n=Ga[0],n.blockedOn===null);)gD(n),n.blockedOn===null&&Ga.shift()}var hd=va.ReactCurrentBatchConfig,Q0=!0;function ZU(t,e,n,r){var i=rn,s=hd.transition;hd.transition=null;try{rn=1,sM(t,e,n,r)}finally{rn=i,hd.transition=s}}function JU(t,e,n,r){var i=rn,s=hd.transition;hd.transition=null;try{rn=4,sM(t,e,n,r)}finally{rn=i,hd.transition=s}}function sM(t,e,n,r){if(Q0){var i=Rw(t,e,n,r);if(i===null)Rx(t,e,r,K0,n),bT(t,r);else if(XU(i,t,e,n,r))r.stopPropagation();else if(bT(t,r),e&4&&-1<qU.indexOf(t)){for(;i!==null;){var s=Op(i);if(s!==null&&hD(s),s=Rw(t,e,n,r),s===null&&Rx(t,e,r,K0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Rx(t,e,r,null,n)}}var K0=null;function Rw(t,e,n,r){if(K0=null,t=tM(r),t=au(t),t!==null)if(e=Wu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=iD(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return K0=t,null}function vD(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BU()){case nM:return 1;case lD:return 4;case Z0:case FU:return 16;case uD:return 536870912;default:return 16}default:return 16}}var ja=null,oM=null,S0=null;function yD(){if(S0)return S0;var t,e=oM,n=e.length,r,i="value"in ja?ja.value:ja.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return S0=i.slice(t,1<r?1-r:void 0)}function b0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function og(){return!0}function ET(){return!1}function zi(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?og:ET,this.isPropagationStopped=ET,this}return Pn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=og)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=og)},persist:function(){},isPersistent:og}),e}var Gd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aM=zi(Gd),Lp=Pn({},Gd,{view:0,detail:0}),QU=zi(Lp),Ex,Tx,Dh,uy=Pn({},Lp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lM,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dh&&(Dh&&t.type==="mousemove"?(Ex=t.screenX-Dh.screenX,Tx=t.screenY-Dh.screenY):Tx=Ex=0,Dh=t),Ex)},movementY:function(t){return"movementY"in t?t.movementY:Tx}}),TT=zi(uy),KU=Pn({},uy,{dataTransfer:0}),e6=zi(KU),t6=Pn({},Lp,{relatedTarget:0}),Ax=zi(t6),n6=Pn({},Gd,{animationName:0,elapsedTime:0,pseudoElement:0}),r6=zi(n6),i6=Pn({},Gd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),s6=zi(i6),o6=Pn({},Gd,{data:0}),AT=zi(o6),a6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},l6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},u6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function c6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=u6[t])?!!e[t]:!1}function lM(){return c6}var d6=Pn({},Lp,{key:function(t){if(t.key){var e=a6[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=b0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?l6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lM,charCode:function(t){return t.type==="keypress"?b0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?b0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),h6=zi(d6),f6=Pn({},uy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),CT=zi(f6),p6=Pn({},Lp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lM}),m6=zi(p6),g6=Pn({},Gd,{propertyName:0,elapsedTime:0,pseudoElement:0}),v6=zi(g6),y6=Pn({},uy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),x6=zi(y6),_6=[9,13,27,32],uM=la&&"CompositionEvent"in window,xf=null;la&&"documentMode"in document&&(xf=document.documentMode);var w6=la&&"TextEvent"in window&&!xf,xD=la&&(!uM||xf&&8<xf&&11>=xf),PT=String.fromCharCode(32),LT=!1;function _D(t,e){switch(t){case"keyup":return _6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wD(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $c=!1;function S6(t,e){switch(t){case"compositionend":return wD(e);case"keypress":return e.which!==32?null:(LT=!0,PT);case"textInput":return t=e.data,t===PT&&LT?null:t;default:return null}}function b6(t,e){if($c)return t==="compositionend"||!uM&&_D(t,e)?(t=yD(),S0=oM=ja=null,$c=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xD&&e.locale!=="ko"?null:e.data;default:return null}}var M6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!M6[t.type]:e==="textarea"}function SD(t,e,n,r){KI(r),e=ev(e,"onChange"),0<e.length&&(n=new aM("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _f=null,Vf=null;function E6(t){DD(t,0)}function cy(t){var e=Yc(t);if($I(e))return t}function T6(t,e){if(t==="change")return e}var bD=!1;if(la){var Cx;if(la){var Px="oninput"in document;if(!Px){var IT=document.createElement("div");IT.setAttribute("oninput","return;"),Px=typeof IT.oninput=="function"}Cx=Px}else Cx=!1;bD=Cx&&(!document.documentMode||9<document.documentMode)}function DT(){_f&&(_f.detachEvent("onpropertychange",MD),Vf=_f=null)}function MD(t){if(t.propertyName==="value"&&cy(Vf)){var e=[];SD(e,Vf,t,tM(t)),rD(E6,e)}}function A6(t,e,n){t==="focusin"?(DT(),_f=e,Vf=n,_f.attachEvent("onpropertychange",MD)):t==="focusout"&&DT()}function C6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cy(Vf)}function P6(t,e){if(t==="click")return cy(e)}function L6(t,e){if(t==="input"||t==="change")return cy(e)}function O6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var js=typeof Object.is=="function"?Object.is:O6;function Hf(t,e){if(js(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!gw.call(e,i)||!js(t[i],e[i]))return!1}return!0}function RT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zT(t,e){var n=RT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=RT(n)}}function ED(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ED(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function TD(){for(var t=window,e=q0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=q0(t.document)}return e}function cM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function I6(t){var e=TD(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ED(n.ownerDocument.documentElement,n)){if(r!==null&&cM(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=zT(n,s);var o=zT(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var D6=la&&"documentMode"in document&&11>=document.documentMode,qc=null,zw=null,wf=null,Nw=!1;function NT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nw||qc==null||qc!==q0(r)||(r=qc,"selectionStart"in r&&cM(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wf&&Hf(wf,r)||(wf=r,r=ev(zw,"onSelect"),0<r.length&&(e=new aM("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qc)))}function ag(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Xc={animationend:ag("Animation","AnimationEnd"),animationiteration:ag("Animation","AnimationIteration"),animationstart:ag("Animation","AnimationStart"),transitionend:ag("Transition","TransitionEnd")},Lx={},AD={};la&&(AD=document.createElement("div").style,"AnimationEvent"in window||(delete Xc.animationend.animation,delete Xc.animationiteration.animation,delete Xc.animationstart.animation),"TransitionEvent"in window||delete Xc.transitionend.transition);function dy(t){if(Lx[t])return Lx[t];if(!Xc[t])return t;var e=Xc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in AD)return Lx[t]=e[n];return t}var CD=dy("animationend"),PD=dy("animationiteration"),LD=dy("animationstart"),OD=dy("transitionend"),ID=new Map,kT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yl(t,e){ID.set(t,e),Gu(e,[t])}for(var Ox=0;Ox<kT.length;Ox++){var Ix=kT[Ox],R6=Ix.toLowerCase(),z6=Ix[0].toUpperCase()+Ix.slice(1);yl(R6,"on"+z6)}yl(CD,"onAnimationEnd");yl(PD,"onAnimationIteration");yl(LD,"onAnimationStart");yl("dblclick","onDoubleClick");yl("focusin","onFocus");yl("focusout","onBlur");yl(OD,"onTransitionEnd");Ed("onMouseEnter",["mouseout","mouseover"]);Ed("onMouseLeave",["mouseout","mouseover"]);Ed("onPointerEnter",["pointerout","pointerover"]);Ed("onPointerLeave",["pointerout","pointerover"]);Gu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N6=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function BT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,RU(r,e,void 0,t),t.currentTarget=null}function DD(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;BT(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;BT(i,a,c),s=l}}}if(Y0)throw t=Ow,Y0=!1,Ow=null,t}function mn(t,e){var n=e[Vw];n===void 0&&(n=e[Vw]=new Set);var r=t+"__bubble";n.has(r)||(RD(e,t,2,!1),n.add(r))}function Dx(t,e,n){var r=0;e&&(r|=4),RD(n,t,r,e)}var lg="_reactListening"+Math.random().toString(36).slice(2);function Gf(t){if(!t[lg]){t[lg]=!0,VI.forEach(function(n){n!=="selectionchange"&&(N6.has(n)||Dx(n,!1,t),Dx(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[lg]||(e[lg]=!0,Dx("selectionchange",!1,e))}}function RD(t,e,n,r){switch(vD(e)){case 1:var i=ZU;break;case 4:i=JU;break;default:i=sM}n=i.bind(null,e,n,t),i=void 0,!Lw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Rx(t,e,n,r,i){var s=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=au(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}rD(function(){var c=s,d=tM(n),u=[];e:{var h=ID.get(t);if(h!==void 0){var m=aM,g=t;switch(t){case"keypress":if(b0(n)===0)break e;case"keydown":case"keyup":m=h6;break;case"focusin":g="focus",m=Ax;break;case"focusout":g="blur",m=Ax;break;case"beforeblur":case"afterblur":m=Ax;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=TT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=e6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=m6;break;case CD:case PD:case LD:m=r6;break;case OD:m=v6;break;case"scroll":m=QU;break;case"wheel":m=x6;break;case"copy":case"cut":case"paste":m=s6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=CT}var x=(e&4)!==0,y=!x&&t==="scroll",v=x?h!==null?h+"Capture":null:h;x=[];for(var _=c,S;_!==null;){S=_;var b=S.stateNode;if(S.tag===5&&b!==null&&(S=b,v!==null&&(b=kf(_,v),b!=null&&x.push(Wf(_,b,S)))),y)break;_=_.return}0<x.length&&(h=new m(h,g,null,n,d),u.push({event:h,listeners:x}))}}if((e&7)===0){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&n!==Cw&&(g=n.relatedTarget||n.fromElement)&&(au(g)||g[ua]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=c,g=g?au(g):null,g!==null&&(y=Wu(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(x=TT,b="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(x=CT,b="onPointerLeave",v="onPointerEnter",_="pointer"),y=m==null?h:Yc(m),S=g==null?h:Yc(g),h=new x(b,_+"leave",m,n,d),h.target=y,h.relatedTarget=S,b=null,au(d)===c&&(x=new x(v,_+"enter",g,n,d),x.target=S,x.relatedTarget=y,b=x),y=b,m&&g)t:{for(x=m,v=g,_=0,S=x;S;S=mc(S))_++;for(S=0,b=v;b;b=mc(b))S++;for(;0<_-S;)x=mc(x),_--;for(;0<S-_;)v=mc(v),S--;for(;_--;){if(x===v||v!==null&&x===v.alternate)break t;x=mc(x),v=mc(v)}x=null}else x=null;m!==null&&FT(u,h,m,x,!1),g!==null&&y!==null&&FT(u,y,g,x,!0)}}e:{if(h=c?Yc(c):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var A=T6;else if(OT(h))if(bD)A=L6;else{A=C6;var E=A6}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(A=P6);if(A&&(A=A(t,c))){SD(u,A,n,d);break e}E&&E(t,h,c),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&bw(h,"number",h.value)}switch(E=c?Yc(c):window,t){case"focusin":(OT(E)||E.contentEditable==="true")&&(qc=E,zw=c,wf=null);break;case"focusout":wf=zw=qc=null;break;case"mousedown":Nw=!0;break;case"contextmenu":case"mouseup":case"dragend":Nw=!1,NT(u,n,d);break;case"selectionchange":if(D6)break;case"keydown":case"keyup":NT(u,n,d)}var C;if(uM)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else $c?_D(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(xD&&n.locale!=="ko"&&($c||T!=="onCompositionStart"?T==="onCompositionEnd"&&$c&&(C=yD()):(ja=d,oM="value"in ja?ja.value:ja.textContent,$c=!0)),E=ev(c,T),0<E.length&&(T=new AT(T,t,null,n,d),u.push({event:T,listeners:E}),C?T.data=C:(C=wD(n),C!==null&&(T.data=C)))),(C=w6?S6(t,n):b6(t,n))&&(c=ev(c,"onBeforeInput"),0<c.length&&(d=new AT("onBeforeInput","beforeinput",null,n,d),u.push({event:d,listeners:c}),d.data=C))}DD(u,e)})}function Wf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ev(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=kf(t,n),s!=null&&r.unshift(Wf(t,s,i)),s=kf(t,e),s!=null&&r.push(Wf(t,s,i))),t=t.return}return r}function mc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function FT(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=kf(n,s),l!=null&&o.unshift(Wf(n,l,a))):i||(l=kf(n,s),l!=null&&o.push(Wf(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var k6=/\r\n?/g,B6=/\u0000|\uFFFD/g;function UT(t){return(typeof t=="string"?t:""+t).replace(k6,`
`).replace(B6,"")}function ug(t,e,n){if(e=UT(e),UT(t)!==e&&n)throw Error(Be(425))}function tv(){}var kw=null,Bw=null;function Fw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Uw=typeof setTimeout=="function"?setTimeout:void 0,F6=typeof clearTimeout=="function"?clearTimeout:void 0,VT=typeof Promise=="function"?Promise:void 0,U6=typeof queueMicrotask=="function"?queueMicrotask:typeof VT<"u"?function(t){return VT.resolve(null).then(t).catch(V6)}:Uw;function V6(t){setTimeout(function(){throw t})}function zx(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Uf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Uf(e)}function rl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function HT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wd=Math.random().toString(36).slice(2),go="__reactFiber$"+Wd,jf="__reactProps$"+Wd,ua="__reactContainer$"+Wd,Vw="__reactEvents$"+Wd,H6="__reactListeners$"+Wd,G6="__reactHandles$"+Wd;function au(t){var e=t[go];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ua]||n[go]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=HT(t);t!==null;){if(n=t[go])return n;t=HT(t)}return e}t=n,n=t.parentNode}return null}function Op(t){return t=t[go]||t[ua],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Be(33))}function hy(t){return t[jf]||null}var Hw=[],Zc=-1;function xl(t){return{current:t}}function xn(t){0>Zc||(t.current=Hw[Zc],Hw[Zc]=null,Zc--)}function fn(t,e){Zc++,Hw[Zc]=t.current,t.current=e}var fl={},Fr=xl(fl),di=xl(!1),Lu=fl;function Td(t,e){var n=t.type.contextTypes;if(!n)return fl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function hi(t){return t=t.childContextTypes,t!=null}function nv(){xn(di),xn(Fr)}function GT(t,e,n){if(Fr.current!==fl)throw Error(Be(168));fn(Fr,e),fn(di,n)}function zD(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Be(108,AU(t)||"Unknown",i));return Pn({},n,r)}function rv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fl,Lu=Fr.current,fn(Fr,t),fn(di,di.current),!0}function WT(t,e,n){var r=t.stateNode;if(!r)throw Error(Be(169));n?(t=zD(t,e,Lu),r.__reactInternalMemoizedMergedChildContext=t,xn(di),xn(Fr),fn(Fr,t)):xn(di),fn(di,n)}var $o=null,fy=!1,Nx=!1;function ND(t){$o===null?$o=[t]:$o.push(t)}function W6(t){fy=!0,ND(t)}function _l(){if(!Nx&&$o!==null){Nx=!0;var t=0,e=rn;try{var n=$o;for(rn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$o=null,fy=!1}catch(i){throw $o!==null&&($o=$o.slice(t+1)),aD(nM,_l),i}finally{rn=e,Nx=!1}}return null}var Jc=[],Qc=0,iv=null,sv=0,os=[],as=0,Ou=null,Jo=1,Qo="";function Jl(t,e){Jc[Qc++]=sv,Jc[Qc++]=iv,iv=t,sv=e}function kD(t,e,n){os[as++]=Jo,os[as++]=Qo,os[as++]=Ou,Ou=t;var r=Jo;t=Qo;var i=32-Fs(r)-1;r&=~(1<<i),n+=1;var s=32-Fs(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Jo=1<<32-Fs(e)+i|n<<i|r,Qo=s+t}else Jo=1<<s|n<<i|r,Qo=t}function dM(t){t.return!==null&&(Jl(t,1),kD(t,1,0))}function hM(t){for(;t===iv;)iv=Jc[--Qc],Jc[Qc]=null,sv=Jc[--Qc],Jc[Qc]=null;for(;t===Ou;)Ou=os[--as],os[as]=null,Qo=os[--as],os[as]=null,Jo=os[--as],os[as]=null}var Pi=null,Ci=null,bn=!1,Ns=null;function BD(t,e){var n=ds(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function jT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pi=t,Ci=rl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pi=t,Ci=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ou!==null?{id:Jo,overflow:Qo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ds(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pi=t,Ci=null,!0):!1;default:return!1}}function Gw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ww(t){if(bn){var e=Ci;if(e){var n=e;if(!jT(t,e)){if(Gw(t))throw Error(Be(418));e=rl(n.nextSibling);var r=Pi;e&&jT(t,e)?BD(r,n):(t.flags=t.flags&-4097|2,bn=!1,Pi=t)}}else{if(Gw(t))throw Error(Be(418));t.flags=t.flags&-4097|2,bn=!1,Pi=t}}}function $T(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pi=t}function cg(t){if(t!==Pi)return!1;if(!bn)return $T(t),bn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fw(t.type,t.memoizedProps)),e&&(e=Ci)){if(Gw(t))throw FD(),Error(Be(418));for(;e;)BD(t,e),e=rl(e.nextSibling)}if($T(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Be(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ci=rl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ci=null}}else Ci=Pi?rl(t.stateNode.nextSibling):null;return!0}function FD(){for(var t=Ci;t;)t=rl(t.nextSibling)}function Ad(){Ci=Pi=null,bn=!1}function fM(t){Ns===null?Ns=[t]:Ns.push(t)}var j6=va.ReactCurrentBatchConfig;function Rs(t,e){if(t&&t.defaultProps){e=Pn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var ov=xl(null),av=null,Kc=null,pM=null;function mM(){pM=Kc=av=null}function gM(t){var e=ov.current;xn(ov),t._currentValue=e}function jw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fd(t,e){av=t,pM=Kc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(li=!0),t.firstContext=null)}function gs(t){var e=t._currentValue;if(pM!==t)if(t={context:t,memoizedValue:e,next:null},Kc===null){if(av===null)throw Error(Be(308));Kc=t,av.dependencies={lanes:0,firstContext:t}}else Kc=Kc.next=t;return e}var lu=null;function vM(t){lu===null?lu=[t]:lu.push(t)}function UD(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,vM(e)):(n.next=i.next,i.next=n),e.interleaved=n,ca(t,r)}function ca(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Va=!1;function yM(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function VD(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ra(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function il(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(Gt&2)!==0){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ca(t,n)}return i=r.interleaved,i===null?(e.next=e,vM(r)):(e.next=i.next,i.next=e),r.interleaved=e,ca(t,n)}function M0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rM(t,n)}}function qT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function lv(t,e,n,r){var i=t.updateQueue;Va=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var u=i.baseState;o=0,d=c=l=null,a=s;do{var h=a.lane,m=a.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,x=a;switch(h=e,m=n,x.tag){case 1:if(g=x.payload,typeof g=="function"){u=g.call(m,u,h);break e}u=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,h=typeof g=="function"?g.call(m,u,h):g,h==null)break e;u=Pn({},u,h);break e;case 2:Va=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else m={eventTime:m,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=u):d=d.next=m,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(d===null&&(l=u),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Du|=o,t.lanes=o,t.memoizedState=u}}function XT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Be(191,i));i.call(r)}}}var HD=new UI.Component().refs;function $w(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var py={isMounted:function(t){return(t=t._reactInternals)?Wu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xr(),i=ol(t),s=ra(r,i);s.payload=e,n!=null&&(s.callback=n),e=il(t,s,i),e!==null&&(Us(e,t,i,r),M0(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xr(),i=ol(t),s=ra(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=il(t,s,i),e!==null&&(Us(e,t,i,r),M0(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xr(),r=ol(t),i=ra(n,r);i.tag=2,e!=null&&(i.callback=e),e=il(t,i,r),e!==null&&(Us(e,t,r,n),M0(e,t,r))}};function YT(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Hf(n,r)||!Hf(i,s):!0}function GD(t,e,n){var r=!1,i=fl,s=e.contextType;return typeof s=="object"&&s!==null?s=gs(s):(i=hi(e)?Lu:Fr.current,r=e.contextTypes,s=(r=r!=null)?Td(t,i):fl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=py,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ZT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&py.enqueueReplaceState(e,e.state,null)}function qw(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=HD,yM(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=gs(s):(s=hi(e)?Lu:Fr.current,i.context=Td(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&($w(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&py.enqueueReplaceState(i,i.state,null),lv(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Rh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Be(309));var r=n.stateNode}if(!r)throw Error(Be(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===HD&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Be(284));if(!n._owner)throw Error(Be(290,t))}return t}function dg(t,e){throw t=Object.prototype.toString.call(e),Error(Be(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function JT(t){var e=t._init;return e(t._payload)}function WD(t){function e(v,_){if(t){var S=v.deletions;S===null?(v.deletions=[_],v.flags|=16):S.push(_)}}function n(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function r(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function i(v,_){return v=al(v,_),v.index=0,v.sibling=null,v}function s(v,_,S){return v.index=S,t?(S=v.alternate,S!==null?(S=S.index,S<_?(v.flags|=2,_):S):(v.flags|=2,_)):(v.flags|=1048576,_)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,_,S,b){return _===null||_.tag!==6?(_=Gx(S,v.mode,b),_.return=v,_):(_=i(_,S),_.return=v,_)}function l(v,_,S,b){var A=S.type;return A===jc?d(v,_,S.props.children,b,S.key):_!==null&&(_.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Ua&&JT(A)===_.type)?(b=i(_,S.props),b.ref=Rh(v,_,S),b.return=v,b):(b=L0(S.type,S.key,S.props,null,v.mode,b),b.ref=Rh(v,_,S),b.return=v,b)}function c(v,_,S,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=Wx(S,v.mode,b),_.return=v,_):(_=i(_,S.children||[]),_.return=v,_)}function d(v,_,S,b,A){return _===null||_.tag!==7?(_=xu(S,v.mode,b,A),_.return=v,_):(_=i(_,S),_.return=v,_)}function u(v,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Gx(""+_,v.mode,S),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case eg:return S=L0(_.type,_.key,_.props,null,v.mode,S),S.ref=Rh(v,null,_),S.return=v,S;case Wc:return _=Wx(_,v.mode,S),_.return=v,_;case Ua:var b=_._init;return u(v,b(_._payload),S)}if(of(_)||Ph(_))return _=xu(_,v.mode,S,null),_.return=v,_;dg(v,_)}return null}function h(v,_,S,b){var A=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return A!==null?null:a(v,_,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case eg:return S.key===A?l(v,_,S,b):null;case Wc:return S.key===A?c(v,_,S,b):null;case Ua:return A=S._init,h(v,_,A(S._payload),b)}if(of(S)||Ph(S))return A!==null?null:d(v,_,S,b,null);dg(v,S)}return null}function m(v,_,S,b,A){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(S)||null,a(_,v,""+b,A);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case eg:return v=v.get(b.key===null?S:b.key)||null,l(_,v,b,A);case Wc:return v=v.get(b.key===null?S:b.key)||null,c(_,v,b,A);case Ua:var E=b._init;return m(v,_,S,E(b._payload),A)}if(of(b)||Ph(b))return v=v.get(S)||null,d(_,v,b,A,null);dg(_,b)}return null}function g(v,_,S,b){for(var A=null,E=null,C=_,T=_=0,O=null;C!==null&&T<S.length;T++){C.index>T?(O=C,C=null):O=C.sibling;var L=h(v,C,S[T],b);if(L===null){C===null&&(C=O);break}t&&C&&L.alternate===null&&e(v,C),_=s(L,_,T),E===null?A=L:E.sibling=L,E=L,C=O}if(T===S.length)return n(v,C),bn&&Jl(v,T),A;if(C===null){for(;T<S.length;T++)C=u(v,S[T],b),C!==null&&(_=s(C,_,T),E===null?A=C:E.sibling=C,E=C);return bn&&Jl(v,T),A}for(C=r(v,C);T<S.length;T++)O=m(C,v,T,S[T],b),O!==null&&(t&&O.alternate!==null&&C.delete(O.key===null?T:O.key),_=s(O,_,T),E===null?A=O:E.sibling=O,E=O);return t&&C.forEach(function(k){return e(v,k)}),bn&&Jl(v,T),A}function x(v,_,S,b){var A=Ph(S);if(typeof A!="function")throw Error(Be(150));if(S=A.call(S),S==null)throw Error(Be(151));for(var E=A=null,C=_,T=_=0,O=null,L=S.next();C!==null&&!L.done;T++,L=S.next()){C.index>T?(O=C,C=null):O=C.sibling;var k=h(v,C,L.value,b);if(k===null){C===null&&(C=O);break}t&&C&&k.alternate===null&&e(v,C),_=s(k,_,T),E===null?A=k:E.sibling=k,E=k,C=O}if(L.done)return n(v,C),bn&&Jl(v,T),A;if(C===null){for(;!L.done;T++,L=S.next())L=u(v,L.value,b),L!==null&&(_=s(L,_,T),E===null?A=L:E.sibling=L,E=L);return bn&&Jl(v,T),A}for(C=r(v,C);!L.done;T++,L=S.next())L=m(C,v,T,L.value,b),L!==null&&(t&&L.alternate!==null&&C.delete(L.key===null?T:L.key),_=s(L,_,T),E===null?A=L:E.sibling=L,E=L);return t&&C.forEach(function(B){return e(v,B)}),bn&&Jl(v,T),A}function y(v,_,S,b){if(typeof S=="object"&&S!==null&&S.type===jc&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case eg:e:{for(var A=S.key,E=_;E!==null;){if(E.key===A){if(A=S.type,A===jc){if(E.tag===7){n(v,E.sibling),_=i(E,S.props.children),_.return=v,v=_;break e}}else if(E.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Ua&&JT(A)===E.type){n(v,E.sibling),_=i(E,S.props),_.ref=Rh(v,E,S),_.return=v,v=_;break e}n(v,E);break}else e(v,E);E=E.sibling}S.type===jc?(_=xu(S.props.children,v.mode,b,S.key),_.return=v,v=_):(b=L0(S.type,S.key,S.props,null,v.mode,b),b.ref=Rh(v,_,S),b.return=v,v=b)}return o(v);case Wc:e:{for(E=S.key;_!==null;){if(_.key===E)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){n(v,_.sibling),_=i(_,S.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else e(v,_);_=_.sibling}_=Wx(S,v.mode,b),_.return=v,v=_}return o(v);case Ua:return E=S._init,y(v,_,E(S._payload),b)}if(of(S))return g(v,_,S,b);if(Ph(S))return x(v,_,S,b);dg(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(n(v,_.sibling),_=i(_,S),_.return=v,v=_):(n(v,_),_=Gx(S,v.mode,b),_.return=v,v=_),o(v)):n(v,_)}return y}var Cd=WD(!0),jD=WD(!1),Ip={},So=xl(Ip),$f=xl(Ip),qf=xl(Ip);function uu(t){if(t===Ip)throw Error(Be(174));return t}function xM(t,e){switch(fn(qf,e),fn($f,t),fn(So,Ip),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ew(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ew(e,t)}xn(So),fn(So,e)}function Pd(){xn(So),xn($f),xn(qf)}function $D(t){uu(qf.current);var e=uu(So.current),n=Ew(e,t.type);e!==n&&(fn($f,t),fn(So,n))}function _M(t){$f.current===t&&(xn(So),xn($f))}var En=xl(0);function uv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kx=[];function wM(){for(var t=0;t<kx.length;t++)kx[t]._workInProgressVersionPrimary=null;kx.length=0}var E0=va.ReactCurrentDispatcher,Bx=va.ReactCurrentBatchConfig,Iu=0,Cn=null,nr=null,mr=null,cv=!1,Sf=!1,Xf=0,$6=0;function Or(){throw Error(Be(321))}function SM(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!js(t[n],e[n]))return!1;return!0}function bM(t,e,n,r,i,s){if(Iu=s,Cn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,E0.current=t===null||t.memoizedState===null?Z6:J6,t=n(r,i),Sf){s=0;do{if(Sf=!1,Xf=0,25<=s)throw Error(Be(301));s+=1,mr=nr=null,e.updateQueue=null,E0.current=Q6,t=n(r,i)}while(Sf)}if(E0.current=dv,e=nr!==null&&nr.next!==null,Iu=0,mr=nr=Cn=null,cv=!1,e)throw Error(Be(300));return t}function MM(){var t=Xf!==0;return Xf=0,t}function co(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mr===null?Cn.memoizedState=mr=t:mr=mr.next=t,mr}function vs(){if(nr===null){var t=Cn.alternate;t=t!==null?t.memoizedState:null}else t=nr.next;var e=mr===null?Cn.memoizedState:mr.next;if(e!==null)mr=e,nr=t;else{if(t===null)throw Error(Be(310));nr=t,t={memoizedState:nr.memoizedState,baseState:nr.baseState,baseQueue:nr.baseQueue,queue:nr.queue,next:null},mr===null?Cn.memoizedState=mr=t:mr=mr.next=t}return mr}function Yf(t,e){return typeof e=="function"?e(t):e}function Fx(t){var e=vs(),n=e.queue;if(n===null)throw Error(Be(311));n.lastRenderedReducer=t;var r=nr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Iu&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var u={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=u,o=r):l=l.next=u,Cn.lanes|=d,Du|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,js(r,e.memoizedState)||(li=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Cn.lanes|=s,Du|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ux(t){var e=vs(),n=e.queue;if(n===null)throw Error(Be(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);js(s,e.memoizedState)||(li=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function qD(){}function XD(t,e){var n=Cn,r=vs(),i=e(),s=!js(r.memoizedState,i);if(s&&(r.memoizedState=i,li=!0),r=r.queue,EM(JD.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||mr!==null&&mr.memoizedState.tag&1){if(n.flags|=2048,Zf(9,ZD.bind(null,n,r,i,e),void 0,null),gr===null)throw Error(Be(349));(Iu&30)!==0||YD(n,e,i)}return i}function YD(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Cn.updateQueue,e===null?(e={lastEffect:null,stores:null},Cn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ZD(t,e,n,r){e.value=n,e.getSnapshot=r,QD(e)&&KD(t)}function JD(t,e,n){return n(function(){QD(e)&&KD(t)})}function QD(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!js(t,n)}catch{return!0}}function KD(t){var e=ca(t,1);e!==null&&Us(e,t,1,-1)}function QT(t){var e=co();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yf,lastRenderedState:t},e.queue=t,t=t.dispatch=Y6.bind(null,Cn,t),[e.memoizedState,t]}function Zf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Cn.updateQueue,e===null?(e={lastEffect:null,stores:null},Cn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function eR(){return vs().memoizedState}function T0(t,e,n,r){var i=co();Cn.flags|=t,i.memoizedState=Zf(1|e,n,void 0,r===void 0?null:r)}function my(t,e,n,r){var i=vs();r=r===void 0?null:r;var s=void 0;if(nr!==null){var o=nr.memoizedState;if(s=o.destroy,r!==null&&SM(r,o.deps)){i.memoizedState=Zf(e,n,s,r);return}}Cn.flags|=t,i.memoizedState=Zf(1|e,n,s,r)}function KT(t,e){return T0(8390656,8,t,e)}function EM(t,e){return my(2048,8,t,e)}function tR(t,e){return my(4,2,t,e)}function nR(t,e){return my(4,4,t,e)}function rR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function iR(t,e,n){return n=n!=null?n.concat([t]):null,my(4,4,rR.bind(null,e,t),n)}function TM(){}function sR(t,e){var n=vs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&SM(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function oR(t,e){var n=vs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&SM(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function aR(t,e,n){return(Iu&21)===0?(t.baseState&&(t.baseState=!1,li=!0),t.memoizedState=n):(js(n,e)||(n=cD(),Cn.lanes|=n,Du|=n,t.baseState=!0),e)}function q6(t,e){var n=rn;rn=n!==0&&4>n?n:4,t(!0);var r=Bx.transition;Bx.transition={};try{t(!1),e()}finally{rn=n,Bx.transition=r}}function lR(){return vs().memoizedState}function X6(t,e,n){var r=ol(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uR(t))cR(e,n);else if(n=UD(t,e,n,r),n!==null){var i=Xr();Us(n,t,r,i),dR(n,e,r)}}function Y6(t,e,n){var r=ol(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uR(t))cR(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,js(a,o)){var l=e.interleaved;l===null?(i.next=i,vM(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=UD(t,e,i,r),n!==null&&(i=Xr(),Us(n,t,r,i),dR(n,e,r))}}function uR(t){var e=t.alternate;return t===Cn||e!==null&&e===Cn}function cR(t,e){Sf=cv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dR(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rM(t,n)}}var dv={readContext:gs,useCallback:Or,useContext:Or,useEffect:Or,useImperativeHandle:Or,useInsertionEffect:Or,useLayoutEffect:Or,useMemo:Or,useReducer:Or,useRef:Or,useState:Or,useDebugValue:Or,useDeferredValue:Or,useTransition:Or,useMutableSource:Or,useSyncExternalStore:Or,useId:Or,unstable_isNewReconciler:!1},Z6={readContext:gs,useCallback:function(t,e){return co().memoizedState=[t,e===void 0?null:e],t},useContext:gs,useEffect:KT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,T0(4194308,4,rR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return T0(4194308,4,t,e)},useInsertionEffect:function(t,e){return T0(4,2,t,e)},useMemo:function(t,e){var n=co();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=co();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=X6.bind(null,Cn,t),[r.memoizedState,t]},useRef:function(t){var e=co();return t={current:t},e.memoizedState=t},useState:QT,useDebugValue:TM,useDeferredValue:function(t){return co().memoizedState=t},useTransition:function(){var t=QT(!1),e=t[0];return t=q6.bind(null,t[1]),co().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Cn,i=co();if(bn){if(n===void 0)throw Error(Be(407));n=n()}else{if(n=e(),gr===null)throw Error(Be(349));(Iu&30)!==0||YD(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,KT(JD.bind(null,r,s,t),[t]),r.flags|=2048,Zf(9,ZD.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=co(),e=gr.identifierPrefix;if(bn){var n=Qo,r=Jo;n=(r&~(1<<32-Fs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$6++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},J6={readContext:gs,useCallback:sR,useContext:gs,useEffect:EM,useImperativeHandle:iR,useInsertionEffect:tR,useLayoutEffect:nR,useMemo:oR,useReducer:Fx,useRef:eR,useState:function(){return Fx(Yf)},useDebugValue:TM,useDeferredValue:function(t){var e=vs();return aR(e,nr.memoizedState,t)},useTransition:function(){var t=Fx(Yf)[0],e=vs().memoizedState;return[t,e]},useMutableSource:qD,useSyncExternalStore:XD,useId:lR,unstable_isNewReconciler:!1},Q6={readContext:gs,useCallback:sR,useContext:gs,useEffect:EM,useImperativeHandle:iR,useInsertionEffect:tR,useLayoutEffect:nR,useMemo:oR,useReducer:Ux,useRef:eR,useState:function(){return Ux(Yf)},useDebugValue:TM,useDeferredValue:function(t){var e=vs();return nr===null?e.memoizedState=t:aR(e,nr.memoizedState,t)},useTransition:function(){var t=Ux(Yf)[0],e=vs().memoizedState;return[t,e]},useMutableSource:qD,useSyncExternalStore:XD,useId:lR,unstable_isNewReconciler:!1};function Ld(t,e){try{var n="",r=e;do n+=TU(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Vx(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function Xw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var K6=typeof WeakMap=="function"?WeakMap:Map;function hR(t,e,n){n=ra(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){fv||(fv=!0,iS=r),Xw(t,e)},n}function fR(t,e,n){n=ra(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Xw(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Xw(t,e),typeof r!="function"&&(sl===null?sl=new Set([this]):sl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function eA(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new K6;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=fV.bind(null,t,e,n),e.then(t,t))}function tA(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function nA(t,e,n,r,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ra(-1,1),e.tag=2,il(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var eV=va.ReactCurrentOwner,li=!1;function qr(t,e,n,r){e.child=t===null?jD(e,null,n,r):Cd(e,t.child,n,r)}function rA(t,e,n,r,i){n=n.render;var s=e.ref;return fd(e,i),r=bM(t,e,n,r,s,i),n=MM(),t!==null&&!li?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,da(t,e,i)):(bn&&n&&dM(e),e.flags|=1,qr(t,e,r,i),e.child)}function iA(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!RM(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,pR(t,e,s,r,i)):(t=L0(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,(t.lanes&i)===0){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Hf,n(o,r)&&t.ref===e.ref)return da(t,e,i)}return e.flags|=1,t=al(s,r),t.ref=e.ref,t.return=e,e.child=t}function pR(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Hf(s,r)&&t.ref===e.ref)if(li=!1,e.pendingProps=r=s,(t.lanes&i)!==0)(t.flags&131072)!==0&&(li=!0);else return e.lanes=t.lanes,da(t,e,i)}return Yw(t,e,n,r,i)}function mR(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},fn(td,Mi),Mi|=n;else{if((n&1073741824)===0)return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,fn(td,Mi),Mi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,fn(td,Mi),Mi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,fn(td,Mi),Mi|=r;return qr(t,e,i,n),e.child}function gR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yw(t,e,n,r,i){var s=hi(n)?Lu:Fr.current;return s=Td(e,s),fd(e,i),n=bM(t,e,n,r,s,i),r=MM(),t!==null&&!li?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,da(t,e,i)):(bn&&r&&dM(e),e.flags|=1,qr(t,e,n,i),e.child)}function sA(t,e,n,r,i){if(hi(n)){var s=!0;rv(e)}else s=!1;if(fd(e,i),e.stateNode===null)A0(t,e),GD(e,n,r),qw(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=gs(c):(c=hi(n)?Lu:Fr.current,c=Td(e,c));var d=n.getDerivedStateFromProps,u=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&ZT(e,o,r,c),Va=!1;var h=e.memoizedState;o.state=h,lv(e,r,o,i),l=e.memoizedState,a!==r||h!==l||di.current||Va?(typeof d=="function"&&($w(e,n,d,r),l=e.memoizedState),(a=Va||YT(e,n,a,r,h,l,c))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,VD(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Rs(e.type,a),o.props=c,u=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=gs(l):(l=hi(n)?Lu:Fr.current,l=Td(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==u||h!==l)&&ZT(e,o,r,l),Va=!1,h=e.memoizedState,o.state=h,lv(e,r,o,i);var g=e.memoizedState;a!==u||h!==g||di.current||Va?(typeof m=="function"&&($w(e,n,m,r),g=e.memoizedState),(c=Va||YT(e,n,c,r,h,g,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Zw(t,e,n,r,s,i)}function Zw(t,e,n,r,i,s){gR(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&WT(e,n,!1),da(t,e,s);r=e.stateNode,eV.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Cd(e,t.child,null,s),e.child=Cd(e,null,a,s)):qr(t,e,a,s),e.memoizedState=r.state,i&&WT(e,n,!0),e.child}function vR(t){var e=t.stateNode;e.pendingContext?GT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&GT(t,e.context,!1),xM(t,e.containerInfo)}function oA(t,e,n,r,i){return Ad(),fM(i),e.flags|=256,qr(t,e,n,r),e.child}var Jw={dehydrated:null,treeContext:null,retryLane:0};function Qw(t){return{baseLanes:t,cachePool:null,transitions:null}}function yR(t,e,n){var r=e.pendingProps,i=En.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),fn(En,i&1),t===null)return Ww(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=yy(o,r,0,null),t=xu(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Qw(n),e.memoizedState=Jw,t):AM(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return tV(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return(o&1)===0&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=al(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=al(a,s):(s=xu(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Qw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Jw,r}return s=t.child,t=s.sibling,r=al(s,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function AM(t,e){return e=yy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hg(t,e,n,r){return r!==null&&fM(r),Cd(e,t.child,null,n),t=AM(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tV(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Vx(Error(Be(422))),hg(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=yy({mode:"visible",children:r.children},i,0,null),s=xu(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,(e.mode&1)!==0&&Cd(e,t.child,null,o),e.child.memoizedState=Qw(o),e.memoizedState=Jw,s);if((e.mode&1)===0)return hg(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Be(419)),r=Vx(s,r,void 0),hg(t,e,o,r)}if(a=(o&t.childLanes)!==0,li||a){if(r=gr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|o))!==0?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ca(t,i),Us(r,t,i,-1))}return DM(),r=Vx(Error(Be(421))),hg(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=pV.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ci=rl(i.nextSibling),Pi=e,bn=!0,Ns=null,t!==null&&(os[as++]=Jo,os[as++]=Qo,os[as++]=Ou,Jo=t.id,Qo=t.overflow,Ou=e),e=AM(e,r.children),e.flags|=4096,e)}function aA(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),jw(t.return,e,n)}function Hx(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function xR(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(qr(t,e,r.children,n),r=En.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&aA(t,n,e);else if(t.tag===19)aA(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(fn(En,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&uv(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Hx(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&uv(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Hx(e,!0,n,null,s);break;case"together":Hx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function A0(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function da(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Du|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(Be(153));if(e.child!==null){for(t=e.child,n=al(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=al(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function nV(t,e,n){switch(e.tag){case 3:vR(e),Ad();break;case 5:$D(e);break;case 1:hi(e.type)&&rv(e);break;case 4:xM(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;fn(ov,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(fn(En,En.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?yR(t,e,n):(fn(En,En.current&1),t=da(t,e,n),t!==null?t.sibling:null);fn(En,En.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return xR(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),fn(En,En.current),r)break;return null;case 22:case 23:return e.lanes=0,mR(t,e,n)}return da(t,e,n)}var _R,Kw,wR,SR;_R=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kw=function(){};wR=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,uu(So.current);var s=null;switch(n){case"input":i=ww(t,i),r=ww(t,r),s=[];break;case"select":i=Pn({},i,{value:void 0}),r=Pn({},r,{value:void 0}),s=[];break;case"textarea":i=Mw(t,i),r=Mw(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=tv)}Tw(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(zf.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(zf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&mn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};SR=function(t,e,n,r){n!==r&&(e.flags|=4)};function zh(t,e){if(!bn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ir(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function rV(t,e,n){var r=e.pendingProps;switch(hM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ir(e),null;case 1:return hi(e.type)&&nv(),Ir(e),null;case 3:return r=e.stateNode,Pd(),xn(di),xn(Fr),wM(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(cg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Ns!==null&&(aS(Ns),Ns=null))),Kw(t,e),Ir(e),null;case 5:_M(e);var i=uu(qf.current);if(n=e.type,t!==null&&e.stateNode!=null)wR(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Be(166));return Ir(e),null}if(t=uu(So.current),cg(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[go]=e,r[jf]=s,t=(e.mode&1)!==0,n){case"dialog":mn("cancel",r),mn("close",r);break;case"iframe":case"object":case"embed":mn("load",r);break;case"video":case"audio":for(i=0;i<lf.length;i++)mn(lf[i],r);break;case"source":mn("error",r);break;case"img":case"image":case"link":mn("error",r),mn("load",r);break;case"details":mn("toggle",r);break;case"input":gT(r,s),mn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},mn("invalid",r);break;case"textarea":yT(r,s),mn("invalid",r)}Tw(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ug(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ug(r.textContent,a,t),i=["children",""+a]):zf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&mn("scroll",r)}switch(n){case"input":tg(r),vT(r,s,!0);break;case"textarea":tg(r),xT(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=tv)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=YI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[go]=e,t[jf]=r,_R(t,e,!1,!1),e.stateNode=t;e:{switch(o=Aw(n,r),n){case"dialog":mn("cancel",t),mn("close",t),i=r;break;case"iframe":case"object":case"embed":mn("load",t),i=r;break;case"video":case"audio":for(i=0;i<lf.length;i++)mn(lf[i],t);i=r;break;case"source":mn("error",t),i=r;break;case"img":case"image":case"link":mn("error",t),mn("load",t),i=r;break;case"details":mn("toggle",t),i=r;break;case"input":gT(t,r),i=ww(t,r),mn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pn({},r,{value:void 0}),mn("invalid",t);break;case"textarea":yT(t,r),i=Mw(t,r),mn("invalid",t);break;default:i=r}Tw(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?QI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ZI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Nf(t,l):typeof l=="number"&&Nf(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(zf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&mn("scroll",t):l!=null&&Jb(t,s,l,o))}switch(n){case"input":tg(t),vT(t,r,!1);break;case"textarea":tg(t),xT(t);break;case"option":r.value!=null&&t.setAttribute("value",""+hl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ud(t,!!r.multiple,s,!1):r.defaultValue!=null&&ud(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=tv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ir(e),null;case 6:if(t&&e.stateNode!=null)SR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Be(166));if(n=uu(qf.current),uu(So.current),cg(e)){if(r=e.stateNode,n=e.memoizedProps,r[go]=e,(s=r.nodeValue!==n)&&(t=Pi,t!==null))switch(t.tag){case 3:ug(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ug(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[go]=e,e.stateNode=r}return Ir(e),null;case 13:if(xn(En),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(bn&&Ci!==null&&(e.mode&1)!==0&&(e.flags&128)===0)FD(),Ad(),e.flags|=98560,s=!1;else if(s=cg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Be(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Be(317));s[go]=e}else Ad(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Ir(e),s=!1}else Ns!==null&&(aS(Ns),Ns=null),s=!0;if(!s)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(En.current&1)!==0?rr===0&&(rr=3):DM())),e.updateQueue!==null&&(e.flags|=4),Ir(e),null);case 4:return Pd(),Kw(t,e),t===null&&Gf(e.stateNode.containerInfo),Ir(e),null;case 10:return gM(e.type._context),Ir(e),null;case 17:return hi(e.type)&&nv(),Ir(e),null;case 19:if(xn(En),s=e.memoizedState,s===null)return Ir(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)zh(s,!1);else{if(rr!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=uv(t),o!==null){for(e.flags|=128,zh(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return fn(En,En.current&1|2),e.child}t=t.sibling}s.tail!==null&&Gn()>Od&&(e.flags|=128,r=!0,zh(s,!1),e.lanes=4194304)}else{if(!r)if(t=uv(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!bn)return Ir(e),null}else 2*Gn()-s.renderingStartTime>Od&&n!==1073741824&&(e.flags|=128,r=!0,zh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Gn(),e.sibling=null,n=En.current,fn(En,r?n&1|2:n&1),e):(Ir(e),null);case 22:case 23:return IM(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(Mi&1073741824)!==0&&(Ir(e),e.subtreeFlags&6&&(e.flags|=8192)):Ir(e),null;case 24:return null;case 25:return null}throw Error(Be(156,e.tag))}function iV(t,e){switch(hM(e),e.tag){case 1:return hi(e.type)&&nv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pd(),xn(di),xn(Fr),wM(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return _M(e),null;case 13:if(xn(En),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Be(340));Ad()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xn(En),null;case 4:return Pd(),null;case 10:return gM(e.type._context),null;case 22:case 23:return IM(),null;case 24:return null;default:return null}}var fg=!1,Nr=!1,sV=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function ed(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){In(t,e,r)}else n.current=null}function eS(t,e,n){try{n()}catch(r){In(t,e,r)}}var lA=!1;function oV(t,e){if(kw=Q0,t=TD(),cM(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,u=t,h=null;t:for(;;){for(var m;u!==n||i!==0&&u.nodeType!==3||(a=o+i),u!==s||r!==0&&u.nodeType!==3||(l=o+r),u.nodeType===3&&(o+=u.nodeValue.length),(m=u.firstChild)!==null;)h=u,u=m;for(;;){if(u===t)break t;if(h===n&&++c===i&&(a=o),h===s&&++d===r&&(l=o),(m=u.nextSibling)!==null)break;u=h,h=u.parentNode}u=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bw={focusedElem:t,selectionRange:n},Q0=!1,Qe=e;Qe!==null;)if(e=Qe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Qe=t;else for(;Qe!==null;){e=Qe;try{var g=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,y=g.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:Rs(e.type,x),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Be(163))}}catch(b){In(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Qe=t;break}Qe=e.return}return g=lA,lA=!1,g}function bf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&eS(e,n,s)}i=i.next}while(i!==r)}}function gy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function tS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function bR(t){var e=t.alternate;e!==null&&(t.alternate=null,bR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[go],delete e[jf],delete e[Vw],delete e[H6],delete e[G6])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function MR(t){return t.tag===5||t.tag===3||t.tag===4}function uA(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||MR(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=tv));else if(r!==4&&(t=t.child,t!==null))for(nS(t,e,n),t=t.sibling;t!==null;)nS(t,e,n),t=t.sibling}function rS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(rS(t,e,n),t=t.sibling;t!==null;)rS(t,e,n),t=t.sibling}var xr=null,zs=!1;function Pa(t,e,n){for(n=n.child;n!==null;)ER(t,e,n),n=n.sibling}function ER(t,e,n){if(wo&&typeof wo.onCommitFiberUnmount=="function")try{wo.onCommitFiberUnmount(ly,n)}catch{}switch(n.tag){case 5:Nr||ed(n,e);case 6:var r=xr,i=zs;xr=null,Pa(t,e,n),xr=r,zs=i,xr!==null&&(zs?(t=xr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xr.removeChild(n.stateNode));break;case 18:xr!==null&&(zs?(t=xr,n=n.stateNode,t.nodeType===8?zx(t.parentNode,n):t.nodeType===1&&zx(t,n),Uf(t)):zx(xr,n.stateNode));break;case 4:r=xr,i=zs,xr=n.stateNode.containerInfo,zs=!0,Pa(t,e,n),xr=r,zs=i;break;case 0:case 11:case 14:case 15:if(!Nr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&eS(n,e,o),i=i.next}while(i!==r)}Pa(t,e,n);break;case 1:if(!Nr&&(ed(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){In(n,e,a)}Pa(t,e,n);break;case 21:Pa(t,e,n);break;case 22:n.mode&1?(Nr=(r=Nr)||n.memoizedState!==null,Pa(t,e,n),Nr=r):Pa(t,e,n);break;default:Pa(t,e,n)}}function cA(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new sV),e.forEach(function(r){var i=mV.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function As(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:xr=a.stateNode,zs=!1;break e;case 3:xr=a.stateNode.containerInfo,zs=!0;break e;case 4:xr=a.stateNode.containerInfo,zs=!0;break e}a=a.return}if(xr===null)throw Error(Be(160));ER(s,o,i),xr=null,zs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){In(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)TR(e,t),e=e.sibling}function TR(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(As(e,t),so(t),r&4){try{bf(3,t,t.return),gy(3,t)}catch(x){In(t,t.return,x)}try{bf(5,t,t.return)}catch(x){In(t,t.return,x)}}break;case 1:As(e,t),so(t),r&512&&n!==null&&ed(n,n.return);break;case 5:if(As(e,t),so(t),r&512&&n!==null&&ed(n,n.return),t.flags&32){var i=t.stateNode;try{Nf(i,"")}catch(x){In(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&qI(i,s),Aw(a,o);var c=Aw(a,s);for(o=0;o<l.length;o+=2){var d=l[o],u=l[o+1];d==="style"?QI(i,u):d==="dangerouslySetInnerHTML"?ZI(i,u):d==="children"?Nf(i,u):Jb(i,d,u,c)}switch(a){case"input":Sw(i,s);break;case"textarea":XI(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?ud(i,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?ud(i,!!s.multiple,s.defaultValue,!0):ud(i,!!s.multiple,s.multiple?[]:"",!1))}i[jf]=s}catch(x){In(t,t.return,x)}}break;case 6:if(As(e,t),so(t),r&4){if(t.stateNode===null)throw Error(Be(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){In(t,t.return,x)}}break;case 3:if(As(e,t),so(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Uf(e.containerInfo)}catch(x){In(t,t.return,x)}break;case 4:As(e,t),so(t);break;case 13:As(e,t),so(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(LM=Gn())),r&4&&cA(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Nr=(c=Nr)||d,As(e,t),Nr=c):As(e,t),so(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&(t.mode&1)!==0)for(Qe=t,d=t.child;d!==null;){for(u=Qe=d;Qe!==null;){switch(h=Qe,m=h.child,h.tag){case 0:case 11:case 14:case 15:bf(4,h,h.return);break;case 1:ed(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(x){In(r,n,x)}}break;case 5:ed(h,h.return);break;case 22:if(h.memoizedState!==null){hA(u);continue}}m!==null?(m.return=h,Qe=m):hA(u)}d=d.sibling}e:for(d=null,u=t;;){if(u.tag===5){if(d===null){d=u;try{i=u.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,l=u.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=JI("display",o))}catch(x){In(t,t.return,x)}}}else if(u.tag===6){if(d===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(x){In(t,t.return,x)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===t)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:As(e,t),so(t),r&4&&cA(t);break;case 21:break;default:As(e,t),so(t)}}function so(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(MR(n)){var r=n;break e}n=n.return}throw Error(Be(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Nf(i,""),r.flags&=-33);var s=uA(t);rS(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=uA(t);nS(t,a,o);break;default:throw Error(Be(161))}}catch(l){In(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function aV(t,e,n){Qe=t,AR(t)}function AR(t,e,n){for(var r=(t.mode&1)!==0;Qe!==null;){var i=Qe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||fg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Nr;a=fg;var c=Nr;if(fg=o,(Nr=l)&&!c)for(Qe=i;Qe!==null;)o=Qe,l=o.child,o.tag===22&&o.memoizedState!==null?fA(i):l!==null?(l.return=o,Qe=l):fA(i);for(;s!==null;)Qe=s,AR(s),s=s.sibling;Qe=i,fg=a,Nr=c}dA(t)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,Qe=s):dA(t)}}function dA(t){for(;Qe!==null;){var e=Qe;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:Nr||gy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Rs(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&XT(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}XT(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var u=d.dehydrated;u!==null&&Uf(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Be(163))}Nr||e.flags&512&&tS(e)}catch(h){In(e,e.return,h)}}if(e===t){Qe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Qe=n;break}Qe=e.return}}function hA(t){for(;Qe!==null;){var e=Qe;if(e===t){Qe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Qe=n;break}Qe=e.return}}function fA(t){for(;Qe!==null;){var e=Qe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{gy(4,e)}catch(l){In(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){In(e,i,l)}}var s=e.return;try{tS(e)}catch(l){In(e,s,l)}break;case 5:var o=e.return;try{tS(e)}catch(l){In(e,o,l)}}}catch(l){In(e,e.return,l)}if(e===t){Qe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Qe=a;break}Qe=e.return}}var lV=Math.ceil,hv=va.ReactCurrentDispatcher,CM=va.ReactCurrentOwner,fs=va.ReactCurrentBatchConfig,Gt=0,gr=null,Jn=null,br=0,Mi=0,td=xl(0),rr=0,Jf=null,Du=0,vy=0,PM=0,Mf=null,si=null,LM=0,Od=1/0,jo=null,fv=!1,iS=null,sl=null,pg=!1,$a=null,pv=0,Ef=0,sS=null,C0=-1,P0=0;function Xr(){return(Gt&6)!==0?Gn():C0!==-1?C0:C0=Gn()}function ol(t){return(t.mode&1)===0?1:(Gt&2)!==0&&br!==0?br&-br:j6.transition!==null?(P0===0&&(P0=cD()),P0):(t=rn,t!==0||(t=window.event,t=t===void 0?16:vD(t.type)),t)}function Us(t,e,n,r){if(50<Ef)throw Ef=0,sS=null,Error(Be(185));Pp(t,n,r),((Gt&2)===0||t!==gr)&&(t===gr&&((Gt&2)===0&&(vy|=n),rr===4&&Wa(t,br)),fi(t,r),n===1&&Gt===0&&(e.mode&1)===0&&(Od=Gn()+500,fy&&_l()))}function fi(t,e){var n=t.callbackNode;jU(t,e);var r=J0(t,t===gr?br:0);if(r===0)n!==null&&ST(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ST(n),e===1)t.tag===0?W6(pA.bind(null,t)):ND(pA.bind(null,t)),U6(function(){(Gt&6)===0&&_l()}),n=null;else{switch(dD(r)){case 1:n=nM;break;case 4:n=lD;break;case 16:n=Z0;break;case 536870912:n=uD;break;default:n=Z0}n=zR(n,CR.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function CR(t,e){if(C0=-1,P0=0,(Gt&6)!==0)throw Error(Be(327));var n=t.callbackNode;if(pd()&&t.callbackNode!==n)return null;var r=J0(t,t===gr?br:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=mv(t,r);else{e=r;var i=Gt;Gt|=2;var s=LR();(gr!==t||br!==e)&&(jo=null,Od=Gn()+500,yu(t,e));do try{dV();break}catch(a){PR(t,a)}while(1);mM(),hv.current=s,Gt=i,Jn!==null?e=0:(gr=null,br=0,e=rr)}if(e!==0){if(e===2&&(i=Iw(t),i!==0&&(r=i,e=oS(t,i))),e===1)throw n=Jf,yu(t,0),Wa(t,r),fi(t,Gn()),n;if(e===6)Wa(t,r);else{if(i=t.current.alternate,(r&30)===0&&!uV(i)&&(e=mv(t,r),e===2&&(s=Iw(t),s!==0&&(r=s,e=oS(t,s))),e===1))throw n=Jf,yu(t,0),Wa(t,r),fi(t,Gn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Be(345));case 2:Ql(t,si,jo);break;case 3:if(Wa(t,r),(r&130023424)===r&&(e=LM+500-Gn(),10<e)){if(J0(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Xr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Uw(Ql.bind(null,t,si,jo),e);break}Ql(t,si,jo);break;case 4:if(Wa(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Fs(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Gn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lV(r/1960))-r,10<r){t.timeoutHandle=Uw(Ql.bind(null,t,si,jo),r);break}Ql(t,si,jo);break;case 5:Ql(t,si,jo);break;default:throw Error(Be(329))}}}return fi(t,Gn()),t.callbackNode===n?CR.bind(null,t):null}function oS(t,e){var n=Mf;return t.current.memoizedState.isDehydrated&&(yu(t,e).flags|=256),t=mv(t,e),t!==2&&(e=si,si=n,e!==null&&aS(e)),t}function aS(t){si===null?si=t:si.push.apply(si,t)}function uV(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!js(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wa(t,e){for(e&=~PM,e&=~vy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fs(e),r=1<<n;t[n]=-1,e&=~r}}function pA(t){if((Gt&6)!==0)throw Error(Be(327));pd();var e=J0(t,0);if((e&1)===0)return fi(t,Gn()),null;var n=mv(t,e);if(t.tag!==0&&n===2){var r=Iw(t);r!==0&&(e=r,n=oS(t,r))}if(n===1)throw n=Jf,yu(t,0),Wa(t,e),fi(t,Gn()),n;if(n===6)throw Error(Be(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ql(t,si,jo),fi(t,Gn()),null}function OM(t,e){var n=Gt;Gt|=1;try{return t(e)}finally{Gt=n,Gt===0&&(Od=Gn()+500,fy&&_l())}}function Ru(t){$a!==null&&$a.tag===0&&(Gt&6)===0&&pd();var e=Gt;Gt|=1;var n=fs.transition,r=rn;try{if(fs.transition=null,rn=1,t)return t()}finally{rn=r,fs.transition=n,Gt=e,(Gt&6)===0&&_l()}}function IM(){Mi=td.current,xn(td)}function yu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,F6(n)),Jn!==null)for(n=Jn.return;n!==null;){var r=n;switch(hM(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nv();break;case 3:Pd(),xn(di),xn(Fr),wM();break;case 5:_M(r);break;case 4:Pd();break;case 13:xn(En);break;case 19:xn(En);break;case 10:gM(r.type._context);break;case 22:case 23:IM()}n=n.return}if(gr=t,Jn=t=al(t.current,null),br=Mi=e,rr=0,Jf=null,PM=vy=Du=0,si=Mf=null,lu!==null){for(e=0;e<lu.length;e++)if(n=lu[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}lu=null}return t}function PR(t,e){do{var n=Jn;try{if(mM(),E0.current=dv,cv){for(var r=Cn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}cv=!1}if(Iu=0,mr=nr=Cn=null,Sf=!1,Xf=0,CM.current=null,n===null||n.return===null){rr=1,Jf=e,Jn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=br,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,u=d.tag;if((d.mode&1)===0&&(u===0||u===11||u===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=tA(o);if(m!==null){m.flags&=-257,nA(m,o,a,s,e),m.mode&1&&eA(s,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var x=new Set;x.add(l),e.updateQueue=x}else g.add(l);break e}else{if((e&1)===0){eA(s,c,e),DM();break e}l=Error(Be(426))}}else if(bn&&a.mode&1){var y=tA(o);if(y!==null){(y.flags&65536)===0&&(y.flags|=256),nA(y,o,a,s,e),fM(Ld(l,a));break e}}s=l=Ld(l,a),rr!==4&&(rr=2),Mf===null?Mf=[s]:Mf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=hR(s,l,e);qT(s,v);break e;case 1:a=l;var _=s.type,S=s.stateNode;if((s.flags&128)===0&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(sl===null||!sl.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=fR(s,a,e);qT(s,b);break e}}s=s.return}while(s!==null)}IR(n)}catch(A){e=A,Jn===n&&n!==null&&(Jn=n=n.return);continue}break}while(1)}function LR(){var t=hv.current;return hv.current=dv,t===null?dv:t}function DM(){(rr===0||rr===3||rr===2)&&(rr=4),gr===null||(Du&268435455)===0&&(vy&268435455)===0||Wa(gr,br)}function mv(t,e){var n=Gt;Gt|=2;var r=LR();(gr!==t||br!==e)&&(jo=null,yu(t,e));do try{cV();break}catch(i){PR(t,i)}while(1);if(mM(),Gt=n,hv.current=r,Jn!==null)throw Error(Be(261));return gr=null,br=0,rr}function cV(){for(;Jn!==null;)OR(Jn)}function dV(){for(;Jn!==null&&!NU();)OR(Jn)}function OR(t){var e=RR(t.alternate,t,Mi);t.memoizedProps=t.pendingProps,e===null?IR(t):Jn=e,CM.current=null}function IR(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=rV(n,e,Mi),n!==null){Jn=n;return}}else{if(n=iV(n,e),n!==null){n.flags&=32767,Jn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rr=6,Jn=null;return}}if(e=e.sibling,e!==null){Jn=e;return}Jn=e=t}while(e!==null);rr===0&&(rr=5)}function Ql(t,e,n){var r=rn,i=fs.transition;try{fs.transition=null,rn=1,hV(t,e,n,r)}finally{fs.transition=i,rn=r}return null}function hV(t,e,n,r){do pd();while($a!==null);if((Gt&6)!==0)throw Error(Be(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Be(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if($U(t,s),t===gr&&(Jn=gr=null,br=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||pg||(pg=!0,zR(Z0,function(){return pd(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=fs.transition,fs.transition=null;var o=rn;rn=1;var a=Gt;Gt|=4,CM.current=null,oV(t,n),TR(n,t),I6(Bw),Q0=!!kw,Bw=kw=null,t.current=n,aV(n),kU(),Gt=a,rn=o,fs.transition=s}else t.current=n;if(pg&&(pg=!1,$a=t,pv=i),s=t.pendingLanes,s===0&&(sl=null),UU(n.stateNode),fi(t,Gn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(fv)throw fv=!1,t=iS,iS=null,t;return(pv&1)!==0&&t.tag!==0&&pd(),s=t.pendingLanes,(s&1)!==0?t===sS?Ef++:(Ef=0,sS=t):Ef=0,_l(),null}function pd(){if($a!==null){var t=dD(pv),e=fs.transition,n=rn;try{if(fs.transition=null,rn=16>t?16:t,$a===null)var r=!1;else{if(t=$a,$a=null,pv=0,(Gt&6)!==0)throw Error(Be(331));var i=Gt;for(Gt|=4,Qe=t.current;Qe!==null;){var s=Qe,o=s.child;if((Qe.flags&16)!==0){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Qe=c;Qe!==null;){var d=Qe;switch(d.tag){case 0:case 11:case 15:bf(8,d,s)}var u=d.child;if(u!==null)u.return=d,Qe=u;else for(;Qe!==null;){d=Qe;var h=d.sibling,m=d.return;if(bR(d),d===c){Qe=null;break}if(h!==null){h.return=m,Qe=h;break}Qe=m}}}var g=s.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var y=x.sibling;x.sibling=null,x=y}while(x!==null)}}Qe=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,Qe=o;else e:for(;Qe!==null;){if(s=Qe,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:bf(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Qe=v;break e}Qe=s.return}}var _=t.current;for(Qe=_;Qe!==null;){o=Qe;var S=o.child;if((o.subtreeFlags&2064)!==0&&S!==null)S.return=o,Qe=S;else e:for(o=_;Qe!==null;){if(a=Qe,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:gy(9,a)}}catch(A){In(a,a.return,A)}if(a===o){Qe=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,Qe=b;break e}Qe=a.return}}if(Gt=i,_l(),wo&&typeof wo.onPostCommitFiberRoot=="function")try{wo.onPostCommitFiberRoot(ly,t)}catch{}r=!0}return r}finally{rn=n,fs.transition=e}}return!1}function mA(t,e,n){e=Ld(n,e),e=hR(t,e,1),t=il(t,e,1),e=Xr(),t!==null&&(Pp(t,1,e),fi(t,e))}function In(t,e,n){if(t.tag===3)mA(t,t,n);else for(;e!==null;){if(e.tag===3){mA(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(sl===null||!sl.has(r))){t=Ld(n,t),t=fR(e,t,1),e=il(e,t,1),t=Xr(),e!==null&&(Pp(e,1,t),fi(e,t));break}}e=e.return}}function fV(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xr(),t.pingedLanes|=t.suspendedLanes&n,gr===t&&(br&n)===n&&(rr===4||rr===3&&(br&130023424)===br&&500>Gn()-LM?yu(t,0):PM|=n),fi(t,e)}function DR(t,e){e===0&&((t.mode&1)===0?e=1:(e=ig,ig<<=1,(ig&130023424)===0&&(ig=4194304)));var n=Xr();t=ca(t,e),t!==null&&(Pp(t,e,n),fi(t,n))}function pV(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),DR(t,n)}function mV(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Be(314))}r!==null&&r.delete(e),DR(t,n)}var RR;RR=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||di.current)li=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return li=!1,nV(t,e,n);li=(t.flags&131072)!==0}else li=!1,bn&&(e.flags&1048576)!==0&&kD(e,sv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;A0(t,e),t=e.pendingProps;var i=Td(e,Fr.current);fd(e,n),i=bM(null,e,r,t,i,n);var s=MM();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hi(r)?(s=!0,rv(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,yM(e),i.updater=py,e.stateNode=i,i._reactInternals=e,qw(e,r,t,n),e=Zw(null,e,r,!0,s,n)):(e.tag=0,bn&&s&&dM(e),qr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(A0(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=vV(r),t=Rs(r,t),i){case 0:e=Yw(null,e,r,t,n);break e;case 1:e=sA(null,e,r,t,n);break e;case 11:e=rA(null,e,r,t,n);break e;case 14:e=iA(null,e,r,Rs(r.type,t),n);break e}throw Error(Be(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rs(r,i),Yw(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rs(r,i),sA(t,e,r,i,n);case 3:e:{if(vR(e),t===null)throw Error(Be(387));r=e.pendingProps,s=e.memoizedState,i=s.element,VD(t,e),lv(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ld(Error(Be(423)),e),e=oA(t,e,r,n,i);break e}else if(r!==i){i=Ld(Error(Be(424)),e),e=oA(t,e,r,n,i);break e}else for(Ci=rl(e.stateNode.containerInfo.firstChild),Pi=e,bn=!0,Ns=null,n=jD(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ad(),r===i){e=da(t,e,n);break e}qr(t,e,r,n)}e=e.child}return e;case 5:return $D(e),t===null&&Ww(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Fw(r,i)?o=null:s!==null&&Fw(r,s)&&(e.flags|=32),gR(t,e),qr(t,e,o,n),e.child;case 6:return t===null&&Ww(e),null;case 13:return yR(t,e,n);case 4:return xM(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Cd(e,null,r,n):qr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rs(r,i),rA(t,e,r,i,n);case 7:return qr(t,e,e.pendingProps,n),e.child;case 8:return qr(t,e,e.pendingProps.children,n),e.child;case 12:return qr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,fn(ov,r._currentValue),r._currentValue=o,s!==null)if(js(s.value,o)){if(s.children===i.children&&!di.current){e=da(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ra(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),jw(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Be(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),jw(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}qr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,fd(e,n),i=gs(i),r=r(i),e.flags|=1,qr(t,e,r,n),e.child;case 14:return r=e.type,i=Rs(r,e.pendingProps),i=Rs(r.type,i),iA(t,e,r,i,n);case 15:return pR(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rs(r,i),A0(t,e),e.tag=1,hi(r)?(t=!0,rv(e)):t=!1,fd(e,n),GD(e,r,i),qw(e,r,i,n),Zw(null,e,r,!0,t,n);case 19:return xR(t,e,n);case 22:return mR(t,e,n)}throw Error(Be(156,e.tag))};function zR(t,e){return aD(t,e)}function gV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(t,e,n,r){return new gV(t,e,n,r)}function RM(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vV(t){if(typeof t=="function")return RM(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Kb)return 11;if(t===eM)return 14}return 2}function al(t,e){var n=t.alternate;return n===null?(n=ds(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function L0(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")RM(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case jc:return xu(n.children,i,s,e);case Qb:o=8,i|=8;break;case vw:return t=ds(12,n,e,i|2),t.elementType=vw,t.lanes=s,t;case yw:return t=ds(13,n,e,i),t.elementType=yw,t.lanes=s,t;case xw:return t=ds(19,n,e,i),t.elementType=xw,t.lanes=s,t;case WI:return yy(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case HI:o=10;break e;case GI:o=9;break e;case Kb:o=11;break e;case eM:o=14;break e;case Ua:o=16,r=null;break e}throw Error(Be(130,t==null?t:typeof t,""))}return e=ds(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function xu(t,e,n,r){return t=ds(7,t,r,e),t.lanes=n,t}function yy(t,e,n,r){return t=ds(22,t,r,e),t.elementType=WI,t.lanes=n,t.stateNode={isHidden:!1},t}function Gx(t,e,n){return t=ds(6,t,null,e),t.lanes=n,t}function Wx(t,e,n){return e=ds(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function yV(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mx(0),this.expirationTimes=Mx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mx(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zM(t,e,n,r,i,s,o,a,l){return t=new yV(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ds(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yM(s),t}function xV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function NR(t){if(!t)return fl;t=t._reactInternals;e:{if(Wu(t)!==t||t.tag!==1)throw Error(Be(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Be(171))}if(t.tag===1){var n=t.type;if(hi(n))return zD(t,n,e)}return e}function kR(t,e,n,r,i,s,o,a,l){return t=zM(n,r,!0,t,i,s,o,a,l),t.context=NR(null),n=t.current,r=Xr(),i=ol(n),s=ra(r,i),s.callback=e!=null?e:null,il(n,s,i),t.current.lanes=i,Pp(t,i,r),fi(t,r),t}function xy(t,e,n,r){var i=e.current,s=Xr(),o=ol(i);return n=NR(n),e.context===null?e.context=n:e.pendingContext=n,e=ra(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=il(i,e,o),t!==null&&(Us(t,i,o,s),M0(t,i,o)),o}function gv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function gA(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function NM(t,e){gA(t,e),(t=t.alternate)&&gA(t,e)}function _V(){return null}var BR=typeof reportError=="function"?reportError:function(t){console.error(t)};function kM(t){this._internalRoot=t}_y.prototype.render=kM.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Be(409));xy(t,e,null,null)};_y.prototype.unmount=kM.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ru(function(){xy(null,t,null,null)}),e[ua]=null}};function _y(t){this._internalRoot=t}_y.prototype.unstable_scheduleHydration=function(t){if(t){var e=pD();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ga.length&&e!==0&&e<Ga[n].priority;n++);Ga.splice(n,0,t),n===0&&gD(t)}};function BM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vA(){}function wV(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=gv(o);s.call(c)}}var o=kR(e,r,t,0,null,!1,!1,"",vA);return t._reactRootContainer=o,t[ua]=o.current,Gf(t.nodeType===8?t.parentNode:t),Ru(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=gv(l);a.call(c)}}var l=zM(t,0,!1,null,null,!1,!1,"",vA);return t._reactRootContainer=l,t[ua]=l.current,Gf(t.nodeType===8?t.parentNode:t),Ru(function(){xy(e,l,n,r)}),l}function Sy(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=gv(o);a.call(l)}}xy(e,o,t,i)}else o=wV(n,e,t,i,r);return gv(o)}hD=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=af(e.pendingLanes);n!==0&&(rM(e,n|1),fi(e,Gn()),(Gt&6)===0&&(Od=Gn()+500,_l()))}break;case 13:Ru(function(){var r=ca(t,1);if(r!==null){var i=Xr();Us(r,t,1,i)}}),NM(t,1)}};iM=function(t){if(t.tag===13){var e=ca(t,134217728);if(e!==null){var n=Xr();Us(e,t,134217728,n)}NM(t,134217728)}};fD=function(t){if(t.tag===13){var e=ol(t),n=ca(t,e);if(n!==null){var r=Xr();Us(n,t,e,r)}NM(t,e)}};pD=function(){return rn};mD=function(t,e){var n=rn;try{return rn=t,e()}finally{rn=n}};Pw=function(t,e,n){switch(e){case"input":if(Sw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=hy(r);if(!i)throw Error(Be(90));$I(r),Sw(r,i)}}}break;case"textarea":XI(t,n);break;case"select":e=n.value,e!=null&&ud(t,!!n.multiple,e,!1)}};tD=OM;nD=Ru;var SV={usingClientEntryPoint:!1,Events:[Op,Yc,hy,KI,eD,OM]},Nh={findFiberByHostInstance:au,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},bV={bundleType:Nh.bundleType,version:Nh.version,rendererPackageName:Nh.rendererPackageName,rendererConfig:Nh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:va.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=sD(t),t===null?null:t.stateNode},findFiberByHostInstance:Nh.findFiberByHostInstance||_V,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mg.isDisabled&&mg.supportsFiber)try{ly=mg.inject(bV),wo=mg}catch{}}Ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SV;Ri.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!BM(e))throw Error(Be(200));return xV(t,e,null,n)};Ri.createRoot=function(t,e){if(!BM(t))throw Error(Be(299));var n=!1,r="",i=BR;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=zM(t,1,!1,null,null,n,!1,r,i),t[ua]=e.current,Gf(t.nodeType===8?t.parentNode:t),new kM(e)};Ri.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Be(188)):(t=Object.keys(t).join(","),Error(Be(268,t)));return t=sD(e),t=t===null?null:t.stateNode,t};Ri.flushSync=function(t){return Ru(t)};Ri.hydrate=function(t,e,n){if(!wy(e))throw Error(Be(200));return Sy(null,t,e,!0,n)};Ri.hydrateRoot=function(t,e,n){if(!BM(t))throw Error(Be(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=BR;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=kR(e,null,t,1,n!=null?n:null,i,!1,s,o),t[ua]=e.current,Gf(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new _y(e)};Ri.render=function(t,e,n){if(!wy(e))throw Error(Be(200));return Sy(null,t,e,!1,n)};Ri.unmountComponentAtNode=function(t){if(!wy(t))throw Error(Be(40));return t._reactRootContainer?(Ru(function(){Sy(null,null,t,!1,function(){t._reactRootContainer=null,t[ua]=null})}),!0):!1};Ri.unstable_batchedUpdates=OM;Ri.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!wy(n))throw Error(Be(200));if(t==null||t._reactInternals===void 0)throw Error(Be(38));return Sy(t,e,n,!1,r)};Ri.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=Ri})(LI);var FM,yA=LI.exports;FM=yA.createRoot,yA.hydrateRoot;function lS(){return lS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lS.apply(this,arguments)}/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const by="146",MV={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},EV={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},FR=0,uS=1,UR=2,TV=3,AV=0,UM=1,VM=2,nd=3,pl=0,pi=1,yo=2,ia=0,ll=1,cS=2,dS=3,hS=4,VR=5,ru=100,HR=101,GR=102,fS=103,pS=104,WR=200,jR=201,$R=202,qR=203,HM=204,GM=205,XR=206,YR=207,ZR=208,JR=209,QR=210,KR=0,ez=1,tz=2,vv=3,nz=4,rz=5,iz=6,sz=7,Dp=0,oz=1,az=2,Vs=0,lz=1,uz=2,cz=3,WM=4,dz=5,My=300,ha=301,fa=302,Qf=303,Kf=304,ju=306,ep=1e3,kr=1001,tp=1002,Yn=1003,yv=1004,CV=1004,xv=1005,PV=1005,Tn=1006,jM=1007,LV=1007,$u=1008,OV=1008,ml=1009,hz=1010,fz=1011,$M=1012,pz=1013,qa=1014,Ko=1015,zu=1016,mz=1017,gz=1018,_u=1020,vz=1021,yz=1022,Ti=1023,xz=1024,_z=1025,ul=1026,Nu=1027,wz=1028,Sz=1029,bz=1030,Mz=1031,Ez=1033,O0=33776,I0=33777,D0=33778,R0=33779,mS=35840,gS=35841,vS=35842,yS=35843,Tz=36196,xS=37492,_S=37496,wS=37808,SS=37809,bS=37810,MS=37811,ES=37812,TS=37813,AS=37814,CS=37815,PS=37816,LS=37817,OS=37818,IS=37819,DS=37820,RS=37821,zS=36492,Az=2200,Cz=2201,Pz=2202,np=2300,rp=2301,z0=2302,cu=2400,du=2401,ip=2402,Ey=2500,qM=2501,IV=0,DV=1,RV=2,ys=3e3,un=3001,Lz=3200,Oz=3201,wl=0,Iz=1,zV="",fo="srgb",Xa="srgb-linear",NV=0,wu=7680,N0=7681,kV=7682,BV=7683,FV=34055,UV=34056,VV=5386,HV=512,GV=513,Dz=514,WV=515,jV=516,Rz=517,$V=518,XM=519,sp=35044,qV=35048,XV=35040,YV=35045,ZV=35049,JV=35041,QV=35046,KV=35050,e8=35042,t8="100",NS="300 es",_v=1035;class Ss{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Dr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let xA=1234567;const Su=Math.PI/180,op=180/Math.PI;function Li(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Dr[t&255]+Dr[t>>8&255]+Dr[t>>16&255]+Dr[t>>24&255]+"-"+Dr[e&255]+Dr[e>>8&255]+"-"+Dr[e>>16&15|64]+Dr[e>>24&255]+"-"+Dr[n&63|128]+Dr[n>>8&255]+"-"+Dr[n>>16&255]+Dr[n>>24&255]+Dr[r&255]+Dr[r>>8&255]+Dr[r>>16&255]+Dr[r>>24&255]).toLowerCase()}function Wn(t,e,n){return Math.max(e,Math.min(n,t))}function YM(t,e){return(t%e+e)%e}function n8(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function r8(t,e,n){return t!==e?(n-t)/(e-t):0}function Tf(t,e,n){return(1-n)*t+n*e}function i8(t,e,n,r){return Tf(t,e,1-Math.exp(-n*r))}function s8(t,e=1){return e-Math.abs(YM(t,e*2)-e)}function o8(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function a8(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function l8(t,e){return t+Math.floor(Math.random()*(e-t+1))}function u8(t,e){return t+Math.random()*(e-t)}function c8(t){return t*(.5-Math.random())}function d8(t){t!==void 0&&(xA=t);let e=xA+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function h8(t){return t*Su}function f8(t){return t*op}function kS(t){return(t&t-1)===0&&t!==0}function zz(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function wv(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function p8(t,e,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+r)/2),d=o((e+r)/2),u=s((e-r)/2),h=o((e-r)/2),m=s((r-e)/2),g=o((r-e)/2);switch(i){case"XYX":t.set(a*d,l*u,l*h,a*c);break;case"YZY":t.set(l*h,a*d,l*u,a*c);break;case"ZXZ":t.set(l*u,l*h,a*d,a*c);break;case"XZX":t.set(a*d,l*g,l*m,a*c);break;case"YXY":t.set(l*m,a*d,l*g,a*c);break;case"ZYZ":t.set(l*g,l*m,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ea(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function cn(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}var nn=Object.freeze({__proto__:null,DEG2RAD:Su,RAD2DEG:op,generateUUID:Li,clamp:Wn,euclideanModulo:YM,mapLinear:n8,inverseLerp:r8,lerp:Tf,damp:i8,pingpong:s8,smoothstep:o8,smootherstep:a8,randInt:l8,randFloat:u8,randFloatSpread:c8,seededRandom:d8,degToRad:h8,radToDeg:f8,isPowerOfTwo:kS,ceilPowerOfTwo:zz,floorPowerOfTwo:wv,setQuaternionFromProperEuler:p8,normalize:cn,denormalize:ea});class se{constructor(e=0,n=0){se.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ir{constructor(){ir.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,n,r,i,s,o,a,l,c){const d=this.elements;return d[0]=e,d[1]=i,d[2]=a,d[3]=n,d[4]=s,d[5]=l,d[6]=r,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],d=r[4],u=r[7],h=r[2],m=r[5],g=r[8],x=i[0],y=i[3],v=i[6],_=i[1],S=i[4],b=i[7],A=i[2],E=i[5],C=i[8];return s[0]=o*x+a*_+l*A,s[3]=o*y+a*S+l*E,s[6]=o*v+a*b+l*C,s[1]=c*x+d*_+u*A,s[4]=c*y+d*S+u*E,s[7]=c*v+d*b+u*C,s[2]=h*x+m*_+g*A,s[5]=h*y+m*S+g*E,s[8]=h*v+m*b+g*C,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return n*o*d-n*a*c-r*s*d+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],u=d*o-a*c,h=a*l-d*s,m=c*s-o*l,g=n*u+r*h+i*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/g;return e[0]=u*x,e[1]=(i*c-d*r)*x,e[2]=(a*r-i*o)*x,e[3]=h*x,e[4]=(d*n-i*l)*x,e[5]=(i*s-a*n)*x,e[6]=m*x,e[7]=(r*l-c*n)*x,e[8]=(o*n-r*s)*x,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=n,r[4]*=n,r[7]*=n,this}rotate(e){const n=Math.cos(e),r=Math.sin(e),i=this.elements,s=i[0],o=i[3],a=i[6],l=i[1],c=i[4],d=i[7];return i[0]=n*s+r*l,i[3]=n*o+r*c,i[6]=n*a+r*d,i[1]=-r*s+n*l,i[4]=-r*o+n*c,i[7]=-r*a+n*d,this}translate(e,n){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=n*r[2],r[4]+=n*r[5],r[7]+=n*r[8],this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function Nz(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const m8={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function rd(t,e){return new m8[t](e)}function ap(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function bu(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function k0(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const jx={[fo]:{[Xa]:bu},[Xa]:{[fo]:k0}},es={legacyMode:!0,get workingColorSpace(){return Xa},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.legacyMode||e===n||!e||!n)return t;if(jx[e]&&jx[e][n]!==void 0){const r=jx[e][n];return t.r=r(t.r),t.g=r(t.g),t.b=r(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},kz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},er={r:0,g:0,b:0},Cs={h:0,s:0,l:0},gg={h:0,s:0,l:0};function $x(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}function vg(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class We{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&r===void 0?this.set(e):this.setRGB(e,n,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=fo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,es.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=Xa){return this.r=e,this.g=n,this.b=r,es.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=Xa){if(e=YM(e,1),n=Wn(n,0,1),r=Wn(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;this.r=$x(o,s,e+1/3),this.g=$x(o,s,e),this.b=$x(o,s,e-1/3)}return es.toWorkingColorSpace(this,i),this}setStyle(e,n=fo){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,es.toWorkingColorSpace(this,n),r(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,es.toWorkingColorSpace(this,n),r(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,c=parseFloat(s[2])/100,d=parseFloat(s[3])/100;return r(s[4]),this.setHSL(l,c,d,n)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,es.toWorkingColorSpace(this,n),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,es.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=fo){const r=kz[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=bu(e.r),this.g=bu(e.g),this.b=bu(e.b),this}copyLinearToSRGB(e){return this.r=k0(e.r),this.g=k0(e.g),this.b=k0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=fo){return es.fromWorkingColorSpace(vg(this,er),e),Wn(er.r*255,0,255)<<16^Wn(er.g*255,0,255)<<8^Wn(er.b*255,0,255)<<0}getHexString(e=fo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Xa){es.fromWorkingColorSpace(vg(this,er),n);const r=er.r,i=er.g,s=er.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const d=(a+o)/2;if(a===o)l=0,c=0;else{const u=o-a;switch(c=d<=.5?u/(o+a):u/(2-o-a),o){case r:l=(i-s)/u+(i<s?6:0);break;case i:l=(s-r)/u+2;break;case s:l=(r-i)/u+4;break}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,n=Xa){return es.fromWorkingColorSpace(vg(this,er),n),e.r=er.r,e.g=er.g,e.b=er.b,e}getStyle(e=fo){return es.fromWorkingColorSpace(vg(this,er),e),e!==fo?`color(${e} ${er.r} ${er.g} ${er.b})`:`rgb(${er.r*255|0},${er.g*255|0},${er.b*255|0})`}offsetHSL(e,n,r){return this.getHSL(Cs),Cs.h+=e,Cs.s+=n,Cs.l+=r,this.setHSL(Cs.h,Cs.s,Cs.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Cs),e.getHSL(gg);const r=Tf(Cs.h,gg.h,n),i=Tf(Cs.s,gg.s,n),s=Tf(Cs.l,gg.l,n);return this.setHSL(r,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}We.NAMES=kz;let gc;class ZM{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{gc===void 0&&(gc=ap("canvas")),gc.width=e.width,gc.height=e.height;const r=gc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=gc}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=ap("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=bu(s[o]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(bu(n[r]/255)*255):n[r]=bu(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class hu{constructor(e=null){this.isSource=!0,this.uuid=Li(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(qx(i[o].image)):s.push(qx(i[o]))}else s=qx(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function qx(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?ZM.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let g8=0;class Bn extends Ss{constructor(e=Bn.DEFAULT_IMAGE,n=Bn.DEFAULT_MAPPING,r=kr,i=kr,s=Tn,o=$u,a=Ti,l=ml,c=1,d=ys){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:g8++}),this.uuid=Li(),this.name="",this.source=new hu(e),this.mipmaps=[],this.mapping=n,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new se(0,0),this.repeat=new se(1,1),this.center=new se(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ir,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==My)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ep:e.x=e.x-Math.floor(e.x);break;case kr:e.x=e.x<0?0:1;break;case tp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ep:e.y=e.y-Math.floor(e.y);break;case kr:e.y=e.y<0?0:1;break;case tp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Bn.DEFAULT_IMAGE=null;Bn.DEFAULT_MAPPING=My;class St{constructor(e=0,n=0,r=0,i=1){St.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,c=l[0],d=l[4],u=l[8],h=l[1],m=l[5],g=l[9],x=l[2],y=l[6],v=l[10];if(Math.abs(d-h)<.01&&Math.abs(u-x)<.01&&Math.abs(g-y)<.01){if(Math.abs(d+h)<.1&&Math.abs(u+x)<.1&&Math.abs(g+y)<.1&&Math.abs(c+m+v-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const S=(c+1)/2,b=(m+1)/2,A=(v+1)/2,E=(d+h)/4,C=(u+x)/4,T=(g+y)/4;return S>b&&S>A?S<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(S),i=E/r,s=C/r):b>A?b<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(b),r=E/i,s=T/i):A<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(A),r=C/s,i=T/s),this.set(r,i,s,n),this}let _=Math.sqrt((y-g)*(y-g)+(u-x)*(u-x)+(h-d)*(h-d));return Math.abs(_)<.001&&(_=1),this.x=(y-g)/_,this.y=(u-x)/_,this.z=(h-d)/_,this.w=Math.acos((c+m+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Di extends Ss{constructor(e=1,n=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new St(0,0,e,n),this.scissorTest=!1,this.viewport=new St(0,0,e,n);const i={width:e,height:n,depth:1};this.texture=new Bn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Tn,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new hu(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Rp extends Bn{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Yn,this.minFilter=Yn,this.wrapR=kr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class v8 extends Di{constructor(e=1,n=1,r=1){super(e,n),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new Rp(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class Ty extends Bn{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Yn,this.minFilter=Yn,this.wrapR=kr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class y8 extends Di{constructor(e=1,n=1,r=1){super(e,n),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new Ty(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class x8 extends Di{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=n,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,r=e.texture.length;n<r;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class Br{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,o,a){let l=r[i+0],c=r[i+1],d=r[i+2],u=r[i+3];const h=s[o+0],m=s[o+1],g=s[o+2],x=s[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=d,e[n+3]=u;return}if(a===1){e[n+0]=h,e[n+1]=m,e[n+2]=g,e[n+3]=x;return}if(u!==x||l!==h||c!==m||d!==g){let y=1-a;const v=l*h+c*m+d*g+u*x,_=v>=0?1:-1,S=1-v*v;if(S>Number.EPSILON){const A=Math.sqrt(S),E=Math.atan2(A,v*_);y=Math.sin(y*E)/A,a=Math.sin(a*E)/A}const b=a*_;if(l=l*y+h*b,c=c*y+m*b,d=d*y+g*b,u=u*y+x*b,y===1-a){const A=1/Math.sqrt(l*l+c*c+d*d+u*u);l*=A,c*=A,d*=A,u*=A}}e[n]=l,e[n+1]=c,e[n+2]=d,e[n+3]=u}static multiplyQuaternionsFlat(e,n,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],d=r[i+3],u=s[o],h=s[o+1],m=s[o+2],g=s[o+3];return e[n]=a*g+d*u+l*m-c*h,e[n+1]=l*g+d*h+c*u-a*m,e[n+2]=c*g+d*m+a*h-l*u,e[n+3]=d*g-a*u-l*h-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),d=a(i/2),u=a(s/2),h=l(r/2),m=l(i/2),g=l(s/2);switch(o){case"XYZ":this._x=h*d*u+c*m*g,this._y=c*m*u-h*d*g,this._z=c*d*g+h*m*u,this._w=c*d*u-h*m*g;break;case"YXZ":this._x=h*d*u+c*m*g,this._y=c*m*u-h*d*g,this._z=c*d*g-h*m*u,this._w=c*d*u+h*m*g;break;case"ZXY":this._x=h*d*u-c*m*g,this._y=c*m*u+h*d*g,this._z=c*d*g+h*m*u,this._w=c*d*u-h*m*g;break;case"ZYX":this._x=h*d*u-c*m*g,this._y=c*m*u+h*d*g,this._z=c*d*g-h*m*u,this._w=c*d*u+h*m*g;break;case"YZX":this._x=h*d*u+c*m*g,this._y=c*m*u+h*d*g,this._z=c*d*g-h*m*u,this._w=c*d*u-h*m*g;break;case"XZY":this._x=h*d*u-c*m*g,this._y=c*m*u-h*d*g,this._z=c*d*g+h*m*u,this._w=c*d*u+h*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],d=n[6],u=n[10],h=r+a+u;if(h>0){const m=.5/Math.sqrt(h+1);this._w=.25/m,this._x=(d-l)*m,this._y=(s-c)*m,this._z=(o-i)*m}else if(r>a&&r>u){const m=2*Math.sqrt(1+r-a-u);this._w=(d-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+c)/m}else if(a>u){const m=2*Math.sqrt(1+a-r-u);this._w=(s-c)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+d)/m}else{const m=2*Math.sqrt(1+u-r-a);this._w=(o-i)/m,this._x=(s+c)/m,this._y=(l+d)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Wn(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,o=e._w,a=n._x,l=n._y,c=n._z,d=n._w;return this._x=r*d+o*a+i*c-s*l,this._y=i*d+o*l+s*a-r*c,this._z=s*d+o*c+r*l-i*a,this._w=o*d-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-n;return this._w=m*o+n*this._w,this._x=m*r+n*this._x,this._y=m*i+n*this._y,this._z=m*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),u=Math.sin((1-n)*d)/c,h=Math.sin(n*d)/c;return this._w=o*u+this._w*h,this._x=r*u+this._x*h,this._y=i*u+this._y*h,this._z=s*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(s),r*Math.cos(s),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class R{constructor(e=0,n=0,r=0){R.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(_A.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(_A.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*n+o*i-a*r,d=l*r+a*n-s*i,u=l*i+s*r-o*n,h=-s*n-o*r-a*i;return this.x=c*l+h*-s+d*-a-u*-o,this.y=d*l+h*-o+u*-s-c*-a,this.z=u*l+h*-a+c*-o-d*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Xx.copy(this).projectOnVector(e),this.sub(Xx)}reflect(e){return this.sub(Xx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Wn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Xx=new R,_A=new Br;class Ni{constructor(e=new R(1/0,1/0,1/0),n=new R(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){let n=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const d=e[l],u=e[l+1],h=e[l+2];d<n&&(n=d),u<r&&(r=u),h<i&&(i=h),d>s&&(s=d),u>o&&(o=u),h>a&&(a=h)}return this.min.set(n,r,i),this.max.set(s,o,a),this}setFromBufferAttribute(e){let n=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const d=e.getX(l),u=e.getY(l),h=e.getZ(l);d<n&&(n=d),u<r&&(r=u),h<i&&(i=h),d>s&&(s=d),u>o&&(o=u),h>a&&(a=h)}return this.min.set(n,r,i),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Fl.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(n&&r.attributes!=null&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)Fl.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Fl)}else r.boundingBox===null&&r.computeBoundingBox(),Yx.copy(r.boundingBox),Yx.applyMatrix4(e.matrixWorld),this.union(Yx);const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Fl),Fl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(kh),yg.subVectors(this.max,kh),vc.subVectors(e.a,kh),yc.subVectors(e.b,kh),xc.subVectors(e.c,kh),La.subVectors(yc,vc),Oa.subVectors(xc,yc),Ul.subVectors(vc,xc);let n=[0,-La.z,La.y,0,-Oa.z,Oa.y,0,-Ul.z,Ul.y,La.z,0,-La.x,Oa.z,0,-Oa.x,Ul.z,0,-Ul.x,-La.y,La.x,0,-Oa.y,Oa.x,0,-Ul.y,Ul.x,0];return!Zx(n,vc,yc,xc,yg)||(n=[1,0,0,0,1,0,0,0,1],!Zx(n,vc,yc,xc,yg))?!1:(xg.crossVectors(La,Oa),n=[xg.x,xg.y,xg.z],Zx(n,vc,yc,xc,yg))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Fl.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Fl).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Bo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Bo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Bo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Bo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Bo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Bo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Bo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Bo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Bo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Bo=[new R,new R,new R,new R,new R,new R,new R,new R],Fl=new R,Yx=new Ni,vc=new R,yc=new R,xc=new R,La=new R,Oa=new R,Ul=new R,kh=new R,yg=new R,xg=new R,Vl=new R;function Zx(t,e,n,r,i){for(let s=0,o=t.length-3;s<=o;s+=3){Vl.fromArray(t,s);const a=i.x*Math.abs(Vl.x)+i.y*Math.abs(Vl.y)+i.z*Math.abs(Vl.z),l=e.dot(Vl),c=n.dot(Vl),d=r.dot(Vl);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const _8=new Ni,Bh=new R,Jx=new R;class xs{constructor(e=new R,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):_8.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Bh.subVectors(e,this.center);const n=Bh.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(Bh,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Jx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Bh.copy(e.center).add(Jx)),this.expandByPoint(Bh.copy(e.center).sub(Jx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Fo=new R,Qx=new R,_g=new R,Ia=new R,Kx=new R,wg=new R,e_=new R;class Sl{constructor(e=new R,n=new R(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Fo)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Fo.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Fo.copy(this.direction).multiplyScalar(n).add(this.origin),Fo.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){Qx.copy(e).add(n).multiplyScalar(.5),_g.copy(n).sub(e).normalize(),Ia.copy(this.origin).sub(Qx);const s=e.distanceTo(n)*.5,o=-this.direction.dot(_g),a=Ia.dot(this.direction),l=-Ia.dot(_g),c=Ia.lengthSq(),d=Math.abs(1-o*o);let u,h,m,g;if(d>0)if(u=o*l-a,h=o*a-l,g=s*d,u>=0)if(h>=-g)if(h<=g){const x=1/d;u*=x,h*=x,m=u*(u+o*h+2*a)+h*(o*u+h+2*l)+c}else h=s,u=Math.max(0,-(o*h+a)),m=-u*u+h*(h+2*l)+c;else h=-s,u=Math.max(0,-(o*h+a)),m=-u*u+h*(h+2*l)+c;else h<=-g?(u=Math.max(0,-(-o*s+a)),h=u>0?-s:Math.min(Math.max(-s,-l),s),m=-u*u+h*(h+2*l)+c):h<=g?(u=0,h=Math.min(Math.max(-s,-l),s),m=h*(h+2*l)+c):(u=Math.max(0,-(o*s+a)),h=u>0?s:Math.min(Math.max(-s,-l),s),m=-u*u+h*(h+2*l)+c);else h=o>0?-s:s,u=Math.max(0,-(o*h+a)),m=-u*u+h*(h+2*l)+c;return r&&r.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(_g).multiplyScalar(h).add(Qx),m}intersectSphere(e,n){Fo.subVectors(e.center,this.origin);const r=Fo.dot(this.direction),i=Fo.dot(Fo)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return a<0&&l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,o,a,l;const c=1/this.direction.x,d=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),d>=0?(s=(e.min.y-h.y)*d,o=(e.max.y-h.y)*d):(s=(e.max.y-h.y)*d,o=(e.min.y-h.y)*d),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),u>=0?(a=(e.min.z-h.z)*u,l=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,l=(e.min.z-h.z)*u),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Fo)!==null}intersectTriangle(e,n,r,i,s){Kx.subVectors(n,e),wg.subVectors(r,e),e_.crossVectors(Kx,wg);let o=this.direction.dot(e_),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ia.subVectors(this.origin,e);const l=a*this.direction.dot(wg.crossVectors(Ia,wg));if(l<0)return null;const c=a*this.direction.dot(Kx.cross(Ia));if(c<0||l+c>o)return null;const d=-a*Ia.dot(e_);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class nt{constructor(){nt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,n,r,i,s,o,a,l,c,d,u,h,m,g,x,y){const v=this.elements;return v[0]=e,v[4]=n,v[8]=r,v[12]=i,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=d,v[10]=u,v[14]=h,v[3]=m,v[7]=g,v[11]=x,v[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new nt().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/_c.setFromMatrixColumn(e,0).length(),s=1/_c.setFromMatrixColumn(e,1).length(),o=1/_c.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),d=Math.cos(s),u=Math.sin(s);if(e.order==="XYZ"){const h=o*d,m=o*u,g=a*d,x=a*u;n[0]=l*d,n[4]=-l*u,n[8]=c,n[1]=m+g*c,n[5]=h-x*c,n[9]=-a*l,n[2]=x-h*c,n[6]=g+m*c,n[10]=o*l}else if(e.order==="YXZ"){const h=l*d,m=l*u,g=c*d,x=c*u;n[0]=h+x*a,n[4]=g*a-m,n[8]=o*c,n[1]=o*u,n[5]=o*d,n[9]=-a,n[2]=m*a-g,n[6]=x+h*a,n[10]=o*l}else if(e.order==="ZXY"){const h=l*d,m=l*u,g=c*d,x=c*u;n[0]=h-x*a,n[4]=-o*u,n[8]=g+m*a,n[1]=m+g*a,n[5]=o*d,n[9]=x-h*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const h=o*d,m=o*u,g=a*d,x=a*u;n[0]=l*d,n[4]=g*c-m,n[8]=h*c+x,n[1]=l*u,n[5]=x*c+h,n[9]=m*c-g,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const h=o*l,m=o*c,g=a*l,x=a*c;n[0]=l*d,n[4]=x-h*u,n[8]=g*u+m,n[1]=u,n[5]=o*d,n[9]=-a*d,n[2]=-c*d,n[6]=m*u+g,n[10]=h-x*u}else if(e.order==="XZY"){const h=o*l,m=o*c,g=a*l,x=a*c;n[0]=l*d,n[4]=-u,n[8]=c*d,n[1]=h*u+x,n[5]=o*d,n[9]=m*u-g,n[2]=g*u-m,n[6]=a*d,n[10]=x*u+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(w8,e,S8)}lookAt(e,n,r){const i=this.elements;return Si.subVectors(e,n),Si.lengthSq()===0&&(Si.z=1),Si.normalize(),Da.crossVectors(r,Si),Da.lengthSq()===0&&(Math.abs(r.z)===1?Si.x+=1e-4:Si.z+=1e-4,Si.normalize(),Da.crossVectors(r,Si)),Da.normalize(),Sg.crossVectors(Si,Da),i[0]=Da.x,i[4]=Sg.x,i[8]=Si.x,i[1]=Da.y,i[5]=Sg.y,i[9]=Si.y,i[2]=Da.z,i[6]=Sg.z,i[10]=Si.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],d=r[1],u=r[5],h=r[9],m=r[13],g=r[2],x=r[6],y=r[10],v=r[14],_=r[3],S=r[7],b=r[11],A=r[15],E=i[0],C=i[4],T=i[8],O=i[12],L=i[1],k=i[5],B=i[9],G=i[13],H=i[2],Y=i[6],te=i[10],Z=i[14],D=i[3],N=i[7],z=i[11],U=i[15];return s[0]=o*E+a*L+l*H+c*D,s[4]=o*C+a*k+l*Y+c*N,s[8]=o*T+a*B+l*te+c*z,s[12]=o*O+a*G+l*Z+c*U,s[1]=d*E+u*L+h*H+m*D,s[5]=d*C+u*k+h*Y+m*N,s[9]=d*T+u*B+h*te+m*z,s[13]=d*O+u*G+h*Z+m*U,s[2]=g*E+x*L+y*H+v*D,s[6]=g*C+x*k+y*Y+v*N,s[10]=g*T+x*B+y*te+v*z,s[14]=g*O+x*G+y*Z+v*U,s[3]=_*E+S*L+b*H+A*D,s[7]=_*C+S*k+b*Y+A*N,s[11]=_*T+S*B+b*te+A*z,s[15]=_*O+S*G+b*Z+A*U,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],d=e[2],u=e[6],h=e[10],m=e[14],g=e[3],x=e[7],y=e[11],v=e[15];return g*(+s*l*u-i*c*u-s*a*h+r*c*h+i*a*m-r*l*m)+x*(+n*l*m-n*c*h+s*o*h-i*o*m+i*c*d-s*l*d)+y*(+n*c*u-n*a*m-s*o*u+r*o*m+s*a*d-r*c*d)+v*(-i*a*d-n*l*u+n*a*h+i*o*u-r*o*h+r*l*d)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],u=e[9],h=e[10],m=e[11],g=e[12],x=e[13],y=e[14],v=e[15],_=u*y*c-x*h*c+x*l*m-a*y*m-u*l*v+a*h*v,S=g*h*c-d*y*c-g*l*m+o*y*m+d*l*v-o*h*v,b=d*x*c-g*u*c+g*a*m-o*x*m-d*a*v+o*u*v,A=g*u*l-d*x*l-g*a*h+o*x*h+d*a*y-o*u*y,E=n*_+r*S+i*b+s*A;if(E===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/E;return e[0]=_*C,e[1]=(x*h*s-u*y*s-x*i*m+r*y*m+u*i*v-r*h*v)*C,e[2]=(a*y*s-x*l*s+x*i*c-r*y*c-a*i*v+r*l*v)*C,e[3]=(u*l*s-a*h*s-u*i*c+r*h*c+a*i*m-r*l*m)*C,e[4]=S*C,e[5]=(d*y*s-g*h*s+g*i*m-n*y*m-d*i*v+n*h*v)*C,e[6]=(g*l*s-o*y*s-g*i*c+n*y*c+o*i*v-n*l*v)*C,e[7]=(o*h*s-d*l*s+d*i*c-n*h*c-o*i*m+n*l*m)*C,e[8]=b*C,e[9]=(g*u*s-d*x*s-g*r*m+n*x*m+d*r*v-n*u*v)*C,e[10]=(o*x*s-g*a*s+g*r*c-n*x*c-o*r*v+n*a*v)*C,e[11]=(d*a*s-o*u*s-d*r*c+n*u*c+o*r*m-n*a*m)*C,e[12]=A*C,e[13]=(d*x*i-g*u*i+g*r*h-n*x*h-d*r*y+n*u*y)*C,e[14]=(g*a*i-o*x*i-g*r*l+n*x*l+o*r*y-n*a*y)*C,e[15]=(o*u*i-d*a*i+d*r*l-n*u*l-o*r*h+n*a*h)*C,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,d=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,d*a+r,d*l-i*o,0,c*l-i*a,d*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,d=o+o,u=a+a,h=s*c,m=s*d,g=s*u,x=o*d,y=o*u,v=a*u,_=l*c,S=l*d,b=l*u,A=r.x,E=r.y,C=r.z;return i[0]=(1-(x+v))*A,i[1]=(m+b)*A,i[2]=(g-S)*A,i[3]=0,i[4]=(m-b)*E,i[5]=(1-(h+v))*E,i[6]=(y+_)*E,i[7]=0,i[8]=(g+S)*C,i[9]=(y-_)*C,i[10]=(1-(h+x))*C,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=_c.set(i[0],i[1],i[2]).length();const o=_c.set(i[4],i[5],i[6]).length(),a=_c.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Ps.copy(this);const c=1/s,d=1/o,u=1/a;return Ps.elements[0]*=c,Ps.elements[1]*=c,Ps.elements[2]*=c,Ps.elements[4]*=d,Ps.elements[5]*=d,Ps.elements[6]*=d,Ps.elements[8]*=u,Ps.elements[9]*=u,Ps.elements[10]*=u,n.setFromRotationMatrix(Ps),r.x=s,r.y=o,r.z=a,this}makePerspective(e,n,r,i,s,o){const a=this.elements,l=2*s/(n-e),c=2*s/(r-i),d=(n+e)/(n-e),u=(r+i)/(r-i),h=-(o+s)/(o-s),m=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=d,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,n,r,i,s,o){const a=this.elements,l=1/(n-e),c=1/(r-i),d=1/(o-s),u=(n+e)*l,h=(r+i)*c,m=(o+s)*d;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*d,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const _c=new R,Ps=new nt,w8=new R(0,0,0),S8=new R(1,1,1),Da=new R,Sg=new R,Si=new R,wA=new nt,SA=new Br;class gl{constructor(e=0,n=0,r=0,i=gl.DefaultOrder){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],d=i[9],u=i[2],h=i[6],m=i[10];switch(n){case"XYZ":this._y=Math.asin(Wn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Wn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(Wn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Wn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Wn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Wn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-d,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return wA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(wA,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return SA.setFromEuler(this),this.setFromQuaternion(SA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}gl.DefaultOrder="XYZ";gl.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Mu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let b8=0;const bA=new R,wc=new Br,Uo=new nt,bg=new R,Fh=new R,M8=new R,E8=new Br,MA=new R(1,0,0),EA=new R(0,1,0),TA=new R(0,0,1),T8={type:"added"},AA={type:"removed"};class Rt extends Ss{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:b8++}),this.uuid=Li(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Rt.DefaultUp.clone();const e=new R,n=new gl,r=new Br,i=new R(1,1,1);function s(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new nt},normalMatrix:{value:new ir}}),this.matrix=new nt,this.matrixWorld=new nt,this.matrixAutoUpdate=Rt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Rt.DefaultMatrixWorldAutoUpdate,this.layers=new Mu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return wc.setFromAxisAngle(e,n),this.quaternion.multiply(wc),this}rotateOnWorldAxis(e,n){return wc.setFromAxisAngle(e,n),this.quaternion.premultiply(wc),this}rotateX(e){return this.rotateOnAxis(MA,e)}rotateY(e){return this.rotateOnAxis(EA,e)}rotateZ(e){return this.rotateOnAxis(TA,e)}translateOnAxis(e,n){return bA.copy(e).applyQuaternion(this.quaternion),this.position.add(bA.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(MA,e)}translateY(e){return this.translateOnAxis(EA,e)}translateZ(e){return this.translateOnAxis(TA,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Uo.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?bg.copy(e):bg.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Fh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Uo.lookAt(Fh,bg,this.up):Uo.lookAt(bg,Fh,this.up),this.quaternion.setFromRotationMatrix(Uo),i&&(Uo.extractRotation(i.matrixWorld),wc.setFromRotationMatrix(Uo),this.quaternion.premultiply(wc.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(T8)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(AA)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(AA)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Uo.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Uo.multiply(e.parent.matrixWorld)),e.applyMatrix4(Uo),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fh,e,M8),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fh,E8,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const s=n[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,d=l.length;c<d;c++){const u=l[c];s(e.shapes,u)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),d=o(e.images),u=o(e.shapes),h=o(e.skeletons),m=o(e.animations),g=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),d.length>0&&(r.images=d),u.length>0&&(r.shapes=u),h.length>0&&(r.skeletons=h),m.length>0&&(r.animations=m),g.length>0&&(r.nodes=g)}return r.object=i,r;function o(a){const l=[];for(const c in a){const d=a[c];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Rt.DefaultUp=new R(0,1,0);Rt.DefaultMatrixAutoUpdate=!0;Rt.DefaultMatrixWorldAutoUpdate=!0;const Ls=new R,Vo=new R,t_=new R,Ho=new R,Sc=new R,bc=new R,CA=new R,n_=new R,r_=new R,i_=new R;class Ai{constructor(e=new R,n=new R,r=new R){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Ls.subVectors(e,n),i.cross(Ls);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){Ls.subVectors(i,n),Vo.subVectors(r,n),t_.subVectors(e,n);const o=Ls.dot(Ls),a=Ls.dot(Vo),l=Ls.dot(t_),c=Vo.dot(Vo),d=Vo.dot(t_),u=o*c-a*a;if(u===0)return s.set(-2,-1,-1);const h=1/u,m=(c*l-a*d)*h,g=(o*d-a*l)*h;return s.set(1-m-g,g,m)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Ho),Ho.x>=0&&Ho.y>=0&&Ho.x+Ho.y<=1}static getUV(e,n,r,i,s,o,a,l){return this.getBarycoord(e,n,r,i,Ho),l.set(0,0),l.addScaledVector(s,Ho.x),l.addScaledVector(o,Ho.y),l.addScaledVector(a,Ho.z),l}static isFrontFacing(e,n,r,i){return Ls.subVectors(r,n),Vo.subVectors(e,n),Ls.cross(Vo).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ls.subVectors(this.c,this.b),Vo.subVectors(this.a,this.b),Ls.cross(Vo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ai.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Ai.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,s){return Ai.getUV(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return Ai.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ai.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let o,a;Sc.subVectors(i,r),bc.subVectors(s,r),n_.subVectors(e,r);const l=Sc.dot(n_),c=bc.dot(n_);if(l<=0&&c<=0)return n.copy(r);r_.subVectors(e,i);const d=Sc.dot(r_),u=bc.dot(r_);if(d>=0&&u<=d)return n.copy(i);const h=l*u-d*c;if(h<=0&&l>=0&&d<=0)return o=l/(l-d),n.copy(r).addScaledVector(Sc,o);i_.subVectors(e,s);const m=Sc.dot(i_),g=bc.dot(i_);if(g>=0&&m<=g)return n.copy(s);const x=m*c-l*g;if(x<=0&&c>=0&&g<=0)return a=c/(c-g),n.copy(r).addScaledVector(bc,a);const y=d*g-m*u;if(y<=0&&u-d>=0&&m-g>=0)return CA.subVectors(s,i),a=(u-d)/(u-d+(m-g)),n.copy(i).addScaledVector(CA,a);const v=1/(y+x+h);return o=x*v,a=h*v,n.copy(r).addScaledVector(Sc,o).addScaledVector(bc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let A8=0;class Er extends Ss{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:A8++}),this.uuid=Li(),this.name="",this.type="Material",this.blending=ll,this.side=pl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=HM,this.blendDst=GM,this.blendEquation=ru,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=vv,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=XM,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=wu,this.stencilZFail=wu,this.stencilZPass=wu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn("THREE.Material: '"+n+"' parameter is undefined.");continue}const i=this[n];if(i===void 0){console.warn("THREE."+this.type+": '"+n+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==ll&&(r.blending=this.blending),this.side!==pl&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class bl extends Er{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new We(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Dp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Xn=new R,Mg=new se;class vt{constructor(e,n,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r===!0,this.usage=sp,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)Mg.fromBufferAttribute(this,n),Mg.applyMatrix3(e),this.setXY(n,Mg.x,Mg.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Xn.fromBufferAttribute(this,n),Xn.applyMatrix3(e),this.setXYZ(n,Xn.x,Xn.y,Xn.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Xn.fromBufferAttribute(this,n),Xn.applyMatrix4(e),this.setXYZ(n,Xn.x,Xn.y,Xn.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Xn.fromBufferAttribute(this,n),Xn.applyNormalMatrix(e),this.setXYZ(n,Xn.x,Xn.y,Xn.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Xn.fromBufferAttribute(this,n),Xn.transformDirection(e),this.setXYZ(n,Xn.x,Xn.y,Xn.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=ea(n,this.array)),n}setX(e,n){return this.normalized&&(n=cn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=ea(n,this.array)),n}setY(e,n){return this.normalized&&(n=cn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=ea(n,this.array)),n}setZ(e,n){return this.normalized&&(n=cn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=ea(n,this.array)),n}setW(e,n){return this.normalized&&(n=cn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=cn(n,this.array),r=cn(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=cn(n,this.array),r=cn(r,this.array),i=cn(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=cn(n,this.array),r=cn(r,this.array),i=cn(i,this.array),s=cn(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==sp&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class C8 extends vt{constructor(e,n,r){super(new Int8Array(e),n,r)}}class P8 extends vt{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class L8 extends vt{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class O8 extends vt{constructor(e,n,r){super(new Int16Array(e),n,r)}}class JM extends vt{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class I8 extends vt{constructor(e,n,r){super(new Int32Array(e),n,r)}}class md extends vt{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class D8 extends vt{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}}class Ne extends vt{constructor(e,n,r){super(new Float32Array(e),n,r)}}class R8 extends vt{constructor(e,n,r){super(new Float64Array(e),n,r)}}let z8=0;const Qi=new nt,s_=new Rt,Mc=new R,bi=new Ni,Uh=new Ni,hr=new R;class tt extends Ss{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:z8++}),this.uuid=Li(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Nz(e)?md:JM)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new ir().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Qi.makeRotationFromQuaternion(e),this.applyMatrix4(Qi),this}rotateX(e){return Qi.makeRotationX(e),this.applyMatrix4(Qi),this}rotateY(e){return Qi.makeRotationY(e),this.applyMatrix4(Qi),this}rotateZ(e){return Qi.makeRotationZ(e),this.applyMatrix4(Qi),this}translate(e,n,r){return Qi.makeTranslation(e,n,r),this.applyMatrix4(Qi),this}scale(e,n,r){return Qi.makeScale(e,n,r),this.applyMatrix4(Qi),this}lookAt(e){return s_.lookAt(e),s_.updateMatrix(),this.applyMatrix4(s_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Mc).negate(),this.translate(Mc.x,Mc.y,Mc.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ne(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ni);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new R(-1/0,-1/0,-1/0),new R(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];bi.setFromBufferAttribute(s),this.morphTargetsRelative?(hr.addVectors(this.boundingBox.min,bi.min),this.boundingBox.expandByPoint(hr),hr.addVectors(this.boundingBox.max,bi.max),this.boundingBox.expandByPoint(hr)):(this.boundingBox.expandByPoint(bi.min),this.boundingBox.expandByPoint(bi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xs);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new R,1/0);return}if(e){const r=this.boundingSphere.center;if(bi.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];Uh.setFromBufferAttribute(a),this.morphTargetsRelative?(hr.addVectors(bi.min,Uh.min),bi.expandByPoint(hr),hr.addVectors(bi.max,Uh.max),bi.expandByPoint(hr)):(bi.expandByPoint(Uh.min),bi.expandByPoint(Uh.max))}bi.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)hr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(hr));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)hr.fromBufferAttribute(a,c),l&&(Mc.fromBufferAttribute(e,c),hr.add(Mc)),i=Math.max(i,r.distanceToSquared(hr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,s=n.normal.array,o=n.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new vt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],d=[];for(let L=0;L<a;L++)c[L]=new R,d[L]=new R;const u=new R,h=new R,m=new R,g=new se,x=new se,y=new se,v=new R,_=new R;function S(L,k,B){u.fromArray(i,L*3),h.fromArray(i,k*3),m.fromArray(i,B*3),g.fromArray(o,L*2),x.fromArray(o,k*2),y.fromArray(o,B*2),h.sub(u),m.sub(u),x.sub(g),y.sub(g);const G=1/(x.x*y.y-y.x*x.y);!isFinite(G)||(v.copy(h).multiplyScalar(y.y).addScaledVector(m,-x.y).multiplyScalar(G),_.copy(m).multiplyScalar(x.x).addScaledVector(h,-y.x).multiplyScalar(G),c[L].add(v),c[k].add(v),c[B].add(v),d[L].add(_),d[k].add(_),d[B].add(_))}let b=this.groups;b.length===0&&(b=[{start:0,count:r.length}]);for(let L=0,k=b.length;L<k;++L){const B=b[L],G=B.start,H=B.count;for(let Y=G,te=G+H;Y<te;Y+=3)S(r[Y+0],r[Y+1],r[Y+2])}const A=new R,E=new R,C=new R,T=new R;function O(L){C.fromArray(s,L*3),T.copy(C);const k=c[L];A.copy(k),A.sub(C.multiplyScalar(C.dot(k))).normalize(),E.crossVectors(T,k);const G=E.dot(d[L])<0?-1:1;l[L*4]=A.x,l[L*4+1]=A.y,l[L*4+2]=A.z,l[L*4+3]=G}for(let L=0,k=b.length;L<k;++L){const B=b[L],G=B.start,H=B.count;for(let Y=G,te=G+H;Y<te;Y+=3)O(r[Y+0]),O(r[Y+1]),O(r[Y+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new vt(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let h=0,m=r.count;h<m;h++)r.setXYZ(h,0,0,0);const i=new R,s=new R,o=new R,a=new R,l=new R,c=new R,d=new R,u=new R;if(e)for(let h=0,m=e.count;h<m;h+=3){const g=e.getX(h+0),x=e.getX(h+1),y=e.getX(h+2);i.fromBufferAttribute(n,g),s.fromBufferAttribute(n,x),o.fromBufferAttribute(n,y),d.subVectors(o,s),u.subVectors(i,s),d.cross(u),a.fromBufferAttribute(r,g),l.fromBufferAttribute(r,x),c.fromBufferAttribute(r,y),a.add(d),l.add(d),c.add(d),r.setXYZ(g,a.x,a.y,a.z),r.setXYZ(x,l.x,l.y,l.z),r.setXYZ(y,c.x,c.y,c.z)}else for(let h=0,m=n.count;h<m;h+=3)i.fromBufferAttribute(n,h+0),s.fromBufferAttribute(n,h+1),o.fromBufferAttribute(n,h+2),d.subVectors(o,s),u.subVectors(i,s),d.cross(u),r.setXYZ(h+0,d.x,d.y,d.z),r.setXYZ(h+1,d.x,d.y,d.z),r.setXYZ(h+2,d.x,d.y,d.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)hr.fromBufferAttribute(e,n),hr.normalize(),e.setXYZ(n,hr.x,hr.y,hr.z)}toNonIndexed(){function e(a,l){const c=a.array,d=a.itemSize,u=a.normalized,h=new c.constructor(l.length*d);let m=0,g=0;for(let x=0,y=l.length;x<y;x++){a.isInterleavedBufferAttribute?m=l[x]*a.data.stride+a.offset:m=l[x]*d;for(let v=0;v<d;v++)h[g++]=c[m++]}return new vt(h,d,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new tt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let d=0,u=c.length;d<u;d++){const h=c[d],m=e(h,r);l.push(m)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let u=0,h=c.length;u<h;u++){const m=c[u];d.push(m.toJSON(e.data))}d.length>0&&(i[l]=d,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const c in i){const d=i[c];this.setAttribute(c,d.clone(n))}const s=e.morphAttributes;for(const c in s){const d=[],u=s[c];for(let h=0,m=u.length;h<m;h++)d.push(u[h].clone(n));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,d=o.length;c<d;c++){const u=o[c];this.addGroup(u.start,u.count,u.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const PA=new nt,Ec=new Sl,o_=new xs,Ra=new R,za=new R,Na=new R,a_=new R,l_=new R,u_=new R,Eg=new R,Tg=new R,Ag=new R,Cg=new se,Pg=new se,Lg=new se,c_=new R,Og=new R;class Qn extends Rt{constructor(e=new tt,n=new bl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),o_.copy(r.boundingSphere),o_.applyMatrix4(s),e.ray.intersectsSphere(o_)===!1)||(PA.copy(s).invert(),Ec.copy(e.ray).applyMatrix4(PA),r.boundingBox!==null&&Ec.intersectsBox(r.boundingBox)===!1))return;let o;const a=r.index,l=r.attributes.position,c=r.morphAttributes.position,d=r.morphTargetsRelative,u=r.attributes.uv,h=r.attributes.uv2,m=r.groups,g=r.drawRange;if(a!==null)if(Array.isArray(i))for(let x=0,y=m.length;x<y;x++){const v=m[x],_=i[v.materialIndex],S=Math.max(v.start,g.start),b=Math.min(a.count,Math.min(v.start+v.count,g.start+g.count));for(let A=S,E=b;A<E;A+=3){const C=a.getX(A),T=a.getX(A+1),O=a.getX(A+2);o=Ig(this,_,e,Ec,l,c,d,u,h,C,T,O),o&&(o.faceIndex=Math.floor(A/3),o.face.materialIndex=v.materialIndex,n.push(o))}}else{const x=Math.max(0,g.start),y=Math.min(a.count,g.start+g.count);for(let v=x,_=y;v<_;v+=3){const S=a.getX(v),b=a.getX(v+1),A=a.getX(v+2);o=Ig(this,i,e,Ec,l,c,d,u,h,S,b,A),o&&(o.faceIndex=Math.floor(v/3),n.push(o))}}else if(l!==void 0)if(Array.isArray(i))for(let x=0,y=m.length;x<y;x++){const v=m[x],_=i[v.materialIndex],S=Math.max(v.start,g.start),b=Math.min(l.count,Math.min(v.start+v.count,g.start+g.count));for(let A=S,E=b;A<E;A+=3){const C=A,T=A+1,O=A+2;o=Ig(this,_,e,Ec,l,c,d,u,h,C,T,O),o&&(o.faceIndex=Math.floor(A/3),o.face.materialIndex=v.materialIndex,n.push(o))}}else{const x=Math.max(0,g.start),y=Math.min(l.count,g.start+g.count);for(let v=x,_=y;v<_;v+=3){const S=v,b=v+1,A=v+2;o=Ig(this,i,e,Ec,l,c,d,u,h,S,b,A),o&&(o.faceIndex=Math.floor(v/3),n.push(o))}}}}function N8(t,e,n,r,i,s,o,a){let l;if(e.side===pi?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side!==yo,a),l===null)return null;Og.copy(a),Og.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(Og);return c<n.near||c>n.far?null:{distance:c,point:Og.clone(),object:t}}function Ig(t,e,n,r,i,s,o,a,l,c,d,u){Ra.fromBufferAttribute(i,c),za.fromBufferAttribute(i,d),Na.fromBufferAttribute(i,u);const h=t.morphTargetInfluences;if(s&&h){Eg.set(0,0,0),Tg.set(0,0,0),Ag.set(0,0,0);for(let g=0,x=s.length;g<x;g++){const y=h[g],v=s[g];y!==0&&(a_.fromBufferAttribute(v,c),l_.fromBufferAttribute(v,d),u_.fromBufferAttribute(v,u),o?(Eg.addScaledVector(a_,y),Tg.addScaledVector(l_,y),Ag.addScaledVector(u_,y)):(Eg.addScaledVector(a_.sub(Ra),y),Tg.addScaledVector(l_.sub(za),y),Ag.addScaledVector(u_.sub(Na),y)))}Ra.add(Eg),za.add(Tg),Na.add(Ag)}t.isSkinnedMesh&&(t.boneTransform(c,Ra),t.boneTransform(d,za),t.boneTransform(u,Na));const m=N8(t,e,n,r,Ra,za,Na,c_);if(m){a&&(Cg.fromBufferAttribute(a,c),Pg.fromBufferAttribute(a,d),Lg.fromBufferAttribute(a,u),m.uv=Ai.getUV(c_,Ra,za,Na,Cg,Pg,Lg,new se)),l&&(Cg.fromBufferAttribute(l,c),Pg.fromBufferAttribute(l,d),Lg.fromBufferAttribute(l,u),m.uv2=Ai.getUV(c_,Ra,za,Na,Cg,Pg,Lg,new se));const g={a:c,b:d,c:u,normal:new R,materialIndex:0};Ai.getNormal(Ra,za,Na,g.normal),m.face=g}return m}class _s extends tt{constructor(e=1,n=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],d=[],u=[];let h=0,m=0;g("z","y","x",-1,-1,r,n,e,o,s,0),g("z","y","x",1,-1,r,n,-e,o,s,1),g("x","z","y",1,1,e,r,n,i,o,2),g("x","z","y",1,-1,e,r,-n,i,o,3),g("x","y","z",1,-1,e,n,r,i,s,4),g("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Ne(c,3)),this.setAttribute("normal",new Ne(d,3)),this.setAttribute("uv",new Ne(u,2));function g(x,y,v,_,S,b,A,E,C,T,O){const L=b/C,k=A/T,B=b/2,G=A/2,H=E/2,Y=C+1,te=T+1;let Z=0,D=0;const N=new R;for(let z=0;z<te;z++){const U=z*k-G;for(let V=0;V<Y;V++){const X=V*L-B;N[x]=X*_,N[y]=U*S,N[v]=H,c.push(N.x,N.y,N.z),N[x]=0,N[y]=0,N[v]=E>0?1:-1,d.push(N.x,N.y,N.z),u.push(V/C),u.push(1-z/T),Z+=1}}for(let z=0;z<T;z++)for(let U=0;U<C;U++){const V=h+U+Y*z,X=h+U+Y*(z+1),J=h+(U+1)+Y*(z+1),ee=h+(U+1)+Y*z;l.push(V,X,ee),l.push(X,J,ee),D+=6}a.addGroup(m,D,O),m+=D,h+=Z}}static fromJSON(e){return new _s(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Id(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function $r(t){const e={};for(let n=0;n<t.length;n++){const r=Id(t[n]);for(const i in r)e[i]=r[i]}return e}function k8(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}const qu={clone:Id,merge:$r};var B8=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,F8=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class $s extends Er{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=B8,this.fragmentShader=F8,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Id(e.uniforms),this.uniformsGroups=k8(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?n.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[i]={type:"m4",value:o.toArray()}:n.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class Xu extends Rt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new nt,this.projectionMatrix=new nt,this.projectionMatrixInverse=new nt}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class jn extends Xu{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=op*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Su*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return op*2*Math.atan(Math.tan(Su*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Su*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,n-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Tc=90,Ac=1;class Bz extends Rt{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r;const i=new jn(Tc,Ac,e,n);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new R(1,0,0)),this.add(i);const s=new jn(Tc,Ac,e,n);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new R(-1,0,0)),this.add(s);const o=new jn(Tc,Ac,e,n);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new R(0,1,0)),this.add(o);const a=new jn(Tc,Ac,e,n);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new R(0,-1,0)),this.add(a);const l=new jn(Tc,Ac,e,n);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new R(0,0,1)),this.add(l);const c=new jn(Tc,Ac,e,n);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new R(0,0,-1)),this.add(c)}update(e,n){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,l,c]=this.children,d=e.getRenderTarget(),u=e.toneMapping,h=e.xr.enabled;e.toneMapping=Vs,e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(n,i),e.setRenderTarget(r,1),e.render(n,s),e.setRenderTarget(r,2),e.render(n,o),e.setRenderTarget(r,3),e.render(n,a),e.setRenderTarget(r,4),e.render(n,l),r.texture.generateMipmaps=m,e.setRenderTarget(r,5),e.render(n,c),e.setRenderTarget(d),e.toneMapping=u,e.xr.enabled=h,r.texture.needsPMREMUpdate=!0}}class jd extends Bn{constructor(e,n,r,i,s,o,a,l,c,d){e=e!==void 0?e:[],n=n!==void 0?n:ha,super(e,n,r,i,s,o,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Fz extends Di{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new jd(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Tn}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.encoding=n.encoding,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new _s(5,5,5),s=new $s({name:"CubemapFromEquirect",uniforms:Id(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:pi,blending:ia});s.uniforms.tEquirect.value=n;const o=new Qn(i,s),a=n.minFilter;return n.minFilter===$u&&(n.minFilter=Tn),new Bz(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,i);e.setRenderTarget(s)}}const d_=new R,U8=new R,V8=new ir;class qo{constructor(e=new R(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=d_.subVectors(r,n).cross(U8.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,n){const r=e.delta(d_),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(r).multiplyScalar(s).add(e.start)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||V8.getNormalMatrix(e),i=this.coplanarPoint(d_).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Cc=new xs,Dg=new R;class Ay{constructor(e=new qo,n=new qo,r=new qo,i=new qo,s=new qo,o=new qo){this.planes=[e,n,r,i,s,o]}set(e,n,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const n=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],c=r[5],d=r[6],u=r[7],h=r[8],m=r[9],g=r[10],x=r[11],y=r[12],v=r[13],_=r[14],S=r[15];return n[0].setComponents(a-i,u-l,x-h,S-y).normalize(),n[1].setComponents(a+i,u+l,x+h,S+y).normalize(),n[2].setComponents(a+s,u+c,x+m,S+v).normalize(),n[3].setComponents(a-s,u-c,x-m,S-v).normalize(),n[4].setComponents(a-o,u-d,x-g,S-_).normalize(),n[5].setComponents(a+o,u+d,x+g,S+_).normalize(),this}intersectsObject(e){const n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),Cc.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Cc)}intersectsSprite(e){return Cc.center.set(0,0,0),Cc.radius=.7071067811865476,Cc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Cc)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(Dg.x=i.normal.x>0?e.max.x:e.min.x,Dg.y=i.normal.y>0?e.max.y:e.min.y,Dg.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Dg)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Uz(){let t=null,e=!1,n=null,r=null;function i(s,o){n(s,o),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function H8(t,e){const n=e.isWebGL2,r=new WeakMap;function i(c,d){const u=c.array,h=c.usage,m=t.createBuffer();t.bindBuffer(d,m),t.bufferData(d,u,h),c.onUploadCallback();let g;if(u instanceof Float32Array)g=5126;else if(u instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)g=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=5123;else if(u instanceof Int16Array)g=5122;else if(u instanceof Uint32Array)g=5125;else if(u instanceof Int32Array)g=5124;else if(u instanceof Int8Array)g=5120;else if(u instanceof Uint8Array)g=5121;else if(u instanceof Uint8ClampedArray)g=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:m,type:g,bytesPerElement:u.BYTES_PER_ELEMENT,version:c.version}}function s(c,d,u){const h=d.array,m=d.updateRange;t.bindBuffer(u,c),m.count===-1?t.bufferSubData(u,0,h):(n?t.bufferSubData(u,m.offset*h.BYTES_PER_ELEMENT,h,m.offset,m.count):t.bufferSubData(u,m.offset*h.BYTES_PER_ELEMENT,h.subarray(m.offset,m.offset+m.count)),m.count=-1)}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);d&&(t.deleteBuffer(d.buffer),r.delete(c))}function l(c,d){if(c.isGLBufferAttribute){const h=r.get(c);(!h||h.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u===void 0?r.set(c,i(c,d)):u.version<c.version&&(s(u.buffer,c,d),u.version=c.version)}return{get:o,remove:a,update:l}}class Ml extends tt{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,o=n/2,a=Math.floor(r),l=Math.floor(i),c=a+1,d=l+1,u=e/a,h=n/l,m=[],g=[],x=[],y=[];for(let v=0;v<d;v++){const _=v*h-o;for(let S=0;S<c;S++){const b=S*u-s;g.push(b,-_,0),x.push(0,0,1),y.push(S/a),y.push(1-v/l)}}for(let v=0;v<l;v++)for(let _=0;_<a;_++){const S=_+c*v,b=_+c*(v+1),A=_+1+c*(v+1),E=_+1+c*v;m.push(S,b,E),m.push(b,A,E)}this.setIndex(m),this.setAttribute("position",new Ne(g,3)),this.setAttribute("normal",new Ne(x,3)),this.setAttribute("uv",new Ne(y,2))}static fromJSON(e){return new Ml(e.width,e.height,e.widthSegments,e.heightSegments)}}var G8=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,W8=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,j8=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,$8=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,q8=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,X8=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Y8="vec3 transformed = vec3( position );",Z8=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,J8=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Q8=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,K8=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,eH=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,tH=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,nH=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,rH=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,iH=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,sH=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,oH=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,aH=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,lH=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,uH=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,cH=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,dH=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,hH=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,fH=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,pH=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,mH="gl_FragColor = linearToOutputTexel( gl_FragColor );",gH=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,vH=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,yH=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,xH=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,_H=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,wH=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,SH=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,bH=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,MH=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,EH=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,TH=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,AH=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,CH=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,PH=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,LH=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert
#define Material_LightProbeLOD( material )	(0)`,OH=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,IH=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,DH=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,RH=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,zH=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,NH=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,kH=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,BH=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,FH=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,UH=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,VH=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,HH=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,GH=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,WH=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,jH=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,$H=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,qH=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,XH=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,YH=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ZH=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,JH=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,QH=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,KH=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,eG=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,tG=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,nG=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,rG=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,iG=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,sG=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,oG=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,aG=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,lG=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,uG=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,cG=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,dG=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,hG=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,fG=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,pG=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,mG=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,gG=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,vG=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,yG=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,xG=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,_G=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,wG=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,SG=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,bG=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,MG=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,EG=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,TG=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,AG=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,CG=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,PG=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,LG=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,OG=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,IG=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,DG=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,RG=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,zG=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,NG=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,kG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,BG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,FG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,UG=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const VG=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,HG=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,GG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,WG=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,jG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,$G=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,qG=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,XG=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,YG=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,ZG=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,JG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,QG=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,KG=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,eW=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,tW=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,nW=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rW=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,iW=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sW=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,oW=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aW=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,lW=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,uW=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cW=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dW=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,hW=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fW=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pW=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mW=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,gW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vW=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yW=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,xW=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,_W=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Ct={alphamap_fragment:G8,alphamap_pars_fragment:W8,alphatest_fragment:j8,alphatest_pars_fragment:$8,aomap_fragment:q8,aomap_pars_fragment:X8,begin_vertex:Y8,beginnormal_vertex:Z8,bsdfs:J8,iridescence_fragment:Q8,bumpmap_pars_fragment:K8,clipping_planes_fragment:eH,clipping_planes_pars_fragment:tH,clipping_planes_pars_vertex:nH,clipping_planes_vertex:rH,color_fragment:iH,color_pars_fragment:sH,color_pars_vertex:oH,color_vertex:aH,common:lH,cube_uv_reflection_fragment:uH,defaultnormal_vertex:cH,displacementmap_pars_vertex:dH,displacementmap_vertex:hH,emissivemap_fragment:fH,emissivemap_pars_fragment:pH,encodings_fragment:mH,encodings_pars_fragment:gH,envmap_fragment:vH,envmap_common_pars_fragment:yH,envmap_pars_fragment:xH,envmap_pars_vertex:_H,envmap_physical_pars_fragment:IH,envmap_vertex:wH,fog_vertex:SH,fog_pars_vertex:bH,fog_fragment:MH,fog_pars_fragment:EH,gradientmap_pars_fragment:TH,lightmap_fragment:AH,lightmap_pars_fragment:CH,lights_lambert_fragment:PH,lights_lambert_pars_fragment:LH,lights_pars_begin:OH,lights_toon_fragment:DH,lights_toon_pars_fragment:RH,lights_phong_fragment:zH,lights_phong_pars_fragment:NH,lights_physical_fragment:kH,lights_physical_pars_fragment:BH,lights_fragment_begin:FH,lights_fragment_maps:UH,lights_fragment_end:VH,logdepthbuf_fragment:HH,logdepthbuf_pars_fragment:GH,logdepthbuf_pars_vertex:WH,logdepthbuf_vertex:jH,map_fragment:$H,map_pars_fragment:qH,map_particle_fragment:XH,map_particle_pars_fragment:YH,metalnessmap_fragment:ZH,metalnessmap_pars_fragment:JH,morphcolor_vertex:QH,morphnormal_vertex:KH,morphtarget_pars_vertex:eG,morphtarget_vertex:tG,normal_fragment_begin:nG,normal_fragment_maps:rG,normal_pars_fragment:iG,normal_pars_vertex:sG,normal_vertex:oG,normalmap_pars_fragment:aG,clearcoat_normal_fragment_begin:lG,clearcoat_normal_fragment_maps:uG,clearcoat_pars_fragment:cG,iridescence_pars_fragment:dG,output_fragment:hG,packing:fG,premultiplied_alpha_fragment:pG,project_vertex:mG,dithering_fragment:gG,dithering_pars_fragment:vG,roughnessmap_fragment:yG,roughnessmap_pars_fragment:xG,shadowmap_pars_fragment:_G,shadowmap_pars_vertex:wG,shadowmap_vertex:SG,shadowmask_pars_fragment:bG,skinbase_vertex:MG,skinning_pars_vertex:EG,skinning_vertex:TG,skinnormal_vertex:AG,specularmap_fragment:CG,specularmap_pars_fragment:PG,tonemapping_fragment:LG,tonemapping_pars_fragment:OG,transmission_fragment:IG,transmission_pars_fragment:DG,uv_pars_fragment:RG,uv_pars_vertex:zG,uv_vertex:NG,uv2_pars_fragment:kG,uv2_pars_vertex:BG,uv2_vertex:FG,worldpos_vertex:UG,background_vert:VG,background_frag:HG,backgroundCube_vert:GG,backgroundCube_frag:WG,cube_vert:jG,cube_frag:$G,depth_vert:qG,depth_frag:XG,distanceRGBA_vert:YG,distanceRGBA_frag:ZG,equirect_vert:JG,equirect_frag:QG,linedashed_vert:KG,linedashed_frag:eW,meshbasic_vert:tW,meshbasic_frag:nW,meshlambert_vert:rW,meshlambert_frag:iW,meshmatcap_vert:sW,meshmatcap_frag:oW,meshnormal_vert:aW,meshnormal_frag:lW,meshphong_vert:uW,meshphong_frag:cW,meshphysical_vert:dW,meshphysical_frag:hW,meshtoon_vert:fW,meshtoon_frag:pW,points_vert:mW,points_frag:gW,shadow_vert:vW,shadow_frag:yW,sprite_vert:xW,sprite_frag:_W},Ue={common:{diffuse:{value:new We(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ir},uv2Transform:{value:new ir},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new se(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new We(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new We(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ir}},sprite:{diffuse:{value:new We(16777215)},opacity:{value:1},center:{value:new se(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ir}}},ls={basic:{uniforms:$r([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.fog]),vertexShader:Ct.meshbasic_vert,fragmentShader:Ct.meshbasic_frag},lambert:{uniforms:$r([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,Ue.lights,{emissive:{value:new We(0)}}]),vertexShader:Ct.meshlambert_vert,fragmentShader:Ct.meshlambert_frag},phong:{uniforms:$r([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,Ue.lights,{emissive:{value:new We(0)},specular:{value:new We(1118481)},shininess:{value:30}}]),vertexShader:Ct.meshphong_vert,fragmentShader:Ct.meshphong_frag},standard:{uniforms:$r([Ue.common,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.roughnessmap,Ue.metalnessmap,Ue.fog,Ue.lights,{emissive:{value:new We(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ct.meshphysical_vert,fragmentShader:Ct.meshphysical_frag},toon:{uniforms:$r([Ue.common,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.gradientmap,Ue.fog,Ue.lights,{emissive:{value:new We(0)}}]),vertexShader:Ct.meshtoon_vert,fragmentShader:Ct.meshtoon_frag},matcap:{uniforms:$r([Ue.common,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,{matcap:{value:null}}]),vertexShader:Ct.meshmatcap_vert,fragmentShader:Ct.meshmatcap_frag},points:{uniforms:$r([Ue.points,Ue.fog]),vertexShader:Ct.points_vert,fragmentShader:Ct.points_frag},dashed:{uniforms:$r([Ue.common,Ue.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ct.linedashed_vert,fragmentShader:Ct.linedashed_frag},depth:{uniforms:$r([Ue.common,Ue.displacementmap]),vertexShader:Ct.depth_vert,fragmentShader:Ct.depth_frag},normal:{uniforms:$r([Ue.common,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,{opacity:{value:1}}]),vertexShader:Ct.meshnormal_vert,fragmentShader:Ct.meshnormal_frag},sprite:{uniforms:$r([Ue.sprite,Ue.fog]),vertexShader:Ct.sprite_vert,fragmentShader:Ct.sprite_frag},background:{uniforms:{uvTransform:{value:new ir},t2D:{value:null}},vertexShader:Ct.background_vert,fragmentShader:Ct.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:Ct.backgroundCube_vert,fragmentShader:Ct.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ct.cube_vert,fragmentShader:Ct.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ct.equirect_vert,fragmentShader:Ct.equirect_frag},distanceRGBA:{uniforms:$r([Ue.common,Ue.displacementmap,{referencePosition:{value:new R},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ct.distanceRGBA_vert,fragmentShader:Ct.distanceRGBA_frag},shadow:{uniforms:$r([Ue.lights,Ue.fog,{color:{value:new We(0)},opacity:{value:1}}]),vertexShader:Ct.shadow_vert,fragmentShader:Ct.shadow_frag}};ls.physical={uniforms:$r([ls.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new se(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new We(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new se},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new We(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new We(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Ct.meshphysical_vert,fragmentShader:Ct.meshphysical_frag};function wW(t,e,n,r,i,s,o){const a=new We(0);let l=s===!0?0:1,c,d,u=null,h=0,m=null;function g(y,v){let _=!1,S=v.isScene===!0?v.background:null;S&&S.isTexture&&(S=(v.backgroundBlurriness>0?n:e).get(S));const b=t.xr,A=b.getSession&&b.getSession();A&&A.environmentBlendMode==="additive"&&(S=null),S===null?x(a,l):S&&S.isColor&&(x(S,1),_=!0),(t.autoClear||_)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),S&&(S.isCubeTexture||S.mapping===ju)?(d===void 0&&(d=new Qn(new _s(1,1,1),new $s({name:"BackgroundCubeMaterial",uniforms:Id(ls.backgroundCube.uniforms),vertexShader:ls.backgroundCube.vertexShader,fragmentShader:ls.backgroundCube.fragmentShader,side:pi,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(E,C,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(d)),d.material.uniforms.envMap.value=S,d.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,(u!==S||h!==S.version||m!==t.toneMapping)&&(d.material.needsUpdate=!0,u=S,h=S.version,m=t.toneMapping),d.layers.enableAll(),y.unshift(d,d.geometry,d.material,0,0,null)):S&&S.isTexture&&(c===void 0&&(c=new Qn(new Ml(2,2),new $s({name:"BackgroundMaterial",uniforms:Id(ls.background.uniforms),vertexShader:ls.background.vertexShader,fragmentShader:ls.background.fragmentShader,side:pl,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=S,S.matrixAutoUpdate===!0&&S.updateMatrix(),c.material.uniforms.uvTransform.value.copy(S.matrix),(u!==S||h!==S.version||m!==t.toneMapping)&&(c.material.needsUpdate=!0,u=S,h=S.version,m=t.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))}function x(y,v){r.buffers.color.setClear(y.r,y.g,y.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(y,v=1){a.set(y),l=v,x(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,x(a,l)},render:g}}function SW(t,e,n,r){const i=t.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=y(null);let c=l,d=!1;function u(H,Y,te,Z,D){let N=!1;if(o){const z=x(Z,te,Y);c!==z&&(c=z,m(c.object)),N=v(H,Z,te,D),N&&_(H,Z,te,D)}else{const z=Y.wireframe===!0;(c.geometry!==Z.id||c.program!==te.id||c.wireframe!==z)&&(c.geometry=Z.id,c.program=te.id,c.wireframe=z,N=!0)}D!==null&&n.update(D,34963),(N||d)&&(d=!1,T(H,Y,te,Z),D!==null&&t.bindBuffer(34963,n.get(D).buffer))}function h(){return r.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function m(H){return r.isWebGL2?t.bindVertexArray(H):s.bindVertexArrayOES(H)}function g(H){return r.isWebGL2?t.deleteVertexArray(H):s.deleteVertexArrayOES(H)}function x(H,Y,te){const Z=te.wireframe===!0;let D=a[H.id];D===void 0&&(D={},a[H.id]=D);let N=D[Y.id];N===void 0&&(N={},D[Y.id]=N);let z=N[Z];return z===void 0&&(z=y(h()),N[Z]=z),z}function y(H){const Y=[],te=[],Z=[];for(let D=0;D<i;D++)Y[D]=0,te[D]=0,Z[D]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:te,attributeDivisors:Z,object:H,attributes:{},index:null}}function v(H,Y,te,Z){const D=c.attributes,N=Y.attributes;let z=0;const U=te.getAttributes();for(const V in U)if(U[V].location>=0){const J=D[V];let ee=N[V];if(ee===void 0&&(V==="instanceMatrix"&&H.instanceMatrix&&(ee=H.instanceMatrix),V==="instanceColor"&&H.instanceColor&&(ee=H.instanceColor)),J===void 0||J.attribute!==ee||ee&&J.data!==ee.data)return!0;z++}return c.attributesNum!==z||c.index!==Z}function _(H,Y,te,Z){const D={},N=Y.attributes;let z=0;const U=te.getAttributes();for(const V in U)if(U[V].location>=0){let J=N[V];J===void 0&&(V==="instanceMatrix"&&H.instanceMatrix&&(J=H.instanceMatrix),V==="instanceColor"&&H.instanceColor&&(J=H.instanceColor));const ee={};ee.attribute=J,J&&J.data&&(ee.data=J.data),D[V]=ee,z++}c.attributes=D,c.attributesNum=z,c.index=Z}function S(){const H=c.newAttributes;for(let Y=0,te=H.length;Y<te;Y++)H[Y]=0}function b(H){A(H,0)}function A(H,Y){const te=c.newAttributes,Z=c.enabledAttributes,D=c.attributeDivisors;te[H]=1,Z[H]===0&&(t.enableVertexAttribArray(H),Z[H]=1),D[H]!==Y&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](H,Y),D[H]=Y)}function E(){const H=c.newAttributes,Y=c.enabledAttributes;for(let te=0,Z=Y.length;te<Z;te++)Y[te]!==H[te]&&(t.disableVertexAttribArray(te),Y[te]=0)}function C(H,Y,te,Z,D,N){r.isWebGL2===!0&&(te===5124||te===5125)?t.vertexAttribIPointer(H,Y,te,D,N):t.vertexAttribPointer(H,Y,te,Z,D,N)}function T(H,Y,te,Z){if(r.isWebGL2===!1&&(H.isInstancedMesh||Z.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const D=Z.attributes,N=te.getAttributes(),z=Y.defaultAttributeValues;for(const U in N){const V=N[U];if(V.location>=0){let X=D[U];if(X===void 0&&(U==="instanceMatrix"&&H.instanceMatrix&&(X=H.instanceMatrix),U==="instanceColor"&&H.instanceColor&&(X=H.instanceColor)),X!==void 0){const J=X.normalized,ee=X.itemSize,q=n.get(X);if(q===void 0)continue;const re=q.buffer,ie=q.type,K=q.bytesPerElement;if(X.isInterleavedBufferAttribute){const oe=X.data,ye=oe.stride,ne=X.offset;if(oe.isInstancedInterleavedBuffer){for(let Q=0;Q<V.locationSize;Q++)A(V.location+Q,oe.meshPerAttribute);H.isInstancedMesh!==!0&&Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=oe.meshPerAttribute*oe.count)}else for(let Q=0;Q<V.locationSize;Q++)b(V.location+Q);t.bindBuffer(34962,re);for(let Q=0;Q<V.locationSize;Q++)C(V.location+Q,ee/V.locationSize,ie,J,ye*K,(ne+ee/V.locationSize*Q)*K)}else{if(X.isInstancedBufferAttribute){for(let oe=0;oe<V.locationSize;oe++)A(V.location+oe,X.meshPerAttribute);H.isInstancedMesh!==!0&&Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=X.meshPerAttribute*X.count)}else for(let oe=0;oe<V.locationSize;oe++)b(V.location+oe);t.bindBuffer(34962,re);for(let oe=0;oe<V.locationSize;oe++)C(V.location+oe,ee/V.locationSize,ie,J,ee*K,ee/V.locationSize*oe*K)}}else if(z!==void 0){const J=z[U];if(J!==void 0)switch(J.length){case 2:t.vertexAttrib2fv(V.location,J);break;case 3:t.vertexAttrib3fv(V.location,J);break;case 4:t.vertexAttrib4fv(V.location,J);break;default:t.vertexAttrib1fv(V.location,J)}}}}E()}function O(){B();for(const H in a){const Y=a[H];for(const te in Y){const Z=Y[te];for(const D in Z)g(Z[D].object),delete Z[D];delete Y[te]}delete a[H]}}function L(H){if(a[H.id]===void 0)return;const Y=a[H.id];for(const te in Y){const Z=Y[te];for(const D in Z)g(Z[D].object),delete Z[D];delete Y[te]}delete a[H.id]}function k(H){for(const Y in a){const te=a[Y];if(te[H.id]===void 0)continue;const Z=te[H.id];for(const D in Z)g(Z[D].object),delete Z[D];delete te[H.id]}}function B(){G(),d=!0,c!==l&&(c=l,m(c.object))}function G(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:B,resetDefaultState:G,dispose:O,releaseStatesOfGeometry:L,releaseStatesOfProgram:k,initAttributes:S,enableAttribute:b,disableUnusedAttributes:E}}function bW(t,e,n,r){const i=r.isWebGL2;let s;function o(c){s=c}function a(c,d){t.drawArrays(s,c,d),n.update(d,s,1)}function l(c,d,u){if(u===0)return;let h,m;if(i)h=t,m="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[m](s,c,d,u),n.update(d,s,u)}this.setMode=o,this.render=a,this.renderInstances=l}function MW(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const C=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(C){if(C==="highp"){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";C="mediump"}return C==="mediump"&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&t instanceof WebGL2ComputeRenderingContext;let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),d=n.logarithmicDepthBuffer===!0,u=t.getParameter(34930),h=t.getParameter(35660),m=t.getParameter(3379),g=t.getParameter(34076),x=t.getParameter(34921),y=t.getParameter(36347),v=t.getParameter(36348),_=t.getParameter(36349),S=h>0,b=o||e.has("OES_texture_float"),A=S&&b,E=o?t.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:u,maxVertexTextures:h,maxTextureSize:m,maxCubemapSize:g,maxAttributes:x,maxVertexUniforms:y,maxVaryings:v,maxFragmentUniforms:_,vertexTextures:S,floatFragmentTextures:b,floatVertexTextures:A,maxSamples:E}}function EW(t){const e=this;let n=null,r=0,i=!1,s=!1;const o=new qo,a=new ir,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,h,m){const g=u.length!==0||h||r!==0||i;return i=h,n=d(u,m,0),r=u.length,g},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1,c()},this.setState=function(u,h,m){const g=u.clippingPlanes,x=u.clipIntersection,y=u.clipShadows,v=t.get(u);if(!i||g===null||g.length===0||s&&!y)s?d(null):c();else{const _=s?0:r,S=_*4;let b=v.clippingState||null;l.value=b,b=d(g,h,S,m);for(let A=0;A!==S;++A)b[A]=n[A];v.clippingState=b,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function d(u,h,m,g){const x=u!==null?u.length:0;let y=null;if(x!==0){if(y=l.value,g!==!0||y===null){const v=m+x*4,_=h.matrixWorldInverse;a.getNormalMatrix(_),(y===null||y.length<v)&&(y=new Float32Array(v));for(let S=0,b=m;S!==x;++S,b+=4)o.copy(u[S]).applyMatrix4(_,a),o.normal.toArray(y,b),y[b+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,y}}function TW(t){let e=new WeakMap;function n(o,a){return a===Qf?o.mapping=ha:a===Kf&&(o.mapping=fa),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Qf||a===Kf)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new Fz(l.height/2);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",i),n(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class El extends Xu{constructor(e=-1,n=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const id=4,LA=[.125,.215,.35,.446,.526,.582],iu=20,h_=new El,OA=new We;let f_=null;const Kl=(1+Math.sqrt(5))/2,Pc=1/Kl,IA=[new R(1,1,1),new R(-1,1,1),new R(1,1,-1),new R(-1,1,-1),new R(0,Kl,Pc),new R(0,Kl,-Pc),new R(Pc,0,Kl),new R(-Pc,0,Kl),new R(Kl,Pc,0),new R(-Kl,Pc,0)];class BS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){f_=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=zA(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=RA(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(f_),e.scissorTest=!1,Rg(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===ha||e.mapping===fa?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),f_=this._renderer.getRenderTarget();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Tn,minFilter:Tn,generateMipmaps:!1,type:zu,format:Ti,encoding:ys,depthBuffer:!1},i=DA(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=DA(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=AW(s)),this._blurMaterial=CW(s,e,n)}return i}_compileMaterial(e){const n=new Qn(this._lodPlanes[0],e);this._renderer.compile(n,h_)}_sceneToCubeUV(e,n,r,i){const a=new jn(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,u=d.autoClear,h=d.toneMapping;d.getClearColor(OA),d.toneMapping=Vs,d.autoClear=!1;const m=new bl({name:"PMREM.Background",side:pi,depthWrite:!1,depthTest:!1}),g=new Qn(new _s,m);let x=!1;const y=e.background;y?y.isColor&&(m.color.copy(y),e.background=null,x=!0):(m.color.copy(OA),x=!0);for(let v=0;v<6;v++){const _=v%3;_===0?(a.up.set(0,l[v],0),a.lookAt(c[v],0,0)):_===1?(a.up.set(0,0,l[v]),a.lookAt(0,c[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,c[v]));const S=this._cubeSize;Rg(i,_*S,v>2?S:0,S,S),d.setRenderTarget(i),x&&d.render(g,a),d.render(e,a)}g.geometry.dispose(),g.material.dispose(),d.toneMapping=h,d.autoClear=u,e.background=y}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===ha||e.mapping===fa;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=zA()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=RA());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Qn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Rg(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,h_)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=IA[(i-1)%IA.length];this._blur(e,i-1,i,s,o)}n.autoClear=r}_blur(e,n,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,u=new Qn(this._lodPlanes[i],c),h=c.uniforms,m=this._sizeLods[r]-1,g=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*iu-1),x=s/g,y=isFinite(s)?1+Math.floor(d*x):iu;y>iu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${iu}`);const v=[];let _=0;for(let C=0;C<iu;++C){const T=C/x,O=Math.exp(-T*T/2);v.push(O),C===0?_+=O:C<y&&(_+=2*O)}for(let C=0;C<v.length;C++)v[C]=v[C]/_;h.envMap.value=e.texture,h.samples.value=y,h.weights.value=v,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:S}=this;h.dTheta.value=g,h.mipInt.value=S-r;const b=this._sizeLods[i],A=3*b*(i>S-id?i-S+id:0),E=4*(this._cubeSize-b);Rg(n,A,E,3*b,2*b),l.setRenderTarget(n),l.render(u,h_)}}function AW(t){const e=[],n=[],r=[];let i=t;const s=t-id+1+LA.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);n.push(a);let l=1/a;o>t-id?l=LA[o-t+id-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),d=-c,u=1+c,h=[d,d,u,d,u,u,d,d,u,u,d,u],m=6,g=6,x=3,y=2,v=1,_=new Float32Array(x*g*m),S=new Float32Array(y*g*m),b=new Float32Array(v*g*m);for(let E=0;E<m;E++){const C=E%3*2/3-1,T=E>2?0:-1,O=[C,T,0,C+2/3,T,0,C+2/3,T+1,0,C,T,0,C+2/3,T+1,0,C,T+1,0];_.set(O,x*g*E),S.set(h,y*g*E);const L=[E,E,E,E,E,E];b.set(L,v*g*E)}const A=new tt;A.setAttribute("position",new vt(_,x)),A.setAttribute("uv",new vt(S,y)),A.setAttribute("faceIndex",new vt(b,v)),e.push(A),i>id&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function DA(t,e,n){const r=new Di(t,e,n);return r.texture.mapping=ju,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Rg(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function CW(t,e,n){const r=new Float32Array(iu),i=new R(0,1,0);return new $s({name:"SphericalGaussianBlur",defines:{n:iu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:QM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ia,depthTest:!1,depthWrite:!1})}function RA(){return new $s({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:QM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ia,depthTest:!1,depthWrite:!1})}function zA(){return new $s({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:QM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ia,depthTest:!1,depthWrite:!1})}function QM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function PW(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===Qf||l===Kf,d=l===ha||l===fa;if(c||d)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let u=e.get(a);return n===null&&(n=new BS(t)),u=c?n.fromEquirectangular(a,u):n.fromCubemap(a,u),e.set(a,u),u.texture}else{if(e.has(a))return e.get(a).texture;{const u=a.image;if(c&&u&&u.height>0||d&&u&&i(u)){n===null&&(n=new BS(t));const h=c?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}else return null}}}return a}function i(a){let l=0;const c=6;for(let d=0;d<c;d++)a[d]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function LW(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function OW(t,e,n,r){const i={},s=new WeakMap;function o(u){const h=u.target;h.index!==null&&e.remove(h.index);for(const g in h.attributes)e.remove(h.attributes[g]);h.removeEventListener("dispose",o),delete i[h.id];const m=s.get(h);m&&(e.remove(m),s.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function a(u,h){return i[h.id]===!0||(h.addEventListener("dispose",o),i[h.id]=!0,n.memory.geometries++),h}function l(u){const h=u.attributes;for(const g in h)e.update(h[g],34962);const m=u.morphAttributes;for(const g in m){const x=m[g];for(let y=0,v=x.length;y<v;y++)e.update(x[y],34962)}}function c(u){const h=[],m=u.index,g=u.attributes.position;let x=0;if(m!==null){const _=m.array;x=m.version;for(let S=0,b=_.length;S<b;S+=3){const A=_[S+0],E=_[S+1],C=_[S+2];h.push(A,E,E,C,C,A)}}else{const _=g.array;x=g.version;for(let S=0,b=_.length/3-1;S<b;S+=3){const A=S+0,E=S+1,C=S+2;h.push(A,E,E,C,C,A)}}const y=new(Nz(h)?md:JM)(h,1);y.version=x;const v=s.get(u);v&&e.remove(v),s.set(u,y)}function d(u){const h=s.get(u);if(h){const m=u.index;m!==null&&h.version<m.version&&c(u)}else c(u);return s.get(u)}return{get:a,update:l,getWireframeAttribute:d}}function IW(t,e,n,r){const i=r.isWebGL2;let s;function o(h){s=h}let a,l;function c(h){a=h.type,l=h.bytesPerElement}function d(h,m){t.drawElements(s,m,a,h*l),n.update(m,s,1)}function u(h,m,g){if(g===0)return;let x,y;if(i)x=t,y="drawElementsInstanced";else if(x=e.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[y](s,m,a,h*l,g),n.update(m,s,g)}this.setMode=o,this.setIndex=c,this.render=d,this.renderInstances=u}function DW(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(n.calls++,o){case 4:n.triangles+=a*(s/3);break;case 1:n.lines+=a*(s/2);break;case 3:n.lines+=a*(s-1);break;case 2:n.lines+=a*s;break;case 0:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function RW(t,e){return t[0]-e[0]}function zW(t,e){return Math.abs(e[1])-Math.abs(t[1])}function NW(t,e,n){const r={},i=new Float32Array(8),s=new WeakMap,o=new St,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,d,u,h){const m=c.morphTargetInfluences;if(e.isWebGL2===!0){const g=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,x=g!==void 0?g.length:0;let y=s.get(d);if(y===void 0||y.count!==x){let Y=function(){G.dispose(),s.delete(d),d.removeEventListener("dispose",Y)};y!==void 0&&y.texture.dispose();const S=d.morphAttributes.position!==void 0,b=d.morphAttributes.normal!==void 0,A=d.morphAttributes.color!==void 0,E=d.morphAttributes.position||[],C=d.morphAttributes.normal||[],T=d.morphAttributes.color||[];let O=0;S===!0&&(O=1),b===!0&&(O=2),A===!0&&(O=3);let L=d.attributes.position.count*O,k=1;L>e.maxTextureSize&&(k=Math.ceil(L/e.maxTextureSize),L=e.maxTextureSize);const B=new Float32Array(L*k*4*x),G=new Rp(B,L,k,x);G.type=Ko,G.needsUpdate=!0;const H=O*4;for(let te=0;te<x;te++){const Z=E[te],D=C[te],N=T[te],z=L*k*4*te;for(let U=0;U<Z.count;U++){const V=U*H;S===!0&&(o.fromBufferAttribute(Z,U),B[z+V+0]=o.x,B[z+V+1]=o.y,B[z+V+2]=o.z,B[z+V+3]=0),b===!0&&(o.fromBufferAttribute(D,U),B[z+V+4]=o.x,B[z+V+5]=o.y,B[z+V+6]=o.z,B[z+V+7]=0),A===!0&&(o.fromBufferAttribute(N,U),B[z+V+8]=o.x,B[z+V+9]=o.y,B[z+V+10]=o.z,B[z+V+11]=N.itemSize===4?o.w:1)}}y={count:x,texture:G,size:new se(L,k)},s.set(d,y),d.addEventListener("dispose",Y)}let v=0;for(let S=0;S<m.length;S++)v+=m[S];const _=d.morphTargetsRelative?1:1-v;h.getUniforms().setValue(t,"morphTargetBaseInfluence",_),h.getUniforms().setValue(t,"morphTargetInfluences",m),h.getUniforms().setValue(t,"morphTargetsTexture",y.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",y.size)}else{const g=m===void 0?0:m.length;let x=r[d.id];if(x===void 0||x.length!==g){x=[];for(let b=0;b<g;b++)x[b]=[b,0];r[d.id]=x}for(let b=0;b<g;b++){const A=x[b];A[0]=b,A[1]=m[b]}x.sort(zW);for(let b=0;b<8;b++)b<g&&x[b][1]?(a[b][0]=x[b][0],a[b][1]=x[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort(RW);const y=d.morphAttributes.position,v=d.morphAttributes.normal;let _=0;for(let b=0;b<8;b++){const A=a[b],E=A[0],C=A[1];E!==Number.MAX_SAFE_INTEGER&&C?(y&&d.getAttribute("morphTarget"+b)!==y[E]&&d.setAttribute("morphTarget"+b,y[E]),v&&d.getAttribute("morphNormal"+b)!==v[E]&&d.setAttribute("morphNormal"+b,v[E]),i[b]=C,_+=C):(y&&d.hasAttribute("morphTarget"+b)===!0&&d.deleteAttribute("morphTarget"+b),v&&d.hasAttribute("morphNormal"+b)===!0&&d.deleteAttribute("morphNormal"+b),i[b]=0)}const S=d.morphTargetsRelative?1:1-_;h.getUniforms().setValue(t,"morphTargetBaseInfluence",S),h.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function kW(t,e,n,r){let i=new WeakMap;function s(l){const c=r.render.frame,d=l.geometry,u=e.get(l,d);return i.get(u)!==c&&(e.update(u),i.set(u,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),n.update(l.instanceMatrix,34962),l.instanceColor!==null&&n.update(l.instanceColor,34962)),u}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}const Vz=new Bn,Hz=new Rp,Gz=new Ty,Wz=new jd,NA=[],kA=[],BA=new Float32Array(16),FA=new Float32Array(9),UA=new Float32Array(4);function $d(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=NA[i];if(s===void 0&&(s=new Float32Array(i),NA[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function sr(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function or(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function Cy(t,e){let n=kA[e];n===void 0&&(n=new Int32Array(e),kA[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function BW(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function FW(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(sr(n,e))return;t.uniform2fv(this.addr,e),or(n,e)}}function UW(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(sr(n,e))return;t.uniform3fv(this.addr,e),or(n,e)}}function VW(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(sr(n,e))return;t.uniform4fv(this.addr,e),or(n,e)}}function HW(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(sr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),or(n,e)}else{if(sr(n,r))return;UA.set(r),t.uniformMatrix2fv(this.addr,!1,UA),or(n,r)}}function GW(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(sr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),or(n,e)}else{if(sr(n,r))return;FA.set(r),t.uniformMatrix3fv(this.addr,!1,FA),or(n,r)}}function WW(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(sr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),or(n,e)}else{if(sr(n,r))return;BA.set(r),t.uniformMatrix4fv(this.addr,!1,BA),or(n,r)}}function jW(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function $W(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(sr(n,e))return;t.uniform2iv(this.addr,e),or(n,e)}}function qW(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(sr(n,e))return;t.uniform3iv(this.addr,e),or(n,e)}}function XW(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(sr(n,e))return;t.uniform4iv(this.addr,e),or(n,e)}}function YW(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function ZW(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(sr(n,e))return;t.uniform2uiv(this.addr,e),or(n,e)}}function JW(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(sr(n,e))return;t.uniform3uiv(this.addr,e),or(n,e)}}function QW(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(sr(n,e))return;t.uniform4uiv(this.addr,e),or(n,e)}}function KW(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||Vz,i)}function e9(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Gz,i)}function t9(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Wz,i)}function n9(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Hz,i)}function r9(t){switch(t){case 5126:return BW;case 35664:return FW;case 35665:return UW;case 35666:return VW;case 35674:return HW;case 35675:return GW;case 35676:return WW;case 5124:case 35670:return jW;case 35667:case 35671:return $W;case 35668:case 35672:return qW;case 35669:case 35673:return XW;case 5125:return YW;case 36294:return ZW;case 36295:return JW;case 36296:return QW;case 35678:case 36198:case 36298:case 36306:case 35682:return KW;case 35679:case 36299:case 36307:return e9;case 35680:case 36300:case 36308:case 36293:return t9;case 36289:case 36303:case 36311:case 36292:return n9}}function i9(t,e){t.uniform1fv(this.addr,e)}function s9(t,e){const n=$d(e,this.size,2);t.uniform2fv(this.addr,n)}function o9(t,e){const n=$d(e,this.size,3);t.uniform3fv(this.addr,n)}function a9(t,e){const n=$d(e,this.size,4);t.uniform4fv(this.addr,n)}function l9(t,e){const n=$d(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function u9(t,e){const n=$d(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function c9(t,e){const n=$d(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function d9(t,e){t.uniform1iv(this.addr,e)}function h9(t,e){t.uniform2iv(this.addr,e)}function f9(t,e){t.uniform3iv(this.addr,e)}function p9(t,e){t.uniform4iv(this.addr,e)}function m9(t,e){t.uniform1uiv(this.addr,e)}function g9(t,e){t.uniform2uiv(this.addr,e)}function v9(t,e){t.uniform3uiv(this.addr,e)}function y9(t,e){t.uniform4uiv(this.addr,e)}function x9(t,e,n){const r=this.cache,i=e.length,s=Cy(n,i);sr(r,s)||(t.uniform1iv(this.addr,s),or(r,s));for(let o=0;o!==i;++o)n.setTexture2D(e[o]||Vz,s[o])}function _9(t,e,n){const r=this.cache,i=e.length,s=Cy(n,i);sr(r,s)||(t.uniform1iv(this.addr,s),or(r,s));for(let o=0;o!==i;++o)n.setTexture3D(e[o]||Gz,s[o])}function w9(t,e,n){const r=this.cache,i=e.length,s=Cy(n,i);sr(r,s)||(t.uniform1iv(this.addr,s),or(r,s));for(let o=0;o!==i;++o)n.setTextureCube(e[o]||Wz,s[o])}function S9(t,e,n){const r=this.cache,i=e.length,s=Cy(n,i);sr(r,s)||(t.uniform1iv(this.addr,s),or(r,s));for(let o=0;o!==i;++o)n.setTexture2DArray(e[o]||Hz,s[o])}function b9(t){switch(t){case 5126:return i9;case 35664:return s9;case 35665:return o9;case 35666:return a9;case 35674:return l9;case 35675:return u9;case 35676:return c9;case 5124:case 35670:return d9;case 35667:case 35671:return h9;case 35668:case 35672:return f9;case 35669:case 35673:return p9;case 5125:return m9;case 36294:return g9;case 36295:return v9;case 36296:return y9;case 35678:case 36198:case 36298:case 36306:case 35682:return x9;case 35679:case 36299:case 36307:return _9;case 35680:case 36300:case 36308:case 36293:return w9;case 36289:case 36303:case 36311:case 36292:return S9}}class M9{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.setValue=r9(n.type)}}class E9{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.size=n.size,this.setValue=b9(n.type)}}class T9{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,n[a.id],r)}}}const p_=/(\w+)(\])?(\[|\.)?/g;function VA(t,e){t.seq.push(e),t.map[e.id]=e}function A9(t,e,n){const r=t.name,i=r.length;for(p_.lastIndex=0;;){const s=p_.exec(r),o=p_.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){VA(n,c===void 0?new M9(a,t,e):new E9(a,t,e));break}else{let u=n.map[a];u===void 0&&(u=new T9(a),VA(n,u)),n=u}}}class B0{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,35718);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),o=e.getUniformLocation(n,s.name);A9(s,o,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in n&&r.push(o)}return r}}function HA(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let C9=0;function P9(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return r.join(`
`)}function L9(t){switch(t){case ys:return["Linear","( value )"];case un:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function GA(t,e,n){const r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+P9(t.getShaderSource(e),o)}else return i}function O9(t,e){const n=L9(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function I9(t,e){let n;switch(e){case lz:n="Linear";break;case uz:n="Reinhard";break;case cz:n="OptimizedCineon";break;case WM:n="ACESFilmic";break;case dz:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function D9(t){return[t.extensionDerivatives||!!t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(uf).join(`
`)}function R9(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function z9(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function uf(t){return t!==""}function WA(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function jA(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const N9=/^[ \t]*#include +<([\w\d./]+)>/gm;function FS(t){return t.replace(N9,k9)}function k9(t,e){const n=Ct[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return FS(n)}const B9=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function $A(t){return t.replace(B9,F9)}function F9(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function qA(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function U9(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===UM?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===VM?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===nd&&(e="SHADOWMAP_TYPE_VSM"),e}function V9(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ha:case fa:e="ENVMAP_TYPE_CUBE";break;case ju:e="ENVMAP_TYPE_CUBE_UV";break}return e}function H9(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case fa:e="ENVMAP_MODE_REFRACTION";break}return e}function G9(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Dp:e="ENVMAP_BLENDING_MULTIPLY";break;case oz:e="ENVMAP_BLENDING_MIX";break;case az:e="ENVMAP_BLENDING_ADD";break}return e}function W9(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function j9(t,e,n,r){const i=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=U9(n),c=V9(n),d=H9(n),u=G9(n),h=W9(n),m=n.isWebGL2?"":D9(n),g=R9(s),x=i.createProgram();let y,v,_=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(y=[g].filter(uf).join(`
`),y.length>0&&(y+=`
`),v=[m,g].filter(uf).join(`
`),v.length>0&&(v+=`
`)):(y=[qA(n),"#define SHADER_NAME "+n.shaderName,g,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(uf).join(`
`),v=[m,qA(n),"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+d:"",n.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Vs?"#define TONE_MAPPING":"",n.toneMapping!==Vs?Ct.tonemapping_pars_fragment:"",n.toneMapping!==Vs?I9("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Ct.encodings_pars_fragment,O9("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(uf).join(`
`)),o=FS(o),o=WA(o,n),o=jA(o,n),a=FS(a),a=WA(a,n),a=jA(a,n),o=$A(o),a=$A(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,y=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,v=["#define varying in",n.glslVersion===NS?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===NS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const S=_+y+o,b=_+v+a,A=HA(i,35633,S),E=HA(i,35632,b);if(i.attachShader(x,A),i.attachShader(x,E),n.index0AttributeName!==void 0?i.bindAttribLocation(x,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(x,0,"position"),i.linkProgram(x),t.debug.checkShaderErrors){const O=i.getProgramInfoLog(x).trim(),L=i.getShaderInfoLog(A).trim(),k=i.getShaderInfoLog(E).trim();let B=!0,G=!0;if(i.getProgramParameter(x,35714)===!1){B=!1;const H=GA(i,A,"vertex"),Y=GA(i,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(x,35715)+`

Program Info Log: `+O+`
`+H+`
`+Y)}else O!==""?console.warn("THREE.WebGLProgram: Program Info Log:",O):(L===""||k==="")&&(G=!1);G&&(this.diagnostics={runnable:B,programLog:O,vertexShader:{log:L,prefix:y},fragmentShader:{log:k,prefix:v}})}i.deleteShader(A),i.deleteShader(E);let C;this.getUniforms=function(){return C===void 0&&(C=new B0(i,x)),C};let T;return this.getAttributes=function(){return T===void 0&&(T=z9(i,x)),T},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(x),this.program=void 0},this.name=n.shaderName,this.id=C9++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=A,this.fragmentShader=E,this}let $9=0;class q9{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new X9(e),n.set(e,r)),r}}class X9{constructor(e){this.id=$9++,this.code=e,this.usedTimes=0}}function Y9(t,e,n,r,i,s,o){const a=new Mu,l=new q9,c=[],d=i.isWebGL2,u=i.logarithmicDepthBuffer,h=i.vertexTextures;let m=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(T,O,L,k,B){const G=k.fog,H=B.geometry,Y=T.isMeshStandardMaterial?k.environment:null,te=(T.isMeshStandardMaterial?n:e).get(T.envMap||Y),Z=!!te&&te.mapping===ju?te.image.height:null,D=g[T.type];T.precision!==null&&(m=i.getMaxPrecision(T.precision),m!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",m,"instead."));const N=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,z=N!==void 0?N.length:0;let U=0;H.morphAttributes.position!==void 0&&(U=1),H.morphAttributes.normal!==void 0&&(U=2),H.morphAttributes.color!==void 0&&(U=3);let V,X,J,ee;if(D){const ye=ls[D];V=ye.vertexShader,X=ye.fragmentShader}else V=T.vertexShader,X=T.fragmentShader,l.update(T),J=l.getVertexShaderID(T),ee=l.getFragmentShaderID(T);const q=t.getRenderTarget(),re=T.alphaTest>0,ie=T.clearcoat>0,K=T.iridescence>0;return{isWebGL2:d,shaderID:D,shaderName:T.type,vertexShader:V,fragmentShader:X,defines:T.defines,customVertexShaderID:J,customFragmentShaderID:ee,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:m,instancing:B.isInstancedMesh===!0,instancingColor:B.isInstancedMesh===!0&&B.instanceColor!==null,supportsVertexTextures:h,outputEncoding:q===null?t.outputEncoding:q.isXRRenderTarget===!0?q.texture.encoding:ys,map:!!T.map,matcap:!!T.matcap,envMap:!!te,envMapMode:te&&te.mapping,envMapCubeUVHeight:Z,lightMap:!!T.lightMap,aoMap:!!T.aoMap,emissiveMap:!!T.emissiveMap,bumpMap:!!T.bumpMap,normalMap:!!T.normalMap,objectSpaceNormalMap:T.normalMapType===Iz,tangentSpaceNormalMap:T.normalMapType===wl,decodeVideoTexture:!!T.map&&T.map.isVideoTexture===!0&&T.map.encoding===un,clearcoat:ie,clearcoatMap:ie&&!!T.clearcoatMap,clearcoatRoughnessMap:ie&&!!T.clearcoatRoughnessMap,clearcoatNormalMap:ie&&!!T.clearcoatNormalMap,iridescence:K,iridescenceMap:K&&!!T.iridescenceMap,iridescenceThicknessMap:K&&!!T.iridescenceThicknessMap,displacementMap:!!T.displacementMap,roughnessMap:!!T.roughnessMap,metalnessMap:!!T.metalnessMap,specularMap:!!T.specularMap,specularIntensityMap:!!T.specularIntensityMap,specularColorMap:!!T.specularColorMap,opaque:T.transparent===!1&&T.blending===ll,alphaMap:!!T.alphaMap,alphaTest:re,gradientMap:!!T.gradientMap,sheen:T.sheen>0,sheenColorMap:!!T.sheenColorMap,sheenRoughnessMap:!!T.sheenRoughnessMap,transmission:T.transmission>0,transmissionMap:!!T.transmissionMap,thicknessMap:!!T.thicknessMap,combine:T.combine,vertexTangents:!!T.normalMap&&!!H.attributes.tangent,vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!H.attributes.color&&H.attributes.color.itemSize===4,vertexUvs:!!T.map||!!T.bumpMap||!!T.normalMap||!!T.specularMap||!!T.alphaMap||!!T.emissiveMap||!!T.roughnessMap||!!T.metalnessMap||!!T.clearcoatMap||!!T.clearcoatRoughnessMap||!!T.clearcoatNormalMap||!!T.iridescenceMap||!!T.iridescenceThicknessMap||!!T.displacementMap||!!T.transmissionMap||!!T.thicknessMap||!!T.specularIntensityMap||!!T.specularColorMap||!!T.sheenColorMap||!!T.sheenRoughnessMap,uvsVertexOnly:!(!!T.map||!!T.bumpMap||!!T.normalMap||!!T.specularMap||!!T.alphaMap||!!T.emissiveMap||!!T.roughnessMap||!!T.metalnessMap||!!T.clearcoatNormalMap||!!T.iridescenceMap||!!T.iridescenceThicknessMap||T.transmission>0||!!T.transmissionMap||!!T.thicknessMap||!!T.specularIntensityMap||!!T.specularColorMap||T.sheen>0||!!T.sheenColorMap||!!T.sheenRoughnessMap)&&!!T.displacementMap,fog:!!G,useFog:T.fog===!0,fogExp2:G&&G.isFogExp2,flatShading:!!T.flatShading,sizeAttenuation:T.sizeAttenuation,logarithmicDepthBuffer:u,skinning:B.isSkinnedMesh===!0,morphTargets:H.morphAttributes.position!==void 0,morphNormals:H.morphAttributes.normal!==void 0,morphColors:H.morphAttributes.color!==void 0,morphTargetsCount:z,morphTextureStride:U,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:T.dithering,shadowMapEnabled:t.shadowMap.enabled&&L.length>0,shadowMapType:t.shadowMap.type,toneMapping:T.toneMapped?t.toneMapping:Vs,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===yo,flipSided:T.side===pi,useDepthPacking:!!T.depthPacking,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:T.extensions&&T.extensions.derivatives,extensionFragDepth:T.extensions&&T.extensions.fragDepth,extensionDrawBuffers:T.extensions&&T.extensions.drawBuffers,extensionShaderTextureLOD:T.extensions&&T.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function y(T){const O=[];if(T.shaderID?O.push(T.shaderID):(O.push(T.customVertexShaderID),O.push(T.customFragmentShaderID)),T.defines!==void 0)for(const L in T.defines)O.push(L),O.push(T.defines[L]);return T.isRawShaderMaterial===!1&&(v(O,T),_(O,T),O.push(t.outputEncoding)),O.push(T.customProgramCacheKey),O.join()}function v(T,O){T.push(O.precision),T.push(O.outputEncoding),T.push(O.envMapMode),T.push(O.envMapCubeUVHeight),T.push(O.combine),T.push(O.vertexUvs),T.push(O.fogExp2),T.push(O.sizeAttenuation),T.push(O.morphTargetsCount),T.push(O.morphAttributeCount),T.push(O.numDirLights),T.push(O.numPointLights),T.push(O.numSpotLights),T.push(O.numSpotLightMaps),T.push(O.numHemiLights),T.push(O.numRectAreaLights),T.push(O.numDirLightShadows),T.push(O.numPointLightShadows),T.push(O.numSpotLightShadows),T.push(O.numSpotLightShadowsWithMaps),T.push(O.shadowMapType),T.push(O.toneMapping),T.push(O.numClippingPlanes),T.push(O.numClipIntersection),T.push(O.depthPacking)}function _(T,O){a.disableAll(),O.isWebGL2&&a.enable(0),O.supportsVertexTextures&&a.enable(1),O.instancing&&a.enable(2),O.instancingColor&&a.enable(3),O.map&&a.enable(4),O.matcap&&a.enable(5),O.envMap&&a.enable(6),O.lightMap&&a.enable(7),O.aoMap&&a.enable(8),O.emissiveMap&&a.enable(9),O.bumpMap&&a.enable(10),O.normalMap&&a.enable(11),O.objectSpaceNormalMap&&a.enable(12),O.tangentSpaceNormalMap&&a.enable(13),O.clearcoat&&a.enable(14),O.clearcoatMap&&a.enable(15),O.clearcoatRoughnessMap&&a.enable(16),O.clearcoatNormalMap&&a.enable(17),O.iridescence&&a.enable(18),O.iridescenceMap&&a.enable(19),O.iridescenceThicknessMap&&a.enable(20),O.displacementMap&&a.enable(21),O.specularMap&&a.enable(22),O.roughnessMap&&a.enable(23),O.metalnessMap&&a.enable(24),O.gradientMap&&a.enable(25),O.alphaMap&&a.enable(26),O.alphaTest&&a.enable(27),O.vertexColors&&a.enable(28),O.vertexAlphas&&a.enable(29),O.vertexUvs&&a.enable(30),O.vertexTangents&&a.enable(31),O.uvsVertexOnly&&a.enable(32),T.push(a.mask),a.disableAll(),O.fog&&a.enable(0),O.useFog&&a.enable(1),O.flatShading&&a.enable(2),O.logarithmicDepthBuffer&&a.enable(3),O.skinning&&a.enable(4),O.morphTargets&&a.enable(5),O.morphNormals&&a.enable(6),O.morphColors&&a.enable(7),O.premultipliedAlpha&&a.enable(8),O.shadowMapEnabled&&a.enable(9),O.physicallyCorrectLights&&a.enable(10),O.doubleSided&&a.enable(11),O.flipSided&&a.enable(12),O.useDepthPacking&&a.enable(13),O.dithering&&a.enable(14),O.specularIntensityMap&&a.enable(15),O.specularColorMap&&a.enable(16),O.transmission&&a.enable(17),O.transmissionMap&&a.enable(18),O.thicknessMap&&a.enable(19),O.sheen&&a.enable(20),O.sheenColorMap&&a.enable(21),O.sheenRoughnessMap&&a.enable(22),O.decodeVideoTexture&&a.enable(23),O.opaque&&a.enable(24),T.push(a.mask)}function S(T){const O=g[T.type];let L;if(O){const k=ls[O];L=qu.clone(k.uniforms)}else L=T.uniforms;return L}function b(T,O){let L;for(let k=0,B=c.length;k<B;k++){const G=c[k];if(G.cacheKey===O){L=G,++L.usedTimes;break}}return L===void 0&&(L=new j9(t,O,T,s),c.push(L)),L}function A(T){if(--T.usedTimes===0){const O=c.indexOf(T);c[O]=c[c.length-1],c.pop(),T.destroy()}}function E(T){l.remove(T)}function C(){l.dispose()}return{getParameters:x,getProgramCacheKey:y,getUniforms:S,acquireProgram:b,releaseProgram:A,releaseShaderCache:E,programs:c,dispose:C}}function Z9(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function r(s,o,a){t.get(s)[o]=a}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function J9(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function XA(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function YA(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function o(u,h,m,g,x,y){let v=t[e];return v===void 0?(v={id:u.id,object:u,geometry:h,material:m,groupOrder:g,renderOrder:u.renderOrder,z:x,group:y},t[e]=v):(v.id=u.id,v.object=u,v.geometry=h,v.material=m,v.groupOrder=g,v.renderOrder=u.renderOrder,v.z=x,v.group=y),e++,v}function a(u,h,m,g,x,y){const v=o(u,h,m,g,x,y);m.transmission>0?r.push(v):m.transparent===!0?i.push(v):n.push(v)}function l(u,h,m,g,x,y){const v=o(u,h,m,g,x,y);m.transmission>0?r.unshift(v):m.transparent===!0?i.unshift(v):n.unshift(v)}function c(u,h){n.length>1&&n.sort(u||J9),r.length>1&&r.sort(h||XA),i.length>1&&i.sort(h||XA)}function d(){for(let u=e,h=t.length;u<h;u++){const m=t[u];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:d,sort:c}}function Q9(){let t=new WeakMap;function e(r,i){const s=t.get(r);let o;return s===void 0?(o=new YA,t.set(r,[o])):i>=s.length?(o=new YA,s.push(o)):o=s[i],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function K9(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new R,color:new We};break;case"SpotLight":n={position:new R,direction:new R,color:new We,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new R,color:new We,distance:0,decay:0};break;case"HemisphereLight":n={direction:new R,skyColor:new We,groundColor:new We};break;case"RectAreaLight":n={color:new We,position:new R,halfWidth:new R,halfHeight:new R};break}return t[e.id]=n,n}}}function e7(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new se};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new se};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new se,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let t7=0;function n7(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function r7(t,e){const n=new K9,r=e7(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)i.probe.push(new R);const s=new R,o=new nt,a=new nt;function l(d,u){let h=0,m=0,g=0;for(let k=0;k<9;k++)i.probe[k].set(0,0,0);let x=0,y=0,v=0,_=0,S=0,b=0,A=0,E=0,C=0,T=0;d.sort(n7);const O=u!==!0?Math.PI:1;for(let k=0,B=d.length;k<B;k++){const G=d[k],H=G.color,Y=G.intensity,te=G.distance,Z=G.shadow&&G.shadow.map?G.shadow.map.texture:null;if(G.isAmbientLight)h+=H.r*Y*O,m+=H.g*Y*O,g+=H.b*Y*O;else if(G.isLightProbe)for(let D=0;D<9;D++)i.probe[D].addScaledVector(G.sh.coefficients[D],Y);else if(G.isDirectionalLight){const D=n.get(G);if(D.color.copy(G.color).multiplyScalar(G.intensity*O),G.castShadow){const N=G.shadow,z=r.get(G);z.shadowBias=N.bias,z.shadowNormalBias=N.normalBias,z.shadowRadius=N.radius,z.shadowMapSize=N.mapSize,i.directionalShadow[x]=z,i.directionalShadowMap[x]=Z,i.directionalShadowMatrix[x]=G.shadow.matrix,b++}i.directional[x]=D,x++}else if(G.isSpotLight){const D=n.get(G);D.position.setFromMatrixPosition(G.matrixWorld),D.color.copy(H).multiplyScalar(Y*O),D.distance=te,D.coneCos=Math.cos(G.angle),D.penumbraCos=Math.cos(G.angle*(1-G.penumbra)),D.decay=G.decay,i.spot[v]=D;const N=G.shadow;if(G.map&&(i.spotLightMap[C]=G.map,C++,N.updateMatrices(G),G.castShadow&&T++),i.spotLightMatrix[v]=N.matrix,G.castShadow){const z=r.get(G);z.shadowBias=N.bias,z.shadowNormalBias=N.normalBias,z.shadowRadius=N.radius,z.shadowMapSize=N.mapSize,i.spotShadow[v]=z,i.spotShadowMap[v]=Z,E++}v++}else if(G.isRectAreaLight){const D=n.get(G);D.color.copy(H).multiplyScalar(Y),D.halfWidth.set(G.width*.5,0,0),D.halfHeight.set(0,G.height*.5,0),i.rectArea[_]=D,_++}else if(G.isPointLight){const D=n.get(G);if(D.color.copy(G.color).multiplyScalar(G.intensity*O),D.distance=G.distance,D.decay=G.decay,G.castShadow){const N=G.shadow,z=r.get(G);z.shadowBias=N.bias,z.shadowNormalBias=N.normalBias,z.shadowRadius=N.radius,z.shadowMapSize=N.mapSize,z.shadowCameraNear=N.camera.near,z.shadowCameraFar=N.camera.far,i.pointShadow[y]=z,i.pointShadowMap[y]=Z,i.pointShadowMatrix[y]=G.shadow.matrix,A++}i.point[y]=D,y++}else if(G.isHemisphereLight){const D=n.get(G);D.skyColor.copy(G.color).multiplyScalar(Y*O),D.groundColor.copy(G.groundColor).multiplyScalar(Y*O),i.hemi[S]=D,S++}}_>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ue.LTC_FLOAT_1,i.rectAreaLTC2=Ue.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Ue.LTC_HALF_1,i.rectAreaLTC2=Ue.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=m,i.ambient[2]=g;const L=i.hash;(L.directionalLength!==x||L.pointLength!==y||L.spotLength!==v||L.rectAreaLength!==_||L.hemiLength!==S||L.numDirectionalShadows!==b||L.numPointShadows!==A||L.numSpotShadows!==E||L.numSpotMaps!==C)&&(i.directional.length=x,i.spot.length=v,i.rectArea.length=_,i.point.length=y,i.hemi.length=S,i.directionalShadow.length=b,i.directionalShadowMap.length=b,i.pointShadow.length=A,i.pointShadowMap.length=A,i.spotShadow.length=E,i.spotShadowMap.length=E,i.directionalShadowMatrix.length=b,i.pointShadowMatrix.length=A,i.spotLightMatrix.length=E+C-T,i.spotLightMap.length=C,i.numSpotLightShadowsWithMaps=T,L.directionalLength=x,L.pointLength=y,L.spotLength=v,L.rectAreaLength=_,L.hemiLength=S,L.numDirectionalShadows=b,L.numPointShadows=A,L.numSpotShadows=E,L.numSpotMaps=C,i.version=t7++)}function c(d,u){let h=0,m=0,g=0,x=0,y=0;const v=u.matrixWorldInverse;for(let _=0,S=d.length;_<S;_++){const b=d[_];if(b.isDirectionalLight){const A=i.directional[h];A.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(v),h++}else if(b.isSpotLight){const A=i.spot[g];A.position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(v),A.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(v),g++}else if(b.isRectAreaLight){const A=i.rectArea[x];A.position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(v),a.identity(),o.copy(b.matrixWorld),o.premultiply(v),a.extractRotation(o),A.halfWidth.set(b.width*.5,0,0),A.halfHeight.set(0,b.height*.5,0),A.halfWidth.applyMatrix4(a),A.halfHeight.applyMatrix4(a),x++}else if(b.isPointLight){const A=i.point[m];A.position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(v),m++}else if(b.isHemisphereLight){const A=i.hemi[y];A.direction.setFromMatrixPosition(b.matrixWorld),A.direction.transformDirection(v),y++}}}return{setup:l,setupView:c,state:i}}function ZA(t,e){const n=new r7(t,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(u){r.push(u)}function a(u){i.push(u)}function l(u){n.setup(r,u)}function c(u){n.setupView(r,u)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function i7(t,e){let n=new WeakMap;function r(s,o=0){const a=n.get(s);let l;return a===void 0?(l=new ZA(t,e),n.set(s,[l])):o>=a.length?(l=new ZA(t,e),a.push(l)):l=a[o],l}function i(){n=new WeakMap}return{get:r,dispose:i}}class KM extends Er{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Lz,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class e2 extends Er{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new R,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const s7=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,o7=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function a7(t,e,n){let r=new Ay;const i=new se,s=new se,o=new St,a=new KM({depthPacking:Oz}),l=new e2,c={},d=n.maxTextureSize,u={0:pi,1:pl,2:yo},h=new $s({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new se},radius:{value:4}},vertexShader:s7,fragmentShader:o7}),m=h.clone();m.defines.HORIZONTAL_PASS=1;const g=new tt;g.setAttribute("position",new vt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Qn(g,h),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=UM,this.render=function(b,A,E){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||b.length===0)return;const C=t.getRenderTarget(),T=t.getActiveCubeFace(),O=t.getActiveMipmapLevel(),L=t.state;L.setBlending(ia),L.buffers.color.setClear(1,1,1,1),L.buffers.depth.setTest(!0),L.setScissorTest(!1);for(let k=0,B=b.length;k<B;k++){const G=b[k],H=G.shadow;if(H===void 0){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(H.autoUpdate===!1&&H.needsUpdate===!1)continue;i.copy(H.mapSize);const Y=H.getFrameExtents();if(i.multiply(Y),s.copy(H.mapSize),(i.x>d||i.y>d)&&(i.x>d&&(s.x=Math.floor(d/Y.x),i.x=s.x*Y.x,H.mapSize.x=s.x),i.y>d&&(s.y=Math.floor(d/Y.y),i.y=s.y*Y.y,H.mapSize.y=s.y)),H.map===null){const Z=this.type!==nd?{minFilter:Yn,magFilter:Yn}:{};H.map=new Di(i.x,i.y,Z),H.map.texture.name=G.name+".shadowMap",H.camera.updateProjectionMatrix()}t.setRenderTarget(H.map),t.clear();const te=H.getViewportCount();for(let Z=0;Z<te;Z++){const D=H.getViewport(Z);o.set(s.x*D.x,s.y*D.y,s.x*D.z,s.y*D.w),L.viewport(o),H.updateMatrices(G,Z),r=H.getFrustum(),S(A,E,H.camera,G,this.type)}H.isPointLightShadow!==!0&&this.type===nd&&v(H,E),H.needsUpdate=!1}y.needsUpdate=!1,t.setRenderTarget(C,T,O)};function v(b,A){const E=e.update(x);h.defines.VSM_SAMPLES!==b.blurSamples&&(h.defines.VSM_SAMPLES=b.blurSamples,m.defines.VSM_SAMPLES=b.blurSamples,h.needsUpdate=!0,m.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new Di(i.x,i.y)),h.uniforms.shadow_pass.value=b.map.texture,h.uniforms.resolution.value=b.mapSize,h.uniforms.radius.value=b.radius,t.setRenderTarget(b.mapPass),t.clear(),t.renderBufferDirect(A,null,E,h,x,null),m.uniforms.shadow_pass.value=b.mapPass.texture,m.uniforms.resolution.value=b.mapSize,m.uniforms.radius.value=b.radius,t.setRenderTarget(b.map),t.clear(),t.renderBufferDirect(A,null,E,m,x,null)}function _(b,A,E,C,T,O){let L=null;const k=E.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(k!==void 0?L=k:L=E.isPointLight===!0?l:a,t.localClippingEnabled&&A.clipShadows===!0&&Array.isArray(A.clippingPlanes)&&A.clippingPlanes.length!==0||A.displacementMap&&A.displacementScale!==0||A.alphaMap&&A.alphaTest>0){const B=L.uuid,G=A.uuid;let H=c[B];H===void 0&&(H={},c[B]=H);let Y=H[G];Y===void 0&&(Y=L.clone(),H[G]=Y),L=Y}return L.visible=A.visible,L.wireframe=A.wireframe,O===nd?L.side=A.shadowSide!==null?A.shadowSide:A.side:L.side=A.shadowSide!==null?A.shadowSide:u[A.side],L.alphaMap=A.alphaMap,L.alphaTest=A.alphaTest,L.clipShadows=A.clipShadows,L.clippingPlanes=A.clippingPlanes,L.clipIntersection=A.clipIntersection,L.displacementMap=A.displacementMap,L.displacementScale=A.displacementScale,L.displacementBias=A.displacementBias,L.wireframeLinewidth=A.wireframeLinewidth,L.linewidth=A.linewidth,E.isPointLight===!0&&L.isMeshDistanceMaterial===!0&&(L.referencePosition.setFromMatrixPosition(E.matrixWorld),L.nearDistance=C,L.farDistance=T),L}function S(b,A,E,C,T){if(b.visible===!1)return;if(b.layers.test(A.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&T===nd)&&(!b.frustumCulled||r.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(E.matrixWorldInverse,b.matrixWorld);const k=e.update(b),B=b.material;if(Array.isArray(B)){const G=k.groups;for(let H=0,Y=G.length;H<Y;H++){const te=G[H],Z=B[te.materialIndex];if(Z&&Z.visible){const D=_(b,Z,C,E.near,E.far,T);t.renderBufferDirect(E,null,k,D,b,te)}}}else if(B.visible){const G=_(b,B,C,E.near,E.far,T);t.renderBufferDirect(E,null,k,G,b,null)}}const L=b.children;for(let k=0,B=L.length;k<B;k++)S(L[k],A,E,C,T)}}function l7(t,e,n){const r=n.isWebGL2;function i(){let ae=!1;const be=new St;let Me=null;const Ae=new St(0,0,0,0);return{setMask:function(ze){Me!==ze&&!ae&&(t.colorMask(ze,ze,ze,ze),Me=ze)},setLocked:function(ze){ae=ze},setClear:function(ze,Ze,dt,bt,Nt){Nt===!0&&(ze*=bt,Ze*=bt,dt*=bt),be.set(ze,Ze,dt,bt),Ae.equals(be)===!1&&(t.clearColor(ze,Ze,dt,bt),Ae.copy(be))},reset:function(){ae=!1,Me=null,Ae.set(-1,0,0,0)}}}function s(){let ae=!1,be=null,Me=null,Ae=null;return{setTest:function(ze){ze?re(2929):ie(2929)},setMask:function(ze){be!==ze&&!ae&&(t.depthMask(ze),be=ze)},setFunc:function(ze){if(Me!==ze){switch(ze){case KR:t.depthFunc(512);break;case ez:t.depthFunc(519);break;case tz:t.depthFunc(513);break;case vv:t.depthFunc(515);break;case nz:t.depthFunc(514);break;case rz:t.depthFunc(518);break;case iz:t.depthFunc(516);break;case sz:t.depthFunc(517);break;default:t.depthFunc(515)}Me=ze}},setLocked:function(ze){ae=ze},setClear:function(ze){Ae!==ze&&(t.clearDepth(ze),Ae=ze)},reset:function(){ae=!1,be=null,Me=null,Ae=null}}}function o(){let ae=!1,be=null,Me=null,Ae=null,ze=null,Ze=null,dt=null,bt=null,Nt=null;return{setTest:function(ht){ae||(ht?re(2960):ie(2960))},setMask:function(ht){be!==ht&&!ae&&(t.stencilMask(ht),be=ht)},setFunc:function(ht,zt,Ot){(Me!==ht||Ae!==zt||ze!==Ot)&&(t.stencilFunc(ht,zt,Ot),Me=ht,Ae=zt,ze=Ot)},setOp:function(ht,zt,Ot){(Ze!==ht||dt!==zt||bt!==Ot)&&(t.stencilOp(ht,zt,Ot),Ze=ht,dt=zt,bt=Ot)},setLocked:function(ht){ae=ht},setClear:function(ht){Nt!==ht&&(t.clearStencil(ht),Nt=ht)},reset:function(){ae=!1,be=null,Me=null,Ae=null,ze=null,Ze=null,dt=null,bt=null,Nt=null}}}const a=new i,l=new s,c=new o,d=new WeakMap,u=new WeakMap;let h={},m={},g=new WeakMap,x=[],y=null,v=!1,_=null,S=null,b=null,A=null,E=null,C=null,T=null,O=!1,L=null,k=null,B=null,G=null,H=null;const Y=t.getParameter(35661);let te=!1,Z=0;const D=t.getParameter(7938);D.indexOf("WebGL")!==-1?(Z=parseFloat(/^WebGL (\d)/.exec(D)[1]),te=Z>=1):D.indexOf("OpenGL ES")!==-1&&(Z=parseFloat(/^OpenGL ES (\d)/.exec(D)[1]),te=Z>=2);let N=null,z={};const U=t.getParameter(3088),V=t.getParameter(2978),X=new St().fromArray(U),J=new St().fromArray(V);function ee(ae,be,Me){const Ae=new Uint8Array(4),ze=t.createTexture();t.bindTexture(ae,ze),t.texParameteri(ae,10241,9728),t.texParameteri(ae,10240,9728);for(let Ze=0;Ze<Me;Ze++)t.texImage2D(be+Ze,0,6408,1,1,0,6408,5121,Ae);return ze}const q={};q[3553]=ee(3553,3553,1),q[34067]=ee(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),re(2929),l.setFunc(vv),ve(!1),Re(uS),re(2884),de(ia);function re(ae){h[ae]!==!0&&(t.enable(ae),h[ae]=!0)}function ie(ae){h[ae]!==!1&&(t.disable(ae),h[ae]=!1)}function K(ae,be){return m[ae]!==be?(t.bindFramebuffer(ae,be),m[ae]=be,r&&(ae===36009&&(m[36160]=be),ae===36160&&(m[36009]=be)),!0):!1}function oe(ae,be){let Me=x,Ae=!1;if(ae)if(Me=g.get(be),Me===void 0&&(Me=[],g.set(be,Me)),ae.isWebGLMultipleRenderTargets){const ze=ae.texture;if(Me.length!==ze.length||Me[0]!==36064){for(let Ze=0,dt=ze.length;Ze<dt;Ze++)Me[Ze]=36064+Ze;Me.length=ze.length,Ae=!0}}else Me[0]!==36064&&(Me[0]=36064,Ae=!0);else Me[0]!==1029&&(Me[0]=1029,Ae=!0);Ae&&(n.isWebGL2?t.drawBuffers(Me):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Me))}function ye(ae){return y!==ae?(t.useProgram(ae),y=ae,!0):!1}const ne={[ru]:32774,[HR]:32778,[GR]:32779};if(r)ne[fS]=32775,ne[pS]=32776;else{const ae=e.get("EXT_blend_minmax");ae!==null&&(ne[fS]=ae.MIN_EXT,ne[pS]=ae.MAX_EXT)}const Q={[WR]:0,[jR]:1,[$R]:768,[HM]:770,[QR]:776,[ZR]:774,[XR]:772,[qR]:769,[GM]:771,[JR]:775,[YR]:773};function de(ae,be,Me,Ae,ze,Ze,dt,bt){if(ae===ia){v===!0&&(ie(3042),v=!1);return}if(v===!1&&(re(3042),v=!0),ae!==VR){if(ae!==_||bt!==O){if((S!==ru||E!==ru)&&(t.blendEquation(32774),S=ru,E=ru),bt)switch(ae){case ll:t.blendFuncSeparate(1,771,1,771);break;case cS:t.blendFunc(1,1);break;case dS:t.blendFuncSeparate(0,769,0,1);break;case hS:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ae);break}else switch(ae){case ll:t.blendFuncSeparate(770,771,1,771);break;case cS:t.blendFunc(770,1);break;case dS:t.blendFuncSeparate(0,769,0,1);break;case hS:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ae);break}b=null,A=null,C=null,T=null,_=ae,O=bt}return}ze=ze||be,Ze=Ze||Me,dt=dt||Ae,(be!==S||ze!==E)&&(t.blendEquationSeparate(ne[be],ne[ze]),S=be,E=ze),(Me!==b||Ae!==A||Ze!==C||dt!==T)&&(t.blendFuncSeparate(Q[Me],Q[Ae],Q[Ze],Q[dt]),b=Me,A=Ae,C=Ze,T=dt),_=ae,O=null}function pe(ae,be){ae.side===yo?ie(2884):re(2884);let Me=ae.side===pi;be&&(Me=!Me),ve(Me),ae.blending===ll&&ae.transparent===!1?de(ia):de(ae.blending,ae.blendEquation,ae.blendSrc,ae.blendDst,ae.blendEquationAlpha,ae.blendSrcAlpha,ae.blendDstAlpha,ae.premultipliedAlpha),l.setFunc(ae.depthFunc),l.setTest(ae.depthTest),l.setMask(ae.depthWrite),a.setMask(ae.colorWrite);const Ae=ae.stencilWrite;c.setTest(Ae),Ae&&(c.setMask(ae.stencilWriteMask),c.setFunc(ae.stencilFunc,ae.stencilRef,ae.stencilFuncMask),c.setOp(ae.stencilFail,ae.stencilZFail,ae.stencilZPass)),De(ae.polygonOffset,ae.polygonOffsetFactor,ae.polygonOffsetUnits),ae.alphaToCoverage===!0?re(32926):ie(32926)}function ve(ae){L!==ae&&(ae?t.frontFace(2304):t.frontFace(2305),L=ae)}function Re(ae){ae!==FR?(re(2884),ae!==k&&(ae===uS?t.cullFace(1029):ae===UR?t.cullFace(1028):t.cullFace(1032))):ie(2884),k=ae}function Le(ae){ae!==B&&(te&&t.lineWidth(ae),B=ae)}function De(ae,be,Me){ae?(re(32823),(G!==be||H!==Me)&&(t.polygonOffset(be,Me),G=be,H=Me)):ie(32823)}function gt(ae){ae?re(3089):ie(3089)}function je(ae){ae===void 0&&(ae=33984+Y-1),N!==ae&&(t.activeTexture(ae),N=ae)}function j(ae,be,Me){Me===void 0&&(N===null?Me=33984+Y-1:Me=N);let Ae=z[Me];Ae===void 0&&(Ae={type:void 0,texture:void 0},z[Me]=Ae),(Ae.type!==ae||Ae.texture!==be)&&(N!==Me&&(t.activeTexture(Me),N=Me),t.bindTexture(ae,be||q[ae]),Ae.type=ae,Ae.texture=be)}function F(){const ae=z[N];ae!==void 0&&ae.type!==void 0&&(t.bindTexture(ae.type,null),ae.type=void 0,ae.texture=void 0)}function _e(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Ie(){try{t.compressedTexImage3D.apply(t,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function ke(){try{t.texSubImage2D.apply(t,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Ve(){try{t.texSubImage3D.apply(t,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function ut(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function He(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Ce(){try{t.texStorage2D.apply(t,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Ge(){try{t.texStorage3D.apply(t,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Je(){try{t.texImage2D.apply(t,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function qe(){try{t.texImage3D.apply(t,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function at(ae){X.equals(ae)===!1&&(t.scissor(ae.x,ae.y,ae.z,ae.w),X.copy(ae))}function rt(ae){J.equals(ae)===!1&&(t.viewport(ae.x,ae.y,ae.z,ae.w),J.copy(ae))}function Pt(ae,be){let Me=u.get(be);Me===void 0&&(Me=new WeakMap,u.set(be,Me));let Ae=Me.get(ae);Ae===void 0&&(Ae=t.getUniformBlockIndex(be,ae.name),Me.set(ae,Ae))}function Wt(ae,be){const Ae=u.get(be).get(ae);d.get(ae)!==Ae&&(t.uniformBlockBinding(be,Ae,ae.__bindingPointIndex),d.set(ae,Ae))}function pn(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),r===!0&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),h={},N=null,z={},m={},g=new WeakMap,x=[],y=null,v=!1,_=null,S=null,b=null,A=null,E=null,C=null,T=null,O=!1,L=null,k=null,B=null,G=null,H=null,X.set(0,0,t.canvas.width,t.canvas.height),J.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:re,disable:ie,bindFramebuffer:K,drawBuffers:oe,useProgram:ye,setBlending:de,setMaterial:pe,setFlipSided:ve,setCullFace:Re,setLineWidth:Le,setPolygonOffset:De,setScissorTest:gt,activeTexture:je,bindTexture:j,unbindTexture:F,compressedTexImage2D:_e,compressedTexImage3D:Ie,texImage2D:Je,texImage3D:qe,updateUBOMapping:Pt,uniformBlockBinding:Wt,texStorage2D:Ce,texStorage3D:Ge,texSubImage2D:ke,texSubImage3D:Ve,compressedTexSubImage2D:ut,compressedTexSubImage3D:He,scissor:at,viewport:rt,reset:pn}}function u7(t,e,n,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,d=i.maxTextureSize,u=i.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=/OculusBrowser/g.test(typeof navigator>"u"?"":navigator.userAgent),g=new WeakMap;let x;const y=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(j,F){return v?new OffscreenCanvas(j,F):ap("canvas")}function S(j,F,_e,Ie){let ke=1;if((j.width>Ie||j.height>Ie)&&(ke=Ie/Math.max(j.width,j.height)),ke<1||F===!0)if(typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&j instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&j instanceof ImageBitmap){const Ve=F?wv:Math.floor,ut=Ve(ke*j.width),He=Ve(ke*j.height);x===void 0&&(x=_(ut,He));const Ce=_e?_(ut,He):x;return Ce.width=ut,Ce.height=He,Ce.getContext("2d").drawImage(j,0,0,ut,He),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+j.width+"x"+j.height+") to ("+ut+"x"+He+")."),Ce}else return"data"in j&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+j.width+"x"+j.height+")."),j;return j}function b(j){return kS(j.width)&&kS(j.height)}function A(j){return a?!1:j.wrapS!==kr||j.wrapT!==kr||j.minFilter!==Yn&&j.minFilter!==Tn}function E(j,F){return j.generateMipmaps&&F&&j.minFilter!==Yn&&j.minFilter!==Tn}function C(j){t.generateMipmap(j)}function T(j,F,_e,Ie,ke=!1){if(a===!1)return F;if(j!==null){if(t[j]!==void 0)return t[j];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+j+"'")}let Ve=F;return F===6403&&(_e===5126&&(Ve=33326),_e===5131&&(Ve=33325),_e===5121&&(Ve=33321)),F===33319&&(_e===5126&&(Ve=33328),_e===5131&&(Ve=33327),_e===5121&&(Ve=33323)),F===6408&&(_e===5126&&(Ve=34836),_e===5131&&(Ve=34842),_e===5121&&(Ve=Ie===un&&ke===!1?35907:32856),_e===32819&&(Ve=32854),_e===32820&&(Ve=32855)),(Ve===33325||Ve===33326||Ve===33327||Ve===33328||Ve===34842||Ve===34836)&&e.get("EXT_color_buffer_float"),Ve}function O(j,F,_e){return E(j,_e)===!0||j.isFramebufferTexture&&j.minFilter!==Yn&&j.minFilter!==Tn?Math.log2(Math.max(F.width,F.height))+1:j.mipmaps!==void 0&&j.mipmaps.length>0?j.mipmaps.length:j.isCompressedTexture&&Array.isArray(j.image)?F.mipmaps.length:1}function L(j){return j===Yn||j===yv||j===xv?9728:9729}function k(j){const F=j.target;F.removeEventListener("dispose",k),G(F),F.isVideoTexture&&g.delete(F)}function B(j){const F=j.target;F.removeEventListener("dispose",B),Y(F)}function G(j){const F=r.get(j);if(F.__webglInit===void 0)return;const _e=j.source,Ie=y.get(_e);if(Ie){const ke=Ie[F.__cacheKey];ke.usedTimes--,ke.usedTimes===0&&H(j),Object.keys(Ie).length===0&&y.delete(_e)}r.remove(j)}function H(j){const F=r.get(j);t.deleteTexture(F.__webglTexture);const _e=j.source,Ie=y.get(_e);delete Ie[F.__cacheKey],o.memory.textures--}function Y(j){const F=j.texture,_e=r.get(j),Ie=r.get(F);if(Ie.__webglTexture!==void 0&&(t.deleteTexture(Ie.__webglTexture),o.memory.textures--),j.depthTexture&&j.depthTexture.dispose(),j.isWebGLCubeRenderTarget)for(let ke=0;ke<6;ke++)t.deleteFramebuffer(_e.__webglFramebuffer[ke]),_e.__webglDepthbuffer&&t.deleteRenderbuffer(_e.__webglDepthbuffer[ke]);else{if(t.deleteFramebuffer(_e.__webglFramebuffer),_e.__webglDepthbuffer&&t.deleteRenderbuffer(_e.__webglDepthbuffer),_e.__webglMultisampledFramebuffer&&t.deleteFramebuffer(_e.__webglMultisampledFramebuffer),_e.__webglColorRenderbuffer)for(let ke=0;ke<_e.__webglColorRenderbuffer.length;ke++)_e.__webglColorRenderbuffer[ke]&&t.deleteRenderbuffer(_e.__webglColorRenderbuffer[ke]);_e.__webglDepthRenderbuffer&&t.deleteRenderbuffer(_e.__webglDepthRenderbuffer)}if(j.isWebGLMultipleRenderTargets)for(let ke=0,Ve=F.length;ke<Ve;ke++){const ut=r.get(F[ke]);ut.__webglTexture&&(t.deleteTexture(ut.__webglTexture),o.memory.textures--),r.remove(F[ke])}r.remove(F),r.remove(j)}let te=0;function Z(){te=0}function D(){const j=te;return j>=l&&console.warn("THREE.WebGLTextures: Trying to use "+j+" texture units while this GPU supports only "+l),te+=1,j}function N(j){const F=[];return F.push(j.wrapS),F.push(j.wrapT),F.push(j.wrapR||0),F.push(j.magFilter),F.push(j.minFilter),F.push(j.anisotropy),F.push(j.internalFormat),F.push(j.format),F.push(j.type),F.push(j.generateMipmaps),F.push(j.premultiplyAlpha),F.push(j.flipY),F.push(j.unpackAlignment),F.push(j.encoding),F.join()}function z(j,F){const _e=r.get(j);if(j.isVideoTexture&&gt(j),j.isRenderTargetTexture===!1&&j.version>0&&_e.__version!==j.version){const Ie=j.image;if(Ie===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ie.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ie(_e,j,F);return}}n.bindTexture(3553,_e.__webglTexture,33984+F)}function U(j,F){const _e=r.get(j);if(j.version>0&&_e.__version!==j.version){ie(_e,j,F);return}n.bindTexture(35866,_e.__webglTexture,33984+F)}function V(j,F){const _e=r.get(j);if(j.version>0&&_e.__version!==j.version){ie(_e,j,F);return}n.bindTexture(32879,_e.__webglTexture,33984+F)}function X(j,F){const _e=r.get(j);if(j.version>0&&_e.__version!==j.version){K(_e,j,F);return}n.bindTexture(34067,_e.__webglTexture,33984+F)}const J={[ep]:10497,[kr]:33071,[tp]:33648},ee={[Yn]:9728,[yv]:9984,[xv]:9986,[Tn]:9729,[jM]:9985,[$u]:9987};function q(j,F,_e){if(_e?(t.texParameteri(j,10242,J[F.wrapS]),t.texParameteri(j,10243,J[F.wrapT]),(j===32879||j===35866)&&t.texParameteri(j,32882,J[F.wrapR]),t.texParameteri(j,10240,ee[F.magFilter]),t.texParameteri(j,10241,ee[F.minFilter])):(t.texParameteri(j,10242,33071),t.texParameteri(j,10243,33071),(j===32879||j===35866)&&t.texParameteri(j,32882,33071),(F.wrapS!==kr||F.wrapT!==kr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(j,10240,L(F.magFilter)),t.texParameteri(j,10241,L(F.minFilter)),F.minFilter!==Yn&&F.minFilter!==Tn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Ie=e.get("EXT_texture_filter_anisotropic");if(F.type===Ko&&e.has("OES_texture_float_linear")===!1||a===!1&&F.type===zu&&e.has("OES_texture_half_float_linear")===!1)return;(F.anisotropy>1||r.get(F).__currentAnisotropy)&&(t.texParameterf(j,Ie.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,i.getMaxAnisotropy())),r.get(F).__currentAnisotropy=F.anisotropy)}}function re(j,F){let _e=!1;j.__webglInit===void 0&&(j.__webglInit=!0,F.addEventListener("dispose",k));const Ie=F.source;let ke=y.get(Ie);ke===void 0&&(ke={},y.set(Ie,ke));const Ve=N(F);if(Ve!==j.__cacheKey){ke[Ve]===void 0&&(ke[Ve]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,_e=!0),ke[Ve].usedTimes++;const ut=ke[j.__cacheKey];ut!==void 0&&(ke[j.__cacheKey].usedTimes--,ut.usedTimes===0&&H(F)),j.__cacheKey=Ve,j.__webglTexture=ke[Ve].texture}return _e}function ie(j,F,_e){let Ie=3553;(F.isDataArrayTexture||F.isCompressedArrayTexture)&&(Ie=35866),F.isData3DTexture&&(Ie=32879);const ke=re(j,F),Ve=F.source;n.bindTexture(Ie,j.__webglTexture,33984+_e);const ut=r.get(Ve);if(Ve.version!==ut.__version||ke===!0){n.activeTexture(33984+_e),t.pixelStorei(37440,F.flipY),t.pixelStorei(37441,F.premultiplyAlpha),t.pixelStorei(3317,F.unpackAlignment),t.pixelStorei(37443,0);const He=A(F)&&b(F.image)===!1;let Ce=S(F.image,He,!1,d);Ce=je(F,Ce);const Ge=b(Ce)||a,Je=s.convert(F.format,F.encoding);let qe=s.convert(F.type),at=T(F.internalFormat,Je,qe,F.encoding,F.isVideoTexture);q(Ie,F,Ge);let rt;const Pt=F.mipmaps,Wt=a&&F.isVideoTexture!==!0,pn=ut.__version===void 0||ke===!0,ae=O(F,Ce,Ge);if(F.isDepthTexture)at=6402,a?F.type===Ko?at=36012:F.type===qa?at=33190:F.type===_u?at=35056:at=33189:F.type===Ko&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),F.format===ul&&at===6402&&F.type!==$M&&F.type!==qa&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),F.type=qa,qe=s.convert(F.type)),F.format===Nu&&at===6402&&(at=34041,F.type!==_u&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),F.type=_u,qe=s.convert(F.type))),pn&&(Wt?n.texStorage2D(3553,1,at,Ce.width,Ce.height):n.texImage2D(3553,0,at,Ce.width,Ce.height,0,Je,qe,null));else if(F.isDataTexture)if(Pt.length>0&&Ge){Wt&&pn&&n.texStorage2D(3553,ae,at,Pt[0].width,Pt[0].height);for(let be=0,Me=Pt.length;be<Me;be++)rt=Pt[be],Wt?n.texSubImage2D(3553,be,0,0,rt.width,rt.height,Je,qe,rt.data):n.texImage2D(3553,be,at,rt.width,rt.height,0,Je,qe,rt.data);F.generateMipmaps=!1}else Wt?(pn&&n.texStorage2D(3553,ae,at,Ce.width,Ce.height),n.texSubImage2D(3553,0,0,0,Ce.width,Ce.height,Je,qe,Ce.data)):n.texImage2D(3553,0,at,Ce.width,Ce.height,0,Je,qe,Ce.data);else if(F.isCompressedTexture)if(F.isCompressedArrayTexture){Wt&&pn&&n.texStorage3D(35866,ae,at,Pt[0].width,Pt[0].height,Ce.depth);for(let be=0,Me=Pt.length;be<Me;be++)rt=Pt[be],F.format!==Ti?Je!==null?Wt?n.compressedTexSubImage3D(35866,be,0,0,0,rt.width,rt.height,Ce.depth,Je,rt.data,0,0):n.compressedTexImage3D(35866,be,at,rt.width,rt.height,Ce.depth,0,rt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Wt?n.texSubImage3D(35866,be,0,0,0,rt.width,rt.height,Ce.depth,Je,qe,rt.data):n.texImage3D(35866,be,at,rt.width,rt.height,Ce.depth,0,Je,qe,rt.data)}else{Wt&&pn&&n.texStorage2D(3553,ae,at,Pt[0].width,Pt[0].height);for(let be=0,Me=Pt.length;be<Me;be++)rt=Pt[be],F.format!==Ti?Je!==null?Wt?n.compressedTexSubImage2D(3553,be,0,0,rt.width,rt.height,Je,rt.data):n.compressedTexImage2D(3553,be,at,rt.width,rt.height,0,rt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Wt?n.texSubImage2D(3553,be,0,0,rt.width,rt.height,Je,qe,rt.data):n.texImage2D(3553,be,at,rt.width,rt.height,0,Je,qe,rt.data)}else if(F.isDataArrayTexture)Wt?(pn&&n.texStorage3D(35866,ae,at,Ce.width,Ce.height,Ce.depth),n.texSubImage3D(35866,0,0,0,0,Ce.width,Ce.height,Ce.depth,Je,qe,Ce.data)):n.texImage3D(35866,0,at,Ce.width,Ce.height,Ce.depth,0,Je,qe,Ce.data);else if(F.isData3DTexture)Wt?(pn&&n.texStorage3D(32879,ae,at,Ce.width,Ce.height,Ce.depth),n.texSubImage3D(32879,0,0,0,0,Ce.width,Ce.height,Ce.depth,Je,qe,Ce.data)):n.texImage3D(32879,0,at,Ce.width,Ce.height,Ce.depth,0,Je,qe,Ce.data);else if(F.isFramebufferTexture){if(pn)if(Wt)n.texStorage2D(3553,ae,at,Ce.width,Ce.height);else{let be=Ce.width,Me=Ce.height;for(let Ae=0;Ae<ae;Ae++)n.texImage2D(3553,Ae,at,be,Me,0,Je,qe,null),be>>=1,Me>>=1}}else if(Pt.length>0&&Ge){Wt&&pn&&n.texStorage2D(3553,ae,at,Pt[0].width,Pt[0].height);for(let be=0,Me=Pt.length;be<Me;be++)rt=Pt[be],Wt?n.texSubImage2D(3553,be,0,0,Je,qe,rt):n.texImage2D(3553,be,at,Je,qe,rt);F.generateMipmaps=!1}else Wt?(pn&&n.texStorage2D(3553,ae,at,Ce.width,Ce.height),n.texSubImage2D(3553,0,0,0,Je,qe,Ce)):n.texImage2D(3553,0,at,Je,qe,Ce);E(F,Ge)&&C(Ie),ut.__version=Ve.version,F.onUpdate&&F.onUpdate(F)}j.__version=F.version}function K(j,F,_e){if(F.image.length!==6)return;const Ie=re(j,F),ke=F.source;n.bindTexture(34067,j.__webglTexture,33984+_e);const Ve=r.get(ke);if(ke.version!==Ve.__version||Ie===!0){n.activeTexture(33984+_e),t.pixelStorei(37440,F.flipY),t.pixelStorei(37441,F.premultiplyAlpha),t.pixelStorei(3317,F.unpackAlignment),t.pixelStorei(37443,0);const ut=F.isCompressedTexture||F.image[0].isCompressedTexture,He=F.image[0]&&F.image[0].isDataTexture,Ce=[];for(let be=0;be<6;be++)!ut&&!He?Ce[be]=S(F.image[be],!1,!0,c):Ce[be]=He?F.image[be].image:F.image[be],Ce[be]=je(F,Ce[be]);const Ge=Ce[0],Je=b(Ge)||a,qe=s.convert(F.format,F.encoding),at=s.convert(F.type),rt=T(F.internalFormat,qe,at,F.encoding),Pt=a&&F.isVideoTexture!==!0,Wt=Ve.__version===void 0||Ie===!0;let pn=O(F,Ge,Je);q(34067,F,Je);let ae;if(ut){Pt&&Wt&&n.texStorage2D(34067,pn,rt,Ge.width,Ge.height);for(let be=0;be<6;be++){ae=Ce[be].mipmaps;for(let Me=0;Me<ae.length;Me++){const Ae=ae[Me];F.format!==Ti?qe!==null?Pt?n.compressedTexSubImage2D(34069+be,Me,0,0,Ae.width,Ae.height,qe,Ae.data):n.compressedTexImage2D(34069+be,Me,rt,Ae.width,Ae.height,0,Ae.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Pt?n.texSubImage2D(34069+be,Me,0,0,Ae.width,Ae.height,qe,at,Ae.data):n.texImage2D(34069+be,Me,rt,Ae.width,Ae.height,0,qe,at,Ae.data)}}}else{ae=F.mipmaps,Pt&&Wt&&(ae.length>0&&pn++,n.texStorage2D(34067,pn,rt,Ce[0].width,Ce[0].height));for(let be=0;be<6;be++)if(He){Pt?n.texSubImage2D(34069+be,0,0,0,Ce[be].width,Ce[be].height,qe,at,Ce[be].data):n.texImage2D(34069+be,0,rt,Ce[be].width,Ce[be].height,0,qe,at,Ce[be].data);for(let Me=0;Me<ae.length;Me++){const ze=ae[Me].image[be].image;Pt?n.texSubImage2D(34069+be,Me+1,0,0,ze.width,ze.height,qe,at,ze.data):n.texImage2D(34069+be,Me+1,rt,ze.width,ze.height,0,qe,at,ze.data)}}else{Pt?n.texSubImage2D(34069+be,0,0,0,qe,at,Ce[be]):n.texImage2D(34069+be,0,rt,qe,at,Ce[be]);for(let Me=0;Me<ae.length;Me++){const Ae=ae[Me];Pt?n.texSubImage2D(34069+be,Me+1,0,0,qe,at,Ae.image[be]):n.texImage2D(34069+be,Me+1,rt,qe,at,Ae.image[be])}}}E(F,Je)&&C(34067),Ve.__version=ke.version,F.onUpdate&&F.onUpdate(F)}j.__version=F.version}function oe(j,F,_e,Ie,ke){const Ve=s.convert(_e.format,_e.encoding),ut=s.convert(_e.type),He=T(_e.internalFormat,Ve,ut,_e.encoding);r.get(F).__hasExternalTextures||(ke===32879||ke===35866?n.texImage3D(ke,0,He,F.width,F.height,F.depth,0,Ve,ut,null):n.texImage2D(ke,0,He,F.width,F.height,0,Ve,ut,null)),n.bindFramebuffer(36160,j),De(F)?h.framebufferTexture2DMultisampleEXT(36160,Ie,ke,r.get(_e).__webglTexture,0,Le(F)):(ke===3553||ke>=34069&&ke<=34074)&&t.framebufferTexture2D(36160,Ie,ke,r.get(_e).__webglTexture,0),n.bindFramebuffer(36160,null)}function ye(j,F,_e){if(t.bindRenderbuffer(36161,j),F.depthBuffer&&!F.stencilBuffer){let Ie=33189;if(_e||De(F)){const ke=F.depthTexture;ke&&ke.isDepthTexture&&(ke.type===Ko?Ie=36012:ke.type===qa&&(Ie=33190));const Ve=Le(F);De(F)?h.renderbufferStorageMultisampleEXT(36161,Ve,Ie,F.width,F.height):t.renderbufferStorageMultisample(36161,Ve,Ie,F.width,F.height)}else t.renderbufferStorage(36161,Ie,F.width,F.height);t.framebufferRenderbuffer(36160,36096,36161,j)}else if(F.depthBuffer&&F.stencilBuffer){const Ie=Le(F);_e&&De(F)===!1?t.renderbufferStorageMultisample(36161,Ie,35056,F.width,F.height):De(F)?h.renderbufferStorageMultisampleEXT(36161,Ie,35056,F.width,F.height):t.renderbufferStorage(36161,34041,F.width,F.height),t.framebufferRenderbuffer(36160,33306,36161,j)}else{const Ie=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let ke=0;ke<Ie.length;ke++){const Ve=Ie[ke],ut=s.convert(Ve.format,Ve.encoding),He=s.convert(Ve.type),Ce=T(Ve.internalFormat,ut,He,Ve.encoding),Ge=Le(F);_e&&De(F)===!1?t.renderbufferStorageMultisample(36161,Ge,Ce,F.width,F.height):De(F)?h.renderbufferStorageMultisampleEXT(36161,Ge,Ce,F.width,F.height):t.renderbufferStorage(36161,Ce,F.width,F.height)}}t.bindRenderbuffer(36161,null)}function ne(j,F){if(F&&F.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,j),!(F.depthTexture&&F.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(F.depthTexture).__webglTexture||F.depthTexture.image.width!==F.width||F.depthTexture.image.height!==F.height)&&(F.depthTexture.image.width=F.width,F.depthTexture.image.height=F.height,F.depthTexture.needsUpdate=!0),z(F.depthTexture,0);const Ie=r.get(F.depthTexture).__webglTexture,ke=Le(F);if(F.depthTexture.format===ul)De(F)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,Ie,0,ke):t.framebufferTexture2D(36160,36096,3553,Ie,0);else if(F.depthTexture.format===Nu)De(F)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,Ie,0,ke):t.framebufferTexture2D(36160,33306,3553,Ie,0);else throw new Error("Unknown depthTexture format")}function Q(j){const F=r.get(j),_e=j.isWebGLCubeRenderTarget===!0;if(j.depthTexture&&!F.__autoAllocateDepthBuffer){if(_e)throw new Error("target.depthTexture not supported in Cube render targets");ne(F.__webglFramebuffer,j)}else if(_e){F.__webglDepthbuffer=[];for(let Ie=0;Ie<6;Ie++)n.bindFramebuffer(36160,F.__webglFramebuffer[Ie]),F.__webglDepthbuffer[Ie]=t.createRenderbuffer(),ye(F.__webglDepthbuffer[Ie],j,!1)}else n.bindFramebuffer(36160,F.__webglFramebuffer),F.__webglDepthbuffer=t.createRenderbuffer(),ye(F.__webglDepthbuffer,j,!1);n.bindFramebuffer(36160,null)}function de(j,F,_e){const Ie=r.get(j);F!==void 0&&oe(Ie.__webglFramebuffer,j,j.texture,36064,3553),_e!==void 0&&Q(j)}function pe(j){const F=j.texture,_e=r.get(j),Ie=r.get(F);j.addEventListener("dispose",B),j.isWebGLMultipleRenderTargets!==!0&&(Ie.__webglTexture===void 0&&(Ie.__webglTexture=t.createTexture()),Ie.__version=F.version,o.memory.textures++);const ke=j.isWebGLCubeRenderTarget===!0,Ve=j.isWebGLMultipleRenderTargets===!0,ut=b(j)||a;if(ke){_e.__webglFramebuffer=[];for(let He=0;He<6;He++)_e.__webglFramebuffer[He]=t.createFramebuffer()}else{if(_e.__webglFramebuffer=t.createFramebuffer(),Ve)if(i.drawBuffers){const He=j.texture;for(let Ce=0,Ge=He.length;Ce<Ge;Ce++){const Je=r.get(He[Ce]);Je.__webglTexture===void 0&&(Je.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&j.samples>0&&De(j)===!1){const He=Ve?F:[F];_e.__webglMultisampledFramebuffer=t.createFramebuffer(),_e.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,_e.__webglMultisampledFramebuffer);for(let Ce=0;Ce<He.length;Ce++){const Ge=He[Ce];_e.__webglColorRenderbuffer[Ce]=t.createRenderbuffer(),t.bindRenderbuffer(36161,_e.__webglColorRenderbuffer[Ce]);const Je=s.convert(Ge.format,Ge.encoding),qe=s.convert(Ge.type),at=T(Ge.internalFormat,Je,qe,Ge.encoding,j.isXRRenderTarget===!0),rt=Le(j);t.renderbufferStorageMultisample(36161,rt,at,j.width,j.height),t.framebufferRenderbuffer(36160,36064+Ce,36161,_e.__webglColorRenderbuffer[Ce])}t.bindRenderbuffer(36161,null),j.depthBuffer&&(_e.__webglDepthRenderbuffer=t.createRenderbuffer(),ye(_e.__webglDepthRenderbuffer,j,!0)),n.bindFramebuffer(36160,null)}}if(ke){n.bindTexture(34067,Ie.__webglTexture),q(34067,F,ut);for(let He=0;He<6;He++)oe(_e.__webglFramebuffer[He],j,F,36064,34069+He);E(F,ut)&&C(34067),n.unbindTexture()}else if(Ve){const He=j.texture;for(let Ce=0,Ge=He.length;Ce<Ge;Ce++){const Je=He[Ce],qe=r.get(Je);n.bindTexture(3553,qe.__webglTexture),q(3553,Je,ut),oe(_e.__webglFramebuffer,j,Je,36064+Ce,3553),E(Je,ut)&&C(3553)}n.unbindTexture()}else{let He=3553;(j.isWebGL3DRenderTarget||j.isWebGLArrayRenderTarget)&&(a?He=j.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(He,Ie.__webglTexture),q(He,F,ut),oe(_e.__webglFramebuffer,j,F,36064,He),E(F,ut)&&C(He),n.unbindTexture()}j.depthBuffer&&Q(j)}function ve(j){const F=b(j)||a,_e=j.isWebGLMultipleRenderTargets===!0?j.texture:[j.texture];for(let Ie=0,ke=_e.length;Ie<ke;Ie++){const Ve=_e[Ie];if(E(Ve,F)){const ut=j.isWebGLCubeRenderTarget?34067:3553,He=r.get(Ve).__webglTexture;n.bindTexture(ut,He),C(ut),n.unbindTexture()}}}function Re(j){if(a&&j.samples>0&&De(j)===!1){const F=j.isWebGLMultipleRenderTargets?j.texture:[j.texture],_e=j.width,Ie=j.height;let ke=16384;const Ve=[],ut=j.stencilBuffer?33306:36096,He=r.get(j),Ce=j.isWebGLMultipleRenderTargets===!0;if(Ce)for(let Ge=0;Ge<F.length;Ge++)n.bindFramebuffer(36160,He.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+Ge,36161,null),n.bindFramebuffer(36160,He.__webglFramebuffer),t.framebufferTexture2D(36009,36064+Ge,3553,null,0);n.bindFramebuffer(36008,He.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,He.__webglFramebuffer);for(let Ge=0;Ge<F.length;Ge++){Ve.push(36064+Ge),j.depthBuffer&&Ve.push(ut);const Je=He.__ignoreDepthValues!==void 0?He.__ignoreDepthValues:!1;if(Je===!1&&(j.depthBuffer&&(ke|=256),j.stencilBuffer&&(ke|=1024)),Ce&&t.framebufferRenderbuffer(36008,36064,36161,He.__webglColorRenderbuffer[Ge]),Je===!0&&(t.invalidateFramebuffer(36008,[ut]),t.invalidateFramebuffer(36009,[ut])),Ce){const qe=r.get(F[Ge]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,qe,0)}t.blitFramebuffer(0,0,_e,Ie,0,0,_e,Ie,ke,9728),m&&t.invalidateFramebuffer(36008,Ve)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),Ce)for(let Ge=0;Ge<F.length;Ge++){n.bindFramebuffer(36160,He.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+Ge,36161,He.__webglColorRenderbuffer[Ge]);const Je=r.get(F[Ge]).__webglTexture;n.bindFramebuffer(36160,He.__webglFramebuffer),t.framebufferTexture2D(36009,36064+Ge,3553,Je,0)}n.bindFramebuffer(36009,He.__webglMultisampledFramebuffer)}}function Le(j){return Math.min(u,j.samples)}function De(j){const F=r.get(j);return a&&j.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&F.__useRenderToTexture!==!1}function gt(j){const F=o.render.frame;g.get(j)!==F&&(g.set(j,F),j.update())}function je(j,F){const _e=j.encoding,Ie=j.format,ke=j.type;return j.isCompressedTexture===!0||j.isVideoTexture===!0||j.format===_v||_e!==ys&&(_e===un?a===!1?e.has("EXT_sRGB")===!0&&Ie===Ti?(j.format=_v,j.minFilter=Tn,j.generateMipmaps=!1):F=ZM.sRGBToLinear(F):(Ie!==Ti||ke!==ml)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",_e)),F}this.allocateTextureUnit=D,this.resetTextureUnits=Z,this.setTexture2D=z,this.setTexture2DArray=U,this.setTexture3D=V,this.setTextureCube=X,this.rebindTextures=de,this.setupRenderTarget=pe,this.updateRenderTargetMipmap=ve,this.updateMultisampleRenderTarget=Re,this.setupDepthRenderbuffer=Q,this.setupFrameBufferTexture=oe,this.useMultisampledRTT=De}function jz(t,e,n){const r=n.isWebGL2;function i(s,o=null){let a;if(s===ml)return 5121;if(s===mz)return 32819;if(s===gz)return 32820;if(s===hz)return 5120;if(s===fz)return 5122;if(s===$M)return 5123;if(s===pz)return 5124;if(s===qa)return 5125;if(s===Ko)return 5126;if(s===zu)return r?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===vz)return 6406;if(s===Ti)return 6408;if(s===xz)return 6409;if(s===_z)return 6410;if(s===ul)return 6402;if(s===Nu)return 34041;if(s===wz)return 6403;if(s===yz)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===_v)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===Sz)return 36244;if(s===bz)return 33319;if(s===Mz)return 33320;if(s===Ez)return 36249;if(s===O0||s===I0||s===D0||s===R0)if(o===un)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===O0)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===I0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===D0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===R0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===O0)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===I0)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===D0)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===R0)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===mS||s===gS||s===vS||s===yS)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===mS)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===gS)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===vS)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===yS)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===Tz)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===xS||s===_S)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===xS)return o===un?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===_S)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===wS||s===SS||s===bS||s===MS||s===ES||s===TS||s===AS||s===CS||s===PS||s===LS||s===OS||s===IS||s===DS||s===RS)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===wS)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===SS)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===bS)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===MS)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===ES)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===TS)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===AS)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===CS)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===PS)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===LS)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===OS)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===IS)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===DS)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===RS)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===zS)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===zS)return o===un?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===_u?r?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:i}}class $z extends jn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class fu extends Rt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const c7={type:"move"};class m_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new fu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new fu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new R,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new R),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new fu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new R,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new R),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const x of e.hand.values()){const y=n.getJointPose(x,r);if(c.joints[x.jointName]===void 0){const _=new fu;_.matrixAutoUpdate=!1,_.visible=!1,c.joints[x.jointName]=_,c.add(_)}const v=c.joints[x.jointName];y!==null&&(v.matrix.fromArray(y.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=y.radius),v.visible=y!==null}const d=c.joints["index-finger-tip"],u=c.joints["thumb-tip"],h=d.position.distanceTo(u.position),m=.02,g=.005;c.inputState.pinching&&h>m+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=m-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(c7)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}}class qz extends Bn{constructor(e,n,r,i,s,o,a,l,c,d){if(d=d!==void 0?d:ul,d!==ul&&d!==Nu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&d===ul&&(r=qa),r===void 0&&d===Nu&&(r=_u),super(null,i,s,o,a,l,d,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:Yn,this.minFilter=l!==void 0?l:Yn,this.flipY=!1,this.generateMipmaps=!1}}class d7 extends Ss{constructor(e,n){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=null,c=null,d=null,u=null,h=null,m=null;const g=n.getContextAttributes();let x=null,y=null;const v=[],_=[],S=new jn;S.layers.enable(1),S.viewport=new St;const b=new jn;b.layers.enable(2),b.viewport=new St;const A=[S,b],E=new $z;E.layers.enable(1),E.layers.enable(2);let C=null,T=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(N){let z=v[N];return z===void 0&&(z=new m_,v[N]=z),z.getTargetRaySpace()},this.getControllerGrip=function(N){let z=v[N];return z===void 0&&(z=new m_,v[N]=z),z.getGripSpace()},this.getHand=function(N){let z=v[N];return z===void 0&&(z=new m_,v[N]=z),z.getHandSpace()};function O(N){const z=_.indexOf(N.inputSource);if(z===-1)return;const U=v[z];U!==void 0&&U.dispatchEvent({type:N.type,data:N.inputSource})}function L(){i.removeEventListener("select",O),i.removeEventListener("selectstart",O),i.removeEventListener("selectend",O),i.removeEventListener("squeeze",O),i.removeEventListener("squeezestart",O),i.removeEventListener("squeezeend",O),i.removeEventListener("end",L),i.removeEventListener("inputsourceschange",k);for(let N=0;N<v.length;N++){const z=_[N];z!==null&&(_[N]=null,v[N].disconnect(z))}C=null,T=null,e.setRenderTarget(x),h=null,u=null,d=null,i=null,y=null,D.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(N){s=N,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(N){a=N,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(N){l=N},this.getBaseLayer=function(){return u!==null?u:h},this.getBinding=function(){return d},this.getFrame=function(){return m},this.getSession=function(){return i},this.setSession=async function(N){if(i=N,i!==null){if(x=e.getRenderTarget(),i.addEventListener("select",O),i.addEventListener("selectstart",O),i.addEventListener("selectend",O),i.addEventListener("squeeze",O),i.addEventListener("squeezestart",O),i.addEventListener("squeezeend",O),i.addEventListener("end",L),i.addEventListener("inputsourceschange",k),g.xrCompatible!==!0&&await n.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const z={antialias:i.renderState.layers===void 0?g.antialias:!0,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(i,n,z),i.updateRenderState({baseLayer:h}),y=new Di(h.framebufferWidth,h.framebufferHeight,{format:Ti,type:ml,encoding:e.outputEncoding,stencilBuffer:g.stencil})}else{let z=null,U=null,V=null;g.depth&&(V=g.stencil?35056:33190,z=g.stencil?Nu:ul,U=g.stencil?_u:qa);const X={colorFormat:32856,depthFormat:V,scaleFactor:s};d=new XRWebGLBinding(i,n),u=d.createProjectionLayer(X),i.updateRenderState({layers:[u]}),y=new Di(u.textureWidth,u.textureHeight,{format:Ti,type:ml,depthTexture:new qz(u.textureWidth,u.textureHeight,U,void 0,void 0,void 0,void 0,void 0,void 0,z),stencilBuffer:g.stencil,encoding:e.outputEncoding,samples:g.antialias?4:0});const J=e.properties.get(y);J.__ignoreDepthValues=u.ignoreDepthValues}y.isXRRenderTarget=!0,this.setFoveation(1),l=null,o=await i.requestReferenceSpace(a),D.setContext(i),D.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function k(N){for(let z=0;z<N.removed.length;z++){const U=N.removed[z],V=_.indexOf(U);V>=0&&(_[V]=null,v[V].dispatchEvent({type:"disconnected",data:U}))}for(let z=0;z<N.added.length;z++){const U=N.added[z];let V=_.indexOf(U);if(V===-1){for(let J=0;J<v.length;J++)if(J>=_.length){_.push(U),V=J;break}else if(_[J]===null){_[J]=U,V=J;break}if(V===-1)break}const X=v[V];X&&X.dispatchEvent({type:"connected",data:U})}}const B=new R,G=new R;function H(N,z,U){B.setFromMatrixPosition(z.matrixWorld),G.setFromMatrixPosition(U.matrixWorld);const V=B.distanceTo(G),X=z.projectionMatrix.elements,J=U.projectionMatrix.elements,ee=X[14]/(X[10]-1),q=X[14]/(X[10]+1),re=(X[9]+1)/X[5],ie=(X[9]-1)/X[5],K=(X[8]-1)/X[0],oe=(J[8]+1)/J[0],ye=ee*K,ne=ee*oe,Q=V/(-K+oe),de=Q*-K;z.matrixWorld.decompose(N.position,N.quaternion,N.scale),N.translateX(de),N.translateZ(Q),N.matrixWorld.compose(N.position,N.quaternion,N.scale),N.matrixWorldInverse.copy(N.matrixWorld).invert();const pe=ee+Q,ve=q+Q,Re=ye-de,Le=ne+(V-de),De=re*q/ve*pe,gt=ie*q/ve*pe;N.projectionMatrix.makePerspective(Re,Le,De,gt,pe,ve)}function Y(N,z){z===null?N.matrixWorld.copy(N.matrix):N.matrixWorld.multiplyMatrices(z.matrixWorld,N.matrix),N.matrixWorldInverse.copy(N.matrixWorld).invert()}this.updateCamera=function(N){if(i===null)return;E.near=b.near=S.near=N.near,E.far=b.far=S.far=N.far,(C!==E.near||T!==E.far)&&(i.updateRenderState({depthNear:E.near,depthFar:E.far}),C=E.near,T=E.far);const z=N.parent,U=E.cameras;Y(E,z);for(let X=0;X<U.length;X++)Y(U[X],z);E.matrixWorld.decompose(E.position,E.quaternion,E.scale),N.matrix.copy(E.matrix),N.matrix.decompose(N.position,N.quaternion,N.scale);const V=N.children;for(let X=0,J=V.length;X<J;X++)V[X].updateMatrixWorld(!0);U.length===2?H(E,S,b):E.projectionMatrix.copy(S.projectionMatrix)},this.getCamera=function(){return E},this.getFoveation=function(){if(u!==null)return u.fixedFoveation;if(h!==null)return h.fixedFoveation},this.setFoveation=function(N){u!==null&&(u.fixedFoveation=N),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=N)};let te=null;function Z(N,z){if(c=z.getViewerPose(l||o),m=z,c!==null){const U=c.views;h!==null&&(e.setRenderTargetFramebuffer(y,h.framebuffer),e.setRenderTarget(y));let V=!1;U.length!==E.cameras.length&&(E.cameras.length=0,V=!0);for(let X=0;X<U.length;X++){const J=U[X];let ee=null;if(h!==null)ee=h.getViewport(J);else{const re=d.getViewSubImage(u,J);ee=re.viewport,X===0&&(e.setRenderTargetTextures(y,re.colorTexture,u.ignoreDepthValues?void 0:re.depthStencilTexture),e.setRenderTarget(y))}let q=A[X];q===void 0&&(q=new jn,q.layers.enable(X),q.viewport=new St,A[X]=q),q.matrix.fromArray(J.transform.matrix),q.projectionMatrix.fromArray(J.projectionMatrix),q.viewport.set(ee.x,ee.y,ee.width,ee.height),X===0&&E.matrix.copy(q.matrix),V===!0&&E.cameras.push(q)}}for(let U=0;U<v.length;U++){const V=_[U],X=v[U];V!==null&&X!==void 0&&X.update(V,z,l||o)}te&&te(N,z),m=null}const D=new Uz;D.setAnimationLoop(Z),this.setAnimationLoop=function(N){te=N},this.dispose=function(){}}}function h7(t,e){function n(x,y){x.fogColor.value.copy(y.color),y.isFog?(x.fogNear.value=y.near,x.fogFar.value=y.far):y.isFogExp2&&(x.fogDensity.value=y.density)}function r(x,y,v,_,S){y.isMeshBasicMaterial||y.isMeshLambertMaterial?i(x,y):y.isMeshToonMaterial?(i(x,y),d(x,y)):y.isMeshPhongMaterial?(i(x,y),c(x,y)):y.isMeshStandardMaterial?(i(x,y),u(x,y),y.isMeshPhysicalMaterial&&h(x,y,S)):y.isMeshMatcapMaterial?(i(x,y),m(x,y)):y.isMeshDepthMaterial?i(x,y):y.isMeshDistanceMaterial?(i(x,y),g(x,y)):y.isMeshNormalMaterial?i(x,y):y.isLineBasicMaterial?(s(x,y),y.isLineDashedMaterial&&o(x,y)):y.isPointsMaterial?a(x,y,v,_):y.isSpriteMaterial?l(x,y):y.isShadowMaterial?(x.color.value.copy(y.color),x.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function i(x,y){x.opacity.value=y.opacity,y.color&&x.diffuse.value.copy(y.color),y.emissive&&x.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(x.map.value=y.map),y.alphaMap&&(x.alphaMap.value=y.alphaMap),y.bumpMap&&(x.bumpMap.value=y.bumpMap,x.bumpScale.value=y.bumpScale,y.side===pi&&(x.bumpScale.value*=-1)),y.displacementMap&&(x.displacementMap.value=y.displacementMap,x.displacementScale.value=y.displacementScale,x.displacementBias.value=y.displacementBias),y.emissiveMap&&(x.emissiveMap.value=y.emissiveMap),y.normalMap&&(x.normalMap.value=y.normalMap,x.normalScale.value.copy(y.normalScale),y.side===pi&&x.normalScale.value.negate()),y.specularMap&&(x.specularMap.value=y.specularMap),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest);const v=e.get(y).envMap;if(v&&(x.envMap.value=v,x.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=y.reflectivity,x.ior.value=y.ior,x.refractionRatio.value=y.refractionRatio),y.lightMap){x.lightMap.value=y.lightMap;const b=t.physicallyCorrectLights!==!0?Math.PI:1;x.lightMapIntensity.value=y.lightMapIntensity*b}y.aoMap&&(x.aoMap.value=y.aoMap,x.aoMapIntensity.value=y.aoMapIntensity);let _;y.map?_=y.map:y.specularMap?_=y.specularMap:y.displacementMap?_=y.displacementMap:y.normalMap?_=y.normalMap:y.bumpMap?_=y.bumpMap:y.roughnessMap?_=y.roughnessMap:y.metalnessMap?_=y.metalnessMap:y.alphaMap?_=y.alphaMap:y.emissiveMap?_=y.emissiveMap:y.clearcoatMap?_=y.clearcoatMap:y.clearcoatNormalMap?_=y.clearcoatNormalMap:y.clearcoatRoughnessMap?_=y.clearcoatRoughnessMap:y.iridescenceMap?_=y.iridescenceMap:y.iridescenceThicknessMap?_=y.iridescenceThicknessMap:y.specularIntensityMap?_=y.specularIntensityMap:y.specularColorMap?_=y.specularColorMap:y.transmissionMap?_=y.transmissionMap:y.thicknessMap?_=y.thicknessMap:y.sheenColorMap?_=y.sheenColorMap:y.sheenRoughnessMap&&(_=y.sheenRoughnessMap),_!==void 0&&(_.isWebGLRenderTarget&&(_=_.texture),_.matrixAutoUpdate===!0&&_.updateMatrix(),x.uvTransform.value.copy(_.matrix));let S;y.aoMap?S=y.aoMap:y.lightMap&&(S=y.lightMap),S!==void 0&&(S.isWebGLRenderTarget&&(S=S.texture),S.matrixAutoUpdate===!0&&S.updateMatrix(),x.uv2Transform.value.copy(S.matrix))}function s(x,y){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity}function o(x,y){x.dashSize.value=y.dashSize,x.totalSize.value=y.dashSize+y.gapSize,x.scale.value=y.scale}function a(x,y,v,_){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,x.size.value=y.size*v,x.scale.value=_*.5,y.map&&(x.map.value=y.map),y.alphaMap&&(x.alphaMap.value=y.alphaMap),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest);let S;y.map?S=y.map:y.alphaMap&&(S=y.alphaMap),S!==void 0&&(S.matrixAutoUpdate===!0&&S.updateMatrix(),x.uvTransform.value.copy(S.matrix))}function l(x,y){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,x.rotation.value=y.rotation,y.map&&(x.map.value=y.map),y.alphaMap&&(x.alphaMap.value=y.alphaMap),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest);let v;y.map?v=y.map:y.alphaMap&&(v=y.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),x.uvTransform.value.copy(v.matrix))}function c(x,y){x.specular.value.copy(y.specular),x.shininess.value=Math.max(y.shininess,1e-4)}function d(x,y){y.gradientMap&&(x.gradientMap.value=y.gradientMap)}function u(x,y){x.roughness.value=y.roughness,x.metalness.value=y.metalness,y.roughnessMap&&(x.roughnessMap.value=y.roughnessMap),y.metalnessMap&&(x.metalnessMap.value=y.metalnessMap),e.get(y).envMap&&(x.envMapIntensity.value=y.envMapIntensity)}function h(x,y,v){x.ior.value=y.ior,y.sheen>0&&(x.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),x.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(x.sheenColorMap.value=y.sheenColorMap),y.sheenRoughnessMap&&(x.sheenRoughnessMap.value=y.sheenRoughnessMap)),y.clearcoat>0&&(x.clearcoat.value=y.clearcoat,x.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(x.clearcoatMap.value=y.clearcoatMap),y.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap),y.clearcoatNormalMap&&(x.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),x.clearcoatNormalMap.value=y.clearcoatNormalMap,y.side===pi&&x.clearcoatNormalScale.value.negate())),y.iridescence>0&&(x.iridescence.value=y.iridescence,x.iridescenceIOR.value=y.iridescenceIOR,x.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(x.iridescenceMap.value=y.iridescenceMap),y.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=y.iridescenceThicknessMap)),y.transmission>0&&(x.transmission.value=y.transmission,x.transmissionSamplerMap.value=v.texture,x.transmissionSamplerSize.value.set(v.width,v.height),y.transmissionMap&&(x.transmissionMap.value=y.transmissionMap),x.thickness.value=y.thickness,y.thicknessMap&&(x.thicknessMap.value=y.thicknessMap),x.attenuationDistance.value=y.attenuationDistance,x.attenuationColor.value.copy(y.attenuationColor)),x.specularIntensity.value=y.specularIntensity,x.specularColor.value.copy(y.specularColor),y.specularIntensityMap&&(x.specularIntensityMap.value=y.specularIntensityMap),y.specularColorMap&&(x.specularColorMap.value=y.specularColorMap)}function m(x,y){y.matcap&&(x.matcap.value=y.matcap)}function g(x,y){x.referencePosition.value.copy(y.referencePosition),x.nearDistance.value=y.nearDistance,x.farDistance.value=y.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function f7(t,e,n,r){let i={},s={},o=[];const a=n.isWebGL2?t.getParameter(35375):0;function l(_,S){const b=S.program;r.uniformBlockBinding(_,b)}function c(_,S){let b=i[_.id];b===void 0&&(g(_),b=d(_),i[_.id]=b,_.addEventListener("dispose",y));const A=S.program;r.updateUBOMapping(_,A);const E=e.render.frame;s[_.id]!==E&&(h(_),s[_.id]=E)}function d(_){const S=u();_.__bindingPointIndex=S;const b=t.createBuffer(),A=_.__size,E=_.usage;return t.bindBuffer(35345,b),t.bufferData(35345,A,E),t.bindBuffer(35345,null),t.bindBufferBase(35345,S,b),b}function u(){for(let _=0;_<a;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(_){const S=i[_.id],b=_.uniforms,A=_.__cache;t.bindBuffer(35345,S);for(let E=0,C=b.length;E<C;E++){const T=b[E];if(m(T,E,A)===!0){const O=T.value,L=T.__offset;typeof O=="number"?(T.__data[0]=O,t.bufferSubData(35345,L,T.__data)):(T.value.isMatrix3?(T.__data[0]=T.value.elements[0],T.__data[1]=T.value.elements[1],T.__data[2]=T.value.elements[2],T.__data[3]=T.value.elements[0],T.__data[4]=T.value.elements[3],T.__data[5]=T.value.elements[4],T.__data[6]=T.value.elements[5],T.__data[7]=T.value.elements[0],T.__data[8]=T.value.elements[6],T.__data[9]=T.value.elements[7],T.__data[10]=T.value.elements[8],T.__data[11]=T.value.elements[0]):O.toArray(T.__data),t.bufferSubData(35345,L,T.__data))}}t.bindBuffer(35345,null)}function m(_,S,b){const A=_.value;if(b[S]===void 0)return typeof A=="number"?b[S]=A:b[S]=A.clone(),!0;if(typeof A=="number"){if(b[S]!==A)return b[S]=A,!0}else{const E=b[S];if(E.equals(A)===!1)return E.copy(A),!0}return!1}function g(_){const S=_.uniforms;let b=0;const A=16;let E=0;for(let C=0,T=S.length;C<T;C++){const O=S[C],L=x(O);if(O.__data=new Float32Array(L.storage/Float32Array.BYTES_PER_ELEMENT),O.__offset=b,C>0){E=b%A;const k=A-E;E!==0&&k-L.boundary<0&&(b+=A-E,O.__offset=b)}b+=L.storage}return E=b%A,E>0&&(b+=A-E),_.__size=b,_.__cache={},this}function x(_){const S=_.value,b={boundary:0,storage:0};return typeof S=="number"?(b.boundary=4,b.storage=4):S.isVector2?(b.boundary=8,b.storage=8):S.isVector3||S.isColor?(b.boundary=16,b.storage=12):S.isVector4?(b.boundary=16,b.storage=16):S.isMatrix3?(b.boundary=48,b.storage=48):S.isMatrix4?(b.boundary=64,b.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),b}function y(_){const S=_.target;S.removeEventListener("dispose",y);const b=o.indexOf(S.__bindingPointIndex);o.splice(b,1),t.deleteBuffer(i[S.id]),delete i[S.id],delete s[S.id]}function v(){for(const _ in i)t.deleteBuffer(i[_]);o=[],i={},s={}}return{bind:l,update:c,dispose:v}}function p7(){const t=ap("canvas");return t.style.display="block",t}function t2(t={}){this.isWebGLRenderer=!0;const e=t.canvas!==void 0?t.canvas:p7(),n=t.context!==void 0?t.context:null,r=t.depth!==void 0?t.depth:!0,i=t.stencil!==void 0?t.stencil:!0,s=t.antialias!==void 0?t.antialias:!1,o=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,a=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,l=t.powerPreference!==void 0?t.powerPreference:"default",c=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1;let d;n!==null?d=n.getContextAttributes().alpha:d=t.alpha!==void 0?t.alpha:!1;let u=null,h=null;const m=[],g=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=ys,this.physicallyCorrectLights=!1,this.toneMapping=Vs,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const x=this;let y=!1,v=0,_=0,S=null,b=-1,A=null;const E=new St,C=new St;let T=null,O=e.width,L=e.height,k=1,B=null,G=null;const H=new St(0,0,O,L),Y=new St(0,0,O,L);let te=!1;const Z=new Ay;let D=!1,N=!1,z=null;const U=new nt,V=new se,X=new R,J={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ee(){return S===null?k:1}let q=n;function re(W,ge){for(let Te=0;Te<W.length;Te++){const me=W[Te],Pe=e.getContext(me,ge);if(Pe!==null)return Pe}return null}try{const W={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${by}`),e.addEventListener("webglcontextlost",at,!1),e.addEventListener("webglcontextrestored",rt,!1),e.addEventListener("webglcontextcreationerror",Pt,!1),q===null){const ge=["webgl2","webgl","experimental-webgl"];if(x.isWebGL1Renderer===!0&&ge.shift(),q=re(ge,W),q===null)throw re(ge)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}q.getShaderPrecisionFormat===void 0&&(q.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(W){throw console.error("THREE.WebGLRenderer: "+W.message),W}let ie,K,oe,ye,ne,Q,de,pe,ve,Re,Le,De,gt,je,j,F,_e,Ie,ke,Ve,ut,He,Ce,Ge;function Je(){ie=new LW(q),K=new MW(q,ie,t),ie.init(K),He=new jz(q,ie,K),oe=new l7(q,ie,K),ye=new DW,ne=new Z9,Q=new u7(q,ie,oe,ne,K,He,ye),de=new TW(x),pe=new PW(x),ve=new H8(q,K),Ce=new SW(q,ie,ve,K),Re=new OW(q,ve,ye,Ce),Le=new kW(q,Re,ve,ye),ke=new NW(q,K,Q),F=new EW(ne),De=new Y9(x,de,pe,ie,K,Ce,F),gt=new h7(x,ne),je=new Q9,j=new i7(ie,K),Ie=new wW(x,de,pe,oe,Le,d,o),_e=new a7(x,Le,K),Ge=new f7(q,ye,K,oe),Ve=new bW(q,ie,ye,K),ut=new IW(q,ie,ye,K),ye.programs=De.programs,x.capabilities=K,x.extensions=ie,x.properties=ne,x.renderLists=je,x.shadowMap=_e,x.state=oe,x.info=ye}Je();const qe=new d7(x,q);this.xr=qe,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){const W=ie.get("WEBGL_lose_context");W&&W.loseContext()},this.forceContextRestore=function(){const W=ie.get("WEBGL_lose_context");W&&W.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(W){W!==void 0&&(k=W,this.setSize(O,L,!1))},this.getSize=function(W){return W.set(O,L)},this.setSize=function(W,ge,Te){if(qe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}O=W,L=ge,e.width=Math.floor(W*k),e.height=Math.floor(ge*k),Te!==!1&&(e.style.width=W+"px",e.style.height=ge+"px"),this.setViewport(0,0,W,ge)},this.getDrawingBufferSize=function(W){return W.set(O*k,L*k).floor()},this.setDrawingBufferSize=function(W,ge,Te){O=W,L=ge,k=Te,e.width=Math.floor(W*Te),e.height=Math.floor(ge*Te),this.setViewport(0,0,W,ge)},this.getCurrentViewport=function(W){return W.copy(E)},this.getViewport=function(W){return W.copy(H)},this.setViewport=function(W,ge,Te,me){W.isVector4?H.set(W.x,W.y,W.z,W.w):H.set(W,ge,Te,me),oe.viewport(E.copy(H).multiplyScalar(k).floor())},this.getScissor=function(W){return W.copy(Y)},this.setScissor=function(W,ge,Te,me){W.isVector4?Y.set(W.x,W.y,W.z,W.w):Y.set(W,ge,Te,me),oe.scissor(C.copy(Y).multiplyScalar(k).floor())},this.getScissorTest=function(){return te},this.setScissorTest=function(W){oe.setScissorTest(te=W)},this.setOpaqueSort=function(W){B=W},this.setTransparentSort=function(W){G=W},this.getClearColor=function(W){return W.copy(Ie.getClearColor())},this.setClearColor=function(){Ie.setClearColor.apply(Ie,arguments)},this.getClearAlpha=function(){return Ie.getClearAlpha()},this.setClearAlpha=function(){Ie.setClearAlpha.apply(Ie,arguments)},this.clear=function(W=!0,ge=!0,Te=!0){let me=0;W&&(me|=16384),ge&&(me|=256),Te&&(me|=1024),q.clear(me)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",at,!1),e.removeEventListener("webglcontextrestored",rt,!1),e.removeEventListener("webglcontextcreationerror",Pt,!1),je.dispose(),j.dispose(),ne.dispose(),de.dispose(),pe.dispose(),Le.dispose(),Ce.dispose(),Ge.dispose(),De.dispose(),qe.dispose(),qe.removeEventListener("sessionstart",Ae),qe.removeEventListener("sessionend",ze),z&&(z.dispose(),z=null),Ze.stop()};function at(W){W.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function rt(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const W=ye.autoReset,ge=_e.enabled,Te=_e.autoUpdate,me=_e.needsUpdate,Pe=_e.type;Je(),ye.autoReset=W,_e.enabled=ge,_e.autoUpdate=Te,_e.needsUpdate=me,_e.type=Pe}function Pt(W){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",W.statusMessage)}function Wt(W){const ge=W.target;ge.removeEventListener("dispose",Wt),pn(ge)}function pn(W){ae(W),ne.remove(W)}function ae(W){const ge=ne.get(W).programs;ge!==void 0&&(ge.forEach(function(Te){De.releaseProgram(Te)}),W.isShaderMaterial&&De.releaseShaderCache(W))}this.renderBufferDirect=function(W,ge,Te,me,Pe,ct){ge===null&&(ge=J);const xt=Pe.isMesh&&Pe.matrixWorld.determinant()<0,Tt=Vr(W,ge,Te,me,Pe);oe.setMaterial(me,xt);let Mt=Te.index;const Vt=Te.attributes.position;if(Mt===null){if(Vt===void 0||Vt.count===0)return}else if(Mt.count===0)return;let It=1;me.wireframe===!0&&(Mt=Re.getWireframeAttribute(Te),It=2),Ce.setup(Pe,me,Tt,Te,Mt);let Ft,_n=Ve;Mt!==null&&(Ft=ve.get(Mt),_n=ut,_n.setIndex(Ft));const Po=Mt!==null?Mt.count:Vt.count,xa=Te.drawRange.start*It,_a=Te.drawRange.count*It,Kr=ct!==null?ct.start*It:0,kt=ct!==null?ct.count*It:1/0,Js=Math.max(xa,Kr),wn=Math.min(Po,xa+_a,Kr+kt)-1,ei=Math.max(0,wn-Js+1);if(ei!==0){if(Pe.isMesh)me.wireframe===!0?(oe.setLineWidth(me.wireframeLinewidth*ee()),_n.setMode(1)):_n.setMode(4);else if(Pe.isLine){let Ui=me.linewidth;Ui===void 0&&(Ui=1),oe.setLineWidth(Ui*ee()),Pe.isLineSegments?_n.setMode(1):Pe.isLineLoop?_n.setMode(2):_n.setMode(3)}else Pe.isPoints?_n.setMode(0):Pe.isSprite&&_n.setMode(4);if(Pe.isInstancedMesh)_n.renderInstances(Js,ei,Pe.count);else if(Te.isInstancedBufferGeometry){const Ui=Math.min(Te.instanceCount,Te._maxInstanceCount);_n.renderInstances(Js,ei,Ui)}else _n.render(Js,ei)}},this.compile=function(W,ge){function Te(me,Pe,ct){me.transparent===!0&&me.side===yo?(me.side=pi,me.needsUpdate=!0,Ot(me,Pe,ct),me.side=pl,me.needsUpdate=!0,Ot(me,Pe,ct),me.side=yo):Ot(me,Pe,ct)}h=j.get(W),h.init(),g.push(h),W.traverseVisible(function(me){me.isLight&&me.layers.test(ge.layers)&&(h.pushLight(me),me.castShadow&&h.pushShadow(me))}),h.setupLights(x.physicallyCorrectLights),W.traverse(function(me){const Pe=me.material;if(Pe)if(Array.isArray(Pe))for(let ct=0;ct<Pe.length;ct++){const xt=Pe[ct];Te(xt,W,me)}else Te(Pe,W,me)}),g.pop(),h=null};let be=null;function Me(W){be&&be(W)}function Ae(){Ze.stop()}function ze(){Ze.start()}const Ze=new Uz;Ze.setAnimationLoop(Me),typeof self<"u"&&Ze.setContext(self),this.setAnimationLoop=function(W){be=W,qe.setAnimationLoop(W),W===null?Ze.stop():Ze.start()},qe.addEventListener("sessionstart",Ae),qe.addEventListener("sessionend",ze),this.render=function(W,ge){if(ge!==void 0&&ge.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(y===!0)return;W.matrixWorldAutoUpdate===!0&&W.updateMatrixWorld(),ge.parent===null&&ge.matrixWorldAutoUpdate===!0&&ge.updateMatrixWorld(),qe.enabled===!0&&qe.isPresenting===!0&&(qe.cameraAutoUpdate===!0&&qe.updateCamera(ge),ge=qe.getCamera()),W.isScene===!0&&W.onBeforeRender(x,W,ge,S),h=j.get(W,g.length),h.init(),g.push(h),U.multiplyMatrices(ge.projectionMatrix,ge.matrixWorldInverse),Z.setFromProjectionMatrix(U),N=this.localClippingEnabled,D=F.init(this.clippingPlanes,N,ge),u=je.get(W,m.length),u.init(),m.push(u),dt(W,ge,0,x.sortObjects),u.finish(),x.sortObjects===!0&&u.sort(B,G),D===!0&&F.beginShadows();const Te=h.state.shadowsArray;if(_e.render(Te,W,ge),D===!0&&F.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ie.render(u,W),h.setupLights(x.physicallyCorrectLights),ge.isArrayCamera){const me=ge.cameras;for(let Pe=0,ct=me.length;Pe<ct;Pe++){const xt=me[Pe];bt(u,W,xt,xt.viewport)}}else bt(u,W,ge);S!==null&&(Q.updateMultisampleRenderTarget(S),Q.updateRenderTargetMipmap(S)),W.isScene===!0&&W.onAfterRender(x,W,ge),Ce.resetDefaultState(),b=-1,A=null,g.pop(),g.length>0?h=g[g.length-1]:h=null,m.pop(),m.length>0?u=m[m.length-1]:u=null};function dt(W,ge,Te,me){if(W.visible===!1)return;if(W.layers.test(ge.layers)){if(W.isGroup)Te=W.renderOrder;else if(W.isLOD)W.autoUpdate===!0&&W.update(ge);else if(W.isLight)h.pushLight(W),W.castShadow&&h.pushShadow(W);else if(W.isSprite){if(!W.frustumCulled||Z.intersectsSprite(W)){me&&X.setFromMatrixPosition(W.matrixWorld).applyMatrix4(U);const xt=Le.update(W),Tt=W.material;Tt.visible&&u.push(W,xt,Tt,Te,X.z,null)}}else if((W.isMesh||W.isLine||W.isPoints)&&(W.isSkinnedMesh&&W.skeleton.frame!==ye.render.frame&&(W.skeleton.update(),W.skeleton.frame=ye.render.frame),!W.frustumCulled||Z.intersectsObject(W))){me&&X.setFromMatrixPosition(W.matrixWorld).applyMatrix4(U);const xt=Le.update(W),Tt=W.material;if(Array.isArray(Tt)){const Mt=xt.groups;for(let Vt=0,It=Mt.length;Vt<It;Vt++){const Ft=Mt[Vt],_n=Tt[Ft.materialIndex];_n&&_n.visible&&u.push(W,xt,_n,Te,X.z,Ft)}}else Tt.visible&&u.push(W,xt,Tt,Te,X.z,null)}}const ct=W.children;for(let xt=0,Tt=ct.length;xt<Tt;xt++)dt(ct[xt],ge,Te,me)}function bt(W,ge,Te,me){const Pe=W.opaque,ct=W.transmissive,xt=W.transparent;h.setupLightsView(Te),ct.length>0&&Nt(Pe,ge,Te),me&&oe.viewport(E.copy(me)),Pe.length>0&&ht(Pe,ge,Te),ct.length>0&&ht(ct,ge,Te),xt.length>0&&ht(xt,ge,Te),oe.buffers.depth.setTest(!0),oe.buffers.depth.setMask(!0),oe.buffers.color.setMask(!0),oe.setPolygonOffset(!1)}function Nt(W,ge,Te){const me=K.isWebGL2;z===null&&(z=new Di(1,1,{generateMipmaps:!0,type:ie.has("EXT_color_buffer_half_float")?zu:ml,minFilter:$u,samples:me&&s===!0?4:0})),x.getDrawingBufferSize(V),me?z.setSize(V.x,V.y):z.setSize(wv(V.x),wv(V.y));const Pe=x.getRenderTarget();x.setRenderTarget(z),x.clear();const ct=x.toneMapping;x.toneMapping=Vs,ht(W,ge,Te),x.toneMapping=ct,Q.updateMultisampleRenderTarget(z),Q.updateRenderTargetMipmap(z),x.setRenderTarget(Pe)}function ht(W,ge,Te){const me=ge.isScene===!0?ge.overrideMaterial:null;for(let Pe=0,ct=W.length;Pe<ct;Pe++){const xt=W[Pe],Tt=xt.object,Mt=xt.geometry,Vt=me===null?xt.material:me,It=xt.group;Tt.layers.test(Te.layers)&&zt(Tt,ge,Te,Mt,Vt,It)}}function zt(W,ge,Te,me,Pe,ct){W.onBeforeRender(x,ge,Te,me,Pe,ct),W.modelViewMatrix.multiplyMatrices(Te.matrixWorldInverse,W.matrixWorld),W.normalMatrix.getNormalMatrix(W.modelViewMatrix),Pe.onBeforeRender(x,ge,Te,me,W,ct),Pe.transparent===!0&&Pe.side===yo?(Pe.side=pi,Pe.needsUpdate=!0,x.renderBufferDirect(Te,ge,me,Pe,W,ct),Pe.side=pl,Pe.needsUpdate=!0,x.renderBufferDirect(Te,ge,me,Pe,W,ct),Pe.side=yo):x.renderBufferDirect(Te,ge,me,Pe,W,ct),W.onAfterRender(x,ge,Te,me,Pe,ct)}function Ot(W,ge,Te){ge.isScene!==!0&&(ge=J);const me=ne.get(W),Pe=h.state.lights,ct=h.state.shadowsArray,xt=Pe.state.version,Tt=De.getParameters(W,Pe.state,ct,ge,Te),Mt=De.getProgramCacheKey(Tt);let Vt=me.programs;me.environment=W.isMeshStandardMaterial?ge.environment:null,me.fog=ge.fog,me.envMap=(W.isMeshStandardMaterial?pe:de).get(W.envMap||me.environment),Vt===void 0&&(W.addEventListener("dispose",Wt),Vt=new Map,me.programs=Vt);let It=Vt.get(Mt);if(It!==void 0){if(me.currentProgram===It&&me.lightsStateVersion===xt)return Fn(W,Tt),It}else Tt.uniforms=De.getUniforms(W),W.onBuild(Te,Tt,x),W.onBeforeCompile(Tt,x),It=De.acquireProgram(Tt,Mt),Vt.set(Mt,It),me.uniforms=Tt.uniforms;const Ft=me.uniforms;(!W.isShaderMaterial&&!W.isRawShaderMaterial||W.clipping===!0)&&(Ft.clippingPlanes=F.uniform),Fn(W,Tt),me.needsLights=Fi(W),me.lightsStateVersion=xt,me.needsLights&&(Ft.ambientLightColor.value=Pe.state.ambient,Ft.lightProbe.value=Pe.state.probe,Ft.directionalLights.value=Pe.state.directional,Ft.directionalLightShadows.value=Pe.state.directionalShadow,Ft.spotLights.value=Pe.state.spot,Ft.spotLightShadows.value=Pe.state.spotShadow,Ft.rectAreaLights.value=Pe.state.rectArea,Ft.ltc_1.value=Pe.state.rectAreaLTC1,Ft.ltc_2.value=Pe.state.rectAreaLTC2,Ft.pointLights.value=Pe.state.point,Ft.pointLightShadows.value=Pe.state.pointShadow,Ft.hemisphereLights.value=Pe.state.hemi,Ft.directionalShadowMap.value=Pe.state.directionalShadowMap,Ft.directionalShadowMatrix.value=Pe.state.directionalShadowMatrix,Ft.spotShadowMap.value=Pe.state.spotShadowMap,Ft.spotLightMatrix.value=Pe.state.spotLightMatrix,Ft.spotLightMap.value=Pe.state.spotLightMap,Ft.pointShadowMap.value=Pe.state.pointShadowMap,Ft.pointShadowMatrix.value=Pe.state.pointShadowMatrix);const _n=It.getUniforms(),Po=B0.seqWithValue(_n.seq,Ft);return me.currentProgram=It,me.uniformsList=Po,It}function Fn(W,ge){const Te=ne.get(W);Te.outputEncoding=ge.outputEncoding,Te.instancing=ge.instancing,Te.skinning=ge.skinning,Te.morphTargets=ge.morphTargets,Te.morphNormals=ge.morphNormals,Te.morphColors=ge.morphColors,Te.morphTargetsCount=ge.morphTargetsCount,Te.numClippingPlanes=ge.numClippingPlanes,Te.numIntersection=ge.numClipIntersection,Te.vertexAlphas=ge.vertexAlphas,Te.vertexTangents=ge.vertexTangents,Te.toneMapping=ge.toneMapping}function Vr(W,ge,Te,me,Pe){ge.isScene!==!0&&(ge=J),Q.resetTextureUnits();const ct=ge.fog,xt=me.isMeshStandardMaterial?ge.environment:null,Tt=S===null?x.outputEncoding:S.isXRRenderTarget===!0?S.texture.encoding:ys,Mt=(me.isMeshStandardMaterial?pe:de).get(me.envMap||xt),Vt=me.vertexColors===!0&&!!Te.attributes.color&&Te.attributes.color.itemSize===4,It=!!me.normalMap&&!!Te.attributes.tangent,Ft=!!Te.morphAttributes.position,_n=!!Te.morphAttributes.normal,Po=!!Te.morphAttributes.color,xa=me.toneMapped?x.toneMapping:Vs,_a=Te.morphAttributes.position||Te.morphAttributes.normal||Te.morphAttributes.color,Kr=_a!==void 0?_a.length:0,kt=ne.get(me),Js=h.state.lights;if(D===!0&&(N===!0||W!==A)){const Jt=W===A&&me.id===b;F.setState(me,W,Jt)}let wn=!1;me.version===kt.__version?(kt.needsLights&&kt.lightsStateVersion!==Js.state.version||kt.outputEncoding!==Tt||Pe.isInstancedMesh&&kt.instancing===!1||!Pe.isInstancedMesh&&kt.instancing===!0||Pe.isSkinnedMesh&&kt.skinning===!1||!Pe.isSkinnedMesh&&kt.skinning===!0||kt.envMap!==Mt||me.fog===!0&&kt.fog!==ct||kt.numClippingPlanes!==void 0&&(kt.numClippingPlanes!==F.numPlanes||kt.numIntersection!==F.numIntersection)||kt.vertexAlphas!==Vt||kt.vertexTangents!==It||kt.morphTargets!==Ft||kt.morphNormals!==_n||kt.morphColors!==Po||kt.toneMapping!==xa||K.isWebGL2===!0&&kt.morphTargetsCount!==Kr)&&(wn=!0):(wn=!0,kt.__version=me.version);let ei=kt.currentProgram;wn===!0&&(ei=Ot(me,ge,Pe));let Ui=!1,Vi=!1,Hi=!1;const Et=ei.getUniforms(),Ut=kt.uniforms;if(oe.useProgram(ei.program)&&(Ui=!0,Vi=!0,Hi=!0),me.id!==b&&(b=me.id,Vi=!0),Ui||A!==W){if(Et.setValue(q,"projectionMatrix",W.projectionMatrix),K.logarithmicDepthBuffer&&Et.setValue(q,"logDepthBufFC",2/(Math.log(W.far+1)/Math.LN2)),A!==W&&(A=W,Vi=!0,Hi=!0),me.isShaderMaterial||me.isMeshPhongMaterial||me.isMeshToonMaterial||me.isMeshStandardMaterial||me.envMap){const Jt=Et.map.cameraPosition;Jt!==void 0&&Jt.setValue(q,X.setFromMatrixPosition(W.matrixWorld))}(me.isMeshPhongMaterial||me.isMeshToonMaterial||me.isMeshLambertMaterial||me.isMeshBasicMaterial||me.isMeshStandardMaterial||me.isShaderMaterial)&&Et.setValue(q,"isOrthographic",W.isOrthographicCamera===!0),(me.isMeshPhongMaterial||me.isMeshToonMaterial||me.isMeshLambertMaterial||me.isMeshBasicMaterial||me.isMeshStandardMaterial||me.isShaderMaterial||me.isShadowMaterial||Pe.isSkinnedMesh)&&Et.setValue(q,"viewMatrix",W.matrixWorldInverse)}if(Pe.isSkinnedMesh){Et.setOptional(q,Pe,"bindMatrix"),Et.setOptional(q,Pe,"bindMatrixInverse");const Jt=Pe.skeleton;Jt&&(K.floatVertexTextures?(Jt.boneTexture===null&&Jt.computeBoneTexture(),Et.setValue(q,"boneTexture",Jt.boneTexture,Q),Et.setValue(q,"boneTextureSize",Jt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Gi=Te.morphAttributes;if((Gi.position!==void 0||Gi.normal!==void 0||Gi.color!==void 0&&K.isWebGL2===!0)&&ke.update(Pe,Te,me,ei),(Vi||kt.receiveShadow!==Pe.receiveShadow)&&(kt.receiveShadow=Pe.receiveShadow,Et.setValue(q,"receiveShadow",Pe.receiveShadow)),me.isMeshGouraudMaterial&&me.envMap!==null&&(Ut.envMap.value=Mt,Ut.flipEnvMap.value=Mt.isCubeTexture&&Mt.isRenderTargetTexture===!1?-1:1),Vi&&(Et.setValue(q,"toneMappingExposure",x.toneMappingExposure),kt.needsLights&&ar(Ut,Hi),ct&&me.fog===!0&&gt.refreshFogUniforms(Ut,ct),gt.refreshMaterialUniforms(Ut,me,k,L,z),B0.upload(q,kt.uniformsList,Ut,Q)),me.isShaderMaterial&&me.uniformsNeedUpdate===!0&&(B0.upload(q,kt.uniformsList,Ut,Q),me.uniformsNeedUpdate=!1),me.isSpriteMaterial&&Et.setValue(q,"center",Pe.center),Et.setValue(q,"modelViewMatrix",Pe.modelViewMatrix),Et.setValue(q,"normalMatrix",Pe.normalMatrix),Et.setValue(q,"modelMatrix",Pe.matrixWorld),me.isShaderMaterial||me.isRawShaderMaterial){const Jt=me.uniformsGroups;for(let lr=0,Lo=Jt.length;lr<Lo;lr++)if(K.isWebGL2){const Oo=Jt[lr];Ge.update(Oo,ei),Ge.bind(Oo,ei)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ei}function ar(W,ge){W.ambientLightColor.needsUpdate=ge,W.lightProbe.needsUpdate=ge,W.directionalLights.needsUpdate=ge,W.directionalLightShadows.needsUpdate=ge,W.pointLights.needsUpdate=ge,W.pointLightShadows.needsUpdate=ge,W.spotLights.needsUpdate=ge,W.spotLightShadows.needsUpdate=ge,W.rectAreaLights.needsUpdate=ge,W.hemisphereLights.needsUpdate=ge}function Fi(W){return W.isMeshLambertMaterial||W.isMeshToonMaterial||W.isMeshPhongMaterial||W.isMeshStandardMaterial||W.isShadowMaterial||W.isShaderMaterial&&W.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(W,ge,Te){ne.get(W.texture).__webglTexture=ge,ne.get(W.depthTexture).__webglTexture=Te;const me=ne.get(W);me.__hasExternalTextures=!0,me.__hasExternalTextures&&(me.__autoAllocateDepthBuffer=Te===void 0,me.__autoAllocateDepthBuffer||ie.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),me.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(W,ge){const Te=ne.get(W);Te.__webglFramebuffer=ge,Te.__useDefaultFramebuffer=ge===void 0},this.setRenderTarget=function(W,ge=0,Te=0){S=W,v=ge,_=Te;let me=!0,Pe=null,ct=!1,xt=!1;if(W){const Mt=ne.get(W);Mt.__useDefaultFramebuffer!==void 0?(oe.bindFramebuffer(36160,null),me=!1):Mt.__webglFramebuffer===void 0?Q.setupRenderTarget(W):Mt.__hasExternalTextures&&Q.rebindTextures(W,ne.get(W.texture).__webglTexture,ne.get(W.depthTexture).__webglTexture);const Vt=W.texture;(Vt.isData3DTexture||Vt.isDataArrayTexture||Vt.isCompressedArrayTexture)&&(xt=!0);const It=ne.get(W).__webglFramebuffer;W.isWebGLCubeRenderTarget?(Pe=It[ge],ct=!0):K.isWebGL2&&W.samples>0&&Q.useMultisampledRTT(W)===!1?Pe=ne.get(W).__webglMultisampledFramebuffer:Pe=It,E.copy(W.viewport),C.copy(W.scissor),T=W.scissorTest}else E.copy(H).multiplyScalar(k).floor(),C.copy(Y).multiplyScalar(k).floor(),T=te;if(oe.bindFramebuffer(36160,Pe)&&K.drawBuffers&&me&&oe.drawBuffers(W,Pe),oe.viewport(E),oe.scissor(C),oe.setScissorTest(T),ct){const Mt=ne.get(W.texture);q.framebufferTexture2D(36160,36064,34069+ge,Mt.__webglTexture,Te)}else if(xt){const Mt=ne.get(W.texture),Vt=ge||0;q.framebufferTextureLayer(36160,36064,Mt.__webglTexture,Te||0,Vt)}b=-1},this.readRenderTargetPixels=function(W,ge,Te,me,Pe,ct,xt){if(!(W&&W.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Tt=ne.get(W).__webglFramebuffer;if(W.isWebGLCubeRenderTarget&&xt!==void 0&&(Tt=Tt[xt]),Tt){oe.bindFramebuffer(36160,Tt);try{const Mt=W.texture,Vt=Mt.format,It=Mt.type;if(Vt!==Ti&&He.convert(Vt)!==q.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ft=It===zu&&(ie.has("EXT_color_buffer_half_float")||K.isWebGL2&&ie.has("EXT_color_buffer_float"));if(It!==ml&&He.convert(It)!==q.getParameter(35738)&&!(It===Ko&&(K.isWebGL2||ie.has("OES_texture_float")||ie.has("WEBGL_color_buffer_float")))&&!Ft){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ge>=0&&ge<=W.width-me&&Te>=0&&Te<=W.height-Pe&&q.readPixels(ge,Te,me,Pe,He.convert(Vt),He.convert(It),ct)}finally{const Mt=S!==null?ne.get(S).__webglFramebuffer:null;oe.bindFramebuffer(36160,Mt)}}},this.copyFramebufferToTexture=function(W,ge,Te=0){const me=Math.pow(2,-Te),Pe=Math.floor(ge.image.width*me),ct=Math.floor(ge.image.height*me);Q.setTexture2D(ge,0),q.copyTexSubImage2D(3553,Te,0,0,W.x,W.y,Pe,ct),oe.unbindTexture()},this.copyTextureToTexture=function(W,ge,Te,me=0){const Pe=ge.image.width,ct=ge.image.height,xt=He.convert(Te.format),Tt=He.convert(Te.type);Q.setTexture2D(Te,0),q.pixelStorei(37440,Te.flipY),q.pixelStorei(37441,Te.premultiplyAlpha),q.pixelStorei(3317,Te.unpackAlignment),ge.isDataTexture?q.texSubImage2D(3553,me,W.x,W.y,Pe,ct,xt,Tt,ge.image.data):ge.isCompressedTexture?q.compressedTexSubImage2D(3553,me,W.x,W.y,ge.mipmaps[0].width,ge.mipmaps[0].height,xt,ge.mipmaps[0].data):q.texSubImage2D(3553,me,W.x,W.y,xt,Tt,ge.image),me===0&&Te.generateMipmaps&&q.generateMipmap(3553),oe.unbindTexture()},this.copyTextureToTexture3D=function(W,ge,Te,me,Pe=0){if(x.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const ct=W.max.x-W.min.x+1,xt=W.max.y-W.min.y+1,Tt=W.max.z-W.min.z+1,Mt=He.convert(me.format),Vt=He.convert(me.type);let It;if(me.isData3DTexture)Q.setTexture3D(me,0),It=32879;else if(me.isDataArrayTexture)Q.setTexture2DArray(me,0),It=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}q.pixelStorei(37440,me.flipY),q.pixelStorei(37441,me.premultiplyAlpha),q.pixelStorei(3317,me.unpackAlignment);const Ft=q.getParameter(3314),_n=q.getParameter(32878),Po=q.getParameter(3316),xa=q.getParameter(3315),_a=q.getParameter(32877),Kr=Te.isCompressedTexture?Te.mipmaps[0]:Te.image;q.pixelStorei(3314,Kr.width),q.pixelStorei(32878,Kr.height),q.pixelStorei(3316,W.min.x),q.pixelStorei(3315,W.min.y),q.pixelStorei(32877,W.min.z),Te.isDataTexture||Te.isData3DTexture?q.texSubImage3D(It,Pe,ge.x,ge.y,ge.z,ct,xt,Tt,Mt,Vt,Kr.data):Te.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),q.compressedTexSubImage3D(It,Pe,ge.x,ge.y,ge.z,ct,xt,Tt,Mt,Kr.data)):q.texSubImage3D(It,Pe,ge.x,ge.y,ge.z,ct,xt,Tt,Mt,Vt,Kr),q.pixelStorei(3314,Ft),q.pixelStorei(32878,_n),q.pixelStorei(3316,Po),q.pixelStorei(3315,xa),q.pixelStorei(32877,_a),Pe===0&&me.generateMipmaps&&q.generateMipmap(It),oe.unbindTexture()},this.initTexture=function(W){W.isCubeTexture?Q.setTextureCube(W,0):W.isData3DTexture?Q.setTexture3D(W,0):W.isDataArrayTexture||W.isCompressedArrayTexture?Q.setTexture2DArray(W,0):Q.setTexture2D(W,0),oe.unbindTexture()},this.resetState=function(){v=0,_=0,S=null,oe.reset(),Ce.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class Xz extends t2{}Xz.prototype.isWebGL1Renderer=!0;class Py{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new We(e),this.density=n}clone(){return new Py(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class zp{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new We(e),this.near=n,this.far=r}clone(){return new zp(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Ly extends Rt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.backgroundBlurriness=this.backgroundBlurriness),n}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Oy{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=sp,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Li()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Li()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Li()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Wr=new R;class ku{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)Wr.fromBufferAttribute(this,n),Wr.applyMatrix4(e),this.setXYZ(n,Wr.x,Wr.y,Wr.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Wr.fromBufferAttribute(this,n),Wr.applyNormalMatrix(e),this.setXYZ(n,Wr.x,Wr.y,Wr.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Wr.fromBufferAttribute(this,n),Wr.transformDirection(e),this.setXYZ(n,Wr.x,Wr.y,Wr.z);return this}setX(e,n){return this.normalized&&(n=cn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=cn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=cn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=cn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=ea(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=ea(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=ea(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=ea(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=cn(n,this.array),r=cn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=cn(n,this.array),r=cn(r,this.array),i=cn(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=cn(n,this.array),r=cn(r,this.array),i=cn(i,this.array),s=cn(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new vt(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ku(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class n2 extends Er{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new We(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Lc;const Vh=new R,Oc=new R,Ic=new R,Dc=new se,Hh=new se,Yz=new nt,zg=new R,Gh=new R,Ng=new R,JA=new se,g_=new se,QA=new se;class Zz extends Rt{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Lc===void 0){Lc=new tt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Oy(n,5);Lc.setIndex([0,1,2,0,2,3]),Lc.setAttribute("position",new ku(r,3,0,!1)),Lc.setAttribute("uv",new ku(r,2,3,!1))}this.geometry=Lc,this.material=e!==void 0?e:new n2,this.center=new se(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Oc.setFromMatrixScale(this.matrixWorld),Yz.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ic.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Oc.multiplyScalar(-Ic.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;kg(zg.set(-.5,-.5,0),Ic,o,Oc,i,s),kg(Gh.set(.5,-.5,0),Ic,o,Oc,i,s),kg(Ng.set(.5,.5,0),Ic,o,Oc,i,s),JA.set(0,0),g_.set(1,0),QA.set(1,1);let a=e.ray.intersectTriangle(zg,Gh,Ng,!1,Vh);if(a===null&&(kg(Gh.set(-.5,.5,0),Ic,o,Oc,i,s),g_.set(0,1),a=e.ray.intersectTriangle(zg,Ng,Gh,!1,Vh),a===null))return;const l=e.ray.origin.distanceTo(Vh);l<e.near||l>e.far||n.push({distance:l,point:Vh.clone(),uv:Ai.getUV(Vh,zg,Gh,Ng,JA,g_,QA,new se),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function kg(t,e,n,r,i,s){Dc.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(Hh.x=s*Dc.x-i*Dc.y,Hh.y=i*Dc.x+s*Dc.y):Hh.copy(Dc),t.copy(e),t.x+=Hh.x,t.y+=Hh.y,t.applyMatrix4(Yz)}const Bg=new R,KA=new R;class Jz extends Rt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0){n=Math.abs(n);const r=this.levels;let i;for(i=0;i<r.length&&!(n<r[i].distance);i++);return r.splice(i,0,{distance:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i&&!(e<n[r].distance);r++);return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){Bg.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Bg);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){Bg.setFromMatrixPosition(e.matrixWorld),KA.setFromMatrixPosition(this.matrixWorld);const r=Bg.distanceTo(KA)/e.zoom;n[0].object.visible=!0;let i,s;for(i=1,s=n.length;i<s&&r>=n[i].distance;i++)n[i-1].object.visible=!1,n[i].object.visible=!0;for(this._currentLevel=i-1;i<s;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];n.object.levels.push({object:o.object.uuid,distance:o.distance})}return n}}const eC=new R,tC=new St,nC=new St,m7=new R,rC=new nt;class Qz extends Qn{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new nt,this.bindMatrixInverse=new nt}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new St,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,n){const r=this.skeleton,i=this.geometry;tC.fromBufferAttribute(i.attributes.skinIndex,e),nC.fromBufferAttribute(i.attributes.skinWeight,e),eC.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=nC.getComponent(s);if(o!==0){const a=tC.getComponent(s);rC.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(m7.copy(eC).applyMatrix4(rC),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}class r2 extends Rt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class gd extends Bn{constructor(e=null,n=1,r=1,i,s,o,a,l,c=Yn,d=Yn,u,h){super(null,o,a,l,c,d,i,s,u,h),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const iC=new nt,g7=new nt;class Iy{constructor(e=[],n=[]){this.uuid=Li(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new nt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new nt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:g7;iC.multiplyMatrices(a,n[s]),iC.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Iy(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=zz(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new gd(n,e,e,Ti,Ko);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new r2),this.bones.push(o),this.boneInverses.push(new nt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,s=n.length;i<s;i++){const o=n[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Dd extends vt{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const sC=new nt,oC=new nt,Fg=[],v7=new nt,Wh=new Qn;class Kz extends Qn{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Dd(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1;for(let i=0;i<r;i++)this.setMatrixAt(i,v7)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const r=this.matrixWorld,i=this.count;if(Wh.geometry=this.geometry,Wh.material=this.material,Wh.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,sC),oC.multiplyMatrices(r,sC),Wh.matrixWorld=oC,Wh.raycast(e,Fg);for(let o=0,a=Fg.length;o<a;o++){const l=Fg[o];l.instanceId=s,l.object=this,n.push(l)}Fg.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Dd(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Ur extends Er{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new We(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const aC=new R,lC=new R,uC=new nt,v_=new Sl,Ug=new xs;class vl extends Rt{constructor(e=new tt,n=new Ur){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)aC.fromBufferAttribute(n,i-1),lC.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=aC.distanceTo(lC);e.setAttribute("lineDistance",new Ne(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Ug.copy(r.boundingSphere),Ug.applyMatrix4(i),Ug.radius+=s,e.ray.intersectsSphere(Ug)===!1)return;uC.copy(i).invert(),v_.copy(e.ray).applyMatrix4(uC);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new R,d=new R,u=new R,h=new R,m=this.isLineSegments?2:1,g=r.index,y=r.attributes.position;if(g!==null){const v=Math.max(0,o.start),_=Math.min(g.count,o.start+o.count);for(let S=v,b=_-1;S<b;S+=m){const A=g.getX(S),E=g.getX(S+1);if(c.fromBufferAttribute(y,A),d.fromBufferAttribute(y,E),v_.distanceSqToSegment(c,d,h,u)>l)continue;h.applyMatrix4(this.matrixWorld);const T=e.ray.origin.distanceTo(h);T<e.near||T>e.far||n.push({distance:T,point:u.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,o.start),_=Math.min(y.count,o.start+o.count);for(let S=v,b=_-1;S<b;S+=m){if(c.fromBufferAttribute(y,S),d.fromBufferAttribute(y,S+1),v_.distanceSqToSegment(c,d,h,u)>l)continue;h.applyMatrix4(this.matrixWorld);const E=e.ray.origin.distanceTo(h);E<e.near||E>e.far||n.push({distance:E,point:u.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const cC=new R,dC=new R;class Xs extends vl{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)cC.fromBufferAttribute(n,i),dC.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+cC.distanceTo(dC);e.setAttribute("lineDistance",new Ne(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class eN extends vl{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class i2 extends Er{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new We(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const hC=new nt,US=new Sl,Vg=new xs,Hg=new R;class tN extends Rt{constructor(e=new tt,n=new i2){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Vg.copy(r.boundingSphere),Vg.applyMatrix4(i),Vg.radius+=s,e.ray.intersectsSphere(Vg)===!1)return;hC.copy(i).invert(),US.copy(e.ray).applyMatrix4(hC);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,u=r.attributes.position;if(c!==null){const h=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let g=h,x=m;g<x;g++){const y=c.getX(g);Hg.fromBufferAttribute(u,y),fC(Hg,y,l,i,e,n,this)}}else{const h=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let g=h,x=m;g<x;g++)Hg.fromBufferAttribute(u,g),fC(Hg,g,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function fC(t,e,n,r,i,s,o){const a=US.distanceSqToPoint(t);if(a<n){const l=new R;US.closestPointToPoint(t,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class y7 extends Bn{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Tn,this.magFilter=s!==void 0?s:Tn,this.generateMipmaps=!1;const d=this;function u(){d.needsUpdate=!0,e.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(u)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class x7 extends Bn{constructor(e,n,r){super({width:e,height:n}),this.isFramebufferTexture=!0,this.format=r,this.magFilter=Yn,this.minFilter=Yn,this.generateMipmaps=!1,this.needsUpdate=!0}}class s2 extends Bn{constructor(e,n,r,i,s,o,a,l,c,d,u,h){super(null,o,a,l,c,d,i,s,u,h),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class _7 extends s2{constructor(e,n,r,i,s,o){super(e,n,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=kr}}class w7 extends Bn{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ys{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),n.push(s),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const s=r.length;let o;n?o=n:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const d=r[i],h=r[i+1]-d,m=(o-d)/h;return(i+m)/(s-1)}getTangent(e,n){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=n||(o.isVector2?new se:new R);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new R,i=[],s=[],o=[],a=new R,l=new nt;for(let m=0;m<=e;m++){const g=m/e;i[m]=this.getTangentAt(g,new R)}s[0]=new R,o[0]=new R;let c=Number.MAX_VALUE;const d=Math.abs(i[0].x),u=Math.abs(i[0].y),h=Math.abs(i[0].z);d<=c&&(c=d,r.set(1,0,0)),u<=c&&(c=u,r.set(0,1,0)),h<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(Wn(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,g))}o[m].crossVectors(i[m],s[m])}if(n===!0){let m=Math.acos(Wn(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(i[g],m*g)),o[g].crossVectors(i[g],s[g])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Np extends Ys{constructor(e=0,n=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const r=n||new se,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const d=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=l-this.aX,m=c-this.aY;l=h*d-m*u+this.aX,c=h*u+m*d+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class nN extends Np{constructor(e,n,r,i,s,o){super(e,n,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function o2(){let t=0,e=0,n=0,r=0;function i(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,d,u){let h=(o-s)/c-(a-s)/(c+d)+(a-o)/d,m=(a-o)/d-(l-o)/(d+u)+(l-a)/u;h*=d,m*=d,i(o,a,h,m)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+r*a}}}const Gg=new R,y_=new o2,x_=new o2,__=new o2;class rN extends Ys{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new R){const r=n,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,d;this.closed||a>0?c=i[(a-1)%s]:(Gg.subVectors(i[0],i[1]).add(i[0]),c=Gg);const u=i[a%s],h=i[(a+1)%s];if(this.closed||a+2<s?d=i[(a+2)%s]:(Gg.subVectors(i[s-1],i[s-2]).add(i[s-1]),d=Gg),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(u),m),x=Math.pow(u.distanceToSquared(h),m),y=Math.pow(h.distanceToSquared(d),m);x<1e-4&&(x=1),g<1e-4&&(g=x),y<1e-4&&(y=x),y_.initNonuniformCatmullRom(c.x,u.x,h.x,d.x,g,x,y),x_.initNonuniformCatmullRom(c.y,u.y,h.y,d.y,g,x,y),__.initNonuniformCatmullRom(c.z,u.z,h.z,d.z,g,x,y)}else this.curveType==="catmullrom"&&(y_.initCatmullRom(c.x,u.x,h.x,d.x,this.tension),x_.initCatmullRom(c.y,u.y,h.y,d.y,this.tension),__.initCatmullRom(c.z,u.z,h.z,d.z,this.tension));return r.set(y_.calc(l),x_.calc(l),__.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new R().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function pC(t,e,n,r,i){const s=(r-e)*.5,o=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+s+o)*l+(-3*n+3*r-2*s-o)*a+s*t+n}function S7(t,e){const n=1-t;return n*n*e}function b7(t,e){return 2*(1-t)*t*e}function M7(t,e){return t*t*e}function Af(t,e,n,r){return S7(t,e)+b7(t,n)+M7(t,r)}function E7(t,e){const n=1-t;return n*n*n*e}function T7(t,e){const n=1-t;return 3*n*n*t*e}function A7(t,e){return 3*(1-t)*t*t*e}function C7(t,e){return t*t*t*e}function Cf(t,e,n,r,i){return E7(t,e)+T7(t,n)+A7(t,r)+C7(t,i)}class hs extends Ys{constructor(e=new se,n=new se,r=new se,i=new se){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new se){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Cf(e,i.x,s.x,o.x,a.x),Cf(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class iN extends Ys{constructor(e=new R,n=new R,r=new R,i=new R){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new R){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Cf(e,i.x,s.x,o.x,a.x),Cf(e,i.y,s.y,o.y,a.y),Cf(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ps extends Ys{constructor(e=new se,n=new se){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new se){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n){const r=n||new se;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class a2 extends Ys{constructor(e=new R,n=new R){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new R){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pa extends Ys{constructor(e=new se,n=new se,r=new se){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new se){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(Af(e,i.x,s.x,o.x),Af(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class l2 extends Ys{constructor(e=new R,n=new R,r=new R){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new R){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(Af(e,i.x,s.x,o.x),Af(e,i.y,s.y,o.y),Af(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Dy extends Ys{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new se){const r=n,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],d=i[o>i.length-2?i.length-1:o+1],u=i[o>i.length-3?i.length-1:o+2];return r.set(pC(a,l.x,c.x,d.x,u.x),pC(a,l.y,c.y,d.y,u.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new se().fromArray(i))}return this}}var u2=Object.freeze({__proto__:null,ArcCurve:nN,CatmullRomCurve3:rN,CubicBezierCurve:hs,CubicBezierCurve3:iN,EllipseCurve:Np,LineCurve:ps,LineCurve3:a2,QuadraticBezierCurve:pa,QuadraticBezierCurve3:l2,SplineCurve:Dy});class sN extends Ys{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new ps(n,e))}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const d=l[c];r&&r.equals(d)||(n.push(d),r=d)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new u2[i.type]().fromJSON(i))}return this}}class Bu extends sN{constructor(e){super(),this.type="Path",this.currentPoint=new se,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new ps(this.currentPoint.clone(),new se(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const s=new pa(this.currentPoint.clone(),new se(e,n),new se(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,s,o){const a=new hs(this.currentPoint.clone(),new se(e,n),new se(r,i),new se(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new Dy(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,s,o),this}absarc(e,n,r,i,s,o){return this.absellipse(e,n,r,r,i,s,o),this}ellipse(e,n,r,i,s,o,a,l){const c=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+c,n+d,r,i,s,o,a,l),this}absellipse(e,n,r,i,s,o,a,l){const c=new Np(e,n,r,i,s,o,a,l);if(this.curves.length>0){const u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Yu extends tt{constructor(e=[new se(0,-.5),new se(.5,0),new se(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=Wn(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],d=1/n,u=new R,h=new se,m=new R,g=new R,x=new R;let y=0,v=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:y=e[_+1].x-e[_].x,v=e[_+1].y-e[_].y,m.x=v*1,m.y=-y,m.z=v*0,x.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:y=e[_+1].x-e[_].x,v=e[_+1].y-e[_].y,m.x=v*1,m.y=-y,m.z=v*0,g.copy(m),m.x+=x.x,m.y+=x.y,m.z+=x.z,m.normalize(),l.push(m.x,m.y,m.z),x.copy(g)}for(let _=0;_<=n;_++){const S=r+_*d*i,b=Math.sin(S),A=Math.cos(S);for(let E=0;E<=e.length-1;E++){u.x=e[E].x*b,u.y=e[E].y,u.z=e[E].x*A,o.push(u.x,u.y,u.z),h.x=_/n,h.y=E/(e.length-1),a.push(h.x,h.y);const C=l[3*E+0]*b,T=l[3*E+1],O=l[3*E+0]*A;c.push(C,T,O)}}for(let _=0;_<n;_++)for(let S=0;S<e.length-1;S++){const b=S+_*e.length,A=b,E=b+e.length,C=b+e.length+1,T=b+1;s.push(A,E,T),s.push(C,T,E)}this.setIndex(s),this.setAttribute("position",new Ne(o,3)),this.setAttribute("uv",new Ne(a,2)),this.setAttribute("normal",new Ne(c,3))}static fromJSON(e){return new Yu(e.points,e.segments,e.phiStart,e.phiLength)}}class kp extends Yu{constructor(e=1,n=1,r=4,i=8){const s=new Bu;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new kp(e.radius,e.length,e.capSegments,e.radialSegments)}}class Bp extends tt{constructor(e=1,n=8,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const s=[],o=[],a=[],l=[],c=new R,d=new se;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let u=0,h=3;u<=n;u++,h+=3){const m=r+u/n*i;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),d.x=(o[h]/e+1)/2,d.y=(o[h+1]/e+1)/2,l.push(d.x,d.y)}for(let u=1;u<=n;u++)s.push(u,u+1,0);this.setIndex(s),this.setAttribute("position",new Ne(o,3)),this.setAttribute("normal",new Ne(a,3)),this.setAttribute("uv",new Ne(l,2))}static fromJSON(e){return new Bp(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Tl extends tt{constructor(e=1,n=1,r=1,i=8,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const d=[],u=[],h=[],m=[];let g=0;const x=[],y=r/2;let v=0;_(),o===!1&&(e>0&&S(!0),n>0&&S(!1)),this.setIndex(d),this.setAttribute("position",new Ne(u,3)),this.setAttribute("normal",new Ne(h,3)),this.setAttribute("uv",new Ne(m,2));function _(){const b=new R,A=new R;let E=0;const C=(n-e)/r;for(let T=0;T<=s;T++){const O=[],L=T/s,k=L*(n-e)+e;for(let B=0;B<=i;B++){const G=B/i,H=G*l+a,Y=Math.sin(H),te=Math.cos(H);A.x=k*Y,A.y=-L*r+y,A.z=k*te,u.push(A.x,A.y,A.z),b.set(Y,C,te).normalize(),h.push(b.x,b.y,b.z),m.push(G,1-L),O.push(g++)}x.push(O)}for(let T=0;T<i;T++)for(let O=0;O<s;O++){const L=x[O][T],k=x[O+1][T],B=x[O+1][T+1],G=x[O][T+1];d.push(L,k,G),d.push(k,B,G),E+=6}c.addGroup(v,E,0),v+=E}function S(b){const A=g,E=new se,C=new R;let T=0;const O=b===!0?e:n,L=b===!0?1:-1;for(let B=1;B<=i;B++)u.push(0,y*L,0),h.push(0,L,0),m.push(.5,.5),g++;const k=g;for(let B=0;B<=i;B++){const H=B/i*l+a,Y=Math.cos(H),te=Math.sin(H);C.x=O*te,C.y=y*L,C.z=O*Y,u.push(C.x,C.y,C.z),h.push(0,L,0),E.x=Y*.5+.5,E.y=te*.5*L+.5,m.push(E.x,E.y),g++}for(let B=0;B<i;B++){const G=A+B,H=k+B;b===!0?d.push(H,H+1,G):d.push(H+1,H,G),T+=3}c.addGroup(v,T,b===!0?1:2),v+=T}}static fromJSON(e){return new Tl(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class qd extends Tl{constructor(e=1,n=1,r=8,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new qd(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ya extends tt{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const s=[],o=[];a(i),c(r),d(),this.setAttribute("position",new Ne(s,3)),this.setAttribute("normal",new Ne(s.slice(),3)),this.setAttribute("uv",new Ne(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(_){const S=new R,b=new R,A=new R;for(let E=0;E<n.length;E+=3)m(n[E+0],S),m(n[E+1],b),m(n[E+2],A),l(S,b,A,_)}function l(_,S,b,A){const E=A+1,C=[];for(let T=0;T<=E;T++){C[T]=[];const O=_.clone().lerp(b,T/E),L=S.clone().lerp(b,T/E),k=E-T;for(let B=0;B<=k;B++)B===0&&T===E?C[T][B]=O:C[T][B]=O.clone().lerp(L,B/k)}for(let T=0;T<E;T++)for(let O=0;O<2*(E-T)-1;O++){const L=Math.floor(O/2);O%2===0?(h(C[T][L+1]),h(C[T+1][L]),h(C[T][L])):(h(C[T][L+1]),h(C[T+1][L+1]),h(C[T+1][L]))}}function c(_){const S=new R;for(let b=0;b<s.length;b+=3)S.x=s[b+0],S.y=s[b+1],S.z=s[b+2],S.normalize().multiplyScalar(_),s[b+0]=S.x,s[b+1]=S.y,s[b+2]=S.z}function d(){const _=new R;for(let S=0;S<s.length;S+=3){_.x=s[S+0],_.y=s[S+1],_.z=s[S+2];const b=y(_)/2/Math.PI+.5,A=v(_)/Math.PI+.5;o.push(b,1-A)}g(),u()}function u(){for(let _=0;_<o.length;_+=6){const S=o[_+0],b=o[_+2],A=o[_+4],E=Math.max(S,b,A),C=Math.min(S,b,A);E>.9&&C<.1&&(S<.2&&(o[_+0]+=1),b<.2&&(o[_+2]+=1),A<.2&&(o[_+4]+=1))}}function h(_){s.push(_.x,_.y,_.z)}function m(_,S){const b=_*3;S.x=e[b+0],S.y=e[b+1],S.z=e[b+2]}function g(){const _=new R,S=new R,b=new R,A=new R,E=new se,C=new se,T=new se;for(let O=0,L=0;O<s.length;O+=9,L+=6){_.set(s[O+0],s[O+1],s[O+2]),S.set(s[O+3],s[O+4],s[O+5]),b.set(s[O+6],s[O+7],s[O+8]),E.set(o[L+0],o[L+1]),C.set(o[L+2],o[L+3]),T.set(o[L+4],o[L+5]),A.copy(_).add(S).add(b).divideScalar(3);const k=y(A);x(E,L+0,_,k),x(C,L+2,S,k),x(T,L+4,b,k)}}function x(_,S,b,A){A<0&&_.x===1&&(o[S]=_.x-1),b.x===0&&b.z===0&&(o[S]=A/2/Math.PI+.5)}function y(_){return Math.atan2(_.z,-_.x)}function v(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}static fromJSON(e){return new ya(e.vertices,e.indices,e.radius,e.details)}}class Xd extends ya{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Xd(e.radius,e.detail)}}const Wg=new R,jg=new R,w_=new R,$g=new Ai;class oN extends tt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),s=Math.cos(Su*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],d=["a","b","c"],u=new Array(3),h={},m=[];for(let g=0;g<l;g+=3){o?(c[0]=o.getX(g),c[1]=o.getX(g+1),c[2]=o.getX(g+2)):(c[0]=g,c[1]=g+1,c[2]=g+2);const{a:x,b:y,c:v}=$g;if(x.fromBufferAttribute(a,c[0]),y.fromBufferAttribute(a,c[1]),v.fromBufferAttribute(a,c[2]),$g.getNormal(w_),u[0]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,u[1]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,u[2]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,!(u[0]===u[1]||u[1]===u[2]||u[2]===u[0]))for(let _=0;_<3;_++){const S=(_+1)%3,b=u[_],A=u[S],E=$g[d[_]],C=$g[d[S]],T=`${b}_${A}`,O=`${A}_${b}`;O in h&&h[O]?(w_.dot(h[O].normal)<=s&&(m.push(E.x,E.y,E.z),m.push(C.x,C.y,C.z)),h[O]=null):T in h||(h[T]={index0:c[_],index1:c[S],normal:w_.clone()})}}for(const g in h)if(h[g]){const{index0:x,index1:y}=h[g];Wg.fromBufferAttribute(a,x),jg.fromBufferAttribute(a,y),m.push(Wg.x,Wg.y,Wg.z),m.push(jg.x,jg.y,jg.z)}this.setAttribute("position",new Ne(m,3))}}}class Hs extends Bu{constructor(e){super(e),this.uuid=Li(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new Bu().fromJSON(i))}return this}}const P7={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let s=aN(t,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,d,u,h,m;if(r&&(s=R7(t,e,s,n)),t.length>80*n){a=c=t[0],l=d=t[1];for(let g=n;g<i;g+=n)u=t[g],h=t[g+1],u<a&&(a=u),h<l&&(l=h),u>c&&(c=u),h>d&&(d=h);m=Math.max(c-a,d-l),m=m!==0?32767/m:0}return lp(s,o,n,a,l,m,0),o}};function aN(t,e,n,r,i){let s,o;if(i===j7(t,e,n,r)>0)for(s=e;s<n;s+=r)o=mC(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=mC(s,t[s],t[s+1],o);return o&&Ry(o,o.next)&&(cp(o),o=o.next),o}function Fu(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(Ry(n,n.next)||An(n.prev,n,n.next)===0)){if(cp(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function lp(t,e,n,r,i,s,o){if(!t)return;!o&&s&&F7(t,r,i,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?O7(t,r,i,s):L7(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),cp(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=I7(Fu(t),e,n),lp(t,e,n,r,i,s,2)):o===2&&D7(t,e,n,r,i,s):lp(Fu(t),e,n,r,i,s,1);break}}}function L7(t){const e=t.prev,n=t,r=t.next;if(An(e,n,r)>=0)return!1;const i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,c=r.y,d=i<s?i<o?i:o:s<o?s:o,u=a<l?a<c?a:c:l<c?l:c,h=i>s?i>o?i:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let g=r.next;for(;g!==e;){if(g.x>=d&&g.x<=h&&g.y>=u&&g.y<=m&&sd(i,a,s,l,o,c,g.x,g.y)&&An(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function O7(t,e,n,r){const i=t.prev,s=t,o=t.next;if(An(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,d=i.y,u=s.y,h=o.y,m=a<l?a<c?a:c:l<c?l:c,g=d<u?d<h?d:h:u<h?u:h,x=a>l?a>c?a:c:l>c?l:c,y=d>u?d>h?d:h:u>h?u:h,v=VS(m,g,e,n,r),_=VS(x,y,e,n,r);let S=t.prevZ,b=t.nextZ;for(;S&&S.z>=v&&b&&b.z<=_;){if(S.x>=m&&S.x<=x&&S.y>=g&&S.y<=y&&S!==i&&S!==o&&sd(a,d,l,u,c,h,S.x,S.y)&&An(S.prev,S,S.next)>=0||(S=S.prevZ,b.x>=m&&b.x<=x&&b.y>=g&&b.y<=y&&b!==i&&b!==o&&sd(a,d,l,u,c,h,b.x,b.y)&&An(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;S&&S.z>=v;){if(S.x>=m&&S.x<=x&&S.y>=g&&S.y<=y&&S!==i&&S!==o&&sd(a,d,l,u,c,h,S.x,S.y)&&An(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;b&&b.z<=_;){if(b.x>=m&&b.x<=x&&b.y>=g&&b.y<=y&&b!==i&&b!==o&&sd(a,d,l,u,c,h,b.x,b.y)&&An(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function I7(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!Ry(i,s)&&lN(i,r,r.next,s)&&up(i,s)&&up(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),cp(r),cp(r.next),r=t=s),r=r.next}while(r!==t);return Fu(r)}function D7(t,e,n,r,i,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&H7(o,a)){let l=uN(o,a);o=Fu(o,o.next),l=Fu(l,l.next),lp(o,e,n,r,i,s,0),lp(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function R7(t,e,n,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,c=aN(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(V7(c));for(i.sort(z7),s=0;s<i.length;s++)n=N7(i[s],n);return n}function z7(t,e){return t.x-e.x}function N7(t,e){const n=k7(t,e);if(!n)return e;const r=uN(n,t);return Fu(r,r.next),Fu(n,n.next)}function k7(t,e){let n=e,r=-1/0,i;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const h=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=s&&h>r&&(r=h,i=n.x<n.next.x?n:n.next,h===s))return i}n=n.next}while(n!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let d=1/0,u;n=i;do s>=n.x&&n.x>=l&&s!==n.x&&sd(o<c?s:r,o,l,c,o<c?r:s,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(s-n.x),up(n,t)&&(u<d||u===d&&(n.x>i.x||n.x===i.x&&B7(i,n)))&&(i=n,d=u)),n=n.next;while(n!==a);return i}function B7(t,e){return An(t.prev,t,e.prev)<0&&An(e.next,t,t.next)<0}function F7(t,e,n,r){let i=t;do i.z===0&&(i.z=VS(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,U7(i)}function U7(t){let e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function VS(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function V7(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function sd(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function H7(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!G7(t,e)&&(up(t,e)&&up(e,t)&&W7(t,e)&&(An(t.prev,t,e.prev)||An(t,e.prev,e))||Ry(t,e)&&An(t.prev,t,t.next)>0&&An(e.prev,e,e.next)>0)}function An(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Ry(t,e){return t.x===e.x&&t.y===e.y}function lN(t,e,n,r){const i=Xg(An(t,e,n)),s=Xg(An(t,e,r)),o=Xg(An(n,r,t)),a=Xg(An(n,r,e));return!!(i!==s&&o!==a||i===0&&qg(t,n,e)||s===0&&qg(t,r,e)||o===0&&qg(n,t,r)||a===0&&qg(n,e,r))}function qg(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Xg(t){return t>0?1:t<0?-1:0}function G7(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&lN(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function up(t,e){return An(t.prev,t,t.next)<0?An(t,e,t.next)>=0&&An(t,t.prev,e)>=0:An(t,e,t.prev)<0||An(t,t.next,e)<0}function W7(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function uN(t,e){const n=new HS(t.i,t.x,t.y),r=new HS(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function mC(t,e,n,r){const i=new HS(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function cp(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function HS(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function j7(t,e,n,r){let i=0;for(let s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}class Gs{static area(e){const n=e.length;let r=0;for(let i=n-1,s=0;s<n;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Gs.area(e)<0}static triangulateShape(e,n){const r=[],i=[],s=[];gC(e),vC(r,e);let o=e.length;n.forEach(gC);for(let l=0;l<n.length;l++)i.push(o),o+=n[l].length,vC(r,n[l]);const a=P7.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function gC(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function vC(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class Fp extends tt{constructor(e=new Hs([new se(.5,.5),new se(-.5,.5),new se(-.5,-.5),new se(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new Ne(i,3)),this.setAttribute("uv",new Ne(s,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,d=n.steps!==void 0?n.steps:1,u=n.depth!==void 0?n.depth:1;let h=n.bevelEnabled!==void 0?n.bevelEnabled:!0,m=n.bevelThickness!==void 0?n.bevelThickness:.2,g=n.bevelSize!==void 0?n.bevelSize:m-.1,x=n.bevelOffset!==void 0?n.bevelOffset:0,y=n.bevelSegments!==void 0?n.bevelSegments:3;const v=n.extrudePath,_=n.UVGenerator!==void 0?n.UVGenerator:$7;let S,b=!1,A,E,C,T;v&&(S=v.getSpacedPoints(d),b=!0,h=!1,A=v.computeFrenetFrames(d,!1),E=new R,C=new R,T=new R),h||(y=0,m=0,g=0,x=0);const O=a.extractPoints(c);let L=O.shape;const k=O.holes;if(!Gs.isClockWise(L)){L=L.reverse();for(let ne=0,Q=k.length;ne<Q;ne++){const de=k[ne];Gs.isClockWise(de)&&(k[ne]=de.reverse())}}const G=Gs.triangulateShape(L,k),H=L;for(let ne=0,Q=k.length;ne<Q;ne++){const de=k[ne];L=L.concat(de)}function Y(ne,Q,de){return Q||console.error("THREE.ExtrudeGeometry: vec does not exist"),Q.clone().multiplyScalar(de).add(ne)}const te=L.length,Z=G.length;function D(ne,Q,de){let pe,ve,Re;const Le=ne.x-Q.x,De=ne.y-Q.y,gt=de.x-ne.x,je=de.y-ne.y,j=Le*Le+De*De,F=Le*je-De*gt;if(Math.abs(F)>Number.EPSILON){const _e=Math.sqrt(j),Ie=Math.sqrt(gt*gt+je*je),ke=Q.x-De/_e,Ve=Q.y+Le/_e,ut=de.x-je/Ie,He=de.y+gt/Ie,Ce=((ut-ke)*je-(He-Ve)*gt)/(Le*je-De*gt);pe=ke+Le*Ce-ne.x,ve=Ve+De*Ce-ne.y;const Ge=pe*pe+ve*ve;if(Ge<=2)return new se(pe,ve);Re=Math.sqrt(Ge/2)}else{let _e=!1;Le>Number.EPSILON?gt>Number.EPSILON&&(_e=!0):Le<-Number.EPSILON?gt<-Number.EPSILON&&(_e=!0):Math.sign(De)===Math.sign(je)&&(_e=!0),_e?(pe=-De,ve=Le,Re=Math.sqrt(j)):(pe=Le,ve=De,Re=Math.sqrt(j/2))}return new se(pe/Re,ve/Re)}const N=[];for(let ne=0,Q=H.length,de=Q-1,pe=ne+1;ne<Q;ne++,de++,pe++)de===Q&&(de=0),pe===Q&&(pe=0),N[ne]=D(H[ne],H[de],H[pe]);const z=[];let U,V=N.concat();for(let ne=0,Q=k.length;ne<Q;ne++){const de=k[ne];U=[];for(let pe=0,ve=de.length,Re=ve-1,Le=pe+1;pe<ve;pe++,Re++,Le++)Re===ve&&(Re=0),Le===ve&&(Le=0),U[pe]=D(de[pe],de[Re],de[Le]);z.push(U),V=V.concat(U)}for(let ne=0;ne<y;ne++){const Q=ne/y,de=m*Math.cos(Q*Math.PI/2),pe=g*Math.sin(Q*Math.PI/2)+x;for(let ve=0,Re=H.length;ve<Re;ve++){const Le=Y(H[ve],N[ve],pe);re(Le.x,Le.y,-de)}for(let ve=0,Re=k.length;ve<Re;ve++){const Le=k[ve];U=z[ve];for(let De=0,gt=Le.length;De<gt;De++){const je=Y(Le[De],U[De],pe);re(je.x,je.y,-de)}}}const X=g+x;for(let ne=0;ne<te;ne++){const Q=h?Y(L[ne],V[ne],X):L[ne];b?(C.copy(A.normals[0]).multiplyScalar(Q.x),E.copy(A.binormals[0]).multiplyScalar(Q.y),T.copy(S[0]).add(C).add(E),re(T.x,T.y,T.z)):re(Q.x,Q.y,0)}for(let ne=1;ne<=d;ne++)for(let Q=0;Q<te;Q++){const de=h?Y(L[Q],V[Q],X):L[Q];b?(C.copy(A.normals[ne]).multiplyScalar(de.x),E.copy(A.binormals[ne]).multiplyScalar(de.y),T.copy(S[ne]).add(C).add(E),re(T.x,T.y,T.z)):re(de.x,de.y,u/d*ne)}for(let ne=y-1;ne>=0;ne--){const Q=ne/y,de=m*Math.cos(Q*Math.PI/2),pe=g*Math.sin(Q*Math.PI/2)+x;for(let ve=0,Re=H.length;ve<Re;ve++){const Le=Y(H[ve],N[ve],pe);re(Le.x,Le.y,u+de)}for(let ve=0,Re=k.length;ve<Re;ve++){const Le=k[ve];U=z[ve];for(let De=0,gt=Le.length;De<gt;De++){const je=Y(Le[De],U[De],pe);b?re(je.x,je.y+S[d-1].y,S[d-1].x+de):re(je.x,je.y,u+de)}}}J(),ee();function J(){const ne=i.length/3;if(h){let Q=0,de=te*Q;for(let pe=0;pe<Z;pe++){const ve=G[pe];ie(ve[2]+de,ve[1]+de,ve[0]+de)}Q=d+y*2,de=te*Q;for(let pe=0;pe<Z;pe++){const ve=G[pe];ie(ve[0]+de,ve[1]+de,ve[2]+de)}}else{for(let Q=0;Q<Z;Q++){const de=G[Q];ie(de[2],de[1],de[0])}for(let Q=0;Q<Z;Q++){const de=G[Q];ie(de[0]+te*d,de[1]+te*d,de[2]+te*d)}}r.addGroup(ne,i.length/3-ne,0)}function ee(){const ne=i.length/3;let Q=0;q(H,Q),Q+=H.length;for(let de=0,pe=k.length;de<pe;de++){const ve=k[de];q(ve,Q),Q+=ve.length}r.addGroup(ne,i.length/3-ne,1)}function q(ne,Q){let de=ne.length;for(;--de>=0;){const pe=de;let ve=de-1;ve<0&&(ve=ne.length-1);for(let Re=0,Le=d+y*2;Re<Le;Re++){const De=te*Re,gt=te*(Re+1),je=Q+pe+De,j=Q+ve+De,F=Q+ve+gt,_e=Q+pe+gt;K(je,j,F,_e)}}}function re(ne,Q,de){l.push(ne),l.push(Q),l.push(de)}function ie(ne,Q,de){oe(ne),oe(Q),oe(de);const pe=i.length/3,ve=_.generateTopUV(r,i,pe-3,pe-2,pe-1);ye(ve[0]),ye(ve[1]),ye(ve[2])}function K(ne,Q,de,pe){oe(ne),oe(Q),oe(pe),oe(Q),oe(de),oe(pe);const ve=i.length/3,Re=_.generateSideWallUV(r,i,ve-6,ve-3,ve-2,ve-1);ye(Re[0]),ye(Re[1]),ye(Re[3]),ye(Re[1]),ye(Re[2]),ye(Re[3])}function oe(ne){i.push(l[ne*3+0]),i.push(l[ne*3+1]),i.push(l[ne*3+2])}function ye(ne){s.push(ne.x),s.push(ne.y)}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return q7(n,r,e)}static fromJSON(e,n){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new u2[i.type]().fromJSON(i)),new Fp(r,e.options)}}const $7={generateTopUV:function(t,e,n,r,i){const s=e[n*3],o=e[n*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],d=e[i*3+1];return[new se(s,o),new se(a,l),new se(c,d)]},generateSideWallUV:function(t,e,n,r,i,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[r*3],d=e[r*3+1],u=e[r*3+2],h=e[i*3],m=e[i*3+1],g=e[i*3+2],x=e[s*3],y=e[s*3+1],v=e[s*3+2];return Math.abs(a-d)<Math.abs(o-c)?[new se(o,1-l),new se(c,1-u),new se(h,1-g),new se(x,1-v)]:[new se(a,1-l),new se(d,1-u),new se(m,1-g),new se(y,1-v)]}};function q7(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Yd extends ya{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Yd(e.radius,e.detail)}}class Zd extends ya{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Zd(e.radius,e.detail)}}class Up extends tt{constructor(e=.5,n=1,r=8,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],d=[];let u=e;const h=(n-e)/i,m=new R,g=new se;for(let x=0;x<=i;x++){for(let y=0;y<=r;y++){const v=s+y/r*o;m.x=u*Math.cos(v),m.y=u*Math.sin(v),l.push(m.x,m.y,m.z),c.push(0,0,1),g.x=(m.x/n+1)/2,g.y=(m.y/n+1)/2,d.push(g.x,g.y)}u+=h}for(let x=0;x<i;x++){const y=x*(r+1);for(let v=0;v<r;v++){const _=v+y,S=_,b=_+r+1,A=_+r+2,E=_+1;a.push(S,b,E),a.push(b,A,E)}}this.setIndex(a),this.setAttribute("position",new Ne(l,3)),this.setAttribute("normal",new Ne(c,3)),this.setAttribute("uv",new Ne(d,2))}static fromJSON(e){return new Up(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Vp extends tt{constructor(e=new Hs([new se(0,.5),new se(-.5,-.5),new se(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let d=0;d<e.length;d++)c(e[d]),this.addGroup(a,l,d),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Ne(i,3)),this.setAttribute("normal",new Ne(s,3)),this.setAttribute("uv",new Ne(o,2));function c(d){const u=i.length/3,h=d.extractPoints(n);let m=h.shape;const g=h.holes;Gs.isClockWise(m)===!1&&(m=m.reverse());for(let y=0,v=g.length;y<v;y++){const _=g[y];Gs.isClockWise(_)===!0&&(g[y]=_.reverse())}const x=Gs.triangulateShape(m,g);for(let y=0,v=g.length;y<v;y++){const _=g[y];m=m.concat(_)}for(let y=0,v=m.length;y<v;y++){const _=m[y];i.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let y=0,v=x.length;y<v;y++){const _=x[y],S=_[0]+u,b=_[1]+u,A=_[2]+u;r.push(S,b,A),l+=3}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return X7(n,e)}static fromJSON(e,n){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=n[e.shapes[i]];r.push(o)}return new Vp(r,e.curveSegments)}}function X7(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class Zu extends tt{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const d=[],u=new R,h=new R,m=[],g=[],x=[],y=[];for(let v=0;v<=r;v++){const _=[],S=v/r;let b=0;v==0&&o==0?b=.5/n:v==r&&l==Math.PI&&(b=-.5/n);for(let A=0;A<=n;A++){const E=A/n;u.x=-e*Math.cos(i+E*s)*Math.sin(o+S*a),u.y=e*Math.cos(o+S*a),u.z=e*Math.sin(i+E*s)*Math.sin(o+S*a),g.push(u.x,u.y,u.z),h.copy(u).normalize(),x.push(h.x,h.y,h.z),y.push(E+b,1-S),_.push(c++)}d.push(_)}for(let v=0;v<r;v++)for(let _=0;_<n;_++){const S=d[v][_+1],b=d[v][_],A=d[v+1][_],E=d[v+1][_+1];(v!==0||o>0)&&m.push(S,b,E),(v!==r-1||l<Math.PI)&&m.push(b,A,E)}this.setIndex(m),this.setAttribute("position",new Ne(g,3)),this.setAttribute("normal",new Ne(x,3)),this.setAttribute("uv",new Ne(y,2))}static fromJSON(e){return new Zu(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Hp extends ya{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Hp(e.radius,e.detail)}}class Gp extends tt{constructor(e=1,n=.4,r=8,i=6,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],d=new R,u=new R,h=new R;for(let m=0;m<=r;m++)for(let g=0;g<=i;g++){const x=g/i*s,y=m/r*Math.PI*2;u.x=(e+n*Math.cos(y))*Math.cos(x),u.y=(e+n*Math.cos(y))*Math.sin(x),u.z=n*Math.sin(y),a.push(u.x,u.y,u.z),d.x=e*Math.cos(x),d.y=e*Math.sin(x),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(g/i),c.push(m/r)}for(let m=1;m<=r;m++)for(let g=1;g<=i;g++){const x=(i+1)*m+g-1,y=(i+1)*(m-1)+g-1,v=(i+1)*(m-1)+g,_=(i+1)*m+g;o.push(x,y,_),o.push(y,v,_)}this.setIndex(o),this.setAttribute("position",new Ne(a,3)),this.setAttribute("normal",new Ne(l,3)),this.setAttribute("uv",new Ne(c,2))}static fromJSON(e){return new Gp(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Jd extends tt{constructor(e=1,n=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],d=[],u=new R,h=new R,m=new R,g=new R,x=new R,y=new R,v=new R;for(let S=0;S<=r;++S){const b=S/r*s*Math.PI*2;_(b,s,o,e,m),_(b+.01,s,o,e,g),y.subVectors(g,m),v.addVectors(g,m),x.crossVectors(y,v),v.crossVectors(x,y),x.normalize(),v.normalize();for(let A=0;A<=i;++A){const E=A/i*Math.PI*2,C=-n*Math.cos(E),T=n*Math.sin(E);u.x=m.x+(C*v.x+T*x.x),u.y=m.y+(C*v.y+T*x.y),u.z=m.z+(C*v.z+T*x.z),l.push(u.x,u.y,u.z),h.subVectors(u,m).normalize(),c.push(h.x,h.y,h.z),d.push(S/r),d.push(A/i)}}for(let S=1;S<=r;S++)for(let b=1;b<=i;b++){const A=(i+1)*(S-1)+(b-1),E=(i+1)*S+(b-1),C=(i+1)*S+b,T=(i+1)*(S-1)+b;a.push(A,E,T),a.push(E,C,T)}this.setIndex(a),this.setAttribute("position",new Ne(l,3)),this.setAttribute("normal",new Ne(c,3)),this.setAttribute("uv",new Ne(d,2));function _(S,b,A,E,C){const T=Math.cos(S),O=Math.sin(S),L=A/b*S,k=Math.cos(L);C.x=E*(2+k)*.5*T,C.y=E*(2+k)*O*.5,C.z=E*Math.sin(L)*.5}}static fromJSON(e){return new Jd(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Wp extends tt{constructor(e=new l2(new R(-1,-1,0),new R(-1,1,0),new R(1,1,0)),n=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new R,l=new R,c=new se;let d=new R;const u=[],h=[],m=[],g=[];x(),this.setIndex(g),this.setAttribute("position",new Ne(u,3)),this.setAttribute("normal",new Ne(h,3)),this.setAttribute("uv",new Ne(m,2));function x(){for(let S=0;S<n;S++)y(S);y(s===!1?n:0),_(),v()}function y(S){d=e.getPointAt(S/n,d);const b=o.normals[S],A=o.binormals[S];for(let E=0;E<=i;E++){const C=E/i*Math.PI*2,T=Math.sin(C),O=-Math.cos(C);l.x=O*b.x+T*A.x,l.y=O*b.y+T*A.y,l.z=O*b.z+T*A.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=d.x+r*l.x,a.y=d.y+r*l.y,a.z=d.z+r*l.z,u.push(a.x,a.y,a.z)}}function v(){for(let S=1;S<=n;S++)for(let b=1;b<=i;b++){const A=(i+1)*(S-1)+(b-1),E=(i+1)*S+(b-1),C=(i+1)*S+b,T=(i+1)*(S-1)+b;g.push(A,E,T),g.push(E,C,T)}}function _(){for(let S=0;S<=n;S++)for(let b=0;b<=i;b++)c.x=S/n,c.y=b/i,m.push(c.x,c.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Wp(new u2[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class cN extends tt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new R,s=new R;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,d=l.length;c<d;++c){const u=l[c],h=u.start,m=u.count;for(let g=h,x=h+m;g<x;g+=3)for(let y=0;y<3;y++){const v=a.getX(g+y),_=a.getX(g+(y+1)%3);i.fromBufferAttribute(o,v),s.fromBufferAttribute(o,_),yC(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const d=3*a+c,u=3*a+(c+1)%3;i.fromBufferAttribute(o,d),s.fromBufferAttribute(o,u),yC(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ne(n,3))}}}function yC(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var xC=Object.freeze({__proto__:null,BoxGeometry:_s,CapsuleGeometry:kp,CircleGeometry:Bp,ConeGeometry:qd,CylinderGeometry:Tl,DodecahedronGeometry:Xd,EdgesGeometry:oN,ExtrudeGeometry:Fp,IcosahedronGeometry:Yd,LatheGeometry:Yu,OctahedronGeometry:Zd,PlaneGeometry:Ml,PolyhedronGeometry:ya,RingGeometry:Up,ShapeGeometry:Vp,SphereGeometry:Zu,TetrahedronGeometry:Hp,TorusGeometry:Gp,TorusKnotGeometry:Jd,TubeGeometry:Wp,WireframeGeometry:cN});class dN extends Er{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new We(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class hN extends $s{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class c2 extends Er{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new We(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new We(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class fN extends c2{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new se(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Wn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new We(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new We(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new We(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class pN extends Er{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new We(16777215),this.specular=new We(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new We(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Dp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mN extends Er{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new We(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new We(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class gN extends Er{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class vN extends Er{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new We(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new We(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Dp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class yN extends Er{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new We(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xN extends Ur{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function ns(t,e,n){return d2(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)}function pu(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function d2(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _N(t){function e(i,s){return t[i]-t[s]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function GS(t,e,n){const r=t.length,i=new t.constructor(r);for(let s=0,o=0;o!==r;++s){const a=n[s]*e;for(let l=0;l!==e;++l)i[o++]=t[a+l]}return i}function h2(t,e,n,r){let i=1,s=t[0];for(;s!==void 0&&s[r]===void 0;)s=t[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),n.push(o)),s=t[i++];while(s!==void 0)}function Y7(t,e,n,r,i=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],d=c.getValueSize(),u=[],h=[];for(let m=0;m<c.times.length;++m){const g=c.times[m]*i;if(!(g<n||g>=r)){u.push(c.times[m]);for(let x=0;x<d;++x)h.push(c.values[m*d+x])}}u.length!==0&&(c.times=pu(u,c.times.constructor),c.values=pu(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function Z7(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(c===void 0)continue;let d=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=u/3);let h=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=m/3);const g=a.times.length-1;let x;if(s<=a.times[0]){const v=d,_=u-d;x=ns(a.values,v,_)}else if(s>=a.times[g]){const v=g*u+d,_=v+u-d;x=ns(a.values,v,_)}else{const v=a.createInterpolant(),_=d,S=u-d;v.evaluate(s),x=ns(v.resultBuffer,_,S)}l==="quaternion"&&new Br().fromArray(x).normalize().conjugate().toArray(x);const y=c.times.length;for(let v=0;v<y;++v){const _=v*m+h;if(l==="quaternion")Br.multiplyQuaternionsFlat(c.values,_,x,0,c.values,_);else{const S=m-h*2;for(let b=0;b<S;++b)c.values[_+b]-=x[b]}}}return t.blendMode=qM,t}var J7=Object.freeze({__proto__:null,arraySlice:ns,convertArray:pu,isTypedArray:d2,getKeyframeOrder:_N,sortedArray:GS,flattenJSON:h2,subclip:Y7,makeClipAdditive:Z7});class jp{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],s=n[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=n[++r],e<i)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=n[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<n[a]?o=a:r=a+1}if(i=n[r],s=n[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)n[o]=r[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class wN extends jp{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:cu,endingEnd:cu}}intervalChanged_(e,n,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case du:s=e,a=2*n-r;break;case ip:s=i.length-2,a=n+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case du:o=e,l=2*r-n;break;case ip:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=n}const c=(r-n)*.5,d=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-r),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,m=this._weightNext,g=(r-n)/(i-n),x=g*g,y=x*g,v=-h*y+2*h*x-h*g,_=(1+h)*y+(-1.5-2*h)*x+(-.5+h)*g+1,S=(-1-m)*y+(1.5+m)*x+.5*g,b=m*y-m*x;for(let A=0;A!==a;++A)s[A]=v*o[d+A]+_*o[c+A]+S*o[l+A]+b*o[u+A];return s}}class f2 extends jp{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=(r-n)/(i-n),u=1-d;for(let h=0;h!==a;++h)s[h]=o[c+h]*u+o[l+h]*d;return s}}class SN extends jp{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Zs{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=pu(n,this.TimeBufferType),this.values=pu(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:pu(e.times,Array),values:pu(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new SN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new f2(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new wN(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case np:n=this.InterpolantFactoryMethodDiscrete;break;case rp:n=this.InterpolantFactoryMethodLinear;break;case z0:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return np;case this.InterpolantFactoryMethodLinear:return rp;case this.InterpolantFactoryMethodSmooth:return z0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>n;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=ns(r,s,o),this.values=ns(this.values,s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&d2(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=ns(this.times),n=ns(this.values),r=this.getValueSize(),i=this.getInterpolation()===z0,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],d=e[a+1];if(c!==d&&(a!==1||c!==e[0]))if(i)l=!0;else{const u=a*r,h=u-r,m=u+r;for(let g=0;g!==r;++g){const x=n[u+g];if(x!==n[h+g]||x!==n[m+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const u=a*r,h=o*r;for(let m=0;m!==r;++m)n[h+m]=n[u+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)n[l+c]=n[a+c];++o}return o!==e.length?(this.times=ns(e,0,o),this.values=ns(n,0,o*r)):(this.times=e,this.values=n),this}clone(){const e=ns(this.times,0),n=ns(this.values,0),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}Zs.prototype.TimeBufferType=Float32Array;Zs.prototype.ValueBufferType=Float32Array;Zs.prototype.DefaultInterpolation=rp;class Ju extends Zs{}Ju.prototype.ValueTypeName="bool";Ju.prototype.ValueBufferType=Array;Ju.prototype.DefaultInterpolation=np;Ju.prototype.InterpolantFactoryMethodLinear=void 0;Ju.prototype.InterpolantFactoryMethodSmooth=void 0;class p2 extends Zs{}p2.prototype.ValueTypeName="color";class dp extends Zs{}dp.prototype.ValueTypeName="number";class bN extends jp{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-n)/(i-n);let c=e*a;for(let d=c+a;c!==d;c+=4)Br.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Qd extends Zs{InterpolantFactoryMethodLinear(e){return new bN(this.times,this.values,this.getValueSize(),e)}}Qd.prototype.ValueTypeName="quaternion";Qd.prototype.DefaultInterpolation=rp;Qd.prototype.InterpolantFactoryMethodSmooth=void 0;class Qu extends Zs{}Qu.prototype.ValueTypeName="string";Qu.prototype.ValueBufferType=Array;Qu.prototype.DefaultInterpolation=np;Qu.prototype.InterpolantFactoryMethodLinear=void 0;Qu.prototype.InterpolantFactoryMethodSmooth=void 0;class hp extends Zs{}hp.prototype.ValueTypeName="vector";class fp{constructor(e,n=-1,r,i=Ey){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Li(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)n.push(K7(r[o]).scale(i));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)n.push(Zs.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const d=_N(l);l=GS(l,1,d),c=GS(c,1,d),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new dp(".morphTargetInfluences["+n[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.name.match(s);if(d&&d.length>1){const u=d[1];let h=i[u];h||(i[u]=h=[]),h.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(u,h,m,g,x){if(m.length!==0){const y=[],v=[];h2(m,y,v,g),y.length!==0&&x.push(new u(h,y,v))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let u=0;u<c.length;u++){const h=c[u].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const m={};let g;for(g=0;g<h.length;g++)if(h[g].morphTargets)for(let x=0;x<h[g].morphTargets.length;x++)m[h[g].morphTargets[x]]=-1;for(const x in m){const y=[],v=[];for(let _=0;_!==h[g].morphTargets.length;++_){const S=h[g];y.push(S.time),v.push(S.morphTarget===x?1:0)}i.push(new dp(".morphTargetInfluence["+x+"]",y,v))}l=m.length*o}else{const m=".bones["+n[u].name+"]";r(hp,m+".position",h,"pos",i),r(Qd,m+".quaternion",h,"rot",i),r(hp,m+".scale",h,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Q7(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return dp;case"vector":case"vector2":case"vector3":case"vector4":return hp;case"color":return p2;case"quaternion":return Qd;case"bool":case"boolean":return Ju;case"string":return Qu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function K7(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Q7(t.type);if(t.times===void 0){const n=[],r=[];h2(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Uu={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class m2{constructor(e,n,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(d){a++,s===!1&&i.onStart!==void 0&&i.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,i.onProgress!==void 0&&i.onProgress(d,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(d){i.onError!==void 0&&i.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,u){return c.push(d,u),this},this.removeHandler=function(d){const u=c.indexOf(d);return u!==-1&&c.splice(u,2),this},this.getHandler=function(d){for(let u=0,h=c.length;u<h;u+=2){const m=c[u],g=c[u+1];if(m.global&&(m.lastIndex=0),m.test(d))return g}return null}}}const od=new m2;class Qr{constructor(e){this.manager=e!==void 0?e:od,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Go={};class ej extends Error{constructor(e,n){super(e),this.response=n}}class ws extends Qr{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Uu.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Go[e]!==void 0){Go[e].push({onLoad:n,onProgress:r,onError:i});return}Go[e]=[],Go[e].push({onLoad:n,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const d=Go[e],u=c.body.getReader(),h=c.headers.get("Content-Length"),m=h?parseInt(h):0,g=m!==0;let x=0;const y=new ReadableStream({start(v){_();function _(){u.read().then(({done:S,value:b})=>{if(S)v.close();else{x+=b.byteLength;const A=new ProgressEvent("progress",{lengthComputable:g,loaded:x,total:m});for(let E=0,C=d.length;E<C;E++){const T=d[E];T.onProgress&&T.onProgress(A)}v.enqueue(b),_()}})}}});return new Response(y)}else throw new ej(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return c.json();default:if(a===void 0)return c.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),h=u&&u[1]?u[1].toLowerCase():void 0,m=new TextDecoder(h);return c.arrayBuffer().then(g=>m.decode(g))}}}).then(c=>{Uu.add(e,c);const d=Go[e];delete Go[e];for(let u=0,h=d.length;u<h;u++){const m=d[u];m.onLoad&&m.onLoad(c)}}).catch(c=>{const d=Go[e];if(d===void 0)throw this.manager.itemError(e),c;delete Go[e];for(let u=0,h=d.length;u<h;u++){const m=d[u];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class tj extends Qr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new ws(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=fp.parse(e[r]);n.push(i)}return n}}class nj extends Qr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=[],a=new s2,l=new ws(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function d(u){l.load(e[u],function(h){const m=s.parse(h,!0);o[u]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=Tn),a.image=o,a.format=m.format,a.needsUpdate=!0,n&&n(a))},r,i)}if(Array.isArray(e))for(let u=0,h=e.length;u<h;++u)d(u);else l.load(e,function(u){const h=s.parse(u,!0);if(h.isCubemap){const m=h.mipmaps.length/h.mipmapCount;for(let g=0;g<m;g++){o[g]={mipmaps:[]};for(let x=0;x<h.mipmapCount;x++)o[g].mipmaps.push(h.mipmaps[g*h.mipmapCount+x]),o[g].format=h.format,o[g].width=h.width,o[g].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=Tn),a.format=h.format,a.needsUpdate=!0,n&&n(a)},r,i);return a}}class pp extends Qr{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Uu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=ap("img");function l(){d(),Uu.add(e,this),n&&n(this),s.manager.itemEnd(e)}function c(u){d(),i&&i(u),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class rj extends Qr{constructor(e){super(e)}load(e,n,r,i){const s=new jd,o=new pp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(d){s.images[c]=d,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class ij extends Qr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new gd,a=new ws(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);!c||(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:kr,o.wrapT=c.wrapT!==void 0?c.wrapT:kr,o.magFilter=c.magFilter!==void 0?c.magFilter:Tn,o.minFilter=c.minFilter!==void 0?c.minFilter:Tn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=$u),c.mipmapCount===1&&(o.minFilter=Tn),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,n&&n(o,c))},r,i),o}}class sj extends Qr{constructor(e){super(e)}load(e,n,r,i){const s=new Bn,o=new pp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},r,i),s}}class Al extends Rt{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new We(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class mp extends Al{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Rt.DefaultUp),this.updateMatrix(),this.groundColor=new We(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const S_=new nt,_C=new R,wC=new R;class g2{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new se(512,512),this.map=null,this.mapPass=null,this.matrix=new nt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ay,this._frameExtents=new se(1,1),this._viewportCount=1,this._viewports=[new St(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;_C.setFromMatrixPosition(e.matrixWorld),n.position.copy(_C),wC.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(wC),n.updateMatrixWorld(),S_.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(S_),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(S_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class oj extends g2{constructor(){super(new jn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=op*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(r!==n.fov||i!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=i,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class v2 extends Al{constructor(e,n,r=0,i=Math.PI/3,s=0,o=1){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Rt.DefaultUp),this.updateMatrix(),this.target=new Rt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new oj}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const SC=new nt,jh=new R,b_=new R;class aj extends g2{constructor(){super(new jn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new se(4,2),this._viewportCount=6,this._viewports=[new St(2,1,1,1),new St(0,1,1,1),new St(3,1,1,1),new St(1,1,1,1),new St(3,0,1,1),new St(1,0,1,1)],this._cubeDirections=[new R(1,0,0),new R(-1,0,0),new R(0,0,1),new R(0,0,-1),new R(0,1,0),new R(0,-1,0)],this._cubeUps=[new R(0,1,0),new R(0,1,0),new R(0,1,0),new R(0,1,0),new R(0,0,1),new R(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),jh.setFromMatrixPosition(e.matrixWorld),r.position.copy(jh),b_.copy(r.position),b_.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(b_),r.updateMatrixWorld(),i.makeTranslation(-jh.x,-jh.y,-jh.z),SC.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(SC)}}class y2 extends Al{constructor(e,n,r=0,i=1){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new aj}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class lj extends g2{constructor(){super(new El(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class x2 extends Al{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Rt.DefaultUp),this.updateMatrix(),this.target=new Rt,this.shadow=new lj}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class MN extends Al{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class EN extends Al{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class TN{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new R)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*i),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*r),n.addScaledVector(o[4],1.092548*(r*i)),n.addScaledVector(o[5],1.092548*(i*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(r*s)),n.addScaledVector(o[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*i),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*r),n.addScaledVector(o[4],2*.429043*r*i),n.addScaledVector(o[5],2*.429043*i*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*r*s),n.addScaledVector(o[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,s=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-i*i)}}class zy extends Al{constructor(e=new TN,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class Ny extends Qr{constructor(e){super(e),this.textures={}}load(e,n,r,i){const s=this,o=new ws(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const i=Ny.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new We().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new We().setHex(o.value);break;case"v2":i.uniforms[s].value=new se().fromArray(o.value);break;case"v3":i.uniforms[s].value=new R().fromArray(o.value);break;case"v4":i.uniforms[s].value=new St().fromArray(o.value);break;case"m3":i.uniforms[s].value=new ir().fromArray(o.value);break;case"m4":i.uniforms[s].value=new nt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new se().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new se().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:dN,SpriteMaterial:n2,RawShaderMaterial:hN,ShaderMaterial:$s,PointsMaterial:i2,MeshPhysicalMaterial:fN,MeshStandardMaterial:c2,MeshPhongMaterial:pN,MeshToonMaterial:mN,MeshNormalMaterial:gN,MeshLambertMaterial:vN,MeshDepthMaterial:KM,MeshDistanceMaterial:e2,MeshBasicMaterial:bl,MeshMatcapMaterial:yN,LineDashedMaterial:xN,LineBasicMaterial:Ur,Material:Er};return new n[e]}}class WS{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class AN extends tt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class ky extends Qr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new ws(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(m,g){if(n[g]!==void 0)return n[g];const y=m.interleavedBuffers[g],v=s(m,y.buffer),_=rd(y.type,v),S=new Oy(_,y.stride);return S.uuid=y.uuid,n[g]=S,S}function s(m,g){if(r[g]!==void 0)return r[g];const y=m.arrayBuffers[g],v=new Uint32Array(y).buffer;return r[g]=v,v}const o=e.isInstancedBufferGeometry?new AN:new tt,a=e.data.index;if(a!==void 0){const m=rd(a.type,a.array);o.setIndex(new vt(m,1))}const l=e.data.attributes;for(const m in l){const g=l[m];let x;if(g.isInterleavedBufferAttribute){const y=i(e.data,g.data);x=new ku(y,g.itemSize,g.offset,g.normalized)}else{const y=rd(g.type,g.array),v=g.isInstancedBufferAttribute?Dd:vt;x=new v(y,g.itemSize,g.normalized)}g.name!==void 0&&(x.name=g.name),g.usage!==void 0&&x.setUsage(g.usage),g.updateRange!==void 0&&(x.updateRange.offset=g.updateRange.offset,x.updateRange.count=g.updateRange.count),o.setAttribute(m,x)}const c=e.data.morphAttributes;if(c)for(const m in c){const g=c[m],x=[];for(let y=0,v=g.length;y<v;y++){const _=g[y];let S;if(_.isInterleavedBufferAttribute){const b=i(e.data,_.data);S=new ku(b,_.itemSize,_.offset,_.normalized)}else{const b=rd(_.type,_.array);S=new vt(b,_.itemSize,_.normalized)}_.name!==void 0&&(S.name=_.name),x.push(S)}o.morphAttributes[m]=x}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let m=0,g=u.length;m!==g;++m){const x=u[m];o.addGroup(x.start,x.count,x.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const m=new R;h.center!==void 0&&m.fromArray(h.center),o.boundingSphere=new xs(m,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class uj extends Qr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=this.path===""?WS.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new ws(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(u){i!==void 0&&i(u),console.error("THREE:ObjectLoader: Can't parse "+e+".",u.message);return}const d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?WS.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new ws(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){n!==void 0&&n(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),d=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,d),n!==void 0){let u=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){u=!0;break}u===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Hs().fromJSON(e[r]);n[s.uuid]=s}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Iy().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new ky;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in xC?a=xC[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),a.isBufferGeometry===!0&&l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const s=new Ny;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=fp.parse(i);n[s.uuid]=s}return n}parseImages(e,n){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(d)}else return l.data?{data:rd(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new m2(n);s=new pp(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,d=e.length;c<d;c++){const u=e[c],h=u.url;if(Array.isArray(h)){const m=[];for(let g=0,x=h.length;g<x;g++){const y=h[g],v=a(y);v!==null&&(v instanceof HTMLImageElement?m.push(v):m.push(new gd(v.data,v.width,v.height)))}i[u.uuid]=new hu(m)}else{const m=a(u.url);i[u.uuid]=new hu(m)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:rd(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new pp(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const d=[];for(let u=0,h=c.length;u<h;u++){const m=c[u],g=await s(m);g!==null&&(g instanceof HTMLImageElement?d.push(g):d.push(new gd(g.data,g.width,g.height)))}r[l.uuid]=new hu(d)}else{const d=await s(l.url);r[l.uuid]=new hu(d)}}}return r}parseTextures(e,n){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],c=l.data;let d;Array.isArray(c)?(d=new jd,c.length===6&&(d.needsUpdate=!0)):(c&&c.data?d=new gd:d=new Bn,c&&(d.needsUpdate=!0)),d.source=l,d.uuid=a.uuid,a.name!==void 0&&(d.name=a.name),a.mapping!==void 0&&(d.mapping=r(a.mapping,cj)),a.offset!==void 0&&d.offset.fromArray(a.offset),a.repeat!==void 0&&d.repeat.fromArray(a.repeat),a.center!==void 0&&d.center.fromArray(a.center),a.rotation!==void 0&&(d.rotation=a.rotation),a.wrap!==void 0&&(d.wrapS=r(a.wrap[0],bC),d.wrapT=r(a.wrap[1],bC)),a.format!==void 0&&(d.format=a.format),a.type!==void 0&&(d.type=a.type),a.encoding!==void 0&&(d.encoding=a.encoding),a.minFilter!==void 0&&(d.minFilter=r(a.minFilter,MC)),a.magFilter!==void 0&&(d.magFilter=r(a.magFilter,MC)),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.flipY!==void 0&&(d.flipY=a.flipY),a.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(d.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(d.userData=a.userData),i[a.uuid]=d}return i}parseObject(e,n,r,i,s){let o;function a(h){return n[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),n[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const m=[];for(let g=0,x=h.length;g<x;g++){const y=h[g];r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),m.push(r[y])}return m}return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),r[h]}}function c(h){return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),i[h]}let d,u;switch(e.type){case"Scene":o=new Ly,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new We(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new zp(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Py(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness);break;case"PerspectiveCamera":o=new jn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new El(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new MN(e.color,e.intensity);break;case"DirectionalLight":o=new x2(e.color,e.intensity);break;case"PointLight":o=new y2(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new EN(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new v2(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new mp(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new zy().fromJSON(e);break;case"SkinnedMesh":d=a(e.geometry),u=l(e.material),o=new Qz(d,u),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":d=a(e.geometry),u=l(e.material),o=new Qn(d,u);break;case"InstancedMesh":d=a(e.geometry),u=l(e.material);const h=e.count,m=e.instanceMatrix,g=e.instanceColor;o=new Kz(d,u,h),o.instanceMatrix=new Dd(new Float32Array(m.array),16),g!==void 0&&(o.instanceColor=new Dd(new Float32Array(g.array),g.itemSize));break;case"LOD":o=new Jz;break;case"Line":o=new vl(a(e.geometry),l(e.material));break;case"LineLoop":o=new eN(a(e.geometry),l(e.material));break;case"LineSegments":o=new Xs(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new tN(a(e.geometry),l(e.material));break;case"Sprite":o=new Zz(l(e.material));break;case"Group":o=new fu;break;case"Bone":o=new r2;break;default:o=new Rt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let m=0;m<h.length;m++)o.add(this.parseObject(h[m],n,r,i,s))}if(e.animations!==void 0){const h=e.animations;for(let m=0;m<h.length;m++){const g=h[m];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const h=e.levels;for(let m=0;m<h.length;m++){const g=h[m],x=o.getObjectByProperty("uuid",g.object);x!==void 0&&o.addLevel(x,g.distance)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const cj={UVMapping:My,CubeReflectionMapping:ha,CubeRefractionMapping:fa,EquirectangularReflectionMapping:Qf,EquirectangularRefractionMapping:Kf,CubeUVReflectionMapping:ju},bC={RepeatWrapping:ep,ClampToEdgeWrapping:kr,MirroredRepeatWrapping:tp},MC={NearestFilter:Yn,NearestMipmapNearestFilter:yv,NearestMipmapLinearFilter:xv,LinearFilter:Tn,LinearMipmapNearestFilter:jM,LinearMipmapLinearFilter:$u};class dj extends Qr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Uu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Uu.add(e,l),n&&n(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let Yg;class _2{static getContext(){return Yg===void 0&&(Yg=new(window.AudioContext||window.webkitAudioContext)),Yg}static setContext(e){Yg=e}}class hj extends Qr{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new ws(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);_2.getContext().decodeAudioData(l,function(d){n(d)})}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}}class fj extends zy{constructor(e,n,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new We().set(e),s=new We().set(n),o=new R(i.r,i.g,i.b),a=new R(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class pj extends zy{constructor(e,n=1){super(void 0,n),this.isAmbientLightProbe=!0;const r=new We().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const EC=new nt,TC=new nt,Hl=new nt;class mj{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new jn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new jn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Hl.copy(e.projectionMatrix);const i=n.eyeSep/2,s=i*n.near/n.focus,o=n.near*Math.tan(Su*n.fov*.5)/n.zoom;let a,l;TC.elements[12]=-i,EC.elements[12]=i,a=-o*n.aspect+s,l=o*n.aspect+s,Hl.elements[0]=2*n.near/(l-a),Hl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Hl),a=-o*n.aspect-s,l=o*n.aspect-s,Hl.elements[0]=2*n.near/(l-a),Hl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Hl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(TC),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(EC)}}class w2{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=AC(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=AC();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function AC(){return(typeof performance>"u"?Date:performance).now()}const Gl=new R,CC=new Br,gj=new R,Wl=new R;class vj extends Rt{constructor(){super(),this.type="AudioListener",this.context=_2.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new w2}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Gl,CC,gj),Wl.set(0,0,-1).applyQuaternion(CC),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Gl.x,i),n.positionY.linearRampToValueAtTime(Gl.y,i),n.positionZ.linearRampToValueAtTime(Gl.z,i),n.forwardX.linearRampToValueAtTime(Wl.x,i),n.forwardY.linearRampToValueAtTime(Wl.y,i),n.forwardZ.linearRampToValueAtTime(Wl.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(Gl.x,Gl.y,Gl.z),n.setOrientation(Wl.x,Wl.y,Wl.z,r.x,r.y,r.z)}}class CN extends Rt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const jl=new R,PC=new Br,yj=new R,$l=new R;class xj extends CN{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(jl,PC,yj),$l.set(0,0,1).applyQuaternion(PC);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(jl.x,r),n.positionY.linearRampToValueAtTime(jl.y,r),n.positionZ.linearRampToValueAtTime(jl.z,r),n.orientationX.linearRampToValueAtTime($l.x,r),n.orientationY.linearRampToValueAtTime($l.y,r),n.orientationZ.linearRampToValueAtTime($l.z,r)}else n.setPosition(jl.x,jl.y,jl.z),n.setOrientation($l.x,$l.y,$l.z)}}class _j{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class PN{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,s,o;switch(n){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(r[l]!==r[l+n]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let s=r,o=i;s!==o;++s)n[s]=n[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[n+o]=e[r+o]}_slerp(e,n,r,i){Br.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,s){const o=this._workIndex*s;Br.multiplyQuaternionsFlat(e,o,e,n,e,r),Br.slerpFlat(e,n,e,n,e,o,i)}_lerp(e,n,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,n,r,i,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[r+o]*i}}}const S2="\\[\\]\\.:\\/",wj=new RegExp("["+S2+"]","g"),b2="[^"+S2+"]",Sj="[^"+S2.replace("\\.","")+"]",bj=/((?:WC+[\/:])*)/.source.replace("WC",b2),Mj=/(WCOD+)?/.source.replace("WCOD",Sj),Ej=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",b2),Tj=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",b2),Aj=new RegExp("^"+bj+Mj+Ej+Tj+"$"),Cj=["material","materials","bones","map"];class Pj{constructor(e,n,r){const i=r||Ht.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class Ht{constructor(e,n,r){this.path=n,this.parsedPath=r||Ht.parseTrackName(n),this.node=Ht.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new Ht.Composite(e,n,r):new Ht(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(wj,"")}static parseTrackName(e){const n=Aj.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);Cj.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let s=n.propertyIndex;if(e||(e=Ht.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let c=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===c){c=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ht.Composite=Pj;Ht.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ht.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ht.prototype.GetterByBindingType=[Ht.prototype._getValue_direct,Ht.prototype._getValue_array,Ht.prototype._getValue_arrayElement,Ht.prototype._getValue_toArray];Ht.prototype.SetterByBindingTypeAndVersioning=[[Ht.prototype._setValue_direct,Ht.prototype._setValue_direct_setNeedsUpdate,Ht.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ht.prototype._setValue_array,Ht.prototype._setValue_array_setNeedsUpdate,Ht.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ht.prototype._setValue_arrayElement,Ht.prototype._setValue_arrayElement_setNeedsUpdate,Ht.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ht.prototype._setValue_fromArray,Ht.prototype._setValue_fromArray_setNeedsUpdate,Ht.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Lj{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Li(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let d=0,u=arguments.length;d!==u;++d){const h=arguments[d],m=h.uuid;let g=n[m];if(g===void 0){g=l++,n[m]=g,e.push(h);for(let x=0,y=o;x!==y;++x)s[x].push(new Ht(h,r[x],i[x]))}else if(g<c){a=e[g];const x=--c,y=e[x];n[y.uuid]=g,e[g]=y,n[m]=x,e[x]=h;for(let v=0,_=o;v!==_;++v){const S=s[v],b=S[x];let A=S[g];S[g]=b,A===void 0&&(A=new Ht(h,r[v],i[v])),S[x]=A}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,d=n[c];if(d!==void 0&&d>=s){const u=s++,h=e[u];n[h.uuid]=d,e[d]=h,n[c]=u,e[u]=l;for(let m=0,g=i;m!==g;++m){const x=r[m],y=x[u],v=x[d];x[d]=y,x[u]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],d=c.uuid,u=n[d];if(u!==void 0)if(delete n[d],u<s){const h=--s,m=e[h],g=--o,x=e[g];n[m.uuid]=u,e[u]=m,n[x.uuid]=h,e[h]=x,e.pop();for(let y=0,v=i;y!==v;++y){const _=r[y],S=_[h],b=_[g];_[u]=S,_[h]=b,_.pop()}}else{const h=--o,m=e[h];h>0&&(n[m.uuid]=u),e[u]=m,e.pop();for(let g=0,x=i;g!==x;++g){const y=r[g];y[u]=y[h],y.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,d=this.nCachedObjects_,u=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(n),s.push(u);for(let h=d,m=l.length;h!==m;++h){const g=l[h];u[h]=new Ht(g,e,n)}return u}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];n[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class Oj{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:cu,endingEnd:cu};for(let c=0;c!==o;++c){const d=s[c].createInterpolant(null);a[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Cz,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case qM:for(let d=0,u=l.length;d!==u;++d)l[d].evaluate(o),c[d].accumulateAdditive(a);break;case Ey:default:for(let d=0,u=l.length;d!==u;++d)l[d].evaluate(o),c[d].accumulate(i,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===Pz;if(e===0)return s===-1?i:o&&(s&1)===1?n-i:i;if(r===Az){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=du,i.endingEnd=du):(e?i.endingStart=this.zeroSlopeAtStart?du:cu:i.endingStart=ip,n?i.endingEnd=this.zeroSlopeAtEnd?du:cu:i.endingEnd=ip)}_scheduleFading(e,n,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=r,this}}const Ij=new Float32Array(1);class Dj extends Ss{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let d=c[l];d===void 0&&(d={},c[l]=d);for(let u=0;u!==s;++u){const h=i[u],m=h.name;let g=d[m];if(g!==void 0)++g.referenceCount,o[u]=g;else{if(g=o[u],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const x=n&&n._propertyBindings[u].binding.parsedPath;g=new PN(Ht.create(r,m,x),h.ValueTypeName,h.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),o[u]=g}a[u].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],d=e._byClipCacheIndex;c._byClipCacheIndex=d,l[d]=c,l.pop(),e._byClipCacheIndex=null;const u=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete u[h],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[n];o===void 0&&(o={},i[n]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new f2(new Float32Array(2),new Float32Array(2),1,Ij),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=n[i];e.__cacheIndex=i,n[i]=e,s.__cacheIndex=r,n[r]=s}clipAction(e,n,r){const i=n||this._root,s=i.uuid;let o=typeof e=="string"?fp.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=Ey),l!==void 0){const u=l.actionByRoot[s];if(u!==void 0&&u.blendMode===r)return u;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const d=new Oj(this,o,n,r);return this._bindAction(d,c),this._addInactiveAction(d,a,s),d}existingAction(e,n){const r=n||this._root,i=r.uuid,s=typeof e=="string"?fp.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)n[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const d=c._cacheIndex,u=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=d,n[d]=u,n.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class M2{constructor(e){this.value=e}clone(){return new M2(this.value.clone===void 0?this.value:this.value.clone())}}let Rj=0;class zj extends Ss{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Rj++}),this.name="",this.usage=sp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++)this.uniforms.push(n[r].clone());return this}clone(){return new this.constructor().copy(this)}}class Nj extends Oy{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class kj{constructor(e,n,r,i,s){this.isGLBufferAttribute=!0,this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class E2{constructor(e,n,r=0,i=1/0){this.ray=new Sl(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new Mu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return jS(e,this,r,n),r.sort(LC),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)jS(e[i],this,r,n);return r.sort(LC),r}}function LC(t,e){return t.distance-e.distance}function jS(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let s=0,o=i.length;s<o;s++)jS(i[s],e,n,!0)}}class Bj{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Wn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Fj{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const OC=new se;class LN{constructor(e=new se(1/0,1/0),n=new se(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=OC.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return OC.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const IC=new R,Zg=new R;class ON{constructor(e=new R,n=new R){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){IC.subVectors(e,this.start),Zg.subVectors(this.end,this.start);const r=Zg.dot(Zg);let s=Zg.dot(IC)/r;return n&&(s=Wn(s,0,1)),s}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const DC=new R;class IN extends Rt{constructor(e,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new tt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,d=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(d),Math.sin(d),1)}r.setAttribute("position",new Ne(i,3));const s=new Ur({fog:!1,toneMapped:!1});this.cone=new Xs(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),DC.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(DC),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ka=new R,Jg=new nt,M_=new nt;class Uj extends Xs{constructor(e){const n=DN(e),r=new tt,i=[],s=[],o=new We(0,0,1),a=new We(0,1,0);for(let c=0;c<n.length;c++){const d=n[c];d.parent&&d.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new Ne(i,3)),r.setAttribute("color",new Ne(s,3));const l=new Ur({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");M_.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(Jg.multiplyMatrices(M_,a.matrixWorld),ka.setFromMatrixPosition(Jg),i.setXYZ(o,ka.x,ka.y,ka.z),Jg.multiplyMatrices(M_,a.parent.matrixWorld),ka.setFromMatrixPosition(Jg),i.setXYZ(o+1,ka.x,ka.y,ka.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function DN(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,DN(t.children[n]));return e}class RN extends Qn{constructor(e,n,r){const i=new Zu(n,4,2),s=new bl({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.light.updateMatrixWorld(),this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Vj=new R,RC=new We,zC=new We;class Hj extends Rt{constructor(e,n,r){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;const i=new Zd(n);i.rotateY(Math.PI*.5),this.material=new bl({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new vt(o,3)),this.add(new Qn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");RC.copy(this.light.color),zC.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const s=r<i/2?RC:zC;n.setXYZ(r,s.r,s.g,s.b)}n.needsUpdate=!0}e.lookAt(Vj.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Gj extends Xs{constructor(e=10,n=10,r=4473924,i=8947848){r=new We(r),i=new We(i);const s=n/2,o=e/n,a=e/2,l=[],c=[];for(let h=0,m=0,g=-a;h<=n;h++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const x=h===s?r:i;x.toArray(c,m),m+=3,x.toArray(c,m),m+=3,x.toArray(c,m),m+=3,x.toArray(c,m),m+=3}const d=new tt;d.setAttribute("position",new Ne(l,3)),d.setAttribute("color",new Ne(c,3));const u=new Ur({vertexColors:!0,toneMapped:!1});super(d,u),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Wj extends Xs{constructor(e=10,n=16,r=8,i=64,s=4473924,o=8947848){s=new We(s),o=new We(o);const a=[],l=[];if(n>1)for(let u=0;u<n;u++){const h=u/n*(Math.PI*2),m=Math.sin(h)*e,g=Math.cos(h)*e;a.push(0,0,0),a.push(m,0,g);const x=u&1?s:o;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let u=0;u<r;u++){const h=u&1?s:o,m=e-e/r*u;for(let g=0;g<i;g++){let x=g/i*(Math.PI*2),y=Math.sin(x)*m,v=Math.cos(x)*m;a.push(y,0,v),l.push(h.r,h.g,h.b),x=(g+1)/i*(Math.PI*2),y=Math.sin(x)*m,v=Math.cos(x)*m,a.push(y,0,v),l.push(h.r,h.g,h.b)}}const c=new tt;c.setAttribute("position",new Ne(a,3)),c.setAttribute("color",new Ne(l,3));const d=new Ur({vertexColors:!0,toneMapped:!1});super(c,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const NC=new R,Qg=new R,kC=new R;class zN extends Rt{constructor(e,n,r){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,n===void 0&&(n=1);let i=new tt;i.setAttribute("position",new Ne([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new Ur({fog:!1,toneMapped:!1});this.lightPlane=new vl(i,s),this.add(this.lightPlane),i=new tt,i.setAttribute("position",new Ne([0,0,0,0,0,1],3)),this.targetLine=new vl(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){NC.setFromMatrixPosition(this.light.matrixWorld),Qg.setFromMatrixPosition(this.light.target.matrixWorld),kC.subVectors(Qg,NC),this.lightPlane.lookAt(Qg),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Qg),this.targetLine.scale.z=kC.length()}}const Kg=new R,On=new Xu;class ta extends Xs{constructor(e){const n=new tt,r=new Ur({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,x){l(g),l(x)}function l(g){i.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(i.length/3-1)}n.setAttribute("position",new Ne(i,3)),n.setAttribute("color",new Ne(s,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new We(16755200),d=new We(16711680),u=new We(43775),h=new We(16777215),m=new We(3355443);this.setColors(c,d,u,h,m)}setColors(e,n,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;On.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Vn("c",n,e,On,0,0,-1),Vn("t",n,e,On,0,0,1),Vn("n1",n,e,On,-r,-i,-1),Vn("n2",n,e,On,r,-i,-1),Vn("n3",n,e,On,-r,i,-1),Vn("n4",n,e,On,r,i,-1),Vn("f1",n,e,On,-r,-i,1),Vn("f2",n,e,On,r,-i,1),Vn("f3",n,e,On,-r,i,1),Vn("f4",n,e,On,r,i,1),Vn("u1",n,e,On,r*.7,i*1.1,-1),Vn("u2",n,e,On,-r*.7,i*1.1,-1),Vn("u3",n,e,On,0,i*2,-1),Vn("cf1",n,e,On,-r,0,1),Vn("cf2",n,e,On,r,0,1),Vn("cf3",n,e,On,0,-i,1),Vn("cf4",n,e,On,0,i,1),Vn("cn1",n,e,On,-r,0,-1),Vn("cn2",n,e,On,r,0,-1),Vn("cn3",n,e,On,0,-i,-1),Vn("cn4",n,e,On,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Vn(t,e,n,r,i,s,o){Kg.set(i,s,o).unproject(r);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],Kg.x,Kg.y,Kg.z)}}const e0=new Ni;class jj extends Xs{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new tt;s.setIndex(new vt(r,1)),s.setAttribute("position",new vt(i,3)),super(s,new Ur({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&e0.setFromObject(this.object),e0.isEmpty())return;const n=e0.min,r=e0.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=n.x,s[4]=r.y,s[5]=r.z,s[6]=n.x,s[7]=n.y,s[8]=r.z,s[9]=r.x,s[10]=n.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=n.z,s[15]=n.x,s[16]=r.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=r.x,s[22]=n.y,s[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class cf extends Xs{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new tt;s.setIndex(new vt(r,1)),s.setAttribute("position",new Ne(i,3)),super(s,new Ur({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class $j extends vl{constructor(e,n=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new tt;o.setAttribute("position",new Ne(s,3)),o.computeBoundingSphere(),super(o,new Ur({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new tt;l.setAttribute("position",new Ne(a,3)),l.computeBoundingSphere(),this.add(new Qn(l,new bl({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const BC=new R;let t0,E_;class qj extends Rt{constructor(e=new R(0,0,1),n=new R(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",t0===void 0&&(t0=new tt,t0.setAttribute("position",new Ne([0,0,0,0,1,0],3)),E_=new Tl(0,.5,1,5,1),E_.translate(0,-.5,0)),this.position.copy(n),this.line=new vl(t0,new Ur({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Qn(E_,new bl({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{BC.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(BC,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class NN extends Xs{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new tt;i.setAttribute("position",new Ne(n,3)),i.setAttribute("color",new Ne(r,3));const s=new Ur({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,n,r){const i=new We,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(n),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Xj{constructor(){this.type="ShapePath",this.color=new We,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new Bu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,s,o){return this.currentPath.bezierCurveTo(e,n,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(v){const _=[];for(let S=0,b=v.length;S<b;S++){const A=v[S],E=new Hs;E.curves=A.curves,_.push(E)}return _}function r(v,_){const S=_.length;let b=!1;for(let A=S-1,E=0;E<S;A=E++){let C=_[A],T=_[E],O=T.x-C.x,L=T.y-C.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(C=_[E],O=-O,T=_[A],L=-L),v.y<C.y||v.y>T.y)continue;if(v.y===C.y){if(v.x===C.x)return!0}else{const k=L*(v.x-C.x)-O*(v.y-C.y);if(k===0)return!0;if(k<0)continue;b=!b}}else{if(v.y!==C.y)continue;if(T.x<=v.x&&v.x<=C.x||C.x<=v.x&&v.x<=T.x)return!0}}return b}const i=Gs.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Hs,l.curves=a.curves,c.push(l),c;let d=!i(s[0].getPoints());d=e?!d:d;const u=[],h=[];let m=[],g=0,x;h[g]=void 0,m[g]=[];for(let v=0,_=s.length;v<_;v++)a=s[v],x=a.getPoints(),o=i(x),o=e?!o:o,o?(!d&&h[g]&&g++,h[g]={s:new Hs,p:x},h[g].s.curves=a.curves,d&&g++,m[g]=[]):m[g].push({h:a,p:x[0]});if(!h[0])return n(s);if(h.length>1){let v=!1,_=0;for(let S=0,b=h.length;S<b;S++)u[S]=[];for(let S=0,b=h.length;S<b;S++){const A=m[S];for(let E=0;E<A.length;E++){const C=A[E];let T=!0;for(let O=0;O<h.length;O++)r(C.p,h[O].p)&&(S!==O&&_++,T?(T=!1,u[O].push(C)):v=!0);T&&u[S].push(C)}}_>0&&v===!1&&(m=u)}let y;for(let v=0,_=h.length;v<_;v++){l=h[v].s,c.push(l),y=m[v];for(let S=0,b=y.length;S<b;S++)l.holes.push(y[S].h)}return c}}const Xo=Yj();function Yj(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,d=0;for(;(c&8388608)===0;)c<<=1,d-=8388608;c&=-8388609,d+=947912704,s[l]=c|d}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Zj(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Wn(t,-65504,65504),Xo.floatView[0]=t;const e=Xo.uint32View[0],n=e>>23&511;return Xo.baseTable[n]+((e&8388607)>>Xo.shiftTable[n])}function Jj(t){const e=t>>10;return Xo.uint32View[0]=Xo.mantissaTable[Xo.offsetTable[e]+(t&1023)]+Xo.exponentTable[e],Xo.floatView[0]}var Qj=Object.freeze({__proto__:null,toHalfFloat:Zj,fromHalfFloat:Jj});function Kj(){console.error("THREE.ImmediateRenderObject has been removed.")}class e$ extends Di{constructor(e,n,r){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,n,r),this.samples=4}}class t$ extends Rp{constructor(e,n,r,i){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,n,r,i)}}class n$ extends Ty{constructor(e,n,r,i){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,n,r,i)}}class r$ extends _s{constructor(e,n,r,i,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,n,r,i,s,o)}}class i$ extends kp{constructor(e,n,r,i){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,n,r,i)}}class s$ extends Bp{constructor(e,n,r,i){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,n,r,i)}}class o$ extends qd{constructor(e,n,r,i,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,n,r,i,s,o,a)}}class a$ extends Tl{constructor(e,n,r,i,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,n,r,i,s,o,a,l)}}class l$ extends Xd{constructor(e,n){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,n)}}class u$ extends Fp{constructor(e,n){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,n)}}class c$ extends Yd{constructor(e,n){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,n)}}class d$ extends Yu{constructor(e,n,r,i){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,n,r,i)}}class h$ extends Zd{constructor(e,n){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,n)}}class f$ extends Ml{constructor(e,n,r,i){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,n,r,i)}}class p$ extends ya{constructor(e,n,r,i){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,n,r,i)}}class m$ extends Up{constructor(e,n,r,i,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,n,r,i,s,o)}}class g$ extends Vp{constructor(e,n){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,n)}}class v$ extends Zu{constructor(e,n,r,i,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,n,r,i,s,o,a)}}class y$ extends Hp{constructor(e,n){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,n)}}class x$ extends Gp{constructor(e,n,r,i,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,n,r,i,s)}}class _$ extends Jd{constructor(e,n,r,i,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,n,r,i,s,o)}}class w$ extends Wp{constructor(e,n,r,i,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,n,r,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:by}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=by);const Sv=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:WM,AddEquation:ru,AddOperation:az,AdditiveAnimationBlendMode:qM,AdditiveBlending:cS,AlphaFormat:vz,AlwaysDepth:ez,AlwaysStencilFunc:XM,AmbientLight:MN,AmbientLightProbe:pj,AnimationClip:fp,AnimationLoader:tj,AnimationMixer:Dj,AnimationObjectGroup:Lj,AnimationUtils:J7,ArcCurve:nN,ArrayCamera:$z,ArrowHelper:qj,Audio:CN,AudioAnalyser:_j,AudioContext:_2,AudioListener:vj,AudioLoader:hj,AxesHelper:NN,BackSide:pi,BasicDepthPacking:Lz,BasicShadowMap:AV,Bone:r2,BooleanKeyframeTrack:Ju,Box2:LN,Box3:Ni,Box3Helper:cf,BoxBufferGeometry:r$,BoxGeometry:_s,BoxHelper:jj,BufferAttribute:vt,BufferGeometry:tt,BufferGeometryLoader:ky,ByteType:hz,Cache:Uu,Camera:Xu,CameraHelper:ta,CanvasTexture:w7,CapsuleBufferGeometry:i$,CapsuleGeometry:kp,CatmullRomCurve3:rN,CineonToneMapping:cz,CircleBufferGeometry:s$,CircleGeometry:Bp,ClampToEdgeWrapping:kr,Clock:w2,Color:We,ColorKeyframeTrack:p2,ColorManagement:es,CompressedArrayTexture:_7,CompressedTexture:s2,CompressedTextureLoader:nj,ConeBufferGeometry:o$,ConeGeometry:qd,CubeCamera:Bz,CubeReflectionMapping:ha,CubeRefractionMapping:fa,CubeTexture:jd,CubeTextureLoader:rj,CubeUVReflectionMapping:ju,CubicBezierCurve:hs,CubicBezierCurve3:iN,CubicInterpolant:wN,CullFaceBack:uS,CullFaceFront:UR,CullFaceFrontBack:TV,CullFaceNone:FR,Curve:Ys,CurvePath:sN,CustomBlending:VR,CustomToneMapping:dz,CylinderBufferGeometry:a$,CylinderGeometry:Tl,Cylindrical:Fj,Data3DTexture:Ty,DataArrayTexture:Rp,DataTexture:gd,DataTexture2DArray:t$,DataTexture3D:n$,DataTextureLoader:ij,DataUtils:Qj,DecrementStencilOp:BV,DecrementWrapStencilOp:UV,DefaultLoadingManager:od,DepthFormat:ul,DepthStencilFormat:Nu,DepthTexture:qz,DirectionalLight:x2,DirectionalLightHelper:zN,DiscreteInterpolant:SN,DodecahedronBufferGeometry:l$,DodecahedronGeometry:Xd,DoubleSide:yo,DstAlphaFactor:XR,DstColorFactor:ZR,DynamicCopyUsage:KV,DynamicDrawUsage:qV,DynamicReadUsage:ZV,EdgesGeometry:oN,EllipseCurve:Np,EqualDepth:nz,EqualStencilFunc:Dz,EquirectangularReflectionMapping:Qf,EquirectangularRefractionMapping:Kf,Euler:gl,EventDispatcher:Ss,ExtrudeBufferGeometry:u$,ExtrudeGeometry:Fp,FileLoader:ws,Float16BufferAttribute:D8,Float32BufferAttribute:Ne,Float64BufferAttribute:R8,FloatType:Ko,Fog:zp,FogExp2:Py,FramebufferTexture:x7,FrontSide:pl,Frustum:Ay,GLBufferAttribute:kj,GLSL1:t8,GLSL3:NS,GreaterDepth:iz,GreaterEqualDepth:rz,GreaterEqualStencilFunc:$V,GreaterStencilFunc:jV,GridHelper:Gj,Group:fu,HalfFloatType:zu,HemisphereLight:mp,HemisphereLightHelper:Hj,HemisphereLightProbe:fj,IcosahedronBufferGeometry:c$,IcosahedronGeometry:Yd,ImageBitmapLoader:dj,ImageLoader:pp,ImageUtils:ZM,ImmediateRenderObject:Kj,IncrementStencilOp:kV,IncrementWrapStencilOp:FV,InstancedBufferAttribute:Dd,InstancedBufferGeometry:AN,InstancedInterleavedBuffer:Nj,InstancedMesh:Kz,Int16BufferAttribute:O8,Int32BufferAttribute:I8,Int8BufferAttribute:C8,IntType:pz,InterleavedBuffer:Oy,InterleavedBufferAttribute:ku,Interpolant:jp,InterpolateDiscrete:np,InterpolateLinear:rp,InterpolateSmooth:z0,InvertStencilOp:VV,KeepStencilOp:wu,KeyframeTrack:Zs,LOD:Jz,LatheBufferGeometry:d$,LatheGeometry:Yu,Layers:Mu,LessDepth:tz,LessEqualDepth:vv,LessEqualStencilFunc:WV,LessStencilFunc:GV,Light:Al,LightProbe:zy,Line:vl,Line3:ON,LineBasicMaterial:Ur,LineCurve:ps,LineCurve3:a2,LineDashedMaterial:xN,LineLoop:eN,LineSegments:Xs,LinearEncoding:ys,LinearFilter:Tn,LinearInterpolant:f2,LinearMipMapLinearFilter:OV,LinearMipMapNearestFilter:LV,LinearMipmapLinearFilter:$u,LinearMipmapNearestFilter:jM,LinearSRGBColorSpace:Xa,LinearToneMapping:lz,Loader:Qr,LoaderUtils:WS,LoadingManager:m2,LoopOnce:Az,LoopPingPong:Pz,LoopRepeat:Cz,LuminanceAlphaFormat:_z,LuminanceFormat:xz,MOUSE:MV,Material:Er,MaterialLoader:Ny,MathUtils:nn,Matrix3:ir,Matrix4:nt,MaxEquation:pS,Mesh:Qn,MeshBasicMaterial:bl,MeshDepthMaterial:KM,MeshDistanceMaterial:e2,MeshLambertMaterial:vN,MeshMatcapMaterial:yN,MeshNormalMaterial:gN,MeshPhongMaterial:pN,MeshPhysicalMaterial:fN,MeshStandardMaterial:c2,MeshToonMaterial:mN,MinEquation:fS,MirroredRepeatWrapping:tp,MixOperation:oz,MultiplyBlending:hS,MultiplyOperation:Dp,NearestFilter:Yn,NearestMipMapLinearFilter:PV,NearestMipMapNearestFilter:CV,NearestMipmapLinearFilter:xv,NearestMipmapNearestFilter:yv,NeverDepth:KR,NeverStencilFunc:HV,NoBlending:ia,NoColorSpace:zV,NoToneMapping:Vs,NormalAnimationBlendMode:Ey,NormalBlending:ll,NotEqualDepth:sz,NotEqualStencilFunc:Rz,NumberKeyframeTrack:dp,Object3D:Rt,ObjectLoader:uj,ObjectSpaceNormalMap:Iz,OctahedronBufferGeometry:h$,OctahedronGeometry:Zd,OneFactor:jR,OneMinusDstAlphaFactor:YR,OneMinusDstColorFactor:JR,OneMinusSrcAlphaFactor:GM,OneMinusSrcColorFactor:qR,OrthographicCamera:El,PCFShadowMap:UM,PCFSoftShadowMap:VM,PMREMGenerator:BS,Path:Bu,PerspectiveCamera:jn,Plane:qo,PlaneBufferGeometry:f$,PlaneGeometry:Ml,PlaneHelper:$j,PointLight:y2,PointLightHelper:RN,Points:tN,PointsMaterial:i2,PolarGridHelper:Wj,PolyhedronBufferGeometry:p$,PolyhedronGeometry:ya,PositionalAudio:xj,PropertyBinding:Ht,PropertyMixer:PN,QuadraticBezierCurve:pa,QuadraticBezierCurve3:l2,Quaternion:Br,QuaternionKeyframeTrack:Qd,QuaternionLinearInterpolant:bN,REVISION:by,RGBADepthPacking:Oz,RGBAFormat:Ti,RGBAIntegerFormat:Ez,RGBA_ASTC_10x10_Format:IS,RGBA_ASTC_10x5_Format:PS,RGBA_ASTC_10x6_Format:LS,RGBA_ASTC_10x8_Format:OS,RGBA_ASTC_12x10_Format:DS,RGBA_ASTC_12x12_Format:RS,RGBA_ASTC_4x4_Format:wS,RGBA_ASTC_5x4_Format:SS,RGBA_ASTC_5x5_Format:bS,RGBA_ASTC_6x5_Format:MS,RGBA_ASTC_6x6_Format:ES,RGBA_ASTC_8x5_Format:TS,RGBA_ASTC_8x6_Format:AS,RGBA_ASTC_8x8_Format:CS,RGBA_BPTC_Format:zS,RGBA_ETC2_EAC_Format:_S,RGBA_PVRTC_2BPPV1_Format:yS,RGBA_PVRTC_4BPPV1_Format:vS,RGBA_S3TC_DXT1_Format:I0,RGBA_S3TC_DXT3_Format:D0,RGBA_S3TC_DXT5_Format:R0,RGBFormat:yz,RGB_ETC1_Format:Tz,RGB_ETC2_Format:xS,RGB_PVRTC_2BPPV1_Format:gS,RGB_PVRTC_4BPPV1_Format:mS,RGB_S3TC_DXT1_Format:O0,RGFormat:bz,RGIntegerFormat:Mz,RawShaderMaterial:hN,Ray:Sl,Raycaster:E2,RectAreaLight:EN,RedFormat:wz,RedIntegerFormat:Sz,ReinhardToneMapping:uz,RepeatWrapping:ep,ReplaceStencilOp:N0,ReverseSubtractEquation:GR,RingBufferGeometry:m$,RingGeometry:Up,SRGBColorSpace:fo,Scene:Ly,ShaderChunk:Ct,ShaderLib:ls,ShaderMaterial:$s,ShadowMaterial:dN,Shape:Hs,ShapeBufferGeometry:g$,ShapeGeometry:Vp,ShapePath:Xj,ShapeUtils:Gs,ShortType:fz,Skeleton:Iy,SkeletonHelper:Uj,SkinnedMesh:Qz,Source:hu,Sphere:xs,SphereBufferGeometry:v$,SphereGeometry:Zu,Spherical:Bj,SphericalHarmonics3:TN,SplineCurve:Dy,SpotLight:v2,SpotLightHelper:IN,Sprite:Zz,SpriteMaterial:n2,SrcAlphaFactor:HM,SrcAlphaSaturateFactor:QR,SrcColorFactor:$R,StaticCopyUsage:QV,StaticDrawUsage:sp,StaticReadUsage:YV,StereoCamera:mj,StreamCopyUsage:e8,StreamDrawUsage:XV,StreamReadUsage:JV,StringKeyframeTrack:Qu,SubtractEquation:HR,SubtractiveBlending:dS,TOUCH:EV,TangentSpaceNormalMap:wl,TetrahedronBufferGeometry:y$,TetrahedronGeometry:Hp,Texture:Bn,TextureLoader:sj,TorusBufferGeometry:x$,TorusGeometry:Gp,TorusKnotBufferGeometry:_$,TorusKnotGeometry:Jd,Triangle:Ai,TriangleFanDrawMode:RV,TriangleStripDrawMode:DV,TrianglesDrawMode:IV,TubeBufferGeometry:w$,TubeGeometry:Wp,UVMapping:My,Uint16BufferAttribute:JM,Uint32BufferAttribute:md,Uint8BufferAttribute:P8,Uint8ClampedBufferAttribute:L8,Uniform:M2,UniformsGroup:zj,UniformsLib:Ue,UniformsUtils:qu,UnsignedByteType:ml,UnsignedInt248Type:_u,UnsignedIntType:qa,UnsignedShort4444Type:mz,UnsignedShort5551Type:gz,UnsignedShortType:$M,VSMShadowMap:nd,Vector2:se,Vector3:R,Vector4:St,VectorKeyframeTrack:hp,VideoTexture:y7,WebGL1Renderer:Xz,WebGL3DRenderTarget:y8,WebGLArrayRenderTarget:v8,WebGLCubeRenderTarget:Fz,WebGLMultipleRenderTargets:x8,WebGLMultisampleRenderTarget:e$,WebGLRenderTarget:Di,WebGLRenderer:t2,WebGLUtils:jz,WireframeGeometry:cN,WrapAroundEnding:ip,ZeroCurvatureEnding:cu,ZeroFactor:WR,ZeroSlopeEnding:du,ZeroStencilOp:NV,_SRGBAFormat:_v,sRGBEncoding:un},Symbol.toStringTag,{value:"Module"}));var mu={exports:{}},Ku={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Ku.ConcurrentRoot=1;Ku.ContinuousEventPriority=4;Ku.DefaultEventPriority=16;Ku.DiscreteEventPriority=1;Ku.IdleEventPriority=536870912;Ku.LegacyRoot=0;(function(t){t.exports=Ku})(mu);function S$(t){let e;const n=new Set,r=(c,d)=>{const u=typeof c=="function"?c(e):c;if(u!==e){const h=e;e=d?u:Object.assign({},e,u),n.forEach(m=>m(e,h))}},i=()=>e,s=(c,d=i,u=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=d(e);function m(){const g=d(e);if(!u(h,g)){const x=h;c(h=g,x)}}return n.add(m),()=>n.delete(m)},l={setState:r,getState:i,subscribe:(c,d,u)=>d||u?s(c,d,u):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(r,i,l),l}const b$=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),FC=b$?ue.exports.useEffect:ue.exports.useLayoutEffect;function kN(t){const e=typeof t=="function"?S$(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=ue.exports.useReducer(y=>y+1,0),o=e.getState(),a=ue.exports.useRef(o),l=ue.exports.useRef(r),c=ue.exports.useRef(i),d=ue.exports.useRef(!1),u=ue.exports.useRef();u.current===void 0&&(u.current=r(o));let h,m=!1;(a.current!==o||l.current!==r||c.current!==i||d.current)&&(h=r(o),m=!i(u.current,h)),FC(()=>{m&&(u.current=h),a.current=o,l.current=r,c.current=i,d.current=!1});const g=ue.exports.useRef(o);FC(()=>{const y=()=>{try{const _=e.getState(),S=l.current(_);c.current(u.current,S)||(a.current=_,u.current=S,s())}catch{d.current=!0,s()}},v=e.subscribe(y);return e.getState()!==g.current&&y(),v},[]);const x=m?h:u.current;return ue.exports.useDebugValue(x),x};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var BN={exports:{}},T_={exports:{}},A_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UC;function M$(){return UC||(UC=1,function(t){function e(D,N){var z=D.length;D.push(N);e:for(;0<z;){var U=z-1>>>1,V=D[U];if(0<i(V,N))D[U]=N,D[z]=V,z=U;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var N=D[0],z=D.pop();if(z!==N){D[0]=z;e:for(var U=0,V=D.length,X=V>>>1;U<X;){var J=2*(U+1)-1,ee=D[J],q=J+1,re=D[q];if(0>i(ee,z))q<V&&0>i(re,ee)?(D[U]=re,D[q]=z,U=q):(D[U]=ee,D[J]=z,U=J);else if(q<V&&0>i(re,z))D[U]=re,D[q]=z,U=q;else break e}}return N}function i(D,N){var z=D.sortIndex-N.sortIndex;return z!==0?z:D.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,u=null,h=3,m=!1,g=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(D){for(var N=n(c);N!==null;){if(N.callback===null)r(c);else if(N.startTime<=D)r(c),N.sortIndex=N.expirationTime,e(l,N);else break;N=n(c)}}function b(D){if(x=!1,S(D),!g)if(n(l)!==null)g=!0,te(A);else{var N=n(c);N!==null&&Z(b,N.startTime-D)}}function A(D,N){g=!1,x&&(x=!1,v(T),T=-1),m=!0;var z=h;try{for(S(N),u=n(l);u!==null&&(!(u.expirationTime>N)||D&&!k());){var U=u.callback;if(typeof U=="function"){u.callback=null,h=u.priorityLevel;var V=U(u.expirationTime<=N);N=t.unstable_now(),typeof V=="function"?u.callback=V:u===n(l)&&r(l),S(N)}else r(l);u=n(l)}if(u!==null)var X=!0;else{var J=n(c);J!==null&&Z(b,J.startTime-N),X=!1}return X}finally{u=null,h=z,m=!1}}var E=!1,C=null,T=-1,O=5,L=-1;function k(){return!(t.unstable_now()-L<O)}function B(){if(C!==null){var D=t.unstable_now();L=D;var N=!0;try{N=C(!0,D)}finally{N?G():(E=!1,C=null)}}else E=!1}var G;if(typeof _=="function")G=function(){_(B)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,Y=H.port2;H.port1.onmessage=B,G=function(){Y.postMessage(null)}}else G=function(){y(B,0)};function te(D){C=D,E||(E=!0,G())}function Z(D,N){T=y(function(){D(t.unstable_now())},N)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,te(A))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(h){case 1:case 2:case 3:var N=3;break;default:N=h}var z=h;h=N;try{return D()}finally{h=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,N){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var z=h;h=D;try{return N()}finally{h=z}},t.unstable_scheduleCallback=function(D,N,z){var U=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?U+z:U):z=U,D){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=z+V,D={id:d++,callback:N,priorityLevel:D,startTime:z,expirationTime:V,sortIndex:-1},z>U?(D.sortIndex=z,e(c,D),n(l)===null&&D===n(c)&&(x?(v(T),T=-1):x=!0,Z(b,z-U))):(D.sortIndex=V,e(l,D),g||m||(g=!0,te(A))),D},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(D){var N=h;return function(){var z=h;h=N;try{return D.apply(this,arguments)}finally{h=z}}}}(A_)),A_}var VC;function E$(){return VC||(VC=1,function(t){t.exports=M$()}(T_)),T_.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T$=function(e){var n={},r=ue.exports,i=E$(),s=Object.assign;function o(f){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+f,w=1;w<arguments.length;w++)p+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),A=Symbol.iterator;function E(f){return f===null||typeof f!="object"?null:(f=A&&f[A]||f["@@iterator"],typeof f=="function"?f:null)}function C(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case d:return"Fragment";case c:return"Portal";case h:return"Profiler";case u:return"StrictMode";case y:return"Suspense";case v:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case g:return(f.displayName||"Context")+".Consumer";case m:return(f._context.displayName||"Context")+".Provider";case x:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case _:return p=f.displayName||null,p!==null?p:C(f.type)||"Memo";case S:p=f._payload,f=f._init;try{return C(f(p))}catch{}}return null}function T(f){var p=f.type;switch(f.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=p.render,f=f.displayName||f.name||"",p.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return C(p);case 8:return p===u?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function O(f){var p=f,w=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,(p.flags&4098)!==0&&(w=p.return),f=p.return;while(f)}return p.tag===3?w:null}function L(f){if(O(f)!==f)throw Error(o(188))}function k(f){var p=f.alternate;if(!p){if(p=O(f),p===null)throw Error(o(188));return p!==f?null:f}for(var w=f,M=p;;){var P=w.return;if(P===null)break;var I=P.alternate;if(I===null){if(M=P.return,M!==null){w=M;continue}break}if(P.child===I.child){for(I=P.child;I;){if(I===w)return L(P),f;if(I===M)return L(P),p;I=I.sibling}throw Error(o(188))}if(w.return!==M.return)w=P,M=I;else{for(var $=!1,le=P.child;le;){if(le===w){$=!0,w=P,M=I;break}if(le===M){$=!0,M=P,w=I;break}le=le.sibling}if(!$){for(le=I.child;le;){if(le===w){$=!0,w=I,M=P;break}if(le===M){$=!0,M=I,w=P;break}le=le.sibling}if(!$)throw Error(o(189))}}if(w.alternate!==M)throw Error(o(190))}if(w.tag!==3)throw Error(o(188));return w.stateNode.current===w?f:p}function B(f){return f=k(f),f!==null?G(f):null}function G(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var p=G(f);if(p!==null)return p;f=f.sibling}return null}function H(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){if(f.tag!==4){var p=H(f);if(p!==null)return p}f=f.sibling}return null}var Y=Array.isArray,te=e.getPublicInstance,Z=e.getRootHostContext,D=e.getChildHostContext,N=e.prepareForCommit,z=e.resetAfterCommit,U=e.createInstance,V=e.appendInitialChild,X=e.finalizeInitialChildren,J=e.prepareUpdate,ee=e.shouldSetTextContent,q=e.createTextInstance,re=e.scheduleTimeout,ie=e.cancelTimeout,K=e.noTimeout,oe=e.isPrimaryRenderer,ye=e.supportsMutation,ne=e.supportsPersistence,Q=e.supportsHydration,de=e.getInstanceFromNode,pe=e.preparePortalMount,ve=e.getCurrentEventPriority,Re=e.detachDeletedInstance,Le=e.supportsMicrotasks,De=e.scheduleMicrotask,gt=e.supportsTestSelectors,je=e.findFiberRoot,j=e.getBoundingRect,F=e.getTextContent,_e=e.isHiddenSubtree,Ie=e.matchAccessibilityRole,ke=e.setFocusIfFocusable,Ve=e.setupIntersectionObserver,ut=e.appendChild,He=e.appendChildToContainer,Ce=e.commitTextUpdate,Ge=e.commitMount,Je=e.commitUpdate,qe=e.insertBefore,at=e.insertInContainerBefore,rt=e.removeChild,Pt=e.removeChildFromContainer,Wt=e.resetTextContent,pn=e.hideInstance,ae=e.hideTextInstance,be=e.unhideInstance,Me=e.unhideTextInstance,Ae=e.clearContainer,ze=e.cloneInstance,Ze=e.createContainerChildSet,dt=e.appendChildToContainerChildSet,bt=e.finalizeContainerChildren,Nt=e.replaceContainerChildren,ht=e.cloneHiddenInstance,zt=e.cloneHiddenTextInstance,Ot=e.canHydrateInstance,Fn=e.canHydrateTextInstance,Vr=e.canHydrateSuspenseInstance,ar=e.isSuspenseInstancePending,Fi=e.isSuspenseInstanceFallback,W=e.registerSuspenseInstanceRetry,ge=e.getNextHydratableSibling,Te=e.getFirstHydratableChild,me=e.getFirstHydratableChildWithinContainer,Pe=e.getFirstHydratableChildWithinSuspenseInstance,ct=e.hydrateInstance,xt=e.hydrateTextInstance,Tt=e.hydrateSuspenseInstance,Mt=e.getNextHydratableInstanceAfterSuspenseInstance,Vt=e.commitHydratedContainer,It=e.commitHydratedSuspenseInstance,Ft=e.clearSuspenseBoundary,_n=e.clearSuspenseBoundaryFromContainer,Po=e.shouldDeleteUnhydratedTailInstances,xa=e.didNotMatchHydratedContainerTextInstance,_a=e.didNotMatchHydratedTextInstance,Kr;function kt(f){if(Kr===void 0)try{throw Error()}catch(w){var p=w.stack.trim().match(/\n( *(at )?)/);Kr=p&&p[1]||""}return`
`+Kr+f}var Js=!1;function wn(f,p){if(!f||Js)return"";Js=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(Fe){var M=Fe}Reflect.construct(f,[],p)}else{try{p.call()}catch(Fe){M=Fe}f.call(p.prototype)}else{try{throw Error()}catch(Fe){M=Fe}f()}}catch(Fe){if(Fe&&M&&typeof Fe.stack=="string"){for(var P=Fe.stack.split(`
`),I=M.stack.split(`
`),$=P.length-1,le=I.length-1;1<=$&&0<=le&&P[$]!==I[le];)le--;for(;1<=$&&0<=le;$--,le--)if(P[$]!==I[le]){if($!==1||le!==1)do if($--,le--,0>le||P[$]!==I[le]){var Ee=`
`+P[$].replace(" at new "," at ");return f.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",f.displayName)),Ee}while(1<=$&&0<=le);break}}}finally{Js=!1,Error.prepareStackTrace=w}return(f=f?f.displayName||f.name:"")?kt(f):""}var ei=Object.prototype.hasOwnProperty,Ui=[],Vi=-1;function Hi(f){return{current:f}}function Et(f){0>Vi||(f.current=Ui[Vi],Ui[Vi]=null,Vi--)}function Ut(f,p){Vi++,Ui[Vi]=f.current,f.current=p}var Gi={},Jt=Hi(Gi),lr=Hi(!1),Lo=Gi;function Oo(f,p){var w=f.type.contextTypes;if(!w)return Gi;var M=f.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===p)return M.__reactInternalMemoizedMaskedChildContext;var P={},I;for(I in w)P[I]=p[I];return M&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=p,f.__reactInternalMemoizedMaskedChildContext=P),P}function ti(f){return f=f.childContextTypes,f!=null}function im(){Et(lr),Et(Jt)}function P3(f,p,w){if(Jt.current!==Gi)throw Error(o(168));Ut(Jt,p),Ut(lr,w)}function L3(f,p,w){var M=f.stateNode;if(p=p.childContextTypes,typeof M.getChildContext!="function")return w;M=M.getChildContext();for(var P in M)if(!(P in p))throw Error(o(108,T(f)||"Unknown",P));return s({},w,M)}function sm(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||Gi,Lo=Jt.current,Ut(Jt,f),Ut(lr,lr.current),!0}function O3(f,p,w){var M=f.stateNode;if(!M)throw Error(o(169));w?(f=L3(f,p,Lo),M.__reactInternalMemoizedMergedChildContext=f,Et(lr),Et(Jt),Ut(Jt,f)):Et(lr),Ut(lr,w)}var Ms=Math.clz32?Math.clz32:gF,pF=Math.log,mF=Math.LN2;function gF(f){return f>>>=0,f===0?32:31-(pF(f)/mF|0)|0}var om=64,am=4194304;function ch(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function lm(f,p){var w=f.pendingLanes;if(w===0)return 0;var M=0,P=f.suspendedLanes,I=f.pingedLanes,$=w&268435455;if($!==0){var le=$&~P;le!==0?M=ch(le):(I&=$,I!==0&&(M=ch(I)))}else $=w&~P,$!==0?M=ch($):I!==0&&(M=ch(I));if(M===0)return 0;if(p!==0&&p!==M&&(p&P)===0&&(P=M&-M,I=p&-p,P>=I||P===16&&(I&4194240)!==0))return p;if((M&4)!==0&&(M|=w&16),p=f.entangledLanes,p!==0)for(f=f.entanglements,p&=M;0<p;)w=31-Ms(p),P=1<<w,M|=f[w],p&=~P;return M}function vF(f,p){switch(f){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yF(f,p){for(var w=f.suspendedLanes,M=f.pingedLanes,P=f.expirationTimes,I=f.pendingLanes;0<I;){var $=31-Ms(I),le=1<<$,Ee=P[$];Ee===-1?((le&w)===0||(le&M)!==0)&&(P[$]=vF(le,p)):Ee<=p&&(f.expiredLanes|=le),I&=~le}}function m1(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function g1(f){for(var p=[],w=0;31>w;w++)p.push(f);return p}function dh(f,p,w){f.pendingLanes|=p,p!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,p=31-Ms(p),f[p]=w}function xF(f,p){var w=f.pendingLanes&~p;f.pendingLanes=p,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=p,f.mutableReadLanes&=p,f.entangledLanes&=p,p=f.entanglements;var M=f.eventTimes;for(f=f.expirationTimes;0<w;){var P=31-Ms(w),I=1<<P;p[P]=0,M[P]=-1,f[P]=-1,w&=~I}}function v1(f,p){var w=f.entangledLanes|=p;for(f=f.entanglements;w;){var M=31-Ms(w),P=1<<M;P&p|f[M]&p&&(f[M]|=p),w&=~P}}var jt=0;function I3(f){return f&=-f,1<f?4<f?(f&268435455)!==0?16:536870912:4:1}var y1=i.unstable_scheduleCallback,D3=i.unstable_cancelCallback,_F=i.unstable_shouldYield,wF=i.unstable_requestPaint,ur=i.unstable_now,x1=i.unstable_ImmediatePriority,SF=i.unstable_UserBlockingPriority,_1=i.unstable_NormalPriority,bF=i.unstable_IdlePriority,um=null,Qs=null;function MF(f){if(Qs&&typeof Qs.onCommitFiberRoot=="function")try{Qs.onCommitFiberRoot(um,f,void 0,(f.current.flags&128)===128)}catch{}}function EF(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var Ks=typeof Object.is=="function"?Object.is:EF,Io=null,cm=!1,w1=!1;function R3(f){Io===null?Io=[f]:Io.push(f)}function TF(f){cm=!0,R3(f)}function eo(){if(!w1&&Io!==null){w1=!0;var f=0,p=jt;try{var w=Io;for(jt=1;f<w.length;f++){var M=w[f];do M=M(!0);while(M!==null)}Io=null,cm=!1}catch(P){throw Io!==null&&(Io=Io.slice(f+1)),y1(x1,eo),P}finally{jt=p,w1=!1}}return null}var AF=a.ReactCurrentBatchConfig;function dm(f,p){if(Ks(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var w=Object.keys(f),M=Object.keys(p);if(w.length!==M.length)return!1;for(M=0;M<w.length;M++){var P=w[M];if(!ei.call(p,P)||!Ks(f[P],p[P]))return!1}return!0}function CF(f){switch(f.tag){case 5:return kt(f.type);case 16:return kt("Lazy");case 13:return kt("Suspense");case 19:return kt("SuspenseList");case 0:case 2:case 15:return f=wn(f.type,!1),f;case 11:return f=wn(f.type.render,!1),f;case 1:return f=wn(f.type,!0),f;default:return""}}function Es(f,p){if(f&&f.defaultProps){p=s({},p),f=f.defaultProps;for(var w in f)p[w]===void 0&&(p[w]=f[w]);return p}return p}var hm=Hi(null),fm=null,rc=null,S1=null;function b1(){S1=rc=fm=null}function z3(f,p,w){oe?(Ut(hm,p._currentValue),p._currentValue=w):(Ut(hm,p._currentValue2),p._currentValue2=w)}function M1(f){var p=hm.current;Et(hm),oe?f._currentValue=p:f._currentValue2=p}function E1(f,p,w){for(;f!==null;){var M=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,M!==null&&(M.childLanes|=p)):M!==null&&(M.childLanes&p)!==p&&(M.childLanes|=p),f===w)break;f=f.return}}function ic(f,p){fm=f,S1=rc=null,f=f.dependencies,f!==null&&f.firstContext!==null&&((f.lanes&p)!==0&&(_i=!0),f.firstContext=null)}function Wi(f){var p=oe?f._currentValue:f._currentValue2;if(S1!==f)if(f={context:f,memoizedValue:p,next:null},rc===null){if(fm===null)throw Error(o(308));rc=f,fm.dependencies={lanes:0,firstContext:f}}else rc=rc.next=f;return p}var to=null,wa=!1;function T1(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function N3(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function Do(f,p){return{eventTime:f,lane:p,tag:0,payload:null,callback:null,next:null}}function Sa(f,p){var w=f.updateQueue;w!==null&&(w=w.shared,$n!==null&&(f.mode&1)!==0&&(Lt&2)===0?(f=w.interleaved,f===null?(p.next=p,to===null?to=[w]:to.push(w)):(p.next=f.next,f.next=p),w.interleaved=p):(f=w.pending,f===null?p.next=p:(p.next=f.next,f.next=p),w.pending=p))}function pm(f,p,w){if(p=p.updateQueue,p!==null&&(p=p.shared,(w&4194240)!==0)){var M=p.lanes;M&=f.pendingLanes,w|=M,p.lanes=w,v1(f,w)}}function k3(f,p){var w=f.updateQueue,M=f.alternate;if(M!==null&&(M=M.updateQueue,w===M)){var P=null,I=null;if(w=w.firstBaseUpdate,w!==null){do{var $={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};I===null?P=I=$:I=I.next=$,w=w.next}while(w!==null);I===null?P=I=p:I=I.next=p}else P=I=p;w={baseState:M.baseState,firstBaseUpdate:P,lastBaseUpdate:I,shared:M.shared,effects:M.effects},f.updateQueue=w;return}f=w.lastBaseUpdate,f===null?w.firstBaseUpdate=p:f.next=p,w.lastBaseUpdate=p}function mm(f,p,w,M){var P=f.updateQueue;wa=!1;var I=P.firstBaseUpdate,$=P.lastBaseUpdate,le=P.shared.pending;if(le!==null){P.shared.pending=null;var Ee=le,Fe=Ee.next;Ee.next=null,$===null?I=Fe:$.next=Fe,$=Ee;var Ke=f.alternate;Ke!==null&&(Ke=Ke.updateQueue,le=Ke.lastBaseUpdate,le!==$&&(le===null?Ke.firstBaseUpdate=Fe:le.next=Fe,Ke.lastBaseUpdate=Ee))}if(I!==null){var _t=P.baseState;$=0,Ke=Fe=Ee=null,le=I;do{var ft=le.lane,ln=le.eventTime;if((M&ft)===ft){Ke!==null&&(Ke=Ke.next={eventTime:ln,lane:0,tag:le.tag,payload:le.payload,callback:le.callback,next:null});e:{var ot=f,Lr=le;switch(ft=p,ln=w,Lr.tag){case 1:if(ot=Lr.payload,typeof ot=="function"){_t=ot.call(ln,_t,ft);break e}_t=ot;break e;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=Lr.payload,ft=typeof ot=="function"?ot.call(ln,_t,ft):ot,ft==null)break e;_t=s({},_t,ft);break e;case 2:wa=!0}}le.callback!==null&&le.lane!==0&&(f.flags|=64,ft=P.effects,ft===null?P.effects=[le]:ft.push(le))}else ln={eventTime:ln,lane:ft,tag:le.tag,payload:le.payload,callback:le.callback,next:null},Ke===null?(Fe=Ke=ln,Ee=_t):Ke=Ke.next=ln,$|=ft;if(le=le.next,le===null){if(le=P.shared.pending,le===null)break;ft=le,le=ft.next,ft.next=null,P.lastBaseUpdate=ft,P.shared.pending=null}}while(1);if(Ke===null&&(Ee=_t),P.baseState=Ee,P.firstBaseUpdate=Fe,P.lastBaseUpdate=Ke,p=P.shared.interleaved,p!==null){P=p;do $|=P.lane,P=P.next;while(P!==p)}else I===null&&(P.shared.lanes=0);fc|=$,f.lanes=$,f.memoizedState=_t}}function B3(f,p,w){if(f=p.effects,p.effects=null,f!==null)for(p=0;p<f.length;p++){var M=f[p],P=M.callback;if(P!==null){if(M.callback=null,M=w,typeof P!="function")throw Error(o(191,P));P.call(M)}}}var F3=new r.Component().refs;function A1(f,p,w,M){p=f.memoizedState,w=w(M,p),w=w==null?p:s({},p,w),f.memoizedState=w,f.lanes===0&&(f.updateQueue.baseState=w)}var gm={isMounted:function(f){return(f=f._reactInternals)?O(f)===f:!1},enqueueSetState:function(f,p,w){f=f._reactInternals;var M=Gr(),P=Ea(f),I=Do(M,P);I.payload=p,w!=null&&(I.callback=w),Sa(f,I),p=Yi(f,P,M),p!==null&&pm(p,f,P)},enqueueReplaceState:function(f,p,w){f=f._reactInternals;var M=Gr(),P=Ea(f),I=Do(M,P);I.tag=1,I.payload=p,w!=null&&(I.callback=w),Sa(f,I),p=Yi(f,P,M),p!==null&&pm(p,f,P)},enqueueForceUpdate:function(f,p){f=f._reactInternals;var w=Gr(),M=Ea(f),P=Do(w,M);P.tag=2,p!=null&&(P.callback=p),Sa(f,P),p=Yi(f,M,w),p!==null&&pm(p,f,M)}};function U3(f,p,w,M,P,I,$){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(M,I,$):p.prototype&&p.prototype.isPureReactComponent?!dm(w,M)||!dm(P,I):!0}function V3(f,p,w){var M=!1,P=Gi,I=p.contextType;return typeof I=="object"&&I!==null?I=Wi(I):(P=ti(p)?Lo:Jt.current,M=p.contextTypes,I=(M=M!=null)?Oo(f,P):Gi),p=new p(w,I),f.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=gm,f.stateNode=p,p._reactInternals=f,M&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=P,f.__reactInternalMemoizedMaskedChildContext=I),p}function H3(f,p,w,M){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(w,M),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(w,M),p.state!==f&&gm.enqueueReplaceState(p,p.state,null)}function C1(f,p,w,M){var P=f.stateNode;P.props=w,P.state=f.memoizedState,P.refs=F3,T1(f);var I=p.contextType;typeof I=="object"&&I!==null?P.context=Wi(I):(I=ti(p)?Lo:Jt.current,P.context=Oo(f,I)),P.state=f.memoizedState,I=p.getDerivedStateFromProps,typeof I=="function"&&(A1(f,p,I,w),P.state=f.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(p=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),p!==P.state&&gm.enqueueReplaceState(P,P.state,null),mm(f,w,P,M),P.state=f.memoizedState),typeof P.componentDidMount=="function"&&(f.flags|=4194308)}var sc=[],oc=0,vm=null,ym=0,ji=[],$i=0,Ll=null,Ro=1,zo="";function Ol(f,p){sc[oc++]=ym,sc[oc++]=vm,vm=f,ym=p}function G3(f,p,w){ji[$i++]=Ro,ji[$i++]=zo,ji[$i++]=Ll,Ll=f;var M=Ro;f=zo;var P=32-Ms(M)-1;M&=~(1<<P),w+=1;var I=32-Ms(p)+P;if(30<I){var $=P-P%5;I=(M&(1<<$)-1).toString(32),M>>=$,P-=$,Ro=1<<32-Ms(p)+P|w<<P|M,zo=I+f}else Ro=1<<I|w<<P|M,zo=f}function P1(f){f.return!==null&&(Ol(f,1),G3(f,1,0))}function L1(f){for(;f===vm;)vm=sc[--oc],sc[oc]=null,ym=sc[--oc],sc[oc]=null;for(;f===Ll;)Ll=ji[--$i],ji[$i]=null,zo=ji[--$i],ji[$i]=null,Ro=ji[--$i],ji[$i]=null}var yi=null,xi=null,Sn=!1,hh=!1,Ts=null;function W3(f,p){var w=Zi(5,null,null,0);w.elementType="DELETED",w.stateNode=p,w.return=f,p=f.deletions,p===null?(f.deletions=[w],f.flags|=16):p.push(w)}function j3(f,p){switch(f.tag){case 5:return p=Ot(p,f.type,f.pendingProps),p!==null?(f.stateNode=p,yi=f,xi=Te(p),!0):!1;case 6:return p=Fn(p,f.pendingProps),p!==null?(f.stateNode=p,yi=f,xi=null,!0):!1;case 13:if(p=Vr(p),p!==null){var w=Ll!==null?{id:Ro,overflow:zo}:null;return f.memoizedState={dehydrated:p,treeContext:w,retryLane:1073741824},w=Zi(18,null,null,0),w.stateNode=p,w.return=f,f.child=w,yi=f,xi=null,!0}return!1;default:return!1}}function O1(f){return(f.mode&1)!==0&&(f.flags&128)===0}function I1(f){if(Sn){var p=xi;if(p){var w=p;if(!j3(f,p)){if(O1(f))throw Error(o(418));p=ge(w);var M=yi;p&&j3(f,p)?W3(M,w):(f.flags=f.flags&-4097|2,Sn=!1,yi=f)}}else{if(O1(f))throw Error(o(418));f.flags=f.flags&-4097|2,Sn=!1,yi=f}}}function $3(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;yi=f}function fh(f){if(!Q||f!==yi)return!1;if(!Sn)return $3(f),Sn=!0,!1;if(f.tag!==3&&(f.tag!==5||Po(f.type)&&!ee(f.type,f.memoizedProps))){var p=xi;if(p){if(O1(f)){for(f=xi;f;)f=ge(f);throw Error(o(418))}for(;p;)W3(f,p),p=ge(p)}}if($3(f),f.tag===13){if(!Q)throw Error(o(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));xi=Mt(f)}else xi=yi?ge(f.stateNode):null;return!0}function ac(){Q&&(xi=yi=null,hh=Sn=!1)}function D1(f){Ts===null?Ts=[f]:Ts.push(f)}function ph(f,p,w){if(f=w.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(o(309));var M=w.stateNode}if(!M)throw Error(o(147,f));var P=M,I=""+f;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===I?p.ref:(p=function($){var le=P.refs;le===F3&&(le=P.refs={}),$===null?delete le[I]:le[I]=$},p._stringRef=I,p)}if(typeof f!="string")throw Error(o(284));if(!w._owner)throw Error(o(290,f))}return f}function xm(f,p){throw f=Object.prototype.toString.call(p),Error(o(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f))}function q3(f){var p=f._init;return p(f._payload)}function X3(f){function p(xe,ce){if(f){var Se=xe.deletions;Se===null?(xe.deletions=[ce],xe.flags|=16):Se.push(ce)}}function w(xe,ce){if(!f)return null;for(;ce!==null;)p(xe,ce),ce=ce.sibling;return null}function M(xe,ce){for(xe=new Map;ce!==null;)ce.key!==null?xe.set(ce.key,ce):xe.set(ce.index,ce),ce=ce.sibling;return xe}function P(xe,ce){return xe=Aa(xe,ce),xe.index=0,xe.sibling=null,xe}function I(xe,ce,Se){return xe.index=Se,f?(Se=xe.alternate,Se!==null?(Se=Se.index,Se<ce?(xe.flags|=2,ce):Se):(xe.flags|=2,ce)):(xe.flags|=1048576,ce)}function $(xe){return f&&xe.alternate===null&&(xe.flags|=2),xe}function le(xe,ce,Se,Xe){return ce===null||ce.tag!==6?(ce=gx(Se,xe.mode,Xe),ce.return=xe,ce):(ce=P(ce,Se),ce.return=xe,ce)}function Ee(xe,ce,Se,Xe){var st=Se.type;return st===d?Ke(xe,ce,Se.props.children,Xe,Se.key):ce!==null&&(ce.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===S&&q3(st)===ce.type)?(Xe=P(ce,Se.props),Xe.ref=ph(xe,ce,Se),Xe.return=xe,Xe):(Xe=Zm(Se.type,Se.key,Se.props,null,xe.mode,Xe),Xe.ref=ph(xe,ce,Se),Xe.return=xe,Xe)}function Fe(xe,ce,Se,Xe){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==Se.containerInfo||ce.stateNode.implementation!==Se.implementation?(ce=vx(Se,xe.mode,Xe),ce.return=xe,ce):(ce=P(ce,Se.children||[]),ce.return=xe,ce)}function Ke(xe,ce,Se,Xe,st){return ce===null||ce.tag!==7?(ce=Bl(Se,xe.mode,Xe,st),ce.return=xe,ce):(ce=P(ce,Se),ce.return=xe,ce)}function _t(xe,ce,Se){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ce=gx(""+ce,xe.mode,Se),ce.return=xe,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case l:return Se=Zm(ce.type,ce.key,ce.props,null,xe.mode,Se),Se.ref=ph(xe,null,ce),Se.return=xe,Se;case c:return ce=vx(ce,xe.mode,Se),ce.return=xe,ce;case S:var Xe=ce._init;return _t(xe,Xe(ce._payload),Se)}if(Y(ce)||E(ce))return ce=Bl(ce,xe.mode,Se,null),ce.return=xe,ce;xm(xe,ce)}return null}function ft(xe,ce,Se,Xe){var st=ce!==null?ce.key:null;if(typeof Se=="string"&&Se!==""||typeof Se=="number")return st!==null?null:le(xe,ce,""+Se,Xe);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case l:return Se.key===st?Ee(xe,ce,Se,Xe):null;case c:return Se.key===st?Fe(xe,ce,Se,Xe):null;case S:return st=Se._init,ft(xe,ce,st(Se._payload),Xe)}if(Y(Se)||E(Se))return st!==null?null:Ke(xe,ce,Se,Xe,null);xm(xe,Se)}return null}function ln(xe,ce,Se,Xe,st){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return xe=xe.get(Se)||null,le(ce,xe,""+Xe,st);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case l:return xe=xe.get(Xe.key===null?Se:Xe.key)||null,Ee(ce,xe,Xe,st);case c:return xe=xe.get(Xe.key===null?Se:Xe.key)||null,Fe(ce,xe,Xe,st);case S:var At=Xe._init;return ln(xe,ce,Se,At(Xe._payload),st)}if(Y(Xe)||E(Xe))return xe=xe.get(Se)||null,Ke(ce,xe,Xe,st,null);xm(ce,Xe)}return null}function ot(xe,ce,Se,Xe){for(var st=null,At=null,wt=ce,$t=ce=0,dr=null;wt!==null&&$t<Se.length;$t++){wt.index>$t?(dr=wt,wt=null):dr=wt.sibling;var qt=ft(xe,wt,Se[$t],Xe);if(qt===null){wt===null&&(wt=dr);break}f&&wt&&qt.alternate===null&&p(xe,wt),ce=I(qt,ce,$t),At===null?st=qt:At.sibling=qt,At=qt,wt=dr}if($t===Se.length)return w(xe,wt),Sn&&Ol(xe,$t),st;if(wt===null){for(;$t<Se.length;$t++)wt=_t(xe,Se[$t],Xe),wt!==null&&(ce=I(wt,ce,$t),At===null?st=wt:At.sibling=wt,At=wt);return Sn&&Ol(xe,$t),st}for(wt=M(xe,wt);$t<Se.length;$t++)dr=ln(wt,xe,$t,Se[$t],Xe),dr!==null&&(f&&dr.alternate!==null&&wt.delete(dr.key===null?$t:dr.key),ce=I(dr,ce,$t),At===null?st=dr:At.sibling=dr,At=dr);return f&&wt.forEach(function(Ca){return p(xe,Ca)}),Sn&&Ol(xe,$t),st}function Lr(xe,ce,Se,Xe){var st=E(Se);if(typeof st!="function")throw Error(o(150));if(Se=st.call(Se),Se==null)throw Error(o(151));for(var At=st=null,wt=ce,$t=ce=0,dr=null,qt=Se.next();wt!==null&&!qt.done;$t++,qt=Se.next()){wt.index>$t?(dr=wt,wt=null):dr=wt.sibling;var Ca=ft(xe,wt,qt.value,Xe);if(Ca===null){wt===null&&(wt=dr);break}f&&wt&&Ca.alternate===null&&p(xe,wt),ce=I(Ca,ce,$t),At===null?st=Ca:At.sibling=Ca,At=Ca,wt=dr}if(qt.done)return w(xe,wt),Sn&&Ol(xe,$t),st;if(wt===null){for(;!qt.done;$t++,qt=Se.next())qt=_t(xe,qt.value,Xe),qt!==null&&(ce=I(qt,ce,$t),At===null?st=qt:At.sibling=qt,At=qt);return Sn&&Ol(xe,$t),st}for(wt=M(xe,wt);!qt.done;$t++,qt=Se.next())qt=ln(wt,xe,$t,qt.value,Xe),qt!==null&&(f&&qt.alternate!==null&&wt.delete(qt.key===null?$t:qt.key),ce=I(qt,ce,$t),At===null?st=qt:At.sibling=qt,At=qt);return f&&wt.forEach(function(iU){return p(xe,iU)}),Sn&&Ol(xe,$t),st}function Ji(xe,ce,Se,Xe){if(typeof Se=="object"&&Se!==null&&Se.type===d&&Se.key===null&&(Se=Se.props.children),typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case l:e:{for(var st=Se.key,At=ce;At!==null;){if(At.key===st){if(st=Se.type,st===d){if(At.tag===7){w(xe,At.sibling),ce=P(At,Se.props.children),ce.return=xe,xe=ce;break e}}else if(At.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===S&&q3(st)===At.type){w(xe,At.sibling),ce=P(At,Se.props),ce.ref=ph(xe,At,Se),ce.return=xe,xe=ce;break e}w(xe,At);break}else p(xe,At);At=At.sibling}Se.type===d?(ce=Bl(Se.props.children,xe.mode,Xe,Se.key),ce.return=xe,xe=ce):(Xe=Zm(Se.type,Se.key,Se.props,null,xe.mode,Xe),Xe.ref=ph(xe,ce,Se),Xe.return=xe,xe=Xe)}return $(xe);case c:e:{for(At=Se.key;ce!==null;){if(ce.key===At)if(ce.tag===4&&ce.stateNode.containerInfo===Se.containerInfo&&ce.stateNode.implementation===Se.implementation){w(xe,ce.sibling),ce=P(ce,Se.children||[]),ce.return=xe,xe=ce;break e}else{w(xe,ce);break}else p(xe,ce);ce=ce.sibling}ce=vx(Se,xe.mode,Xe),ce.return=xe,xe=ce}return $(xe);case S:return At=Se._init,Ji(xe,ce,At(Se._payload),Xe)}if(Y(Se))return ot(xe,ce,Se,Xe);if(E(Se))return Lr(xe,ce,Se,Xe);xm(xe,Se)}return typeof Se=="string"&&Se!==""||typeof Se=="number"?(Se=""+Se,ce!==null&&ce.tag===6?(w(xe,ce.sibling),ce=P(ce,Se),ce.return=xe,xe=ce):(w(xe,ce),ce=gx(Se,xe.mode,Xe),ce.return=xe,xe=ce),$(xe)):w(xe,ce)}return Ji}var lc=X3(!0),Y3=X3(!1),mh={},qi=Hi(mh),gh=Hi(mh),uc=Hi(mh);function no(f){if(f===mh)throw Error(o(174));return f}function R1(f,p){Ut(uc,p),Ut(gh,f),Ut(qi,mh),f=Z(p),Et(qi),Ut(qi,f)}function cc(){Et(qi),Et(gh),Et(uc)}function Z3(f){var p=no(uc.current),w=no(qi.current);p=D(w,f.type,p),w!==p&&(Ut(gh,f),Ut(qi,p))}function z1(f){gh.current===f&&(Et(qi),Et(gh))}var Mn=Hi(0);function _m(f){for(var p=f;p!==null;){if(p.tag===13){var w=p.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||ar(w)||Fi(w)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var N1=[];function k1(){for(var f=0;f<N1.length;f++){var p=N1[f];oe?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}N1.length=0}var wm=a.ReactCurrentDispatcher,Xi=a.ReactCurrentBatchConfig,dc=0,Ln=null,Ar=null,cr=null,Sm=!1,vh=!1,yh=0,PF=0;function Cr(){throw Error(o(321))}function B1(f,p){if(p===null)return!1;for(var w=0;w<p.length&&w<f.length;w++)if(!Ks(f[w],p[w]))return!1;return!0}function F1(f,p,w,M,P,I){if(dc=I,Ln=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,wm.current=f===null||f.memoizedState===null?DF:RF,f=w(M,P),vh){I=0;do{if(vh=!1,yh=0,25<=I)throw Error(o(301));I+=1,cr=Ar=null,p.updateQueue=null,wm.current=zF,f=w(M,P)}while(vh)}if(wm.current=Am,p=Ar!==null&&Ar.next!==null,dc=0,cr=Ar=Ln=null,Sm=!1,p)throw Error(o(300));return f}function U1(){var f=yh!==0;return yh=0,f}function No(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cr===null?Ln.memoizedState=cr=f:cr=cr.next=f,cr}function ro(){if(Ar===null){var f=Ln.alternate;f=f!==null?f.memoizedState:null}else f=Ar.next;var p=cr===null?Ln.memoizedState:cr.next;if(p!==null)cr=p,Ar=f;else{if(f===null)throw Error(o(310));Ar=f,f={memoizedState:Ar.memoizedState,baseState:Ar.baseState,baseQueue:Ar.baseQueue,queue:Ar.queue,next:null},cr===null?Ln.memoizedState=cr=f:cr=cr.next=f}return cr}function Il(f,p){return typeof p=="function"?p(f):p}function bm(f){var p=ro(),w=p.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=f;var M=Ar,P=M.baseQueue,I=w.pending;if(I!==null){if(P!==null){var $=P.next;P.next=I.next,I.next=$}M.baseQueue=P=I,w.pending=null}if(P!==null){I=P.next,M=M.baseState;var le=$=null,Ee=null,Fe=I;do{var Ke=Fe.lane;if((dc&Ke)===Ke)Ee!==null&&(Ee=Ee.next={lane:0,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null}),M=Fe.hasEagerState?Fe.eagerState:f(M,Fe.action);else{var _t={lane:Ke,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null};Ee===null?(le=Ee=_t,$=M):Ee=Ee.next=_t,Ln.lanes|=Ke,fc|=Ke}Fe=Fe.next}while(Fe!==null&&Fe!==I);Ee===null?$=M:Ee.next=le,Ks(M,p.memoizedState)||(_i=!0),p.memoizedState=M,p.baseState=$,p.baseQueue=Ee,w.lastRenderedState=M}if(f=w.interleaved,f!==null){P=f;do I=P.lane,Ln.lanes|=I,fc|=I,P=P.next;while(P!==f)}else P===null&&(w.lanes=0);return[p.memoizedState,w.dispatch]}function Mm(f){var p=ro(),w=p.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=f;var M=w.dispatch,P=w.pending,I=p.memoizedState;if(P!==null){w.pending=null;var $=P=P.next;do I=f(I,$.action),$=$.next;while($!==P);Ks(I,p.memoizedState)||(_i=!0),p.memoizedState=I,p.baseQueue===null&&(p.baseState=I),w.lastRenderedState=I}return[I,M]}function J3(){}function Q3(f,p){var w=Ln,M=ro(),P=p(),I=!Ks(M.memoizedState,P);if(I&&(M.memoizedState=P,_i=!0),M=M.queue,_h(tE.bind(null,w,M,f),[f]),M.getSnapshot!==p||I||cr!==null&&cr.memoizedState.tag&1){if(w.flags|=2048,xh(9,eE.bind(null,w,M,P,p),void 0,null),$n===null)throw Error(o(349));(dc&30)!==0||K3(w,p,P)}return P}function K3(f,p,w){f.flags|=16384,f={getSnapshot:p,value:w},p=Ln.updateQueue,p===null?(p={lastEffect:null,stores:null},Ln.updateQueue=p,p.stores=[f]):(w=p.stores,w===null?p.stores=[f]:w.push(f))}function eE(f,p,w,M){p.value=w,p.getSnapshot=M,nE(p)&&Yi(f,1,-1)}function tE(f,p,w){return w(function(){nE(p)&&Yi(f,1,-1)})}function nE(f){var p=f.getSnapshot;f=f.value;try{var w=p();return!Ks(f,w)}catch{return!0}}function V1(f){var p=No();return typeof f=="function"&&(f=f()),p.memoizedState=p.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:f},p.queue=f,f=f.dispatch=IF.bind(null,Ln,f),[p.memoizedState,f]}function xh(f,p,w,M){return f={tag:f,create:p,destroy:w,deps:M,next:null},p=Ln.updateQueue,p===null?(p={lastEffect:null,stores:null},Ln.updateQueue=p,p.lastEffect=f.next=f):(w=p.lastEffect,w===null?p.lastEffect=f.next=f:(M=w.next,w.next=f,f.next=M,p.lastEffect=f)),f}function rE(){return ro().memoizedState}function Em(f,p,w,M){var P=No();Ln.flags|=f,P.memoizedState=xh(1|p,w,void 0,M===void 0?null:M)}function Tm(f,p,w,M){var P=ro();M=M===void 0?null:M;var I=void 0;if(Ar!==null){var $=Ar.memoizedState;if(I=$.destroy,M!==null&&B1(M,$.deps)){P.memoizedState=xh(p,w,I,M);return}}Ln.flags|=f,P.memoizedState=xh(1|p,w,I,M)}function H1(f,p){return Em(8390656,8,f,p)}function _h(f,p){return Tm(2048,8,f,p)}function iE(f,p){return Tm(4,2,f,p)}function sE(f,p){return Tm(4,4,f,p)}function oE(f,p){if(typeof p=="function")return f=f(),p(f),function(){p(null)};if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function aE(f,p,w){return w=w!=null?w.concat([f]):null,Tm(4,4,oE.bind(null,p,f),w)}function G1(){}function lE(f,p){var w=ro();p=p===void 0?null:p;var M=w.memoizedState;return M!==null&&p!==null&&B1(p,M[1])?M[0]:(w.memoizedState=[f,p],f)}function uE(f,p){var w=ro();p=p===void 0?null:p;var M=w.memoizedState;return M!==null&&p!==null&&B1(p,M[1])?M[0]:(f=f(),w.memoizedState=[f,p],f)}function LF(f,p){var w=jt;jt=w!==0&&4>w?w:4,f(!0);var M=Xi.transition;Xi.transition={};try{f(!1),p()}finally{jt=w,Xi.transition=M}}function cE(){return ro().memoizedState}function OF(f,p,w){var M=Ea(f);w={lane:M,action:w,hasEagerState:!1,eagerState:null,next:null},dE(f)?hE(p,w):(fE(f,p,w),w=Gr(),f=Yi(f,M,w),f!==null&&pE(f,p,M))}function IF(f,p,w){var M=Ea(f),P={lane:M,action:w,hasEagerState:!1,eagerState:null,next:null};if(dE(f))hE(p,P);else{fE(f,p,P);var I=f.alternate;if(f.lanes===0&&(I===null||I.lanes===0)&&(I=p.lastRenderedReducer,I!==null))try{var $=p.lastRenderedState,le=I($,w);if(P.hasEagerState=!0,P.eagerState=le,Ks(le,$))return}catch{}finally{}w=Gr(),f=Yi(f,M,w),f!==null&&pE(f,p,M)}}function dE(f){var p=f.alternate;return f===Ln||p!==null&&p===Ln}function hE(f,p){vh=Sm=!0;var w=f.pending;w===null?p.next=p:(p.next=w.next,w.next=p),f.pending=p}function fE(f,p,w){$n!==null&&(f.mode&1)!==0&&(Lt&2)===0?(f=p.interleaved,f===null?(w.next=w,to===null?to=[p]:to.push(p)):(w.next=f.next,f.next=w),p.interleaved=w):(f=p.pending,f===null?w.next=w:(w.next=f.next,f.next=w),p.pending=w)}function pE(f,p,w){if((w&4194240)!==0){var M=p.lanes;M&=f.pendingLanes,w|=M,p.lanes=w,v1(f,w)}}var Am={readContext:Wi,useCallback:Cr,useContext:Cr,useEffect:Cr,useImperativeHandle:Cr,useInsertionEffect:Cr,useLayoutEffect:Cr,useMemo:Cr,useReducer:Cr,useRef:Cr,useState:Cr,useDebugValue:Cr,useDeferredValue:Cr,useTransition:Cr,useMutableSource:Cr,useSyncExternalStore:Cr,useId:Cr,unstable_isNewReconciler:!1},DF={readContext:Wi,useCallback:function(f,p){return No().memoizedState=[f,p===void 0?null:p],f},useContext:Wi,useEffect:H1,useImperativeHandle:function(f,p,w){return w=w!=null?w.concat([f]):null,Em(4194308,4,oE.bind(null,p,f),w)},useLayoutEffect:function(f,p){return Em(4194308,4,f,p)},useInsertionEffect:function(f,p){return Em(4,2,f,p)},useMemo:function(f,p){var w=No();return p=p===void 0?null:p,f=f(),w.memoizedState=[f,p],f},useReducer:function(f,p,w){var M=No();return p=w!==void 0?w(p):p,M.memoizedState=M.baseState=p,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:p},M.queue=f,f=f.dispatch=OF.bind(null,Ln,f),[M.memoizedState,f]},useRef:function(f){var p=No();return f={current:f},p.memoizedState=f},useState:V1,useDebugValue:G1,useDeferredValue:function(f){var p=V1(f),w=p[0],M=p[1];return H1(function(){var P=Xi.transition;Xi.transition={};try{M(f)}finally{Xi.transition=P}},[f]),w},useTransition:function(){var f=V1(!1),p=f[0];return f=LF.bind(null,f[1]),No().memoizedState=f,[p,f]},useMutableSource:function(){},useSyncExternalStore:function(f,p,w){var M=Ln,P=No();if(Sn){if(w===void 0)throw Error(o(407));w=w()}else{if(w=p(),$n===null)throw Error(o(349));(dc&30)!==0||K3(M,p,w)}P.memoizedState=w;var I={value:w,getSnapshot:p};return P.queue=I,H1(tE.bind(null,M,I,f),[f]),M.flags|=2048,xh(9,eE.bind(null,M,I,w,p),void 0,null),w},useId:function(){var f=No(),p=$n.identifierPrefix;if(Sn){var w=zo,M=Ro;w=(M&~(1<<32-Ms(M)-1)).toString(32)+w,p=":"+p+"R"+w,w=yh++,0<w&&(p+="H"+w.toString(32)),p+=":"}else w=PF++,p=":"+p+"r"+w.toString(32)+":";return f.memoizedState=p},unstable_isNewReconciler:!1},RF={readContext:Wi,useCallback:lE,useContext:Wi,useEffect:_h,useImperativeHandle:aE,useInsertionEffect:iE,useLayoutEffect:sE,useMemo:uE,useReducer:bm,useRef:rE,useState:function(){return bm(Il)},useDebugValue:G1,useDeferredValue:function(f){var p=bm(Il),w=p[0],M=p[1];return _h(function(){var P=Xi.transition;Xi.transition={};try{M(f)}finally{Xi.transition=P}},[f]),w},useTransition:function(){var f=bm(Il)[0],p=ro().memoizedState;return[f,p]},useMutableSource:J3,useSyncExternalStore:Q3,useId:cE,unstable_isNewReconciler:!1},zF={readContext:Wi,useCallback:lE,useContext:Wi,useEffect:_h,useImperativeHandle:aE,useInsertionEffect:iE,useLayoutEffect:sE,useMemo:uE,useReducer:Mm,useRef:rE,useState:function(){return Mm(Il)},useDebugValue:G1,useDeferredValue:function(f){var p=Mm(Il),w=p[0],M=p[1];return _h(function(){var P=Xi.transition;Xi.transition={};try{M(f)}finally{Xi.transition=P}},[f]),w},useTransition:function(){var f=Mm(Il)[0],p=ro().memoizedState;return[f,p]},useMutableSource:J3,useSyncExternalStore:Q3,useId:cE,unstable_isNewReconciler:!1};function W1(f,p){try{var w="",M=p;do w+=CF(M),M=M.return;while(M);var P=w}catch(I){P=`
Error generating stack: `+I.message+`
`+I.stack}return{value:f,source:p,stack:P}}function j1(f,p){try{console.error(p.value)}catch(w){setTimeout(function(){throw w})}}var NF=typeof WeakMap=="function"?WeakMap:Map;function mE(f,p,w){w=Do(-1,w),w.tag=3,w.payload={element:null};var M=p.value;return w.callback=function(){Gm||(Gm=!0,ux=M),j1(f,p)},w}function gE(f,p,w){w=Do(-1,w),w.tag=3;var M=f.type.getDerivedStateFromError;if(typeof M=="function"){var P=p.value;w.payload=function(){return M(P)},w.callback=function(){j1(f,p)}}var I=f.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(w.callback=function(){j1(f,p),typeof M!="function"&&(ba===null?ba=new Set([this]):ba.add(this));var $=p.stack;this.componentDidCatch(p.value,{componentStack:$!==null?$:""})}),w}function vE(f,p,w){var M=f.pingCache;if(M===null){M=f.pingCache=new NF;var P=new Set;M.set(p,P)}else P=M.get(p),P===void 0&&(P=new Set,M.set(p,P));P.has(w)||(P.add(w),f=ZF.bind(null,f,p,w),p.then(f,f))}function yE(f){do{var p;if((p=f.tag===13)&&(p=f.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return f;f=f.return}while(f!==null);return null}function xE(f,p,w,M,P){return(f.mode&1)===0?(f===p?f.flags|=65536:(f.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(p=Do(-1,1),p.tag=2,Sa(w,p))),w.lanes|=1),f):(f.flags|=65536,f.lanes=P,f)}function io(f){f.flags|=4}function _E(f,p){if(f!==null&&f.child===p.child)return!0;if((p.flags&16)!==0)return!1;for(f=p.child;f!==null;){if((f.flags&12854)!==0||(f.subtreeFlags&12854)!==0)return!1;f=f.sibling}return!0}var wh,Sh,Cm,Pm;if(ye)wh=function(f,p){for(var w=p.child;w!==null;){if(w.tag===5||w.tag===6)V(f,w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===p)break;for(;w.sibling===null;){if(w.return===null||w.return===p)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Sh=function(){},Cm=function(f,p,w,M,P){if(f=f.memoizedProps,f!==M){var I=p.stateNode,$=no(qi.current);w=J(I,w,f,M,P,$),(p.updateQueue=w)&&io(p)}},Pm=function(f,p,w,M){w!==M&&io(p)};else if(ne){wh=function(f,p,w,M){for(var P=p.child;P!==null;){if(P.tag===5){var I=P.stateNode;w&&M&&(I=ht(I,P.type,P.memoizedProps,P)),V(f,I)}else if(P.tag===6)I=P.stateNode,w&&M&&(I=zt(I,P.memoizedProps,P)),V(f,I);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)I=P.child,I!==null&&(I.return=P),wh(f,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===p)break;for(;P.sibling===null;){if(P.return===null||P.return===p)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};var wE=function(f,p,w,M){for(var P=p.child;P!==null;){if(P.tag===5){var I=P.stateNode;w&&M&&(I=ht(I,P.type,P.memoizedProps,P)),dt(f,I)}else if(P.tag===6)I=P.stateNode,w&&M&&(I=zt(I,P.memoizedProps,P)),dt(f,I);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)I=P.child,I!==null&&(I.return=P),wE(f,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===p)break;for(;P.sibling===null;){if(P.return===null||P.return===p)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};Sh=function(f,p){var w=p.stateNode;if(!_E(f,p)){f=w.containerInfo;var M=Ze(f);wE(M,p,!1,!1),w.pendingChildren=M,io(p),bt(f,M)}},Cm=function(f,p,w,M,P){var I=f.stateNode,$=f.memoizedProps;if((f=_E(f,p))&&$===M)p.stateNode=I;else{var le=p.stateNode,Ee=no(qi.current),Fe=null;$!==M&&(Fe=J(le,w,$,M,P,Ee)),f&&Fe===null?p.stateNode=I:(I=ze(I,Fe,w,$,M,p,f,le),X(I,w,M,P,Ee)&&io(p),p.stateNode=I,f?io(p):wh(I,p,!1,!1))}},Pm=function(f,p,w,M){w!==M?(f=no(uc.current),w=no(qi.current),p.stateNode=q(M,f,w,p),io(p)):p.stateNode=f.stateNode}}else Sh=function(){},Cm=function(){},Pm=function(){};function bh(f,p){if(!Sn)switch(f.tailMode){case"hidden":p=f.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?f.tail=null:w.sibling=null;break;case"collapsed":w=f.tail;for(var M=null;w!==null;)w.alternate!==null&&(M=w),w=w.sibling;M===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:M.sibling=null}}function Pr(f){var p=f.alternate!==null&&f.alternate.child===f.child,w=0,M=0;if(p)for(var P=f.child;P!==null;)w|=P.lanes|P.childLanes,M|=P.subtreeFlags&14680064,M|=P.flags&14680064,P.return=f,P=P.sibling;else for(P=f.child;P!==null;)w|=P.lanes|P.childLanes,M|=P.subtreeFlags,M|=P.flags,P.return=f,P=P.sibling;return f.subtreeFlags|=M,f.childLanes=w,p}function kF(f,p,w){var M=p.pendingProps;switch(L1(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pr(p),null;case 1:return ti(p.type)&&im(),Pr(p),null;case 3:return M=p.stateNode,cc(),Et(lr),Et(Jt),k1(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(f===null||f.child===null)&&(fh(p)?io(p):f===null||f.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,Ts!==null&&(hx(Ts),Ts=null))),Sh(f,p),Pr(p),null;case 5:z1(p),w=no(uc.current);var P=p.type;if(f!==null&&p.stateNode!=null)Cm(f,p,P,M,w),f.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!M){if(p.stateNode===null)throw Error(o(166));return Pr(p),null}if(f=no(qi.current),fh(p)){if(!Q)throw Error(o(175));f=ct(p.stateNode,p.type,p.memoizedProps,w,f,p,!hh),p.updateQueue=f,f!==null&&io(p)}else{var I=U(P,M,w,f,p);wh(I,p,!1,!1),p.stateNode=I,X(I,P,M,w,f)&&io(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Pr(p),null;case 6:if(f&&p.stateNode!=null)Pm(f,p,f.memoizedProps,M);else{if(typeof M!="string"&&p.stateNode===null)throw Error(o(166));if(f=no(uc.current),w=no(qi.current),fh(p)){if(!Q)throw Error(o(176));if(f=p.stateNode,M=p.memoizedProps,(w=xt(f,M,p,!hh))&&(P=yi,P!==null))switch(I=(P.mode&1)!==0,P.tag){case 3:xa(P.stateNode.containerInfo,f,M,I);break;case 5:_a(P.type,P.memoizedProps,P.stateNode,f,M,I)}w&&io(p)}else p.stateNode=q(M,f,w,p)}return Pr(p),null;case 13:if(Et(Mn),M=p.memoizedState,Sn&&xi!==null&&(p.mode&1)!==0&&(p.flags&128)===0){for(f=xi;f;)f=ge(f);return ac(),p.flags|=98560,p}if(M!==null&&M.dehydrated!==null){if(M=fh(p),f===null){if(!M)throw Error(o(318));if(!Q)throw Error(o(344));if(f=p.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));Tt(f,p)}else ac(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;return Pr(p),null}return Ts!==null&&(hx(Ts),Ts=null),(p.flags&128)!==0?(p.lanes=w,p):(M=M!==null,w=!1,f===null?fh(p):w=f.memoizedState!==null,M&&!w&&(p.child.flags|=8192,(p.mode&1)!==0&&(f===null||(Mn.current&1)!==0?Kn===0&&(Kn=3):px())),p.updateQueue!==null&&(p.flags|=4),Pr(p),null);case 4:return cc(),Sh(f,p),f===null&&pe(p.stateNode.containerInfo),Pr(p),null;case 10:return M1(p.type._context),Pr(p),null;case 17:return ti(p.type)&&im(),Pr(p),null;case 19:if(Et(Mn),P=p.memoizedState,P===null)return Pr(p),null;if(M=(p.flags&128)!==0,I=P.rendering,I===null)if(M)bh(P,!1);else{if(Kn!==0||f!==null&&(f.flags&128)!==0)for(f=p.child;f!==null;){if(I=_m(f),I!==null){for(p.flags|=128,bh(P,!1),f=I.updateQueue,f!==null&&(p.updateQueue=f,p.flags|=4),p.subtreeFlags=0,f=w,M=p.child;M!==null;)w=M,P=f,w.flags&=14680066,I=w.alternate,I===null?(w.childLanes=0,w.lanes=P,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=I.childLanes,w.lanes=I.lanes,w.child=I.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=I.memoizedProps,w.memoizedState=I.memoizedState,w.updateQueue=I.updateQueue,w.type=I.type,P=I.dependencies,w.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),M=M.sibling;return Ut(Mn,Mn.current&1|2),p.child}f=f.sibling}P.tail!==null&&ur()>lx&&(p.flags|=128,M=!0,bh(P,!1),p.lanes=4194304)}else{if(!M)if(f=_m(I),f!==null){if(p.flags|=128,M=!0,f=f.updateQueue,f!==null&&(p.updateQueue=f,p.flags|=4),bh(P,!0),P.tail===null&&P.tailMode==="hidden"&&!I.alternate&&!Sn)return Pr(p),null}else 2*ur()-P.renderingStartTime>lx&&w!==1073741824&&(p.flags|=128,M=!0,bh(P,!1),p.lanes=4194304);P.isBackwards?(I.sibling=p.child,p.child=I):(f=P.last,f!==null?f.sibling=I:p.child=I,P.last=I)}return P.tail!==null?(p=P.tail,P.rendering=p,P.tail=p.sibling,P.renderingStartTime=ur(),p.sibling=null,f=Mn.current,Ut(Mn,M?f&1|2:f&1),p):(Pr(p),null);case 22:case 23:return fx(),M=p.memoizedState!==null,f!==null&&f.memoizedState!==null!==M&&(p.flags|=8192),M&&(p.mode&1)!==0?(wi&1073741824)!==0&&(Pr(p),ye&&p.subtreeFlags&6&&(p.flags|=8192)):Pr(p),null;case 24:return null;case 25:return null}throw Error(o(156,p.tag))}var BF=a.ReactCurrentOwner,_i=!1;function Hr(f,p,w,M){p.child=f===null?Y3(p,null,w,M):lc(p,f.child,w,M)}function SE(f,p,w,M,P){w=w.render;var I=p.ref;return ic(p,P),M=F1(f,p,w,M,I,P),w=U1(),f!==null&&!_i?(p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~P,ko(f,p,P)):(Sn&&w&&P1(p),p.flags|=1,Hr(f,p,M,P),p.child)}function bE(f,p,w,M,P){if(f===null){var I=w.type;return typeof I=="function"&&!mx(I)&&I.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(p.tag=15,p.type=I,ME(f,p,I,M,P)):(f=Zm(w.type,null,M,p,p.mode,P),f.ref=p.ref,f.return=p,p.child=f)}if(I=f.child,(f.lanes&P)===0){var $=I.memoizedProps;if(w=w.compare,w=w!==null?w:dm,w($,M)&&f.ref===p.ref)return ko(f,p,P)}return p.flags|=1,f=Aa(I,M),f.ref=p.ref,f.return=p,p.child=f}function ME(f,p,w,M,P){if(f!==null&&dm(f.memoizedProps,M)&&f.ref===p.ref)if(_i=!1,(f.lanes&P)!==0)(f.flags&131072)!==0&&(_i=!0);else return p.lanes=f.lanes,ko(f,p,P);return $1(f,p,w,M,P)}function EE(f,p,w){var M=p.pendingProps,P=M.children,I=f!==null?f.memoizedState:null;if(M.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null},Ut(hc,wi),wi|=w;else if((w&1073741824)!==0)p.memoizedState={baseLanes:0,cachePool:null},M=I!==null?I.baseLanes:w,Ut(hc,wi),wi|=M;else return f=I!==null?I.baseLanes|w:w,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:f,cachePool:null},p.updateQueue=null,Ut(hc,wi),wi|=f,null;else I!==null?(M=I.baseLanes|w,p.memoizedState=null):M=w,Ut(hc,wi),wi|=M;return Hr(f,p,P,w),p.child}function TE(f,p){var w=p.ref;(f===null&&w!==null||f!==null&&f.ref!==w)&&(p.flags|=512,p.flags|=2097152)}function $1(f,p,w,M,P){var I=ti(w)?Lo:Jt.current;return I=Oo(p,I),ic(p,P),w=F1(f,p,w,M,I,P),M=U1(),f!==null&&!_i?(p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~P,ko(f,p,P)):(Sn&&M&&P1(p),p.flags|=1,Hr(f,p,w,P),p.child)}function AE(f,p,w,M,P){if(ti(w)){var I=!0;sm(p)}else I=!1;if(ic(p,P),p.stateNode===null)f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2),V3(p,w,M),C1(p,w,M,P),M=!0;else if(f===null){var $=p.stateNode,le=p.memoizedProps;$.props=le;var Ee=$.context,Fe=w.contextType;typeof Fe=="object"&&Fe!==null?Fe=Wi(Fe):(Fe=ti(w)?Lo:Jt.current,Fe=Oo(p,Fe));var Ke=w.getDerivedStateFromProps,_t=typeof Ke=="function"||typeof $.getSnapshotBeforeUpdate=="function";_t||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(le!==M||Ee!==Fe)&&H3(p,$,M,Fe),wa=!1;var ft=p.memoizedState;$.state=ft,mm(p,M,$,P),Ee=p.memoizedState,le!==M||ft!==Ee||lr.current||wa?(typeof Ke=="function"&&(A1(p,w,Ke,M),Ee=p.memoizedState),(le=wa||U3(p,w,le,M,ft,Ee,Fe))?(_t||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(p.flags|=4194308)):(typeof $.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=M,p.memoizedState=Ee),$.props=M,$.state=Ee,$.context=Fe,M=le):(typeof $.componentDidMount=="function"&&(p.flags|=4194308),M=!1)}else{$=p.stateNode,N3(f,p),le=p.memoizedProps,Fe=p.type===p.elementType?le:Es(p.type,le),$.props=Fe,_t=p.pendingProps,ft=$.context,Ee=w.contextType,typeof Ee=="object"&&Ee!==null?Ee=Wi(Ee):(Ee=ti(w)?Lo:Jt.current,Ee=Oo(p,Ee));var ln=w.getDerivedStateFromProps;(Ke=typeof ln=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(le!==_t||ft!==Ee)&&H3(p,$,M,Ee),wa=!1,ft=p.memoizedState,$.state=ft,mm(p,M,$,P);var ot=p.memoizedState;le!==_t||ft!==ot||lr.current||wa?(typeof ln=="function"&&(A1(p,w,ln,M),ot=p.memoizedState),(Fe=wa||U3(p,w,Fe,M,ft,ot,Ee)||!1)?(Ke||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(M,ot,Ee),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(M,ot,Ee)),typeof $.componentDidUpdate=="function"&&(p.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof $.componentDidUpdate!="function"||le===f.memoizedProps&&ft===f.memoizedState||(p.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||le===f.memoizedProps&&ft===f.memoizedState||(p.flags|=1024),p.memoizedProps=M,p.memoizedState=ot),$.props=M,$.state=ot,$.context=Ee,M=Fe):(typeof $.componentDidUpdate!="function"||le===f.memoizedProps&&ft===f.memoizedState||(p.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||le===f.memoizedProps&&ft===f.memoizedState||(p.flags|=1024),M=!1)}return q1(f,p,w,M,I,P)}function q1(f,p,w,M,P,I){TE(f,p);var $=(p.flags&128)!==0;if(!M&&!$)return P&&O3(p,w,!1),ko(f,p,I);M=p.stateNode,BF.current=p;var le=$&&typeof w.getDerivedStateFromError!="function"?null:M.render();return p.flags|=1,f!==null&&$?(p.child=lc(p,f.child,null,I),p.child=lc(p,null,le,I)):Hr(f,p,le,I),p.memoizedState=M.state,P&&O3(p,w,!0),p.child}function CE(f){var p=f.stateNode;p.pendingContext?P3(f,p.pendingContext,p.pendingContext!==p.context):p.context&&P3(f,p.context,!1),R1(f,p.containerInfo)}function PE(f,p,w,M,P){return ac(),D1(P),p.flags|=256,Hr(f,p,w,M),p.child}var Lm={dehydrated:null,treeContext:null,retryLane:0};function Om(f){return{baseLanes:f,cachePool:null}}function LE(f,p,w){var M=p.pendingProps,P=Mn.current,I=!1,$=(p.flags&128)!==0,le;if((le=$)||(le=f!==null&&f.memoizedState===null?!1:(P&2)!==0),le?(I=!0,p.flags&=-129):(f===null||f.memoizedState!==null)&&(P|=1),Ut(Mn,P&1),f===null)return I1(p),f=p.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?((p.mode&1)===0?p.lanes=1:Fi(f)?p.lanes=8:p.lanes=1073741824,null):(P=M.children,f=M.fallback,I?(M=p.mode,I=p.child,P={mode:"hidden",children:P},(M&1)===0&&I!==null?(I.childLanes=0,I.pendingProps=P):I=Jm(P,M,0,null),f=Bl(f,M,w,null),I.return=p,f.return=p,I.sibling=f,p.child=I,p.child.memoizedState=Om(w),p.memoizedState=Lm,f):X1(p,P));if(P=f.memoizedState,P!==null){if(le=P.dehydrated,le!==null){if($)return p.flags&256?(p.flags&=-257,Im(f,p,w,Error(o(422)))):p.memoizedState!==null?(p.child=f.child,p.flags|=128,null):(I=M.fallback,P=p.mode,M=Jm({mode:"visible",children:M.children},P,0,null),I=Bl(I,P,w,null),I.flags|=2,M.return=p,I.return=p,M.sibling=I,p.child=M,(p.mode&1)!==0&&lc(p,f.child,null,w),p.child.memoizedState=Om(w),p.memoizedState=Lm,I);if((p.mode&1)===0)p=Im(f,p,w,null);else if(Fi(le))p=Im(f,p,w,Error(o(419)));else if(M=(w&f.childLanes)!==0,_i||M){if(M=$n,M!==null){switch(w&-w){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}M=(I&(M.suspendedLanes|w))!==0?0:I,M!==0&&M!==P.retryLane&&(P.retryLane=M,Yi(f,M,-1))}px(),p=Im(f,p,w,Error(o(421)))}else ar(le)?(p.flags|=128,p.child=f.child,p=JF.bind(null,f),W(le,p),p=null):(w=P.treeContext,Q&&(xi=Pe(le),yi=p,Sn=!0,Ts=null,hh=!1,w!==null&&(ji[$i++]=Ro,ji[$i++]=zo,ji[$i++]=Ll,Ro=w.id,zo=w.overflow,Ll=p)),p=X1(p,p.pendingProps.children),p.flags|=4096);return p}return I?(M=IE(f,p,M.children,M.fallback,w),I=p.child,P=f.child.memoizedState,I.memoizedState=P===null?Om(w):{baseLanes:P.baseLanes|w,cachePool:null},I.childLanes=f.childLanes&~w,p.memoizedState=Lm,M):(w=OE(f,p,M.children,w),p.memoizedState=null,w)}return I?(M=IE(f,p,M.children,M.fallback,w),I=p.child,P=f.child.memoizedState,I.memoizedState=P===null?Om(w):{baseLanes:P.baseLanes|w,cachePool:null},I.childLanes=f.childLanes&~w,p.memoizedState=Lm,M):(w=OE(f,p,M.children,w),p.memoizedState=null,w)}function X1(f,p){return p=Jm({mode:"visible",children:p},f.mode,0,null),p.return=f,f.child=p}function OE(f,p,w,M){var P=f.child;return f=P.sibling,w=Aa(P,{mode:"visible",children:w}),(p.mode&1)===0&&(w.lanes=M),w.return=p,w.sibling=null,f!==null&&(M=p.deletions,M===null?(p.deletions=[f],p.flags|=16):M.push(f)),p.child=w}function IE(f,p,w,M,P){var I=p.mode;f=f.child;var $=f.sibling,le={mode:"hidden",children:w};return(I&1)===0&&p.child!==f?(w=p.child,w.childLanes=0,w.pendingProps=le,p.deletions=null):(w=Aa(f,le),w.subtreeFlags=f.subtreeFlags&14680064),$!==null?M=Aa($,M):(M=Bl(M,I,P,null),M.flags|=2),M.return=p,w.return=p,w.sibling=M,p.child=w,M}function Im(f,p,w,M){return M!==null&&D1(M),lc(p,f.child,null,w),f=X1(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function DE(f,p,w){f.lanes|=p;var M=f.alternate;M!==null&&(M.lanes|=p),E1(f.return,p,w)}function Y1(f,p,w,M,P){var I=f.memoizedState;I===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:M,tail:w,tailMode:P}:(I.isBackwards=p,I.rendering=null,I.renderingStartTime=0,I.last=M,I.tail=w,I.tailMode=P)}function RE(f,p,w){var M=p.pendingProps,P=M.revealOrder,I=M.tail;if(Hr(f,p,M.children,w),M=Mn.current,(M&2)!==0)M=M&1|2,p.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&DE(f,w,p);else if(f.tag===19)DE(f,w,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}M&=1}if(Ut(Mn,M),(p.mode&1)===0)p.memoizedState=null;else switch(P){case"forwards":for(w=p.child,P=null;w!==null;)f=w.alternate,f!==null&&_m(f)===null&&(P=w),w=w.sibling;w=P,w===null?(P=p.child,p.child=null):(P=w.sibling,w.sibling=null),Y1(p,!1,P,w,I);break;case"backwards":for(w=null,P=p.child,p.child=null;P!==null;){if(f=P.alternate,f!==null&&_m(f)===null){p.child=P;break}f=P.sibling,P.sibling=w,w=P,P=f}Y1(p,!0,w,null,I);break;case"together":Y1(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function ko(f,p,w){if(f!==null&&(p.dependencies=f.dependencies),fc|=p.lanes,(w&p.childLanes)===0)return null;if(f!==null&&p.child!==f.child)throw Error(o(153));if(p.child!==null){for(f=p.child,w=Aa(f,f.pendingProps),p.child=w,w.return=p;f.sibling!==null;)f=f.sibling,w=w.sibling=Aa(f,f.pendingProps),w.return=p;w.sibling=null}return p.child}function FF(f,p,w){switch(p.tag){case 3:CE(p),ac();break;case 5:Z3(p);break;case 1:ti(p.type)&&sm(p);break;case 4:R1(p,p.stateNode.containerInfo);break;case 10:z3(p,p.type._context,p.memoizedProps.value);break;case 13:var M=p.memoizedState;if(M!==null)return M.dehydrated!==null?(Ut(Mn,Mn.current&1),p.flags|=128,null):(w&p.child.childLanes)!==0?LE(f,p,w):(Ut(Mn,Mn.current&1),f=ko(f,p,w),f!==null?f.sibling:null);Ut(Mn,Mn.current&1);break;case 19:if(M=(w&p.childLanes)!==0,(f.flags&128)!==0){if(M)return RE(f,p,w);p.flags|=128}var P=p.memoizedState;if(P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),Ut(Mn,Mn.current),M)break;return null;case 22:case 23:return p.lanes=0,EE(f,p,w)}return ko(f,p,w)}function UF(f,p){switch(L1(p),p.tag){case 1:return ti(p.type)&&im(),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return cc(),Et(lr),Et(Jt),k1(),f=p.flags,(f&65536)!==0&&(f&128)===0?(p.flags=f&-65537|128,p):null;case 5:return z1(p),null;case 13:if(Et(Mn),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(o(340));ac()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return Et(Mn),null;case 4:return cc(),null;case 10:return M1(p.type._context),null;case 22:case 23:return fx(),null;case 24:return null;default:return null}}var Dm=!1,Dl=!1,VF=typeof WeakSet=="function"?WeakSet:Set,$e=null;function Rm(f,p){var w=f.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(M){ii(f,p,M)}else w.current=null}function Z1(f,p,w){try{w()}catch(M){ii(f,p,M)}}var zE=!1;function HF(f,p){for(N(f.containerInfo),$e=p;$e!==null;)if(f=$e,p=f.child,(f.subtreeFlags&1028)!==0&&p!==null)p.return=f,$e=p;else for(;$e!==null;){f=$e;try{var w=f.alternate;if((f.flags&1024)!==0)switch(f.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var M=w.memoizedProps,P=w.memoizedState,I=f.stateNode,$=I.getSnapshotBeforeUpdate(f.elementType===f.type?M:Es(f.type,M),P);I.__reactInternalSnapshotBeforeUpdate=$}break;case 3:ye&&Ae(f.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(le){ii(f,f.return,le)}if(p=f.sibling,p!==null){p.return=f.return,$e=p;break}$e=f.return}return w=zE,zE=!1,w}function Rl(f,p,w){var M=p.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var P=M=M.next;do{if((P.tag&f)===f){var I=P.destroy;P.destroy=void 0,I!==void 0&&Z1(p,w,I)}P=P.next}while(P!==M)}}function Mh(f,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&f)===f){var M=w.create;w.destroy=M()}w=w.next}while(w!==p)}}function J1(f){var p=f.ref;if(p!==null){var w=f.stateNode;switch(f.tag){case 5:f=te(w);break;default:f=w}typeof p=="function"?p(f):p.current=f}}function NE(f,p,w){if(Qs&&typeof Qs.onCommitFiberUnmount=="function")try{Qs.onCommitFiberUnmount(um,p)}catch{}switch(p.tag){case 0:case 11:case 14:case 15:if(f=p.updateQueue,f!==null&&(f=f.lastEffect,f!==null)){var M=f=f.next;do{var P=M,I=P.destroy;P=P.tag,I!==void 0&&((P&2)!==0||(P&4)!==0)&&Z1(p,w,I),M=M.next}while(M!==f)}break;case 1:if(Rm(p,w),f=p.stateNode,typeof f.componentWillUnmount=="function")try{f.props=p.memoizedProps,f.state=p.memoizedState,f.componentWillUnmount()}catch($){ii(p,w,$)}break;case 5:Rm(p,w);break;case 4:ye?HE(f,p,w):ne&&ne&&(p=p.stateNode.containerInfo,w=Ze(p),Nt(p,w))}}function kE(f,p,w){for(var M=p;;)if(NE(f,M,w),M.child===null||ye&&M.tag===4){if(M===p)break;for(;M.sibling===null;){if(M.return===null||M.return===p)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else M.child.return=M,M=M.child}function BE(f){var p=f.alternate;p!==null&&(f.alternate=null,BE(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&Re(p)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function FE(f){return f.tag===5||f.tag===3||f.tag===4}function UE(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||FE(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function VE(f){if(ye){e:{for(var p=f.return;p!==null;){if(FE(p))break e;p=p.return}throw Error(o(160))}var w=p;switch(w.tag){case 5:p=w.stateNode,w.flags&32&&(Wt(p),w.flags&=-33),w=UE(f),K1(f,w,p);break;case 3:case 4:p=w.stateNode.containerInfo,w=UE(f),Q1(f,w,p);break;default:throw Error(o(161))}}}function Q1(f,p,w){var M=f.tag;if(M===5||M===6)f=f.stateNode,p?at(w,f,p):He(w,f);else if(M!==4&&(f=f.child,f!==null))for(Q1(f,p,w),f=f.sibling;f!==null;)Q1(f,p,w),f=f.sibling}function K1(f,p,w){var M=f.tag;if(M===5||M===6)f=f.stateNode,p?qe(w,f,p):ut(w,f);else if(M!==4&&(f=f.child,f!==null))for(K1(f,p,w),f=f.sibling;f!==null;)K1(f,p,w),f=f.sibling}function HE(f,p,w){for(var M=p,P=!1,I,$;;){if(!P){P=M.return;e:for(;;){if(P===null)throw Error(o(160));switch(I=P.stateNode,P.tag){case 5:$=!1;break e;case 3:I=I.containerInfo,$=!0;break e;case 4:I=I.containerInfo,$=!0;break e}P=P.return}P=!0}if(M.tag===5||M.tag===6)kE(f,M,w),$?Pt(I,M.stateNode):rt(I,M.stateNode);else if(M.tag===18)$?_n(I,M.stateNode):Ft(I,M.stateNode);else if(M.tag===4){if(M.child!==null){I=M.stateNode.containerInfo,$=!0,M.child.return=M,M=M.child;continue}}else if(NE(f,M,w),M.child!==null){M.child.return=M,M=M.child;continue}if(M===p)break;for(;M.sibling===null;){if(M.return===null||M.return===p)return;M=M.return,M.tag===4&&(P=!1)}M.sibling.return=M.return,M=M.sibling}}function ex(f,p){if(ye){switch(p.tag){case 0:case 11:case 14:case 15:Rl(3,p,p.return),Mh(3,p),Rl(5,p,p.return);return;case 1:return;case 5:var w=p.stateNode;if(w!=null){var M=p.memoizedProps;f=f!==null?f.memoizedProps:M;var P=p.type,I=p.updateQueue;p.updateQueue=null,I!==null&&Je(w,I,P,f,M,p)}return;case 6:if(p.stateNode===null)throw Error(o(162));w=p.memoizedProps,Ce(p.stateNode,f!==null?f.memoizedProps:w,w);return;case 3:Q&&f!==null&&f.memoizedState.isDehydrated&&Vt(p.stateNode.containerInfo);return;case 12:return;case 13:zm(p);return;case 19:zm(p);return;case 17:return}throw Error(o(163))}switch(p.tag){case 0:case 11:case 14:case 15:Rl(3,p,p.return),Mh(3,p),Rl(5,p,p.return);return;case 12:return;case 13:zm(p);return;case 19:zm(p);return;case 3:Q&&f!==null&&f.memoizedState.isDehydrated&&Vt(p.stateNode.containerInfo);break;case 22:case 23:return}e:if(ne){switch(p.tag){case 1:case 5:case 6:break e;case 3:case 4:p=p.stateNode,Nt(p.containerInfo,p.pendingChildren);break e}throw Error(o(163))}}function zm(f){var p=f.updateQueue;if(p!==null){f.updateQueue=null;var w=f.stateNode;w===null&&(w=f.stateNode=new VF),p.forEach(function(M){var P=QF.bind(null,f,M);w.has(M)||(w.add(M),M.then(P,P))})}}function GF(f,p){for($e=p;$e!==null;){p=$e;var w=p.deletions;if(w!==null)for(var M=0;M<w.length;M++){var P=w[M];try{var I=f;ye?HE(I,P,p):kE(I,P,p);var $=P.alternate;$!==null&&($.return=null),P.return=null}catch(st){ii(P,p,st)}}if(w=p.child,(p.subtreeFlags&12854)!==0&&w!==null)w.return=p,$e=w;else for(;$e!==null;){p=$e;try{var le=p.flags;if(le&32&&ye&&Wt(p.stateNode),le&512){var Ee=p.alternate;if(Ee!==null){var Fe=Ee.ref;Fe!==null&&(typeof Fe=="function"?Fe(null):Fe.current=null)}}if(le&8192)switch(p.tag){case 13:if(p.memoizedState!==null){var Ke=p.alternate;(Ke===null||Ke.memoizedState===null)&&(ax=ur())}break;case 22:var _t=p.memoizedState!==null,ft=p.alternate,ln=ft!==null&&ft.memoizedState!==null;if(w=p,ye){e:if(M=w,P=_t,I=null,ye)for(var ot=M;;){if(ot.tag===5){if(I===null){I=ot;var Lr=ot.stateNode;P?pn(Lr):be(ot.stateNode,ot.memoizedProps)}}else if(ot.tag===6){if(I===null){var Ji=ot.stateNode;P?ae(Ji):Me(Ji,ot.memoizedProps)}}else if((ot.tag!==22&&ot.tag!==23||ot.memoizedState===null||ot===M)&&ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===M)break;for(;ot.sibling===null;){if(ot.return===null||ot.return===M)break e;I===ot&&(I=null),ot=ot.return}I===ot&&(I=null),ot.sibling.return=ot.return,ot=ot.sibling}}if(_t&&!ln&&(w.mode&1)!==0){$e=w;for(var xe=w.child;xe!==null;){for(w=$e=xe;$e!==null;){M=$e;var ce=M.child;switch(M.tag){case 0:case 11:case 14:case 15:Rl(4,M,M.return);break;case 1:Rm(M,M.return);var Se=M.stateNode;if(typeof Se.componentWillUnmount=="function"){var Xe=M.return;try{Se.props=M.memoizedProps,Se.state=M.memoizedState,Se.componentWillUnmount()}catch(st){ii(M,Xe,st)}}break;case 5:Rm(M,M.return);break;case 22:if(M.memoizedState!==null){jE(w);continue}}ce!==null?(ce.return=M,$e=ce):jE(w)}xe=xe.sibling}}}switch(le&4102){case 2:VE(p),p.flags&=-3;break;case 6:VE(p),p.flags&=-3,ex(p.alternate,p);break;case 4096:p.flags&=-4097;break;case 4100:p.flags&=-4097,ex(p.alternate,p);break;case 4:ex(p.alternate,p)}}catch(st){ii(p,p.return,st)}if(w=p.sibling,w!==null){w.return=p.return,$e=w;break}$e=p.return}}}function WF(f,p,w){$e=f,GE(f)}function GE(f,p,w){for(var M=(f.mode&1)!==0;$e!==null;){var P=$e,I=P.child;if(P.tag===22&&M){var $=P.memoizedState!==null||Dm;if(!$){var le=P.alternate,Ee=le!==null&&le.memoizedState!==null||Dl;le=Dm;var Fe=Dl;if(Dm=$,(Dl=Ee)&&!Fe)for($e=P;$e!==null;)$=$e,Ee=$.child,$.tag===22&&$.memoizedState!==null?$E(P):Ee!==null?(Ee.return=$,$e=Ee):$E(P);for(;I!==null;)$e=I,GE(I),I=I.sibling;$e=P,Dm=le,Dl=Fe}WE(f)}else(P.subtreeFlags&8772)!==0&&I!==null?(I.return=P,$e=I):WE(f)}}function WE(f){for(;$e!==null;){var p=$e;if((p.flags&8772)!==0){var w=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:Dl||Mh(5,p);break;case 1:var M=p.stateNode;if(p.flags&4&&!Dl)if(w===null)M.componentDidMount();else{var P=p.elementType===p.type?w.memoizedProps:Es(p.type,w.memoizedProps);M.componentDidUpdate(P,w.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var I=p.updateQueue;I!==null&&B3(p,I,M);break;case 3:var $=p.updateQueue;if($!==null){if(w=null,p.child!==null)switch(p.child.tag){case 5:w=te(p.child.stateNode);break;case 1:w=p.child.stateNode}B3(p,$,w)}break;case 5:var le=p.stateNode;w===null&&p.flags&4&&Ge(le,p.type,p.memoizedProps,p);break;case 6:break;case 4:break;case 12:break;case 13:if(Q&&p.memoizedState===null){var Ee=p.alternate;if(Ee!==null){var Fe=Ee.memoizedState;if(Fe!==null){var Ke=Fe.dehydrated;Ke!==null&&It(Ke)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Dl||p.flags&512&&J1(p)}catch(_t){ii(p,p.return,_t)}}if(p===f){$e=null;break}if(w=p.sibling,w!==null){w.return=p.return,$e=w;break}$e=p.return}}function jE(f){for(;$e!==null;){var p=$e;if(p===f){$e=null;break}var w=p.sibling;if(w!==null){w.return=p.return,$e=w;break}$e=p.return}}function $E(f){for(;$e!==null;){var p=$e;try{switch(p.tag){case 0:case 11:case 15:var w=p.return;try{Mh(4,p)}catch(Ee){ii(p,w,Ee)}break;case 1:var M=p.stateNode;if(typeof M.componentDidMount=="function"){var P=p.return;try{M.componentDidMount()}catch(Ee){ii(p,P,Ee)}}var I=p.return;try{J1(p)}catch(Ee){ii(p,I,Ee)}break;case 5:var $=p.return;try{J1(p)}catch(Ee){ii(p,$,Ee)}}}catch(Ee){ii(p,p.return,Ee)}if(p===f){$e=null;break}var le=p.sibling;if(le!==null){le.return=p.return,$e=le;break}$e=p.return}}var Nm=0,km=1,Bm=2,Fm=3,Um=4;if(typeof Symbol=="function"&&Symbol.for){var Eh=Symbol.for;Nm=Eh("selector.component"),km=Eh("selector.has_pseudo_class"),Bm=Eh("selector.role"),Fm=Eh("selector.test_id"),Um=Eh("selector.text")}function tx(f){var p=de(f);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(o(364));return p}if(f=je(f),f===null)throw Error(o(362));return f.stateNode.current}function nx(f,p){switch(p.$$typeof){case Nm:if(f.type===p.value)return!0;break;case km:e:{p=p.value,f=[f,0];for(var w=0;w<f.length;){var M=f[w++],P=f[w++],I=p[P];if(M.tag!==5||!_e(M)){for(;I!=null&&nx(M,I);)P++,I=p[P];if(P===p.length){p=!0;break e}else for(M=M.child;M!==null;)f.push(M,P),M=M.sibling}}p=!1}return p;case Bm:if(f.tag===5&&Ie(f.stateNode,p.value))return!0;break;case Um:if((f.tag===5||f.tag===6)&&(f=F(f),f!==null&&0<=f.indexOf(p.value)))return!0;break;case Fm:if(f.tag===5&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function rx(f){switch(f.$$typeof){case Nm:return"<"+(C(f.value)||"Unknown")+">";case km:return":has("+(rx(f)||"")+")";case Bm:return'[role="'+f.value+'"]';case Um:return'"'+f.value+'"';case Fm:return'[data-testname="'+f.value+'"]';default:throw Error(o(365))}}function qE(f,p){var w=[];f=[f,0];for(var M=0;M<f.length;){var P=f[M++],I=f[M++],$=p[I];if(P.tag!==5||!_e(P)){for(;$!=null&&nx(P,$);)I++,$=p[I];if(I===p.length)w.push(P);else for(P=P.child;P!==null;)f.push(P,I),P=P.sibling}}return w}function ix(f,p){if(!gt)throw Error(o(363));f=tx(f),f=qE(f,p),p=[],f=Array.from(f);for(var w=0;w<f.length;){var M=f[w++];if(M.tag===5)_e(M)||p.push(M.stateNode);else for(M=M.child;M!==null;)f.push(M),M=M.sibling}return p}var jF=Math.ceil,Vm=a.ReactCurrentDispatcher,sx=a.ReactCurrentOwner,Un=a.ReactCurrentBatchConfig,Lt=0,$n=null,qn=null,yr=0,wi=0,hc=Hi(0),Kn=0,Th=null,fc=0,Hm=0,ox=0,Ah=null,ni=null,ax=0,lx=1/0;function pc(){lx=ur()+500}var Gm=!1,ux=null,ba=null,Wm=!1,Ma=null,jm=0,Ch=0,cx=null,$m=-1,qm=0;function Gr(){return(Lt&6)!==0?ur():$m!==-1?$m:$m=ur()}function Ea(f){return(f.mode&1)===0?1:(Lt&2)!==0&&yr!==0?yr&-yr:AF.transition!==null?(qm===0&&(f=om,om<<=1,(om&4194240)===0&&(om=64),qm=f),qm):(f=jt,f!==0?f:ve())}function Yi(f,p,w){if(50<Ch)throw Ch=0,cx=null,Error(o(185));var M=Xm(f,p);return M===null?null:(dh(M,p,w),((Lt&2)===0||M!==$n)&&(M===$n&&((Lt&2)===0&&(Hm|=p),Kn===4&&Ta(M,yr)),ri(M,w),p===1&&Lt===0&&(f.mode&1)===0&&(pc(),cm&&eo())),M)}function Xm(f,p){f.lanes|=p;var w=f.alternate;for(w!==null&&(w.lanes|=p),w=f,f=f.return;f!==null;)f.childLanes|=p,w=f.alternate,w!==null&&(w.childLanes|=p),w=f,f=f.return;return w.tag===3?w.stateNode:null}function ri(f,p){var w=f.callbackNode;yF(f,p);var M=lm(f,f===$n?yr:0);if(M===0)w!==null&&D3(w),f.callbackNode=null,f.callbackPriority=0;else if(p=M&-M,f.callbackPriority!==p){if(w!=null&&D3(w),p===1)f.tag===0?TF(YE.bind(null,f)):R3(YE.bind(null,f)),Le?De(function(){Lt===0&&eo()}):y1(x1,eo),w=null;else{switch(I3(M)){case 1:w=x1;break;case 4:w=SF;break;case 16:w=_1;break;case 536870912:w=bF;break;default:w=_1}w=iT(w,XE.bind(null,f))}f.callbackPriority=p,f.callbackNode=w}}function XE(f,p){if($m=-1,qm=0,(Lt&6)!==0)throw Error(o(327));var w=f.callbackNode;if(kl()&&f.callbackNode!==w)return null;var M=lm(f,f===$n?yr:0);if(M===0)return null;if((M&30)!==0||(M&f.expiredLanes)!==0||p)p=Ym(f,M);else{p=M;var P=Lt;Lt|=2;var I=QE();($n!==f||yr!==p)&&(pc(),zl(f,p));do try{XF();break}catch(le){JE(f,le)}while(1);b1(),Vm.current=I,Lt=P,qn!==null?p=0:($n=null,yr=0,p=Kn)}if(p!==0){if(p===2&&(P=m1(f),P!==0&&(M=P,p=dx(f,P))),p===1)throw w=Th,zl(f,0),Ta(f,M),ri(f,ur()),w;if(p===6)Ta(f,M);else{if(P=f.current.alternate,(M&30)===0&&!$F(P)&&(p=Ym(f,M),p===2&&(I=m1(f),I!==0&&(M=I,p=dx(f,I))),p===1))throw w=Th,zl(f,0),Ta(f,M),ri(f,ur()),w;switch(f.finishedWork=P,f.finishedLanes=M,p){case 0:case 1:throw Error(o(345));case 2:Nl(f,ni);break;case 3:if(Ta(f,M),(M&130023424)===M&&(p=ax+500-ur(),10<p)){if(lm(f,0)!==0)break;if(P=f.suspendedLanes,(P&M)!==M){Gr(),f.pingedLanes|=f.suspendedLanes&P;break}f.timeoutHandle=re(Nl.bind(null,f,ni),p);break}Nl(f,ni);break;case 4:if(Ta(f,M),(M&4194240)===M)break;for(p=f.eventTimes,P=-1;0<M;){var $=31-Ms(M);I=1<<$,$=p[$],$>P&&(P=$),M&=~I}if(M=P,M=ur()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*jF(M/1960))-M,10<M){f.timeoutHandle=re(Nl.bind(null,f,ni),M);break}Nl(f,ni);break;case 5:Nl(f,ni);break;default:throw Error(o(329))}}}return ri(f,ur()),f.callbackNode===w?XE.bind(null,f):null}function dx(f,p){var w=Ah;return f.current.memoizedState.isDehydrated&&(zl(f,p).flags|=256),f=Ym(f,p),f!==2&&(p=ni,ni=w,p!==null&&hx(p)),f}function hx(f){ni===null?ni=f:ni.push.apply(ni,f)}function $F(f){for(var p=f;;){if(p.flags&16384){var w=p.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var M=0;M<w.length;M++){var P=w[M],I=P.getSnapshot;P=P.value;try{if(!Ks(I(),P))return!1}catch{return!1}}}if(w=p.child,p.subtreeFlags&16384&&w!==null)w.return=p,p=w;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Ta(f,p){for(p&=~ox,p&=~Hm,f.suspendedLanes|=p,f.pingedLanes&=~p,f=f.expirationTimes;0<p;){var w=31-Ms(p),M=1<<w;f[w]=-1,p&=~M}}function YE(f){if((Lt&6)!==0)throw Error(o(327));kl();var p=lm(f,0);if((p&1)===0)return ri(f,ur()),null;var w=Ym(f,p);if(f.tag!==0&&w===2){var M=m1(f);M!==0&&(p=M,w=dx(f,M))}if(w===1)throw w=Th,zl(f,0),Ta(f,p),ri(f,ur()),w;if(w===6)throw Error(o(345));return f.finishedWork=f.current.alternate,f.finishedLanes=p,Nl(f,ni),ri(f,ur()),null}function ZE(f){Ma!==null&&Ma.tag===0&&(Lt&6)===0&&kl();var p=Lt;Lt|=1;var w=Un.transition,M=jt;try{if(Un.transition=null,jt=1,f)return f()}finally{jt=M,Un.transition=w,Lt=p,(Lt&6)===0&&eo()}}function fx(){wi=hc.current,Et(hc)}function zl(f,p){f.finishedWork=null,f.finishedLanes=0;var w=f.timeoutHandle;if(w!==K&&(f.timeoutHandle=K,ie(w)),qn!==null)for(w=qn.return;w!==null;){var M=w;switch(L1(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&im();break;case 3:cc(),Et(lr),Et(Jt),k1();break;case 5:z1(M);break;case 4:cc();break;case 13:Et(Mn);break;case 19:Et(Mn);break;case 10:M1(M.type._context);break;case 22:case 23:fx()}w=w.return}if($n=f,qn=f=Aa(f.current,null),yr=wi=p,Kn=0,Th=null,ox=Hm=fc=0,ni=Ah=null,to!==null){for(p=0;p<to.length;p++)if(w=to[p],M=w.interleaved,M!==null){w.interleaved=null;var P=M.next,I=w.pending;if(I!==null){var $=I.next;I.next=P,M.next=$}w.pending=M}to=null}return f}function JE(f,p){do{var w=qn;try{if(b1(),wm.current=Am,Sm){for(var M=Ln.memoizedState;M!==null;){var P=M.queue;P!==null&&(P.pending=null),M=M.next}Sm=!1}if(dc=0,cr=Ar=Ln=null,vh=!1,yh=0,sx.current=null,w===null||w.return===null){Kn=1,Th=p,qn=null;break}e:{var I=f,$=w.return,le=w,Ee=p;if(p=yr,le.flags|=32768,Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var Fe=Ee,Ke=le,_t=Ke.tag;if((Ke.mode&1)===0&&(_t===0||_t===11||_t===15)){var ft=Ke.alternate;ft?(Ke.updateQueue=ft.updateQueue,Ke.memoizedState=ft.memoizedState,Ke.lanes=ft.lanes):(Ke.updateQueue=null,Ke.memoizedState=null)}var ln=yE($);if(ln!==null){ln.flags&=-257,xE(ln,$,le,I,p),ln.mode&1&&vE(I,Fe,p),p=ln,Ee=Fe;var ot=p.updateQueue;if(ot===null){var Lr=new Set;Lr.add(Ee),p.updateQueue=Lr}else ot.add(Ee);break e}else{if((p&1)===0){vE(I,Fe,p),px();break e}Ee=Error(o(426))}}else if(Sn&&le.mode&1){var Ji=yE($);if(Ji!==null){(Ji.flags&65536)===0&&(Ji.flags|=256),xE(Ji,$,le,I,p),D1(Ee);break e}}I=Ee,Kn!==4&&(Kn=2),Ah===null?Ah=[I]:Ah.push(I),Ee=W1(Ee,le),le=$;do{switch(le.tag){case 3:le.flags|=65536,p&=-p,le.lanes|=p;var xe=mE(le,Ee,p);k3(le,xe);break e;case 1:I=Ee;var ce=le.type,Se=le.stateNode;if((le.flags&128)===0&&(typeof ce.getDerivedStateFromError=="function"||Se!==null&&typeof Se.componentDidCatch=="function"&&(ba===null||!ba.has(Se)))){le.flags|=65536,p&=-p,le.lanes|=p;var Xe=gE(le,I,p);k3(le,Xe);break e}}le=le.return}while(le!==null)}eT(w)}catch(st){p=st,qn===w&&w!==null&&(qn=w=w.return);continue}break}while(1)}function QE(){var f=Vm.current;return Vm.current=Am,f===null?Am:f}function px(){(Kn===0||Kn===3||Kn===2)&&(Kn=4),$n===null||(fc&268435455)===0&&(Hm&268435455)===0||Ta($n,yr)}function Ym(f,p){var w=Lt;Lt|=2;var M=QE();$n===f&&yr===p||zl(f,p);do try{qF();break}catch(P){JE(f,P)}while(1);if(b1(),Lt=w,Vm.current=M,qn!==null)throw Error(o(261));return $n=null,yr=0,Kn}function qF(){for(;qn!==null;)KE(qn)}function XF(){for(;qn!==null&&!_F();)KE(qn)}function KE(f){var p=rT(f.alternate,f,wi);f.memoizedProps=f.pendingProps,p===null?eT(f):qn=p,sx.current=null}function eT(f){var p=f;do{var w=p.alternate;if(f=p.return,(p.flags&32768)===0){if(w=kF(w,p,wi),w!==null){qn=w;return}}else{if(w=UF(w,p),w!==null){w.flags&=32767,qn=w;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{Kn=6,qn=null;return}}if(p=p.sibling,p!==null){qn=p;return}qn=p=f}while(p!==null);Kn===0&&(Kn=5)}function Nl(f,p){var w=jt,M=Un.transition;try{Un.transition=null,jt=1,YF(f,p,w)}finally{Un.transition=M,jt=w}return null}function YF(f,p,w){do kl();while(Ma!==null);if((Lt&6)!==0)throw Error(o(327));var M=f.finishedWork,P=f.finishedLanes;if(M===null)return null;if(f.finishedWork=null,f.finishedLanes=0,M===f.current)throw Error(o(177));f.callbackNode=null,f.callbackPriority=0;var I=M.lanes|M.childLanes;if(xF(f,I),f===$n&&(qn=$n=null,yr=0),(M.subtreeFlags&2064)===0&&(M.flags&2064)===0||Wm||(Wm=!0,iT(_1,function(){return kl(),null})),I=(M.flags&15990)!==0,(M.subtreeFlags&15990)!==0||I){I=Un.transition,Un.transition=null;var $=jt;jt=1;var le=Lt;Lt|=4,sx.current=null,HF(f,M),GF(f,M),z(f.containerInfo),f.current=M,WF(M),wF(),Lt=le,jt=$,Un.transition=I}else f.current=M;if(Wm&&(Wm=!1,Ma=f,jm=P),I=f.pendingLanes,I===0&&(ba=null),MF(M.stateNode),ri(f,ur()),p!==null)for(w=f.onRecoverableError,M=0;M<p.length;M++)w(p[M]);if(Gm)throw Gm=!1,f=ux,ux=null,f;return(jm&1)!==0&&f.tag!==0&&kl(),I=f.pendingLanes,(I&1)!==0?f===cx?Ch++:(Ch=0,cx=f):Ch=0,eo(),null}function kl(){if(Ma!==null){var f=I3(jm),p=Un.transition,w=jt;try{if(Un.transition=null,jt=16>f?16:f,Ma===null)var M=!1;else{if(f=Ma,Ma=null,jm=0,(Lt&6)!==0)throw Error(o(331));var P=Lt;for(Lt|=4,$e=f.current;$e!==null;){var I=$e,$=I.child;if(($e.flags&16)!==0){var le=I.deletions;if(le!==null){for(var Ee=0;Ee<le.length;Ee++){var Fe=le[Ee];for($e=Fe;$e!==null;){var Ke=$e;switch(Ke.tag){case 0:case 11:case 15:Rl(8,Ke,I)}var _t=Ke.child;if(_t!==null)_t.return=Ke,$e=_t;else for(;$e!==null;){Ke=$e;var ft=Ke.sibling,ln=Ke.return;if(BE(Ke),Ke===Fe){$e=null;break}if(ft!==null){ft.return=ln,$e=ft;break}$e=ln}}}var ot=I.alternate;if(ot!==null){var Lr=ot.child;if(Lr!==null){ot.child=null;do{var Ji=Lr.sibling;Lr.sibling=null,Lr=Ji}while(Lr!==null)}}$e=I}}if((I.subtreeFlags&2064)!==0&&$!==null)$.return=I,$e=$;else e:for(;$e!==null;){if(I=$e,(I.flags&2048)!==0)switch(I.tag){case 0:case 11:case 15:Rl(9,I,I.return)}var xe=I.sibling;if(xe!==null){xe.return=I.return,$e=xe;break e}$e=I.return}}var ce=f.current;for($e=ce;$e!==null;){$=$e;var Se=$.child;if(($.subtreeFlags&2064)!==0&&Se!==null)Se.return=$,$e=Se;else e:for($=ce;$e!==null;){if(le=$e,(le.flags&2048)!==0)try{switch(le.tag){case 0:case 11:case 15:Mh(9,le)}}catch(st){ii(le,le.return,st)}if(le===$){$e=null;break e}var Xe=le.sibling;if(Xe!==null){Xe.return=le.return,$e=Xe;break e}$e=le.return}}if(Lt=P,eo(),Qs&&typeof Qs.onPostCommitFiberRoot=="function")try{Qs.onPostCommitFiberRoot(um,f)}catch{}M=!0}return M}finally{jt=w,Un.transition=p}}return!1}function tT(f,p,w){p=W1(w,p),p=mE(f,p,1),Sa(f,p),p=Gr(),f=Xm(f,1),f!==null&&(dh(f,1,p),ri(f,p))}function ii(f,p,w){if(f.tag===3)tT(f,f,w);else for(;p!==null;){if(p.tag===3){tT(p,f,w);break}else if(p.tag===1){var M=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(ba===null||!ba.has(M))){f=W1(w,f),f=gE(p,f,1),Sa(p,f),f=Gr(),p=Xm(p,1),p!==null&&(dh(p,1,f),ri(p,f));break}}p=p.return}}function ZF(f,p,w){var M=f.pingCache;M!==null&&M.delete(p),p=Gr(),f.pingedLanes|=f.suspendedLanes&w,$n===f&&(yr&w)===w&&(Kn===4||Kn===3&&(yr&130023424)===yr&&500>ur()-ax?zl(f,0):ox|=w),ri(f,p)}function nT(f,p){p===0&&((f.mode&1)===0?p=1:(p=am,am<<=1,(am&130023424)===0&&(am=4194304)));var w=Gr();f=Xm(f,p),f!==null&&(dh(f,p,w),ri(f,w))}function JF(f){var p=f.memoizedState,w=0;p!==null&&(w=p.retryLane),nT(f,w)}function QF(f,p){var w=0;switch(f.tag){case 13:var M=f.stateNode,P=f.memoizedState;P!==null&&(w=P.retryLane);break;case 19:M=f.stateNode;break;default:throw Error(o(314))}M!==null&&M.delete(p),nT(f,w)}var rT;rT=function(f,p,w){if(f!==null)if(f.memoizedProps!==p.pendingProps||lr.current)_i=!0;else{if((f.lanes&w)===0&&(p.flags&128)===0)return _i=!1,FF(f,p,w);_i=(f.flags&131072)!==0}else _i=!1,Sn&&(p.flags&1048576)!==0&&G3(p,ym,p.index);switch(p.lanes=0,p.tag){case 2:var M=p.type;f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2),f=p.pendingProps;var P=Oo(p,Jt.current);ic(p,w),P=F1(null,p,M,f,P,w);var I=U1();return p.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,ti(M)?(I=!0,sm(p)):I=!1,p.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,T1(p),P.updater=gm,p.stateNode=P,P._reactInternals=p,C1(p,M,f,w),p=q1(null,p,M,!0,I,w)):(p.tag=0,Sn&&I&&P1(p),Hr(null,p,P,w),p=p.child),p;case 16:M=p.elementType;e:{switch(f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2),f=p.pendingProps,P=M._init,M=P(M._payload),p.type=M,P=p.tag=eU(M),f=Es(M,f),P){case 0:p=$1(null,p,M,f,w);break e;case 1:p=AE(null,p,M,f,w);break e;case 11:p=SE(null,p,M,f,w);break e;case 14:p=bE(null,p,M,Es(M.type,f),w);break e}throw Error(o(306,M,""))}return p;case 0:return M=p.type,P=p.pendingProps,P=p.elementType===M?P:Es(M,P),$1(f,p,M,P,w);case 1:return M=p.type,P=p.pendingProps,P=p.elementType===M?P:Es(M,P),AE(f,p,M,P,w);case 3:e:{if(CE(p),f===null)throw Error(o(387));M=p.pendingProps,I=p.memoizedState,P=I.element,N3(f,p),mm(p,M,null,w);var $=p.memoizedState;if(M=$.element,Q&&I.isDehydrated)if(I={element:M,isDehydrated:!1,cache:$.cache,transitions:$.transitions},p.updateQueue.baseState=I,p.memoizedState=I,p.flags&256){P=Error(o(423)),p=PE(f,p,M,w,P);break e}else if(M!==P){P=Error(o(424)),p=PE(f,p,M,w,P);break e}else for(Q&&(xi=me(p.stateNode.containerInfo),yi=p,Sn=!0,Ts=null,hh=!1),w=Y3(p,null,M,w),p.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(ac(),M===P){p=ko(f,p,w);break e}Hr(f,p,M,w)}p=p.child}return p;case 5:return Z3(p),f===null&&I1(p),M=p.type,P=p.pendingProps,I=f!==null?f.memoizedProps:null,$=P.children,ee(M,P)?$=null:I!==null&&ee(M,I)&&(p.flags|=32),TE(f,p),Hr(f,p,$,w),p.child;case 6:return f===null&&I1(p),null;case 13:return LE(f,p,w);case 4:return R1(p,p.stateNode.containerInfo),M=p.pendingProps,f===null?p.child=lc(p,null,M,w):Hr(f,p,M,w),p.child;case 11:return M=p.type,P=p.pendingProps,P=p.elementType===M?P:Es(M,P),SE(f,p,M,P,w);case 7:return Hr(f,p,p.pendingProps,w),p.child;case 8:return Hr(f,p,p.pendingProps.children,w),p.child;case 12:return Hr(f,p,p.pendingProps.children,w),p.child;case 10:e:{if(M=p.type._context,P=p.pendingProps,I=p.memoizedProps,$=P.value,z3(p,M,$),I!==null)if(Ks(I.value,$)){if(I.children===P.children&&!lr.current){p=ko(f,p,w);break e}}else for(I=p.child,I!==null&&(I.return=p);I!==null;){var le=I.dependencies;if(le!==null){$=I.child;for(var Ee=le.firstContext;Ee!==null;){if(Ee.context===M){if(I.tag===1){Ee=Do(-1,w&-w),Ee.tag=2;var Fe=I.updateQueue;if(Fe!==null){Fe=Fe.shared;var Ke=Fe.pending;Ke===null?Ee.next=Ee:(Ee.next=Ke.next,Ke.next=Ee),Fe.pending=Ee}}I.lanes|=w,Ee=I.alternate,Ee!==null&&(Ee.lanes|=w),E1(I.return,w,p),le.lanes|=w;break}Ee=Ee.next}}else if(I.tag===10)$=I.type===p.type?null:I.child;else if(I.tag===18){if($=I.return,$===null)throw Error(o(341));$.lanes|=w,le=$.alternate,le!==null&&(le.lanes|=w),E1($,w,p),$=I.sibling}else $=I.child;if($!==null)$.return=I;else for($=I;$!==null;){if($===p){$=null;break}if(I=$.sibling,I!==null){I.return=$.return,$=I;break}$=$.return}I=$}Hr(f,p,P.children,w),p=p.child}return p;case 9:return P=p.type,M=p.pendingProps.children,ic(p,w),P=Wi(P),M=M(P),p.flags|=1,Hr(f,p,M,w),p.child;case 14:return M=p.type,P=Es(M,p.pendingProps),P=Es(M.type,P),bE(f,p,M,P,w);case 15:return ME(f,p,p.type,p.pendingProps,w);case 17:return M=p.type,P=p.pendingProps,P=p.elementType===M?P:Es(M,P),f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2),p.tag=1,ti(M)?(f=!0,sm(p)):f=!1,ic(p,w),V3(p,M,P),C1(p,M,P,w),q1(null,p,M,!0,f,w);case 19:return RE(f,p,w);case 22:return EE(f,p,w)}throw Error(o(156,p.tag))};function iT(f,p){return y1(f,p)}function KF(f,p,w,M){this.tag=f,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zi(f,p,w,M){return new KF(f,p,w,M)}function mx(f){return f=f.prototype,!(!f||!f.isReactComponent)}function eU(f){if(typeof f=="function")return mx(f)?1:0;if(f!=null){if(f=f.$$typeof,f===x)return 11;if(f===_)return 14}return 2}function Aa(f,p){var w=f.alternate;return w===null?(w=Zi(f.tag,p,f.key,f.mode),w.elementType=f.elementType,w.type=f.type,w.stateNode=f.stateNode,w.alternate=f,f.alternate=w):(w.pendingProps=p,w.type=f.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=f.flags&14680064,w.childLanes=f.childLanes,w.lanes=f.lanes,w.child=f.child,w.memoizedProps=f.memoizedProps,w.memoizedState=f.memoizedState,w.updateQueue=f.updateQueue,p=f.dependencies,w.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},w.sibling=f.sibling,w.index=f.index,w.ref=f.ref,w}function Zm(f,p,w,M,P,I){var $=2;if(M=f,typeof f=="function")mx(f)&&($=1);else if(typeof f=="string")$=5;else e:switch(f){case d:return Bl(w.children,P,I,p);case u:$=8,P|=8;break;case h:return f=Zi(12,w,p,P|2),f.elementType=h,f.lanes=I,f;case y:return f=Zi(13,w,p,P),f.elementType=y,f.lanes=I,f;case v:return f=Zi(19,w,p,P),f.elementType=v,f.lanes=I,f;case b:return Jm(w,P,I,p);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case m:$=10;break e;case g:$=9;break e;case x:$=11;break e;case _:$=14;break e;case S:$=16,M=null;break e}throw Error(o(130,f==null?f:typeof f,""))}return p=Zi($,w,p,P),p.elementType=f,p.type=M,p.lanes=I,p}function Bl(f,p,w,M){return f=Zi(7,f,M,p),f.lanes=w,f}function Jm(f,p,w,M){return f=Zi(22,f,M,p),f.elementType=b,f.lanes=w,f.stateNode={},f}function gx(f,p,w){return f=Zi(6,f,null,p),f.lanes=w,f}function vx(f,p,w){return p=Zi(4,f.children!==null?f.children:[],f.key,p),p.lanes=w,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}function tU(f,p,w,M,P){this.tag=p,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=K,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=g1(0),this.expirationTimes=g1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=g1(0),this.identifierPrefix=M,this.onRecoverableError=P,Q&&(this.mutableSourceEagerHydrationData=null)}function sT(f,p,w,M,P,I,$,le,Ee){return f=new tU(f,p,w,le,Ee),p===1?(p=1,I===!0&&(p|=8)):p=0,I=Zi(3,null,null,p),f.current=I,I.stateNode=f,I.memoizedState={element:M,isDehydrated:w,cache:null,transitions:null},T1(I),f}function oT(f){if(!f)return Gi;f=f._reactInternals;e:{if(O(f)!==f||f.tag!==1)throw Error(o(170));var p=f;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(ti(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(o(171))}if(f.tag===1){var w=f.type;if(ti(w))return L3(f,w,p)}return p}function aT(f){var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(o(188)):(f=Object.keys(f).join(","),Error(o(268,f)));return f=B(p),f===null?null:f.stateNode}function lT(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var w=f.retryLane;f.retryLane=w!==0&&w<p?w:p}}function yx(f,p){lT(f,p),(f=f.alternate)&&lT(f,p)}function nU(f){return f=B(f),f===null?null:f.stateNode}function rU(){return null}return n.attemptContinuousHydration=function(f){if(f.tag===13){var p=Gr();Yi(f,134217728,p),yx(f,134217728)}},n.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var p=Gr(),w=Ea(f);Yi(f,w,p),yx(f,w)}},n.attemptSynchronousHydration=function(f){switch(f.tag){case 3:var p=f.stateNode;if(p.current.memoizedState.isDehydrated){var w=ch(p.pendingLanes);w!==0&&(v1(p,w|1),ri(p,ur()),(Lt&6)===0&&(pc(),eo()))}break;case 13:var M=Gr();ZE(function(){return Yi(f,1,M)}),yx(f,1)}},n.batchedUpdates=function(f,p){var w=Lt;Lt|=1;try{return f(p)}finally{Lt=w,Lt===0&&(pc(),cm&&eo())}},n.createComponentSelector=function(f){return{$$typeof:Nm,value:f}},n.createContainer=function(f,p,w,M,P,I,$){return sT(f,p,!1,null,w,M,P,I,$)},n.createHasPseudoClassSelector=function(f){return{$$typeof:km,value:f}},n.createHydrationContainer=function(f,p,w,M,P,I,$,le,Ee){return f=sT(w,M,!0,f,P,I,$,le,Ee),f.context=oT(null),w=f.current,M=Gr(),P=Ea(w),I=Do(M,P),I.callback=p!=null?p:null,Sa(w,I),f.current.lanes=P,dh(f,P,M),ri(f,M),f},n.createPortal=function(f,p,w){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:M==null?null:""+M,children:f,containerInfo:p,implementation:w}},n.createRoleSelector=function(f){return{$$typeof:Bm,value:f}},n.createTestNameSelector=function(f){return{$$typeof:Fm,value:f}},n.createTextSelector=function(f){return{$$typeof:Um,value:f}},n.deferredUpdates=function(f){var p=jt,w=Un.transition;try{return Un.transition=null,jt=16,f()}finally{jt=p,Un.transition=w}},n.discreteUpdates=function(f,p,w,M,P){var I=jt,$=Un.transition;try{return Un.transition=null,jt=1,f(p,w,M,P)}finally{jt=I,Un.transition=$,Lt===0&&pc()}},n.findAllNodes=ix,n.findBoundingRects=function(f,p){if(!gt)throw Error(o(363));p=ix(f,p),f=[];for(var w=0;w<p.length;w++)f.push(j(p[w]));for(p=f.length-1;0<p;p--){w=f[p];for(var M=w.x,P=M+w.width,I=w.y,$=I+w.height,le=p-1;0<=le;le--)if(p!==le){var Ee=f[le],Fe=Ee.x,Ke=Fe+Ee.width,_t=Ee.y,ft=_t+Ee.height;if(M>=Fe&&I>=_t&&P<=Ke&&$<=ft){f.splice(p,1);break}else if(M!==Fe||w.width!==Ee.width||ft<I||_t>$){if(!(I!==_t||w.height!==Ee.height||Ke<M||Fe>P)){Fe>M&&(Ee.width+=Fe-M,Ee.x=M),Ke<P&&(Ee.width=P-Fe),f.splice(p,1);break}}else{_t>I&&(Ee.height+=_t-I,Ee.y=I),ft<$&&(Ee.height=$-_t),f.splice(p,1);break}}}return f},n.findHostInstance=aT,n.findHostInstanceWithNoPortals=function(f){return f=k(f),f=f!==null?H(f):null,f===null?null:f.stateNode},n.findHostInstanceWithWarning=function(f){return aT(f)},n.flushControlled=function(f){var p=Lt;Lt|=1;var w=Un.transition,M=jt;try{Un.transition=null,jt=1,f()}finally{jt=M,Un.transition=w,Lt=p,Lt===0&&(pc(),eo())}},n.flushPassiveEffects=kl,n.flushSync=ZE,n.focusWithin=function(f,p){if(!gt)throw Error(o(363));for(f=tx(f),p=qE(f,p),p=Array.from(p),f=0;f<p.length;){var w=p[f++];if(!_e(w)){if(w.tag===5&&ke(w.stateNode))return!0;for(w=w.child;w!==null;)p.push(w),w=w.sibling}}return!1},n.getCurrentUpdatePriority=function(){return jt},n.getFindAllNodesFailureDescription=function(f,p){if(!gt)throw Error(o(363));var w=0,M=[];f=[tx(f),0];for(var P=0;P<f.length;){var I=f[P++],$=f[P++],le=p[$];if((I.tag!==5||!_e(I))&&(nx(I,le)&&(M.push(rx(le)),$++,$>w&&(w=$)),$<p.length))for(I=I.child;I!==null;)f.push(I,$),I=I.sibling}if(w<p.length){for(f=[];w<p.length;w++)f.push(rx(p[w]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},n.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return te(f.child.stateNode);default:return f.child.stateNode}},n.injectIntoDevTools=function(f){if(f={bundleType:f.bundleType,version:f.version,rendererPackageName:f.rendererPackageName,rendererConfig:f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:nU,findFiberByHostInstance:f.findFiberByHostInstance||rU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)f=!0;else{try{um=p.inject(f),Qs=p}catch{}f=!!p.checkDCE}}return f},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(f,p,w,M){if(!gt)throw Error(o(363));f=ix(f,p);var P=Ve(f,w,M).disconnect;return{disconnect:function(){P()}}},n.registerMutableSourceForHydration=function(f,p){var w=p._getVersion;w=w(p._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[p,w]:f.mutableSourceEagerHydrationData.push(p,w)},n.runWithPriority=function(f,p){var w=jt;try{return jt=f,p()}finally{jt=w}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(f,p,w,M){var P=p.current,I=Gr(),$=Ea(P);return w=oT(w),p.context===null?p.context=w:p.pendingContext=w,p=Do(I,$),p.payload={element:f},M=M===void 0?null:M,M!==null&&(p.callback=M),Sa(P,p),f=Yi(P,$,I),f!==null&&pm(f,P,$),$},n};(function(t){t.exports=T$})(BN);const A$=PI(BN.exports);var $S={exports:{}},FN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,N){var z=D.length;D.push(N);e:for(;0<z;){var U=z-1>>>1,V=D[U];if(0<i(V,N))D[U]=N,D[z]=V,z=U;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var N=D[0],z=D.pop();if(z!==N){D[0]=z;e:for(var U=0,V=D.length,X=V>>>1;U<X;){var J=2*(U+1)-1,ee=D[J],q=J+1,re=D[q];if(0>i(ee,z))q<V&&0>i(re,ee)?(D[U]=re,D[q]=z,U=q):(D[U]=ee,D[J]=z,U=J);else if(q<V&&0>i(re,z))D[U]=re,D[q]=z,U=q;else break e}}return N}function i(D,N){var z=D.sortIndex-N.sortIndex;return z!==0?z:D.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,u=null,h=3,m=!1,g=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(D){for(var N=n(c);N!==null;){if(N.callback===null)r(c);else if(N.startTime<=D)r(c),N.sortIndex=N.expirationTime,e(l,N);else break;N=n(c)}}function b(D){if(x=!1,S(D),!g)if(n(l)!==null)g=!0,te(A);else{var N=n(c);N!==null&&Z(b,N.startTime-D)}}function A(D,N){g=!1,x&&(x=!1,v(T),T=-1),m=!0;var z=h;try{for(S(N),u=n(l);u!==null&&(!(u.expirationTime>N)||D&&!k());){var U=u.callback;if(typeof U=="function"){u.callback=null,h=u.priorityLevel;var V=U(u.expirationTime<=N);N=t.unstable_now(),typeof V=="function"?u.callback=V:u===n(l)&&r(l),S(N)}else r(l);u=n(l)}if(u!==null)var X=!0;else{var J=n(c);J!==null&&Z(b,J.startTime-N),X=!1}return X}finally{u=null,h=z,m=!1}}var E=!1,C=null,T=-1,O=5,L=-1;function k(){return!(t.unstable_now()-L<O)}function B(){if(C!==null){var D=t.unstable_now();L=D;var N=!0;try{N=C(!0,D)}finally{N?G():(E=!1,C=null)}}else E=!1}var G;if(typeof _=="function")G=function(){_(B)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,Y=H.port2;H.port1.onmessage=B,G=function(){Y.postMessage(null)}}else G=function(){y(B,0)};function te(D){C=D,E||(E=!0,G())}function Z(D,N){T=y(function(){D(t.unstable_now())},N)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,te(A))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(h){case 1:case 2:case 3:var N=3;break;default:N=h}var z=h;h=N;try{return D()}finally{h=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,N){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var z=h;h=D;try{return N()}finally{h=z}},t.unstable_scheduleCallback=function(D,N,z){var U=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?U+z:U):z=U,D){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=z+V,D={id:d++,callback:N,priorityLevel:D,startTime:z,expirationTime:V,sortIndex:-1},z>U?(D.sortIndex=z,e(c,D),n(l)===null&&D===n(c)&&(x?(v(T),T=-1):x=!0,Z(b,z-U))):(D.sortIndex=V,e(l,D),g||m||(g=!0,te(A))),D},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(D){var N=h;return function(){var z=h;h=N;try{return D.apply(this,arguments)}finally{h=z}}}})(FN);(function(t){t.exports=FN})($S);function UN(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}const Yo=[];function VN(t,e,n=!1,r={}){for(const s of Yo)if(UN(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!n)throw s.promise}const i={keys:e,equal:r.equal,promise:t(...e).then(s=>i.response=s).then(()=>{r.lifespan&&r.lifespan>0&&setTimeout(()=>{const s=Yo.indexOf(i);s!==-1&&Yo.splice(s,1)},r.lifespan)}).catch(s=>i.error=s)};if(Yo.push(i),!n)throw i.promise}const C$=(t,e,n)=>VN(t,e,!1,n),P$=(t,e,n)=>void VN(t,e,!0,n),L$=t=>{if(t===void 0||t.length===0)Yo.splice(0,Yo.length);else{const e=Yo.find(n=>UN(t,n.keys,n.equal));if(e){const n=Yo.indexOf(e);n!==-1&&Yo.splice(n,1)}}};var By={exports:{}},Fy={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O$=ue.exports,I$=Symbol.for("react.element"),D$=Symbol.for("react.fragment"),R$=Object.prototype.hasOwnProperty,z$=O$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,N$={key:!0,ref:!0,__self:!0,__source:!0};function HN(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)R$.call(e,r)&&!N$.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:I$,type:t,key:s,ref:o,props:i,_owner:z$.current}}Fy.Fragment=D$;Fy.jsx=HN;Fy.jsxs=HN;(function(t){t.exports=Fy})(By);const GN=By.exports.Fragment,fe=By.exports.jsx,Yt=By.exports.jsxs;var HC,GC;const WN=t=>t&&t.isOrthographicCamera,k$=t=>t&&t.hasOwnProperty("current"),$p=typeof window<"u"&&((HC=window.document)!=null&&HC.createElement||((GC=window.navigator)==null?void 0:GC.product)==="ReactNative")?ue.exports.useLayoutEffect:ue.exports.useEffect;function jN(t){const e=ue.exports.useRef(t);return $p(()=>void(e.current=t),[t]),e}function B$({set:t}){return $p(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class $N extends ue.exports.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}$N.getDerivedStateFromError=()=>({error:!0});const qN="__default",F$=t=>t&&!!t.memoized&&!!t.changes;function XN(t){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(t)?Math.min(Math.max(t[0],e),t[1]):t}const $h=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()},Dn={obj:t=>t===Object(t)&&!Dn.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(Dn.str(t)||Dn.num(t))return t===e;const s=Dn.obj(t);if(s&&r==="reference")return t===e;const o=Dn.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;for(a in i?e:t)if(t[a]!==e[a])return!1;if(Dn.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function YN(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function U$(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function Bc(t,e){const n=t;return(e!=null&&e.primitive||!n.__r3f)&&(n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),t}function qS(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((s,o)=>s[o],t),{target:n,key:i}}else return{target:n,key:e}}const WC=/-\d+$/;function C_(t,e,n){if(Dn.str(n)){if(WC.test(n)){const s=n.replace(WC,""),{target:o,key:a}=qS(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=qS(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function jC(t,e,n){var r,i;if(Dn.str(n)){const{target:s,key:o}=qS(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function ZN(t,{children:e,key:n,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){var d;const u=(d=t==null?void 0:t.__r3f)!=null?d:{},h=Object.entries(i),m=[];if(c){const x=Object.keys(l);for(let y=0;y<x.length;y++)i.hasOwnProperty(x[y])||h.unshift([x[y],qN+"remove"])}h.forEach(([x,y])=>{var v;if((v=t.__r3f)!=null&&v.primitive&&x==="object"||Dn.equ(y,l[x]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(x))return m.push([x,y,!0,[]]);let _=[];x.includes("-")&&(_=x.split("-")),m.push([x,y,!1,_]);for(const S in i){const b=i[S];S.startsWith(`${x}-`)&&m.push([S,b,!1,S.split("-")])}});const g={...i};return u.memoizedProps&&u.memoizedProps.args&&(g.args=u.memoizedProps.args),u.memoizedProps&&u.memoizedProps.attach&&(g.attach=u.memoizedProps.attach),{memoized:g,changes:m}}function P_(t,e){var n,r,i;const s=(n=t.__r3f)!=null?n:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:c}=F$(e)?e:ZN(t,e),d=s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let m=0;m<c.length;m++){let[g,x,y,v]=c[m],_=t,S=_[g];if(v.length&&(S=v.reduce((b,A)=>b[A],t),!(S&&S.set))){const[b,...A]=v.reverse();_=A.reverse().reduce((E,C)=>E[C],t),g=b}if(x===qN+"remove")if(S&&S.constructor){var u;x=new S.constructor(...(u=l.args)!=null?u:[])}else if(_.constructor){var h;const b=new _.constructor(...(h=_.__r3f.memoizedProps.args)!=null?h:[]);x=b[S],b.dispose&&b.dispose()}else x=0;if(y)x?s.handlers[g]=x:delete s.handlers[g],s.eventCount=Object.keys(s.handlers).length;else if(S&&S.set&&(S.copy||S instanceof Mu)){if(Array.isArray(x))S.fromArray?S.fromArray(x):S.set(...x);else if(S.copy&&x&&x.constructor&&S.constructor.name===x.constructor.name)S.copy(x);else if(x!==void 0){const b=S instanceof We;!b&&S.setScalar?S.setScalar(x):S instanceof Mu&&x instanceof Mu?S.mask=x.mask:S.set(x),!("ColorManagement"in Sv)&&!a.linear&&b&&S.convertSRGBToLinear()}}else _[g]=x,!a.linear&&_[g]instanceof Bn&&(_[g].encoding=un);Fc(t)}if(s.parent&&a.internal&&t.raycast&&d!==s.eventCount){const m=a.internal.interaction.indexOf(t);m>-1&&a.internal.interaction.splice(m,1),s.eventCount&&a.internal.interaction.push(t)}return c.length&&(i=t.__r3f)!=null&&i.parent&&XS(t),t}function Fc(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function XS(t){t.onUpdate==null||t.onUpdate(t)}function V$(t,e){t.manual||(WN(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function H$(t,e,n){const r=n.pop(),i=n.reduce((s,o)=>s[o],t);return i[r]=e}function L_(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function G$(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return mu.exports.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return mu.exports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return mu.exports.ContinuousEventPriority;default:return mu.exports.DefaultEventPriority}}function JN(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function W$(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{JN(n.capturedMap,e,r,i)})}function j$(t){function e(l){const{internal:c}=t.getState(),d=l.offsetX-c.initialClick[0],u=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(d*d+u*u))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(d=>{var u;return(u=c.__r3f)==null?void 0:u.handlers["onPointer"+d]}))}function r(l,c){const d=t.getState(),u=new Set,h=[],m=c?c(d.internal.interaction):d.internal.interaction;for(let v=0;v<m.length;v++){const _=$h(m[v]);_&&(_.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(l,d);function g(v){const _=$h(v);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var S;_.events.compute==null||_.events.compute(l,_,(S=_.previousRoot)==null?void 0:S.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(v,!0):[]}let x=m.flatMap(g).sort((v,_)=>{const S=$h(v.object),b=$h(_.object);return!S||!b?0:b.events.priority-S.events.priority||v.distance-_.distance}).filter(v=>{const _=L_(v);return u.has(_)?!1:(u.add(_),!0)});d.events.filter&&(x=d.events.filter(x,d));for(const v of x){let _=v.object;for(;_;){var y;(y=_.__r3f)!=null&&y.eventCount&&h.push({...v,eventObject:_}),_=_.parent}}if("pointerId"in l&&d.internal.capturedMap.has(l.pointerId))for(let v of d.internal.capturedMap.get(l.pointerId).values())h.push(v.intersection);return h}function i(l,c,d,u){const h=t.getState();if(l.length){const m={stopped:!1};for(const g of l){const x=$h(g.object)||h,{raycaster:y,pointer:v,camera:_,internal:S}=x,b=new R(v.x,v.y,0).unproject(_),A=L=>{var k,B;return(k=(B=S.capturedMap.get(L))==null?void 0:B.has(g.eventObject))!=null?k:!1},E=L=>{const k={intersection:g,target:c.target};S.capturedMap.has(L)?S.capturedMap.get(L).set(g.eventObject,k):S.capturedMap.set(L,new Map([[g.eventObject,k]])),c.target.setPointerCapture(L)},C=L=>{const k=S.capturedMap.get(L);k&&JN(S.capturedMap,g.eventObject,k,L)};let T={};for(let L in c){let k=c[L];typeof k!="function"&&(T[L]=k)}let O={...g,...T,pointer:v,intersections:l,stopped:m.stopped,delta:d,unprojectedPoint:b,ray:y.ray,camera:_,stopPropagation(){const L="pointerId"in c&&S.capturedMap.get(c.pointerId);if((!L||L.has(g.eventObject))&&(O.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(k=>k.eventObject===g.eventObject))){const k=l.slice(0,l.indexOf(g));s([...k,g])}},target:{hasPointerCapture:A,setPointerCapture:E,releasePointerCapture:C},currentTarget:{hasPointerCapture:A,setPointerCapture:E,releasePointerCapture:C},nativeEvent:c};if(u(O),m.stopped===!0)break}}return l}function s(l){const{internal:c}=t.getState();for(const d of c.hovered.values())if(!l.length||!l.find(u=>u.object===d.object&&u.index===d.index&&u.instanceId===d.instanceId)){const h=d.eventObject.__r3f,m=h==null?void 0:h.handlers;if(c.hovered.delete(L_(d)),h!=null&&h.eventCount){const g={...d,intersections:l};m.onPointerOut==null||m.onPointerOut(g),m.onPointerLeave==null||m.onPointerLeave(g)}}}function o(l,c){for(let d=0;d<c.length;d++){const u=c[d].__r3f;u==null||u.handlers.onPointerMissed==null||u.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:d}=t.getState();"pointerId"in c&&!d.capturedMap.has(c.pointerId)&&(d.capturedMap.delete(c.pointerId),s([]))}}return function(d){const{onPointerMissed:u,internal:h}=t.getState();h.lastEvent.current=d;const m=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",y=r(d,m?n:void 0),v=g?e(d):0;l==="onPointerDown"&&(h.initialClick=[d.offsetX,d.offsetY],h.initialHits=y.map(S=>S.eventObject)),g&&!y.length&&v<=2&&(o(d,h.interaction),u&&u(d)),m&&s(y);function _(S){const b=S.eventObject,A=b.__r3f,E=A==null?void 0:A.handlers;if(!!(A!=null&&A.eventCount))if(m){if(E.onPointerOver||E.onPointerEnter||E.onPointerOut||E.onPointerLeave){const C=L_(S),T=h.hovered.get(C);T?T.stopped&&S.stopPropagation():(h.hovered.set(C,S),E.onPointerOver==null||E.onPointerOver(S),E.onPointerEnter==null||E.onPointerEnter(S))}E.onPointerMove==null||E.onPointerMove(S)}else{const C=E[l];C?(!g||h.initialHits.includes(b))&&(o(d,h.interaction.filter(T=>!h.initialHits.includes(T))),C(S)):g&&h.initialHits.includes(b)&&o(d,h.interaction.filter(T=>!h.initialHits.includes(T)))}}i(y,d,v,_)}}return{handlePointer:a}}let YS={},$$=t=>void(YS={...YS,...t});function q$(t,e){function n(d,{args:u=[],attach:h,...m},g){let x=`${d[0].toUpperCase()}${d.slice(1)}`,y;if(d==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=m.object;y=Bc(v,{type:d,root:g,attach:h,primitive:!0})}else{const v=YS[x];if(!v)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(u))throw new Error("R3F: The args prop must be an array!");y=Bc(new v(...u),{type:d,root:g,attach:h,memoizedProps:{args:u}})}return y.__r3f.attach===void 0&&(y instanceof tt?y.__r3f.attach="geometry":y instanceof Er&&(y.__r3f.attach="material")),x!=="inject"&&P_(y,m),y}function r(d,u){let h=!1;if(u){var m,g;(m=u.__r3f)!=null&&m.attach?C_(d,u,u.__r3f.attach):u.isObject3D&&d.isObject3D&&(d.add(u),h=!0),h||(g=d.__r3f)==null||g.objects.push(u),u.__r3f||Bc(u,{}),u.__r3f.parent=d,XS(u),Fc(u)}}function i(d,u,h){let m=!1;if(u){var g,x;if((g=u.__r3f)!=null&&g.attach)C_(d,u,u.__r3f.attach);else if(u.isObject3D&&d.isObject3D){u.parent=d,u.dispatchEvent({type:"added"});const y=d.children.filter(_=>_!==u),v=y.indexOf(h);d.children=[...y.slice(0,v),u,...y.slice(v)],m=!0}m||(x=d.__r3f)==null||x.objects.push(u),u.__r3f||Bc(u,{}),u.__r3f.parent=d,XS(u),Fc(u)}}function s(d,u,h=!1){d&&[...d].forEach(m=>o(u,m,h))}function o(d,u,h){if(u){var m,g,x;if(u.__r3f&&(u.__r3f.parent=null),(m=d.__r3f)!=null&&m.objects&&(d.__r3f.objects=d.__r3f.objects.filter(b=>b!==u)),(g=u.__r3f)!=null&&g.attach)jC(d,u,u.__r3f.attach);else if(u.isObject3D&&d.isObject3D){var y;d.remove(u),(y=u.__r3f)!=null&&y.root&&W$(u.__r3f.root,u)}const _=(x=u.__r3f)==null?void 0:x.primitive,S=h===void 0?u.dispose!==null&&!_:h;if(!_){var v;s((v=u.__r3f)==null?void 0:v.objects,u,S),s(u.children,u,S)}u.__r3f&&(delete u.__r3f.root,delete u.__r3f.objects,delete u.__r3f.handlers,delete u.__r3f.memoizedProps,_||delete u.__r3f),S&&u.dispose&&u.type!=="Scene"&&$S.exports.unstable_scheduleCallback($S.exports.unstable_IdlePriority,()=>{try{u.dispose()}catch{}}),Fc(d)}}function a(d,u,h,m){var g;const x=(g=d.__r3f)==null?void 0:g.parent;if(!x)return;const y=n(u,h,d.__r3f.root);if(d.children){for(const v of d.children)v.__r3f&&r(y,v);d.children=d.children.filter(v=>!v.__r3f)}d.__r3f.objects.forEach(v=>r(y,v)),d.__r3f.objects=[],o(x,d),r(x,y),y.raycast&&y.__r3f.eventCount&&y.__r3f.root.getState().internal.interaction.push(y),[m,m.alternate].forEach(v=>{v!==null&&(v.stateNode=y,v.ref&&(typeof v.ref=="function"?v.ref(y):v.ref.current=y))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:A$({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,u)=>{if(!u)return;const h=d.getState().scene;!h.__r3f||(h.__r3f.root=d,r(h,u))},removeChildFromContainer:(d,u)=>{!u||o(d.getState().scene,u)},insertInContainerBefore:(d,u,h)=>{if(!u||!h)return;const m=d.getState().scene;!m.__r3f||i(m,u,h)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var u;const h=(u=d==null?void 0:d.__r3f)!=null?u:{};return Boolean(h.handlers)},prepareUpdate(d,u,h,m){if(d.__r3f.primitive&&m.object&&m.object!==d)return[!0];{const{args:g=[],children:x,...y}=m,{args:v=[],children:_,...S}=h;if(!Array.isArray(g))throw new Error("R3F: the args prop must be an array!");if(g.some((A,E)=>A!==v[E]))return[!0];const b=ZN(d,y,S,!0);return b.changes.length?[!1,b]:null}},commitUpdate(d,[u,h],m,g,x,y){u?a(d,m,x,y):P_(d,h)},commitMount(d,u,h,m){var g;const x=(g=d.__r3f)!=null?g:{};d.raycast&&x.handlers&&x.eventCount&&d.__r3f.root.getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>Bc(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var u;const{attach:h,parent:m}=(u=d.__r3f)!=null?u:{};h&&m&&jC(m,d,h),d.isObject3D&&(d.visible=!1),Fc(d)},unhideInstance(d,u){var h;const{attach:m,parent:g}=(h=d.__r3f)!=null?h:{};m&&g&&C_(g,d,m),(d.isObject3D&&u.visible==null||u.visible)&&(d.visible=!0),Fc(d)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():mu.exports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Dn.fun(performance.now)?performance.now:Dn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Dn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Dn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:P_}}const QN=t=>!!(t!=null&&t.render),KN=ue.exports.createContext(null),X$=(t,e)=>{const n=kN((a,l)=>{const c=new R,d=new R,u=new R;function h(v=l().camera,_=d,S=l().size){const{width:b,height:A,top:E,left:C}=S,T=b/A;_ instanceof R?u.copy(_):u.set(..._);const O=v.getWorldPosition(c).distanceTo(u);if(WN(v))return{width:b/v.zoom,height:A/v.zoom,top:E,left:C,factor:1,distance:O,aspect:T};{const L=v.fov*Math.PI/180,k=2*Math.tan(L/2)*O,B=k*(b/A);return{width:B,height:k,top:E,left:C,factor:b/B,distance:O,aspect:T}}}let m;const g=v=>a(_=>({performance:{..._.performance,current:v}})),x=new se;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(v=1)=>t(l(),v),advance:(v,_)=>e(v,_,l()),legacy:!1,linear:!1,flat:!1,scene:Bc(new Ly),controls:null,clock:new w2,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();m&&clearTimeout(m),v.performance.current!==v.performance.min&&g(v.performance.min),m=setTimeout(()=>g(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:v=>a(_=>({..._,events:{..._.events,...v}})),setSize:(v,_,S,b,A)=>{const E=l().camera,C={width:v,height:_,top:b||0,left:A||0,updateStyle:S};a(T=>({size:C,viewport:{...T.viewport,...h(E,d,C)}}))},setDpr:v=>a(_=>{const S=XN(v);return{viewport:{..._.viewport,dpr:S,initialDpr:_.viewport.initialDpr||S}}}),setFrameloop:(v="always")=>{const _=l().clock;_.stop(),_.elapsedTime=0,v!=="never"&&(_.start(),_.elapsedTime=0),a(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:ue.exports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,_,S)=>{const b=l().internal;return b.priority=b.priority+(_>0?1:0),b.subscribers.push({ref:v,priority:_,store:S}),b.subscribers=b.subscribers.sort((A,E)=>A.priority-E.priority),()=>{const A=l().internal;A!=null&&A.subscribers&&(A.priority=A.priority-(_>0?1:0),A.subscribers=A.subscribers.filter(E=>E.ref!==v))}}}}}),r=n.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:d,set:u}=n.getState();(l!==i||c.dpr!==s)&&(i=l,s=c.dpr,V$(a,l),d.setPixelRatio(c.dpr),d.setSize(l.width,l.height,l.updateStyle)),a!==o&&(o=a,u(h=>({viewport:{...h.viewport,...h.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let n0,Y$=new Set,Z$=new Set,J$=new Set;function O_(t,e){if(!!t.size)for(const{callback:n}of t.values())n(e)}function qh(t,e){switch(t){case"before":return O_(Y$,e);case"after":return O_(Z$,e);case"tail":return O_(J$,e)}}let I_,D_;function R_(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),I_=e.internal.subscribers,n0=0;n0<I_.length;n0++)D_=I_[n0],D_.ref.current(D_.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Q$(t){let e=!1,n,r,i;function s(l){r=requestAnimationFrame(s),e=!0,n=0,qh("before",l);for(const d of t.values()){var c;i=d.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((c=i.gl.xr)!=null&&c.isPresenting)&&(n+=R_(l,i))}if(qh("after",l),n===0)return qh("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,c=1){var d;if(!l)return t.forEach(u=>o(u.store.getState()),c);(d=l.gl.xr)!=null&&d.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,d,u){if(c&&qh("before",l),d)R_(l,d,u);else for(const h of t.values())R_(l,h.store.getState());c&&qh("after",l)}return{loop:s,invalidate:o,advance:a}}function e4(){const t=ue.exports.useContext(KN);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Pf(t=n=>n,e){return e4()(t,e)}function Uy(t,e=0){const n=e4(),r=n.getState().internal.subscribe,i=jN(t);return $p(()=>r(i,e,n),[e,r,n]),null}function K$(t){return ue.exports.useMemo(()=>YN(t),[t])}function t4(t,e){return function(n,...r){const i=new n;return t&&t(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,YN(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message})`))))))}}function T2(t,e,n,r){const i=Array.isArray(e)?e:[e],s=C$(t4(n,r),[t,...i],{equal:Dn.equ});return Array.isArray(e)?s:s[0]}T2.preload=function(t,e,n){const r=Array.isArray(e)?e:[e];return P$(t4(n),[t,...r])};T2.clear=function(t,e){const n=Array.isArray(e)?e:[e];return L$([t,...n])};const Rd=new Map,{invalidate:$C,advance:qC}=Q$(Rd),{reconciler:bv,applyProps:r0}=q$(Rd,G$),Rc={objects:"shallow",strict:!1},eq=(t,e)=>{const n=typeof t=="function"?t(e):t;return QN(n)?n:new t2({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function tq(t){return t instanceof HTMLCanvasElement}function nq(t,e){if(e)return e;if(tq(t)&&t.parentElement){const{width:n,height:r,top:i,left:s}=t.parentElement.getBoundingClientRect();return{width:n,height:r,top:i,left:s}}return{width:0,height:0,top:0,left:0}}function rq(t){const e=Rd.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||X$($C,qC),o=n||bv.createContainer(s,mu.exports.ConcurrentRoot,null,!1,null,"",i,null);e||Rd.set(t,{fiber:o,store:s});let a,l=!1;return{configure(c={}){let{gl:d,size:u,events:h,onCreated:m,shadows:g=!1,linear:x=!1,flat:y=!1,legacy:v=!1,orthographic:_=!1,frameloop:S="always",dpr:b=[1,2],performance:A,raycaster:E,camera:C,onPointerMissed:T}=c,O=s.getState(),L=O.gl;O.gl||O.set({gl:L=eq(d,t)});let k=O.raycaster;k||O.set({raycaster:k=new E2});const{params:B,...G}=E||{};if(Dn.equ(G,k,Rc)||r0(k,{...G}),Dn.equ(B,k.params,Rc)||r0(k,{params:{...k.params,...B}}),!O.camera){const Z=C instanceof Xu,D=Z?C:_?new El(0,0,0,0,.1,1e3):new jn(75,0,.1,1e3);Z||(D.position.z=5,C&&r0(D,C),C!=null&&C.rotation||D.lookAt(0,0,0)),O.set({camera:D})}if(!O.xr){const Z=(z,U)=>{const V=s.getState();V.frameloop!=="never"&&qC(z,!0,V,U)},D=()=>{const z=s.getState();z.gl.xr.enabled=z.gl.xr.isPresenting,z.gl.xr.setAnimationLoop(z.gl.xr.isPresenting?Z:null),z.gl.xr.isPresenting||$C(z)},N={connect(){const z=s.getState().gl;z.xr.addEventListener("sessionstart",D),z.xr.addEventListener("sessionend",D)},disconnect(){const z=s.getState().gl;z.xr.removeEventListener("sessionstart",D),z.xr.removeEventListener("sessionend",D)}};L.xr&&N.connect(),O.set({xr:N})}if(L.shadowMap){const Z=Dn.boo(g);if(Z&&L.shadowMap.enabled!==g||!Dn.equ(g,L.shadowMap,Rc)){const D=L.shadowMap.enabled;L.shadowMap.enabled=!!g,Z?L.shadowMap.type=VM:Object.assign(L.shadowMap,g),D!==L.shadowMap.enabled&&(L.shadowMap.needsUpdate=!0)}}"ColorManagement"in Sv&&H$(Sv,v,["ColorManagement","legacyMode"]);const H=x?ys:un,Y=y?Vs:WM;L.outputEncoding!==H&&(L.outputEncoding=H),L.toneMapping!==Y&&(L.toneMapping=Y),O.legacy!==v&&O.set(()=>({legacy:v})),O.linear!==x&&O.set(()=>({linear:x})),O.flat!==y&&O.set(()=>({flat:y})),d&&!Dn.fun(d)&&!QN(d)&&!Dn.equ(d,L,Rc)&&r0(L,d),h&&!O.events.handlers&&O.set({events:h(s)}),b&&O.viewport.dpr!==XN(b)&&O.setDpr(b);const te=nq(t,u);return Dn.equ(te,O.size,Rc)||O.setSize(te.width,te.height,te.updateStyle,te.top,te.left),O.frameloop!==S&&O.setFrameloop(S),O.onPointerMissed||O.set({onPointerMissed:T}),A&&!Dn.equ(A,O.performance,Rc)&&O.set(Z=>({performance:{...Z.performance,...A}})),a=m,l=!0,this},render(c){return l||this.configure(),bv.updateContainer(fe(iq,{store:s,children:c,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){n4(t)}}}function iq({store:t,children:e,onCreated:n,rootElement:r}){return $p(()=>{const i=t.getState();i.set(s=>({internal:{...s.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),ue.exports.createElement(KN.Provider,{value:t},e)}function n4(t,e){const n=Rd.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),bv.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),U$(i),Rd.delete(t),e&&e(t)}catch{}},500)})}}bv.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:ue.exports.version});function ZS(t,e,n){var r,i,s,o,a;e==null&&(e=100);function l(){var d=Date.now()-o;d<e&&d>=0?r=setTimeout(l,e-d):(r=null,n||(a=t.apply(s,i),s=i=null))}var c=function(){s=this,i=arguments,o=Date.now();var d=n&&!r;return r||(r=setTimeout(l,e)),d&&(a=t.apply(s,i),s=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=t.apply(s,i),s=i=null,clearTimeout(r),r=null)},c}ZS.debounce=ZS;var XC=ZS;function sq(t){let{debounce:e,scroll:n,polyfill:r,offsetSize:i}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=ue.exports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=ue.exports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,d=e?typeof e=="number"?e:e.resize:null,u=ue.exports.useRef(!1);ue.exports.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[h,m,g]=ue.exports.useMemo(()=>{const _=()=>{if(!l.current.element)return;const{left:S,top:b,width:A,height:E,bottom:C,right:T,x:O,y:L}=l.current.element.getBoundingClientRect(),k={left:S,top:b,width:A,height:E,bottom:C,right:T,x:O,y:L};l.current.element instanceof HTMLElement&&i&&(k.height=l.current.element.offsetHeight,k.width=l.current.element.offsetWidth),Object.freeze(k),u.current&&!uq(l.current.lastBounds,k)&&a(l.current.lastBounds=k)};return[_,d?XC(_,d):_,c?XC(_,c):_]},[a,i,c,d]);function x(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",g,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function y(){!l.current.element||(l.current.resizeObserver=new s(g),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(_=>_.addEventListener("scroll",g,{capture:!0,passive:!0})))}const v=_=>{!_||_===l.current.element||(x(),l.current.element=_,l.current.scrollContainers=r4(_),y())};return aq(g,Boolean(n)),oq(m),ue.exports.useEffect(()=>{x(),y()},[n,g,m]),ue.exports.useEffect(()=>x,[]),[v,o,h]}function oq(t){ue.exports.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function aq(t,e){ue.exports.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function r4(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...r4(t.parentElement)]}const lq=["x","y","top","bottom","left","right","width","height"],uq=(t,e)=>lq.every(n=>t[n]===e[n]);var cq=Object.defineProperty,dq=Object.defineProperties,hq=Object.getOwnPropertyDescriptors,YC=Object.getOwnPropertySymbols,fq=Object.prototype.hasOwnProperty,pq=Object.prototype.propertyIsEnumerable,ZC=(t,e,n)=>e in t?cq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,JC=(t,e)=>{for(var n in e||(e={}))fq.call(e,n)&&ZC(t,n,e[n]);if(YC)for(var n of YC(e))pq.call(e,n)&&ZC(t,n,e[n]);return t},mq=(t,e)=>dq(t,hq(e));function A2(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=A2(r,e,n);if(i)return i;r=e?null:r.sibling}}function i4(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const C2=i4(ue.exports.createContext(null));class s4 extends ue.exports.Component{render(){return fe(C2.Provider,{value:this._reactInternals,children:this.props.children})}}const{ReactCurrentOwner:gq,ReactCurrentDispatcher:vq}=ue.exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function yq(){const t=ue.exports.useContext(C2);if(!t)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=ue.exports.useId();return ue.exports.useMemo(()=>{var r;return(r=gq.current)!=null?r:A2(t,!1,i=>{let s=i.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}})},[t,e])}const Xh=[],QC=new WeakMap;function xq(){var t;const e=yq();Xh.splice(0,Xh.length),A2(e,!0,n=>{var r;const i=(r=n.type)==null?void 0:r._context;i&&i!==C2&&Xh.push(i4(i))});for(const n of Xh){const r=(t=vq.current)==null?void 0:t.readContext(n);QC.set(n,r)}return ue.exports.useMemo(()=>Xh.reduce((n,r)=>i=>ue.exports.createElement(n,null,ue.exports.createElement(r.Provider,mq(JC({},i),{value:QC.get(r)}))),n=>fe(s4,{...JC({},n)})),[])}const z_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function _q(t){const{handlePointer:e}=j$(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(z_).reduce((n,r)=>({...n,[r]:e(r)}),{}),connect:n=>{var r;const{set:i,events:s}=t.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:n}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=z_[o];n.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=z_[s];r.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const wq=ue.exports.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:s,events:o=_q,eventSource:a,eventPrefix:l,shadows:c,linear:d,flat:u,legacy:h,orthographic:m,frameloop:g,dpr:x,performance:y,raycaster:v,camera:_,onPointerMissed:S,onCreated:b,...A},E){ue.exports.useMemo(()=>$$(Sv),[]);const C=xq(),[T,O]=sq({scroll:!0,debounce:{scroll:50,resize:0},...r}),L=ue.exports.useRef(null),k=ue.exports.useRef(null),[B,G]=ue.exports.useState(null);ue.exports.useImperativeHandle(E,()=>L.current);const H=jN(S),[Y,te]=ue.exports.useState(!1),[Z,D]=ue.exports.useState(!1);if(Y)throw Y;if(Z)throw Z;const N=ue.exports.useRef(null);return O.width>0&&O.height>0&&B&&(N.current||(N.current=rq(B)),N.current.configure({gl:s,events:o,shadows:c,linear:d,flat:u,legacy:h,orthographic:m,frameloop:g,dpr:x,performance:y,raycaster:v,camera:_,size:O,onPointerMissed:(...U)=>H.current==null?void 0:H.current(...U),onCreated:U=>{U.events.connect==null||U.events.connect(a?k$(a)?a.current:a:k.current),l&&U.setEvents({compute:(V,X)=>{const J=V[l+"X"],ee=V[l+"Y"];X.pointer.set(J/X.size.width*2-1,-(ee/X.size.height)*2+1),X.raycaster.setFromCamera(X.pointer,X.camera)}}),b==null||b(U)}}),N.current.render(fe(C,{children:fe($N,{set:D,children:fe(ue.exports.Suspense,{fallback:fe(B$,{set:te}),children:e})})}))),$p(()=>{G(L.current)},[]),ue.exports.useEffect(()=>{if(B)return()=>n4(B)},[B]),fe("div",{ref:k,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:a?"none":"auto",...i},...A,children:fe("div",{ref:T,style:{width:"100%",height:"100%"},children:fe("canvas",{ref:L,style:{display:"block"},children:n})})})}),Sq=ue.exports.forwardRef(function(e,n){return fe(s4,{children:fe(wq,{...e,ref:n})})}),qp=new R,P2=new R,bq=new R;function Mq(t,e,n){const r=qp.setFromMatrixPosition(t.matrixWorld);r.project(e);const i=n.width/2,s=n.height/2;return[r.x*i+i,-(r.y*s)+s]}function Eq(t,e){const n=qp.setFromMatrixPosition(t.matrixWorld),r=P2.setFromMatrixPosition(e.matrixWorld),i=n.sub(r),s=e.getWorldDirection(bq);return i.angleTo(s)>Math.PI/2}function Tq(t,e,n,r){const i=qp.setFromMatrixPosition(t.matrixWorld),s=i.clone();s.project(e),n.setFromCamera(s,e);const o=n.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(n.ray.origin)<a}return!0}function Aq(t,e){if(e instanceof El)return e.zoom;if(e instanceof jn){const n=qp.setFromMatrixPosition(t.matrixWorld),r=P2.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=n.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function Cq(t,e,n){if(e instanceof jn||e instanceof El){const r=qp.setFromMatrixPosition(t.matrixWorld),i=P2.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(n[1]-n[0])/(e.far-e.near),a=n[1]-o*e.far;return Math.round(o*s+a)}}const JS=t=>Math.abs(t)<1e-10?0:t;function o4(t,e,n=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=JS(e[i]*t.elements[i])+(i!==15?",":")");return n+r}const Pq=(t=>e=>o4(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Lq=(t=>(e,n)=>o4(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]),Oq=ue.exports.forwardRef(({children:t,eps:e=.001,style:n,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:d=!1,occlude:u,onOcclude:h,zIndexRange:m=[16777271,0],calculatePosition:g=Mq,as:x="div",wrapperClass:y,pointerEvents:v="auto",..._},S)=>{const{gl:b,camera:A,scene:E,size:C,raycaster:T,events:O}=Pf(),[L]=ue.exports.useState(()=>document.createElement(x)),k=ue.exports.useRef(),B=ue.exports.useRef(null),G=ue.exports.useRef(0),H=ue.exports.useRef([0,0]),Y=ue.exports.useRef(null),te=ue.exports.useRef(null),Z=(a==null?void 0:a.current)||O.connected||b.domElement.parentNode;ue.exports.useLayoutEffect(()=>{if(B.current){const U=k.current=FM(L);if(E.updateMatrixWorld(),d)L.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const V=g(B.current,A,C);L.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${V[0]}px,${V[1]}px,0);transform-origin:0 0;`}return Z&&(i?Z.prepend(L):Z.appendChild(L)),()=>{Z&&Z.removeChild(L),U.unmount()}}},[Z,d]),ue.exports.useLayoutEffect(()=>{y&&(L.className=y)},[y]);const D=ue.exports.useMemo(()=>d?{position:"absolute",top:0,left:0,width:C.width,height:C.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-C.height/2,left:-C.width/2,width:C.width,height:C.height},...n},[n,s,o,C,d]),N=ue.exports.useMemo(()=>({position:"absolute",pointerEvents:v}),[v]);ue.exports.useLayoutEffect(()=>{if(d){var U;(U=k.current)==null||U.render(fe("div",{ref:Y,style:D,children:fe("div",{ref:te,style:N,children:fe("div",{ref:S,className:r,style:n,children:t})})}))}else{var V;(V=k.current)==null||V.render(fe("div",{ref:S,style:D,className:r,children:t}))}});const z=ue.exports.useRef(!0);return Uy(()=>{if(B.current){A.updateMatrixWorld(),B.current.updateWorldMatrix(!0,!1);const U=d?H.current:g(B.current,A,C);if(d||Math.abs(G.current-A.zoom)>e||Math.abs(H.current[0]-U[0])>e||Math.abs(H.current[1]-U[1])>e){const V=Eq(B.current,A);let X=!1;typeof u=="boolean"?u===!0&&(X=[E]):Array.isArray(u)&&(X=u.map(ee=>ee.current));const J=z.current;if(X){const ee=Tq(B.current,A,T,X);z.current=ee&&!V}else z.current=!V;if(J!==z.current&&(h?h(!z.current):L.style.display=z.current?"block":"none"),L.style.zIndex=`${Cq(B.current,A,m)}`,d){const[ee,q]=[C.width/2,C.height/2],re=A.projectionMatrix.elements[5]*q,{isOrthographicCamera:ie,top:K,left:oe,bottom:ye,right:ne}=A,Q=Pq(A.matrixWorldInverse),de=ie?`scale(${re})translate(${JS(-(ne+oe)/2)}px,${JS((K+ye)/2)}px)`:`translateZ(${re}px)`;let pe=B.current.matrixWorld;c&&(pe=A.matrixWorldInverse.clone().transpose().copyPosition(pe).scale(B.current.scale),pe.elements[3]=pe.elements[7]=pe.elements[11]=0,pe.elements[15]=1),L.style.width=C.width+"px",L.style.height=C.height+"px",L.style.perspective=ie?"":`${re}px`,Y.current&&te.current&&(Y.current.style.transform=`${de}${Q}translate(${ee}px,${q}px)`,te.current.style.transform=Lq(pe,1/((l||10)/400)))}else{const ee=l===void 0?1:Aq(B.current,A)*l;L.style.transform=`translate3d(${U[0]}px,${U[1]}px,0) scale(${ee})`}H.current=U,G.current=A.zoom}}}),fe("group",{..._,ref:B})});let Yh=0;const Iq=kN(t=>(od.onStart=(e,n,r)=>{t({active:!0,item:e,loaded:n,total:r,progress:(n-Yh)/(r-Yh)*100})},od.onLoad=()=>{t({active:!1})},od.onError=e=>t(n=>({errors:[...n.errors,e]})),od.onProgress=(e,n,r)=>{n===r&&(Yh=r),t({active:!0,item:e,loaded:n,total:r,progress:(n-Yh)/(r-Yh)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),Dq=t=>`Loading ${t.toFixed(2)}%`;function Rq({containerStyles:t,innerStyles:e,barStyles:n,dataStyles:r,dataInterpolation:i=Dq,initialState:s=o=>o}){const{active:o,progress:a}=Iq(),l=ue.exports.useRef(0),c=ue.exports.useRef(0),d=ue.exports.useRef(null),[u,h]=ue.exports.useState(s(o));ue.exports.useEffect(()=>{let g;return o!==u&&(g=setTimeout(()=>h(o),300)),()=>clearTimeout(g)},[u,o]);const m=ue.exports.useCallback(()=>{!d.current||(l.current+=(a-l.current)/2,(l.current>.95*a||a===100)&&(l.current=a),d.current.innerText=i(l.current),l.current<a&&(c.current=requestAnimationFrame(m)))},[i,a]);return ue.exports.useEffect(()=>(m(),()=>cancelAnimationFrame(c.current)),[m]),u?fe("div",{style:{...i0.container,opacity:o?1:0,...t},children:fe("div",{children:Yt("div",{style:{...i0.inner,...e},children:[fe("div",{style:{...i0.bar,transform:`scaleX(${a/100})`,...n}}),fe("span",{ref:d,style:{...i0.data,...r}})]})})}):null}const i0={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};function a4(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var zq=1/0,Nq=9007199254740991,kq="[object Arguments]",Bq="[object Function]",Fq="[object GeneratorFunction]",Uq="[object Symbol]",Vq=typeof Qm=="object"&&Qm&&Qm.Object===Object&&Qm,Hq=typeof self=="object"&&self&&self.Object===Object&&self,Gq=Vq||Hq||Function("return this")();function Wq(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function jq(t,e){for(var n=-1,r=t?t.length:0,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function $q(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var L2=Object.prototype,qq=L2.hasOwnProperty,O2=L2.toString,KC=Gq.Symbol,Xq=L2.propertyIsEnumerable,eP=KC?KC.isConcatSpreadable:void 0,tP=Math.max;function l4(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=Qq),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?l4(a,e-1,n,r,i):$q(i,a):r||(i[i.length]=a)}return i}function Yq(t,e){return t=Object(t),Zq(t,e,function(n,r){return r in t})}function Zq(t,e,n){for(var r=-1,i=e.length,s={};++r<i;){var o=e[r],a=t[o];n(a,o)&&(s[o]=a)}return s}function Jq(t,e){return e=tP(e===void 0?t.length-1:e,0),function(){for(var n=arguments,r=-1,i=tP(n.length-e,0),s=Array(i);++r<i;)s[r]=n[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=n[r];return o[e]=s,Wq(t,this,o)}}function Qq(t){return tX(t)||eX(t)||!!(eP&&t&&t[eP])}function Kq(t){if(typeof t=="string"||aX(t))return t;var e=t+"";return e=="0"&&1/t==-zq?"-0":e}function eX(t){return rX(t)&&qq.call(t,"callee")&&(!Xq.call(t,"callee")||O2.call(t)==kq)}var tX=Array.isArray;function nX(t){return t!=null&&sX(t.length)&&!iX(t)}function rX(t){return u4(t)&&nX(t)}function iX(t){var e=oX(t)?O2.call(t):"";return e==Bq||e==Fq}function sX(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Nq}function oX(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function u4(t){return!!t&&typeof t=="object"}function aX(t){return typeof t=="symbol"||u4(t)&&O2.call(t)==Uq}var lX=Jq(function(t,e){return t==null?{}:Yq(t,jq(l4(e,1),Kq))}),uX=lX;function nP(t,{keys:e=["near","far","color","distance","decay","penumbra","angle","intensity","skeleton","visible","castShadow","receiveShadow","morphTargetDictionary","morphTargetInfluences","name","geometry","material","position","rotation","scale","up","userData"],deep:n,inject:r,castShadow:i,receiveShadow:s}){let o=uX(t,e);return n&&(o.geometry&&n!=="materialsOnly"&&(o.geometry=o.geometry.clone()),o.material&&n!=="geometriesOnly"&&(o.material=o.material.clone())),r&&(typeof r=="function"?o={...o,children:r(t)}:ue.exports.isValidElement(r)?o={...o,children:r}:o={...o,...r}),t.type==="Mesh"&&(i&&(o.castShadow=!0),s&&(o.receiveShadow=!0)),o}const gu=ue.exports.forwardRef(({object:t,children:e,deep:n,castShadow:r,receiveShadow:i,inject:s,keys:o,...a},l)=>{const c={keys:o,deep:n,inject:s,castShadow:r,receiveShadow:i};if(Array.isArray(t))return Yt("group",{...a,ref:l,children:[t.map(m=>fe(gu,{object:m,...c},m.uuid)),e]});const{children:d,...u}=nP(t,c),h=t.type[0].toLowerCase()+t.type.slice(1);return Yt(h,{...u,...a,ref:l,children:[(t==null?void 0:t.children).map(m=>{let g={},x=m.type[0].toLowerCase()+m.type.slice(1);return x==="group"||x==="object3D"?(x=gu,g={object:m,...c}):g=nP(m,c),fe(x,{...g},m.uuid)}),e,d]})});function cX(t,e,n){const{gl:r,size:i,viewport:s}=Pf(),o=typeof t=="number"?t:i.width*s.dpr,a=typeof e=="number"?e:i.height*s.dpr,l=(typeof t=="number"?n:t)||{},{samples:c,...d}=l,u=ue.exports.useMemo(()=>{let h;return h=new Di(o,a,{minFilter:Tn,magFilter:Tn,encoding:r.outputEncoding,type:zu,...d}),h.samples=c,h},[]);return ue.exports.useLayoutEffect(()=>{u.setSize(o,a),c&&(u.samples=c)},[c,u,o,a]),ue.exports.useEffect(()=>()=>u.dispose(),[]),u}const dX=t=>typeof t=="function",hX=ue.exports.forwardRef(({envMap:t,resolution:e=256,frames:n=1/0,children:r,makeDefault:i,...s},o)=>{const a=Pf(({set:y})=>y),l=Pf(({camera:y})=>y),c=Pf(({size:y})=>y),d=ue.exports.useRef(null),u=ue.exports.useRef(null),h=cX(e);ue.exports.useLayoutEffect(()=>{s.manual||d.current.updateProjectionMatrix()},[c,s]),ue.exports.useLayoutEffect(()=>{d.current.updateProjectionMatrix()}),ue.exports.useLayoutEffect(()=>{if(i){const y=l;return a(()=>({camera:d.current})),()=>a(()=>({camera:y}))}},[d,i,a]);let m=0,g=null;const x=dX(r);return Uy(y=>{x&&(n===1/0||m<n)&&(u.current.visible=!1,y.gl.setRenderTarget(h),g=y.scene.background,t&&(y.scene.background=t),y.gl.render(y.scene,d.current),y.scene.background=g,y.gl.setRenderTarget(null),u.current.visible=!0,m++)}),Yt(GN,{children:[fe("orthographicCamera",{left:c.width/-2,right:c.width/2,top:c.height/2,bottom:c.height/-2,ref:a4([d,o]),...s,children:!x&&r}),fe("group",{ref:u,children:x&&r(h.texture)})]})}),c4=ue.exports.forwardRef(({children:t,speed:e=1,rotationIntensity:n=1,floatIntensity:r=1,floatingRange:i=[-.1,.1],...s},o)=>{const a=ue.exports.useRef(null),l=ue.exports.useRef(Math.random()*1e4);return Uy(c=>{var d,u;const h=l.current+c.clock.getElapsedTime();a.current.rotation.x=Math.cos(h/4*e)/8*n,a.current.rotation.y=Math.sin(h/4*e)/8*n,a.current.rotation.z=Math.sin(h/4*e)/20*n;let m=Math.sin(h/4*e)/10;m=nn.mapLinear(m,-.1,.1,(d=i==null?void 0:i[0])!==null&&d!==void 0?d:-.1,(u=i==null?void 0:i[1])!==null&&u!==void 0?u:.1),a.current.position.y=m*r}),fe("group",{...s,children:fe("group",{ref:a4([a,o]),children:t})})});function fX({id:t=1,children:e,colorWrite:n=!1,depthWrite:r=!1,...i}){const s=ue.exports.useMemo(()=>({colorWrite:n,depthWrite:r,stencilWrite:!0,stencilRef:t,stencilFunc:XM,stencilFail:N0,stencilZFail:N0,stencilZPass:N0}),[t,n,r]);return Yt("mesh",{renderOrder:-t,...i,children:[fe("meshBasicMaterial",{...s}),typeof e=="function"?e(s):e]})}function pX(t,e=!1){return{stencilWrite:!0,stencilRef:t,stencilFunc:e?Rz:Dz,stencilFail:wu,stencilZFail:wu,stencilZPass:wu}}const mX="modulepreload",gX=function(t,e){return new URL(t,e).href},rP={},vX=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=gX(s,r),s in rP)return;rP[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let d=i.length-1;d>=0;d--){const u=i[d];if(u.href===s&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":mX,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((d,u)=>{c.addEventListener("load",d),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};function d4(t,e=!1){const n=t[0].index!==null,r=new Set(Object.keys(t[0].attributes)),i=new Set(Object.keys(t[0].morphAttributes)),s={},o={},a=t[0].morphTargetsRelative,l=new tt;let c=0;for(let d=0;d<t.length;++d){const u=t[d];let h=0;if(n!==(u.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const m in u.attributes){if(!r.has(m))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+'. All geometries must have compatible attributes; make sure "'+m+'" attribute exists among all geometries, or in none of them.'),null;s[m]===void 0&&(s[m]=[]),s[m].push(u.attributes[m]),h++}if(h!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". Make sure all geometries have the same number of attributes."),null;if(a!==u.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const m in u.morphAttributes){if(!i.has(m))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+".  .morphAttributes must be consistent throughout all geometries."),null;o[m]===void 0&&(o[m]=[]),o[m].push(u.morphAttributes[m])}if(e){let m;if(n)m=u.index.count;else if(u.attributes.position!==void 0)m=u.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". The geometry must have either an index or a position attribute"),null;l.addGroup(c,m,d),c+=m}}if(n){let d=0;const u=[];for(let h=0;h<t.length;++h){const m=t[h].index;for(let g=0;g<m.count;++g)u.push(m.getX(g)+d);d+=t[h].attributes.position.count}l.setIndex(u)}for(const d in s){const u=iP(s[d]);if(!u)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" attribute."),null;l.setAttribute(d,u)}for(const d in o){const u=o[d][0].length;if(u===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[d]=[];for(let h=0;h<u;++h){const m=[];for(let x=0;x<o[d].length;++x)m.push(o[d][x][h]);const g=iP(m);if(!g)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" morphAttribute."),null;l.morphAttributes[d].push(g)}}return l}function iP(t){let e,n,r,i=0;for(let a=0;a<t.length;++a){const l=t[a];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(e===void 0&&(e=l.array.constructor),e!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(n===void 0&&(n=l.itemSize),n!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(r===void 0&&(r=l.normalized),r!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;i+=l.array.length}const s=new e(i);let o=0;for(let a=0;a<t.length;++a)s.set(t[a].array,o),o+=t[a].array.length;return new vt(s,n,r)}const N_=new WeakMap;class yX extends Qr{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,r,i){const s=new ws(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{this.decodeDracoFile(o,n).catch(i)},r,i)}decodeDracoFile(e,n,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};return this.decodeGeometry(e,s).then(n)}decodeGeometry(e,n){const r=JSON.stringify(n);if(N_.has(e)){const l=N_.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((c,d)=>{i._callbacks[s]={resolve:c,reject:d},i.postMessage({type:"decode",id:s,taskConfig:n,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),N_.set(e,{key:r,promise:a}),a}_createGeometry(e){const n=new tt;e.index&&n.setIndex(new vt(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;n.setAttribute(s,new vt(o,a))}return n}_loadLibrary(e,n){const r=new ws(this.manager);return r.setPath(this.decoderPath),r.setResponseType(n),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=xX.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=n,r._taskLoad+=n,r})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function xX(){let t,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":t=a.decoderConfig,e=new Promise(function(d){t.onModuleLoaded=function(u){d({draco:u})},DracoDecoderModule(t)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(d=>{const u=d.draco,h=new u.Decoder,m=new u.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const g=n(u,h,m,c),x=g.attributes.map(y=>y.array.buffer);g.index&&x.push(g.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:g},x)}catch(g){console.error(g),self.postMessage({type:"error",id:a.id,error:g.message})}finally{u.destroy(m),u.destroy(h)}});break}};function n(o,a,l,c){const d=c.attributeIDs,u=c.attributeTypes;let h,m;const g=a.GetEncodedGeometryType(l);if(g===o.TRIANGULAR_MESH)h=new o.Mesh,m=a.DecodeBufferToMesh(l,h);else if(g===o.POINT_CLOUD)h=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const x={index:null,attributes:[]};for(const y in d){const v=self[u[y]];let _,S;if(c.useUniqueIDs)S=d[y],_=a.GetAttributeByUniqueId(h,S);else{if(S=a.GetAttributeId(h,o[d[y]]),S===-1)continue;_=a.GetAttribute(h,S)}x.attributes.push(i(o,a,h,y,v,_))}return g===o.TRIANGULAR_MESH&&(x.index=r(o,a,h)),o.destroy(h),x}function r(o,a,l){const d=l.num_faces()*3,u=d*4,h=o._malloc(u);a.GetTrianglesUInt32Array(l,u,h);const m=new Uint32Array(o.HEAPF32.buffer,h,d).slice();return o._free(h),{array:m,itemSize:1}}function i(o,a,l,c,d,u){const h=u.num_components(),g=l.num_points()*h,x=g*d.BYTES_PER_ELEMENT,y=s(o,d),v=o._malloc(x);a.GetAttributeDataArrayForAllPoints(l,u,y,x,v);const _=new d(o.HEAPF32.buffer,v,g).slice();return o._free(v),{name:c,array:_,itemSize:h}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}var _X=Object.create,I2=Object.defineProperty,wX=Object.getOwnPropertyDescriptor,SX=Object.getOwnPropertyNames,bX=Object.getPrototypeOf,MX=Object.prototype.hasOwnProperty,h4=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),EX=(t,e)=>{for(var n in e)I2(t,n,{get:e[n],enumerable:!0})},TX=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of SX(e))!MX.call(t,i)&&i!==n&&I2(t,i,{get:()=>e[i],enumerable:!(r=wX(e,i))||r.enumerable});return t},f4=(t,e,n)=>(n=t!=null?_X(bX(t)):{},TX(e||!t||!t.__esModule?I2(n,"default",{value:t,enumerable:!0}):n,t)),AX=h4((t,e)=>{(function(n,r){typeof t=="object"&&typeof e<"u"?r(t):typeof define=="function"&&define.amd?define(["exports"],r):r((n=typeof globalThis<"u"?globalThis:n||self).SVDJS={})})(t,function(n){n.SVD=function(r,i,s,o,a){if(i=i===void 0||i,s=s===void 0||s,a=1e-64/(o=o||Math.pow(2,-52)),!r)throw new TypeError("Matrix a is not defined");var l,c,d,u,h,m,g,x,y,v,_,S,b=r[0].length,A=r.length;if(A<b)throw new TypeError("Invalid matrix: m < n");for(var E=[],C=[],T=[],O=i==="f"?A:b,L=v=g=0;L<A;L++)C[L]=new Array(O).fill(0);for(L=0;L<b;L++)T[L]=new Array(b).fill(0);var k,B=new Array(b).fill(0);for(L=0;L<A;L++)for(l=0;l<b;l++)C[L][l]=r[L][l];for(L=0;L<b;L++){for(E[L]=g,y=0,d=L+1,l=L;l<A;l++)y+=Math.pow(C[l][L],2);if(y<a)g=0;else for(x=(m=C[L][L])*(g=m<0?Math.sqrt(y):-Math.sqrt(y))-y,C[L][L]=m-g,l=d;l<b;l++){for(y=0,c=L;c<A;c++)y+=C[c][L]*C[c][l];for(m=y/x,c=L;c<A;c++)C[c][l]=C[c][l]+m*C[c][L]}for(B[L]=g,y=0,l=d;l<b;l++)y+=Math.pow(C[L][l],2);if(y<a)g=0;else{for(x=(m=C[L][L+1])*(g=m<0?Math.sqrt(y):-Math.sqrt(y))-y,C[L][L+1]=m-g,l=d;l<b;l++)E[l]=C[L][l]/x;for(l=d;l<A;l++){for(y=0,c=d;c<b;c++)y+=C[l][c]*C[L][c];for(c=d;c<b;c++)C[l][c]=C[l][c]+y*E[c]}}v<(_=Math.abs(B[L])+Math.abs(E[L]))&&(v=_)}if(s)for(L=b-1;0<=L;L--){if(g!==0){for(x=C[L][L+1]*g,l=d;l<b;l++)T[l][L]=C[L][l]/x;for(l=d;l<b;l++){for(y=0,c=d;c<b;c++)y+=C[L][c]*T[c][l];for(c=d;c<b;c++)T[c][l]=T[c][l]+y*T[c][L]}}for(l=d;l<b;l++)T[L][l]=0,T[l][L]=0;T[L][L]=1,g=E[L],d=L}if(i){if(i==="f")for(L=b;L<A;L++){for(l=b;l<A;l++)C[L][l]=0;C[L][L]=1}for(L=b-1;0<=L;L--){for(d=L+1,g=B[L],l=d;l<O;l++)C[L][l]=0;if(g!==0){for(x=C[L][L]*g,l=d;l<O;l++){for(y=0,c=d;c<A;c++)y+=C[c][L]*C[c][l];for(m=y/x,c=L;c<A;c++)C[c][l]=C[c][l]+m*C[c][L]}for(l=L;l<A;l++)C[l][L]=C[l][L]/g}else for(l=L;l<A;l++)C[l][L]=0;C[L][L]=C[L][L]+1}}for(o*=v,c=b-1;0<=c;c--)for(var G=0;G<50;G++){for(k=!1,d=c;0<=d;d--){if(Math.abs(E[d])<=o){k=!0;break}if(Math.abs(B[d-1])<=o)break}if(!k){for(h=0,u=d-(y=1),L=d;L<c+1&&(m=y*E[L],E[L]=h*E[L],!(Math.abs(m)<=o));L++)if(g=B[L],B[L]=Math.sqrt(m*m+g*g),h=g/(x=B[L]),y=-m/x,i)for(l=0;l<A;l++)_=C[l][u],S=C[l][L],C[l][u]=_*h+S*y,C[l][L]=-_*y+S*h}if(S=B[c],d===c){if(S<0&&(B[c]=-S,s))for(l=0;l<b;l++)T[l][c]=-T[l][c];break}for(v=B[d],m=(((_=B[c-1])-S)*(_+S)+((g=E[c-1])-(x=E[c]))*(g+x))/(2*x*_),g=Math.sqrt(m*m+1),m=((v-S)*(v+S)+x*(_/(m<0?m-g:m+g)-x))/v,L=d+(y=h=1);L<c+1;L++){if(g=E[L],_=B[L],x=y*g,g*=h,S=Math.sqrt(m*m+x*x),m=v*(h=m/(E[L-1]=S))+g*(y=x/S),g=-v*y+g*h,x=_*y,_*=h,s)for(l=0;l<b;l++)v=T[l][L-1],S=T[l][L],T[l][L-1]=v*h+S*y,T[l][L]=-v*y+S*h;if(S=Math.sqrt(m*m+x*x),m=(h=m/(B[L-1]=S))*g+(y=x/S)*_,v=-y*g+h*_,i)for(l=0;l<A;l++)_=C[l][L-1],S=C[l][L],C[l][L-1]=_*h+S*y,C[l][L]=-_*y+S*h}E[d]=0,E[c]=m,B[c]=v}for(L=0;L<b;L++)B[L]<o&&(B[L]=0);return{u:C,q:B,v:T}},n.VERSION="1.1.1",Object.defineProperty(n,"__esModule",{value:!0})})}),CX=h4(t=>{(function(){var e=function(){this.init()};e.prototype={init:function(){var u=this||n;return u._counter=1e3,u._html5AudioPool=[],u.html5PoolSize=10,u._codecs={},u._howls=[],u._muted=!1,u._volume=1,u._canPlayEvent="canplaythrough",u._navigator=typeof window<"u"&&window.navigator?window.navigator:null,u.masterGain=null,u.noAudio=!1,u.usingWebAudio=!0,u.autoSuspend=!0,u.ctx=null,u.autoUnlock=!0,u._setup(),u},volume:function(u){var h=this||n;if(u=parseFloat(u),h.ctx||d(),typeof u<"u"&&u>=0&&u<=1){if(h._volume=u,h._muted)return h;h.usingWebAudio&&h.masterGain.gain.setValueAtTime(u,n.ctx.currentTime);for(var m=0;m<h._howls.length;m++)if(!h._howls[m]._webAudio)for(var g=h._howls[m]._getSoundIds(),x=0;x<g.length;x++){var y=h._howls[m]._soundById(g[x]);y&&y._node&&(y._node.volume=y._volume*u)}return h}return h._volume},mute:function(u){var h=this||n;h.ctx||d(),h._muted=u,h.usingWebAudio&&h.masterGain.gain.setValueAtTime(u?0:h._volume,n.ctx.currentTime);for(var m=0;m<h._howls.length;m++)if(!h._howls[m]._webAudio)for(var g=h._howls[m]._getSoundIds(),x=0;x<g.length;x++){var y=h._howls[m]._soundById(g[x]);y&&y._node&&(y._node.muted=u?!0:y._muted)}return h},stop:function(){for(var u=this||n,h=0;h<u._howls.length;h++)u._howls[h].stop();return u},unload:function(){for(var u=this||n,h=u._howls.length-1;h>=0;h--)u._howls[h].unload();return u.usingWebAudio&&u.ctx&&typeof u.ctx.close<"u"&&(u.ctx.close(),u.ctx=null,d()),u},codecs:function(u){return(this||n)._codecs[u.replace(/^x-/,"")]},_setup:function(){var u=this||n;if(u.state=u.ctx&&u.ctx.state||"suspended",u._autoSuspend(),!u.usingWebAudio)if(typeof Audio<"u")try{var h=new Audio;typeof h.oncanplaythrough>"u"&&(u._canPlayEvent="canplay")}catch{u.noAudio=!0}else u.noAudio=!0;try{var h=new Audio;h.muted&&(u.noAudio=!0)}catch{}return u.noAudio||u._setupCodecs(),u},_setupCodecs:function(){var u=this||n,h=null;try{h=typeof Audio<"u"?new Audio:null}catch{return u}if(!h||typeof h.canPlayType!="function")return u;var m=h.canPlayType("audio/mpeg;").replace(/^no$/,""),g=u._navigator?u._navigator.userAgent:"",x=g.match(/OPR\/([0-6].)/g),y=x&&parseInt(x[0].split("/")[1],10)<33,v=g.indexOf("Safari")!==-1&&g.indexOf("Chrome")===-1,_=g.match(/Version\/(.*?) /),S=v&&_&&parseInt(_[1],10)<15;return u._codecs={mp3:!!(!y&&(m||h.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!m,opus:!!h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(h.canPlayType('audio/wav; codecs="1"')||h.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!h.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!h.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/m4a;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(h.canPlayType("audio/x-m4b;")||h.canPlayType("audio/m4b;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(h.canPlayType("audio/x-mp4;")||h.canPlayType("audio/mp4;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!S&&h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!S&&h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!h.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(h.canPlayType("audio/x-flac;")||h.canPlayType("audio/flac;")).replace(/^no$/,"")},u},_unlockAudio:function(){var u=this||n;if(!(u._audioUnlocked||!u.ctx)){u._audioUnlocked=!1,u.autoUnlock=!1,!u._mobileUnloaded&&u.ctx.sampleRate!==44100&&(u._mobileUnloaded=!0,u.unload()),u._scratchBuffer=u.ctx.createBuffer(1,1,22050);var h=function(m){for(;u._html5AudioPool.length<u.html5PoolSize;)try{var g=new Audio;g._unlocked=!0,u._releaseHtml5Audio(g)}catch{u.noAudio=!0;break}for(var x=0;x<u._howls.length;x++)if(!u._howls[x]._webAudio)for(var y=u._howls[x]._getSoundIds(),v=0;v<y.length;v++){var _=u._howls[x]._soundById(y[v]);_&&_._node&&!_._node._unlocked&&(_._node._unlocked=!0,_._node.load())}u._autoResume();var S=u.ctx.createBufferSource();S.buffer=u._scratchBuffer,S.connect(u.ctx.destination),typeof S.start>"u"?S.noteOn(0):S.start(0),typeof u.ctx.resume=="function"&&u.ctx.resume(),S.onended=function(){S.disconnect(0),u._audioUnlocked=!0,document.removeEventListener("touchstart",h,!0),document.removeEventListener("touchend",h,!0),document.removeEventListener("click",h,!0),document.removeEventListener("keydown",h,!0);for(var b=0;b<u._howls.length;b++)u._howls[b]._emit("unlock")}};return document.addEventListener("touchstart",h,!0),document.addEventListener("touchend",h,!0),document.addEventListener("click",h,!0),document.addEventListener("keydown",h,!0),u}},_obtainHtml5Audio:function(){var u=this||n;if(u._html5AudioPool.length)return u._html5AudioPool.pop();var h=new Audio().play();return h&&typeof Promise<"u"&&(h instanceof Promise||typeof h.then=="function")&&h.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(u){var h=this||n;return u._unlocked&&h._html5AudioPool.push(u),h},_autoSuspend:function(){var u=this;if(!(!u.autoSuspend||!u.ctx||typeof u.ctx.suspend>"u"||!n.usingWebAudio)){for(var h=0;h<u._howls.length;h++)if(u._howls[h]._webAudio){for(var m=0;m<u._howls[h]._sounds.length;m++)if(!u._howls[h]._sounds[m]._paused)return u}return u._suspendTimer&&clearTimeout(u._suspendTimer),u._suspendTimer=setTimeout(function(){if(u.autoSuspend){u._suspendTimer=null,u.state="suspending";var g=function(){u.state="suspended",u._resumeAfterSuspend&&(delete u._resumeAfterSuspend,u._autoResume())};u.ctx.suspend().then(g,g)}},3e4),u}},_autoResume:function(){var u=this;if(!(!u.ctx||typeof u.ctx.resume>"u"||!n.usingWebAudio))return u.state==="running"&&u.ctx.state!=="interrupted"&&u._suspendTimer?(clearTimeout(u._suspendTimer),u._suspendTimer=null):u.state==="suspended"||u.state==="running"&&u.ctx.state==="interrupted"?(u.ctx.resume().then(function(){u.state="running";for(var h=0;h<u._howls.length;h++)u._howls[h]._emit("resume")}),u._suspendTimer&&(clearTimeout(u._suspendTimer),u._suspendTimer=null)):u.state==="suspending"&&(u._resumeAfterSuspend=!0),u}};var n=new e,r=function(u){var h=this;if(!u.src||u.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}h.init(u)};r.prototype={init:function(u){var h=this;return n.ctx||d(),h._autoplay=u.autoplay||!1,h._format=typeof u.format!="string"?u.format:[u.format],h._html5=u.html5||!1,h._muted=u.mute||!1,h._loop=u.loop||!1,h._pool=u.pool||5,h._preload=typeof u.preload=="boolean"||u.preload==="metadata"?u.preload:!0,h._rate=u.rate||1,h._sprite=u.sprite||{},h._src=typeof u.src!="string"?u.src:[u.src],h._volume=u.volume!==void 0?u.volume:1,h._xhr={method:u.xhr&&u.xhr.method?u.xhr.method:"GET",headers:u.xhr&&u.xhr.headers?u.xhr.headers:null,withCredentials:u.xhr&&u.xhr.withCredentials?u.xhr.withCredentials:!1},h._duration=0,h._state="unloaded",h._sounds=[],h._endTimers={},h._queue=[],h._playLock=!1,h._onend=u.onend?[{fn:u.onend}]:[],h._onfade=u.onfade?[{fn:u.onfade}]:[],h._onload=u.onload?[{fn:u.onload}]:[],h._onloaderror=u.onloaderror?[{fn:u.onloaderror}]:[],h._onplayerror=u.onplayerror?[{fn:u.onplayerror}]:[],h._onpause=u.onpause?[{fn:u.onpause}]:[],h._onplay=u.onplay?[{fn:u.onplay}]:[],h._onstop=u.onstop?[{fn:u.onstop}]:[],h._onmute=u.onmute?[{fn:u.onmute}]:[],h._onvolume=u.onvolume?[{fn:u.onvolume}]:[],h._onrate=u.onrate?[{fn:u.onrate}]:[],h._onseek=u.onseek?[{fn:u.onseek}]:[],h._onunlock=u.onunlock?[{fn:u.onunlock}]:[],h._onresume=[],h._webAudio=n.usingWebAudio&&!h._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(h),h._autoplay&&h._queue.push({event:"play",action:function(){h.play()}}),h._preload&&h._preload!=="none"&&h.load(),h},load:function(){var u=this,h=null;if(n.noAudio){u._emit("loaderror",null,"No audio support.");return}typeof u._src=="string"&&(u._src=[u._src]);for(var m=0;m<u._src.length;m++){var g,x;if(u._format&&u._format[m])g=u._format[m];else{if(x=u._src[m],typeof x!="string"){u._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}g=/^data:audio\/([^;,]+);/i.exec(x),g||(g=/\.([^.]+)$/.exec(x.split("?",1)[0])),g&&(g=g[1].toLowerCase())}if(g||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),g&&n.codecs(g)){h=u._src[m];break}}if(!h){u._emit("loaderror",null,"No codec support for selected audio sources.");return}return u._src=h,u._state="loading",window.location.protocol==="https:"&&h.slice(0,5)==="http:"&&(u._html5=!0,u._webAudio=!1),new i(u),u._webAudio&&o(u),u},play:function(u,h){var m=this,g=null;if(typeof u=="number")g=u,u=null;else{if(typeof u=="string"&&m._state==="loaded"&&!m._sprite[u])return null;if(typeof u>"u"&&(u="__default",!m._playLock)){for(var x=0,y=0;y<m._sounds.length;y++)m._sounds[y]._paused&&!m._sounds[y]._ended&&(x++,g=m._sounds[y]._id);x===1?u=null:g=null}}var v=g?m._soundById(g):m._inactiveSound();if(!v)return null;if(g&&!u&&(u=v._sprite||"__default"),m._state!=="loaded"){v._sprite=u,v._ended=!1;var _=v._id;return m._queue.push({event:"play",action:function(){m.play(_)}}),_}if(g&&!v._paused)return h||m._loadQueue("play"),v._id;m._webAudio&&n._autoResume();var S=Math.max(0,v._seek>0?v._seek:m._sprite[u][0]/1e3),b=Math.max(0,(m._sprite[u][0]+m._sprite[u][1])/1e3-S),A=b*1e3/Math.abs(v._rate),E=m._sprite[u][0]/1e3,C=(m._sprite[u][0]+m._sprite[u][1])/1e3;v._sprite=u,v._ended=!1;var T=function(){v._paused=!1,v._seek=S,v._start=E,v._stop=C,v._loop=!!(v._loop||m._sprite[u][2])};if(S>=C){m._ended(v);return}var O=v._node;if(m._webAudio){var L=function(){m._playLock=!1,T(),m._refreshBuffer(v);var H=v._muted||m._muted?0:v._volume;O.gain.setValueAtTime(H,n.ctx.currentTime),v._playStart=n.ctx.currentTime,typeof O.bufferSource.start>"u"?v._loop?O.bufferSource.noteGrainOn(0,S,86400):O.bufferSource.noteGrainOn(0,S,b):v._loop?O.bufferSource.start(0,S,86400):O.bufferSource.start(0,S,b),A!==1/0&&(m._endTimers[v._id]=setTimeout(m._ended.bind(m,v),A)),h||setTimeout(function(){m._emit("play",v._id),m._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?L():(m._playLock=!0,m.once("resume",L),m._clearTimer(v._id))}else{var k=function(){O.currentTime=S,O.muted=v._muted||m._muted||n._muted||O.muted,O.volume=v._volume*n.volume(),O.playbackRate=v._rate;try{var H=O.play();if(H&&typeof Promise<"u"&&(H instanceof Promise||typeof H.then=="function")?(m._playLock=!0,T(),H.then(function(){m._playLock=!1,O._unlocked=!0,h?m._loadQueue():m._emit("play",v._id)}).catch(function(){m._playLock=!1,m._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),v._ended=!0,v._paused=!0})):h||(m._playLock=!1,T(),m._emit("play",v._id)),O.playbackRate=v._rate,O.paused){m._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}u!=="__default"||v._loop?m._endTimers[v._id]=setTimeout(m._ended.bind(m,v),A):(m._endTimers[v._id]=function(){m._ended(v),O.removeEventListener("ended",m._endTimers[v._id],!1)},O.addEventListener("ended",m._endTimers[v._id],!1))}catch(Y){m._emit("playerror",v._id,Y)}};O.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(O.src=m._src,O.load());var B=window&&window.ejecta||!O.readyState&&n._navigator.isCocoonJS;if(O.readyState>=3||B)k();else{m._playLock=!0,m._state="loading";var G=function(){m._state="loaded",k(),O.removeEventListener(n._canPlayEvent,G,!1)};O.addEventListener(n._canPlayEvent,G,!1),m._clearTimer(v._id)}}return v._id},pause:function(u){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"pause",action:function(){h.pause(u)}}),h;for(var m=h._getSoundIds(u),g=0;g<m.length;g++){h._clearTimer(m[g]);var x=h._soundById(m[g]);if(x&&!x._paused&&(x._seek=h.seek(m[g]),x._rateSeek=0,x._paused=!0,h._stopFade(m[g]),x._node))if(h._webAudio){if(!x._node.bufferSource)continue;typeof x._node.bufferSource.stop>"u"?x._node.bufferSource.noteOff(0):x._node.bufferSource.stop(0),h._cleanBuffer(x._node)}else(!isNaN(x._node.duration)||x._node.duration===1/0)&&x._node.pause();arguments[1]||h._emit("pause",x?x._id:null)}return h},stop:function(u,h){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"stop",action:function(){m.stop(u)}}),m;for(var g=m._getSoundIds(u),x=0;x<g.length;x++){m._clearTimer(g[x]);var y=m._soundById(g[x]);y&&(y._seek=y._start||0,y._rateSeek=0,y._paused=!0,y._ended=!0,m._stopFade(g[x]),y._node&&(m._webAudio?y._node.bufferSource&&(typeof y._node.bufferSource.stop>"u"?y._node.bufferSource.noteOff(0):y._node.bufferSource.stop(0),m._cleanBuffer(y._node)):(!isNaN(y._node.duration)||y._node.duration===1/0)&&(y._node.currentTime=y._start||0,y._node.pause(),y._node.duration===1/0&&m._clearSound(y._node))),h||m._emit("stop",y._id))}return m},mute:function(u,h){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"mute",action:function(){m.mute(u,h)}}),m;if(typeof h>"u")if(typeof u=="boolean")m._muted=u;else return m._muted;for(var g=m._getSoundIds(h),x=0;x<g.length;x++){var y=m._soundById(g[x]);y&&(y._muted=u,y._interval&&m._stopFade(y._id),m._webAudio&&y._node?y._node.gain.setValueAtTime(u?0:y._volume,n.ctx.currentTime):y._node&&(y._node.muted=n._muted?!0:u),m._emit("mute",y._id))}return m},volume:function(){var u=this,h=arguments,m,g;if(h.length===0)return u._volume;if(h.length===1||h.length===2&&typeof h[1]>"u"){var x=u._getSoundIds(),y=x.indexOf(h[0]);y>=0?g=parseInt(h[0],10):m=parseFloat(h[0])}else h.length>=2&&(m=parseFloat(h[0]),g=parseInt(h[1],10));var v;if(typeof m<"u"&&m>=0&&m<=1){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"volume",action:function(){u.volume.apply(u,h)}}),u;typeof g>"u"&&(u._volume=m),g=u._getSoundIds(g);for(var _=0;_<g.length;_++)v=u._soundById(g[_]),v&&(v._volume=m,h[2]||u._stopFade(g[_]),u._webAudio&&v._node&&!v._muted?v._node.gain.setValueAtTime(m,n.ctx.currentTime):v._node&&!v._muted&&(v._node.volume=m*n.volume()),u._emit("volume",v._id))}else return v=g?u._soundById(g):u._sounds[0],v?v._volume:0;return u},fade:function(u,h,m,g){var x=this;if(x._state!=="loaded"||x._playLock)return x._queue.push({event:"fade",action:function(){x.fade(u,h,m,g)}}),x;u=Math.min(Math.max(0,parseFloat(u)),1),h=Math.min(Math.max(0,parseFloat(h)),1),m=parseFloat(m),x.volume(u,g);for(var y=x._getSoundIds(g),v=0;v<y.length;v++){var _=x._soundById(y[v]);if(_){if(g||x._stopFade(y[v]),x._webAudio&&!_._muted){var S=n.ctx.currentTime,b=S+m/1e3;_._volume=u,_._node.gain.setValueAtTime(u,S),_._node.gain.linearRampToValueAtTime(h,b)}x._startFadeInterval(_,u,h,m,y[v],typeof g>"u")}}return x},_startFadeInterval:function(u,h,m,g,x,y){var v=this,_=h,S=m-h,b=Math.abs(S/.01),A=Math.max(4,b>0?g/b:g),E=Date.now();u._fadeTo=m,u._interval=setInterval(function(){var C=(Date.now()-E)/g;E=Date.now(),_+=S*C,_=Math.round(_*100)/100,S<0?_=Math.max(m,_):_=Math.min(m,_),v._webAudio?u._volume=_:v.volume(_,u._id,!0),y&&(v._volume=_),(m<h&&_<=m||m>h&&_>=m)&&(clearInterval(u._interval),u._interval=null,u._fadeTo=null,v.volume(m,u._id),v._emit("fade",u._id))},A)},_stopFade:function(u){var h=this,m=h._soundById(u);return m&&m._interval&&(h._webAudio&&m._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(m._interval),m._interval=null,h.volume(m._fadeTo,u),m._fadeTo=null,h._emit("fade",u)),h},loop:function(){var u=this,h=arguments,m,g,x;if(h.length===0)return u._loop;if(h.length===1)if(typeof h[0]=="boolean")m=h[0],u._loop=m;else return x=u._soundById(parseInt(h[0],10)),x?x._loop:!1;else h.length===2&&(m=h[0],g=parseInt(h[1],10));for(var y=u._getSoundIds(g),v=0;v<y.length;v++)x=u._soundById(y[v]),x&&(x._loop=m,u._webAudio&&x._node&&x._node.bufferSource&&(x._node.bufferSource.loop=m,m&&(x._node.bufferSource.loopStart=x._start||0,x._node.bufferSource.loopEnd=x._stop,u.playing(y[v])&&(u.pause(y[v],!0),u.play(y[v],!0)))));return u},rate:function(){var u=this,h=arguments,m,g;if(h.length===0)g=u._sounds[0]._id;else if(h.length===1){var x=u._getSoundIds(),y=x.indexOf(h[0]);y>=0?g=parseInt(h[0],10):m=parseFloat(h[0])}else h.length===2&&(m=parseFloat(h[0]),g=parseInt(h[1],10));var v;if(typeof m=="number"){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"rate",action:function(){u.rate.apply(u,h)}}),u;typeof g>"u"&&(u._rate=m),g=u._getSoundIds(g);for(var _=0;_<g.length;_++)if(v=u._soundById(g[_]),v){u.playing(g[_])&&(v._rateSeek=u.seek(g[_]),v._playStart=u._webAudio?n.ctx.currentTime:v._playStart),v._rate=m,u._webAudio&&v._node&&v._node.bufferSource?v._node.bufferSource.playbackRate.setValueAtTime(m,n.ctx.currentTime):v._node&&(v._node.playbackRate=m);var S=u.seek(g[_]),b=(u._sprite[v._sprite][0]+u._sprite[v._sprite][1])/1e3-S,A=b*1e3/Math.abs(v._rate);(u._endTimers[g[_]]||!v._paused)&&(u._clearTimer(g[_]),u._endTimers[g[_]]=setTimeout(u._ended.bind(u,v),A)),u._emit("rate",v._id)}}else return v=u._soundById(g),v?v._rate:u._rate;return u},seek:function(){var u=this,h=arguments,m,g;if(h.length===0)u._sounds.length&&(g=u._sounds[0]._id);else if(h.length===1){var x=u._getSoundIds(),y=x.indexOf(h[0]);y>=0?g=parseInt(h[0],10):u._sounds.length&&(g=u._sounds[0]._id,m=parseFloat(h[0]))}else h.length===2&&(m=parseFloat(h[0]),g=parseInt(h[1],10));if(typeof g>"u")return 0;if(typeof m=="number"&&(u._state!=="loaded"||u._playLock))return u._queue.push({event:"seek",action:function(){u.seek.apply(u,h)}}),u;var v=u._soundById(g);if(v)if(typeof m=="number"&&m>=0){var _=u.playing(g);_&&u.pause(g,!0),v._seek=m,v._ended=!1,u._clearTimer(g),!u._webAudio&&v._node&&!isNaN(v._node.duration)&&(v._node.currentTime=m);var S=function(){_&&u.play(g,!0),u._emit("seek",g)};if(_&&!u._webAudio){var b=function(){u._playLock?setTimeout(b,0):S()};setTimeout(b,0)}else S()}else if(u._webAudio){var A=u.playing(g)?n.ctx.currentTime-v._playStart:0,E=v._rateSeek?v._rateSeek-v._seek:0;return v._seek+(E+A*Math.abs(v._rate))}else return v._node.currentTime;return u},playing:function(u){var h=this;if(typeof u=="number"){var m=h._soundById(u);return m?!m._paused:!1}for(var g=0;g<h._sounds.length;g++)if(!h._sounds[g]._paused)return!0;return!1},duration:function(u){var h=this,m=h._duration,g=h._soundById(u);return g&&(m=h._sprite[g._sprite][1]/1e3),m},state:function(){return this._state},unload:function(){for(var u=this,h=u._sounds,m=0;m<h.length;m++)h[m]._paused||u.stop(h[m]._id),u._webAudio||(u._clearSound(h[m]._node),h[m]._node.removeEventListener("error",h[m]._errorFn,!1),h[m]._node.removeEventListener(n._canPlayEvent,h[m]._loadFn,!1),h[m]._node.removeEventListener("ended",h[m]._endFn,!1),n._releaseHtml5Audio(h[m]._node)),delete h[m]._node,u._clearTimer(h[m]._id);var g=n._howls.indexOf(u);g>=0&&n._howls.splice(g,1);var x=!0;for(m=0;m<n._howls.length;m++)if(n._howls[m]._src===u._src||u._src.indexOf(n._howls[m]._src)>=0){x=!1;break}return s&&x&&delete s[u._src],n.noAudio=!1,u._state="unloaded",u._sounds=[],u=null,null},on:function(u,h,m,g){var x=this,y=x["_on"+u];return typeof h=="function"&&y.push(g?{id:m,fn:h,once:g}:{id:m,fn:h}),x},off:function(u,h,m){var g=this,x=g["_on"+u],y=0;if(typeof h=="number"&&(m=h,h=null),h||m)for(y=0;y<x.length;y++){var v=m===x[y].id;if(h===x[y].fn&&v||!h&&v){x.splice(y,1);break}}else if(u)g["_on"+u]=[];else{var _=Object.keys(g);for(y=0;y<_.length;y++)_[y].indexOf("_on")===0&&Array.isArray(g[_[y]])&&(g[_[y]]=[])}return g},once:function(u,h,m){var g=this;return g.on(u,h,m,1),g},_emit:function(u,h,m){for(var g=this,x=g["_on"+u],y=x.length-1;y>=0;y--)(!x[y].id||x[y].id===h||u==="load")&&(setTimeout(function(v){v.call(this,h,m)}.bind(g,x[y].fn),0),x[y].once&&g.off(u,x[y].fn,x[y].id));return g._loadQueue(u),g},_loadQueue:function(u){var h=this;if(h._queue.length>0){var m=h._queue[0];m.event===u&&(h._queue.shift(),h._loadQueue()),u||m.action()}return h},_ended:function(u){var h=this,m=u._sprite;if(!h._webAudio&&u._node&&!u._node.paused&&!u._node.ended&&u._node.currentTime<u._stop)return setTimeout(h._ended.bind(h,u),100),h;var g=!!(u._loop||h._sprite[m][2]);if(h._emit("end",u._id),!h._webAudio&&g&&h.stop(u._id,!0).play(u._id),h._webAudio&&g){h._emit("play",u._id),u._seek=u._start||0,u._rateSeek=0,u._playStart=n.ctx.currentTime;var x=(u._stop-u._start)*1e3/Math.abs(u._rate);h._endTimers[u._id]=setTimeout(h._ended.bind(h,u),x)}return h._webAudio&&!g&&(u._paused=!0,u._ended=!0,u._seek=u._start||0,u._rateSeek=0,h._clearTimer(u._id),h._cleanBuffer(u._node),n._autoSuspend()),!h._webAudio&&!g&&h.stop(u._id,!0),h},_clearTimer:function(u){var h=this;if(h._endTimers[u]){if(typeof h._endTimers[u]!="function")clearTimeout(h._endTimers[u]);else{var m=h._soundById(u);m&&m._node&&m._node.removeEventListener("ended",h._endTimers[u],!1)}delete h._endTimers[u]}return h},_soundById:function(u){for(var h=this,m=0;m<h._sounds.length;m++)if(u===h._sounds[m]._id)return h._sounds[m];return null},_inactiveSound:function(){var u=this;u._drain();for(var h=0;h<u._sounds.length;h++)if(u._sounds[h]._ended)return u._sounds[h].reset();return new i(u)},_drain:function(){var u=this,h=u._pool,m=0,g=0;if(!(u._sounds.length<h)){for(g=0;g<u._sounds.length;g++)u._sounds[g]._ended&&m++;for(g=u._sounds.length-1;g>=0;g--){if(m<=h)return;u._sounds[g]._ended&&(u._webAudio&&u._sounds[g]._node&&u._sounds[g]._node.disconnect(0),u._sounds.splice(g,1),m--)}}},_getSoundIds:function(u){var h=this;if(typeof u>"u"){for(var m=[],g=0;g<h._sounds.length;g++)m.push(h._sounds[g]._id);return m}else return[u]},_refreshBuffer:function(u){var h=this;return u._node.bufferSource=n.ctx.createBufferSource(),u._node.bufferSource.buffer=s[h._src],u._panner?u._node.bufferSource.connect(u._panner):u._node.bufferSource.connect(u._node),u._node.bufferSource.loop=u._loop,u._loop&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop||0),u._node.bufferSource.playbackRate.setValueAtTime(u._rate,n.ctx.currentTime),h},_cleanBuffer:function(u){var h=this,m=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&u.bufferSource&&(u.bufferSource.onended=null,u.bufferSource.disconnect(0),m))try{u.bufferSource.buffer=n._scratchBuffer}catch{}return u.bufferSource=null,h},_clearSound:function(u){var h=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);h||(u.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(u){this._parent=u,this.init()};i.prototype={init:function(){var u=this,h=u._parent;return u._muted=h._muted,u._loop=h._loop,u._volume=h._volume,u._rate=h._rate,u._seek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++n._counter,h._sounds.push(u),u.create(),u},create:function(){var u=this,h=u._parent,m=n._muted||u._muted||u._parent._muted?0:u._volume;return h._webAudio?(u._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),u._node.gain.setValueAtTime(m,n.ctx.currentTime),u._node.paused=!0,u._node.connect(n.masterGain)):n.noAudio||(u._node=n._obtainHtml5Audio(),u._errorFn=u._errorListener.bind(u),u._node.addEventListener("error",u._errorFn,!1),u._loadFn=u._loadListener.bind(u),u._node.addEventListener(n._canPlayEvent,u._loadFn,!1),u._endFn=u._endListener.bind(u),u._node.addEventListener("ended",u._endFn,!1),u._node.src=h._src,u._node.preload=h._preload===!0?"auto":h._preload,u._node.volume=m*n.volume(),u._node.load()),u},reset:function(){var u=this,h=u._parent;return u._muted=h._muted,u._loop=h._loop,u._volume=h._volume,u._rate=h._rate,u._seek=0,u._rateSeek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++n._counter,u},_errorListener:function(){var u=this;u._parent._emit("loaderror",u._id,u._node.error?u._node.error.code:0),u._node.removeEventListener("error",u._errorFn,!1)},_loadListener:function(){var u=this,h=u._parent;h._duration=Math.ceil(u._node.duration*10)/10,Object.keys(h._sprite).length===0&&(h._sprite={__default:[0,h._duration*1e3]}),h._state!=="loaded"&&(h._state="loaded",h._emit("load"),h._loadQueue()),u._node.removeEventListener(n._canPlayEvent,u._loadFn,!1)},_endListener:function(){var u=this,h=u._parent;h._duration===1/0&&(h._duration=Math.ceil(u._node.duration*10)/10,h._sprite.__default[1]===1/0&&(h._sprite.__default[1]=h._duration*1e3),h._ended(u)),u._node.removeEventListener("ended",u._endFn,!1)}};var s={},o=function(u){var h=u._src;if(s[h]){u._duration=s[h].duration,c(u);return}if(/^data:[^;]+;base64,/.test(h)){for(var m=atob(h.split(",")[1]),g=new Uint8Array(m.length),x=0;x<m.length;++x)g[x]=m.charCodeAt(x);l(g.buffer,u)}else{var y=new XMLHttpRequest;y.open(u._xhr.method,h,!0),y.withCredentials=u._xhr.withCredentials,y.responseType="arraybuffer",u._xhr.headers&&Object.keys(u._xhr.headers).forEach(function(v){y.setRequestHeader(v,u._xhr.headers[v])}),y.onload=function(){var v=(y.status+"")[0];if(v!=="0"&&v!=="2"&&v!=="3"){u._emit("loaderror",null,"Failed loading audio file with status: "+y.status+".");return}l(y.response,u)},y.onerror=function(){u._webAudio&&(u._html5=!0,u._webAudio=!1,u._sounds=[],delete s[h],u.load())},a(y)}},a=function(u){try{u.send()}catch{u.onerror()}},l=function(u,h){var m=function(){h._emit("loaderror",null,"Decoding audio data failed.")},g=function(x){x&&h._sounds.length>0?(s[h._src]=x,c(h,x)):m()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(u).then(g).catch(m):n.ctx.decodeAudioData(u,g,m)},c=function(u,h){h&&!u._duration&&(u._duration=h.duration),Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue())},d=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var u=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),h=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),m=h?parseInt(h[1],10):null;if(u&&m&&m<9){var g=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!g&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:n,Howl:r}}),typeof t<"u"&&(t.Howler=n,t.Howl=r),typeof global<"u"?(global.HowlerGlobal=e,global.Howler=n,global.Howl=r,global.Sound=i):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=n,window.Howl=r,window.Sound=i)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var i=r._howls.length-1;i>=0;i--)r._howls[i].stereo(n);return r},HowlerGlobal.prototype.pos=function(n,r,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(r=typeof r!="number"?s._pos[1]:r,i=typeof i!="number"?s._pos[2]:i,typeof n=="number")s._pos=[n,r,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(n,r,i,s,o,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;var c=l._orientation;if(r=typeof r!="number"?c[1]:r,i=typeof i!="number"?c[2]:i,s=typeof s!="number"?c[3]:s,o=typeof o!="number"?c[4]:o,a=typeof a!="number"?c[5]:a,typeof n=="number")l._orientation=[n,r,i,s,o,a],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(n,r,i,s,o,a);else return c;return l},Howl.prototype.init=function(n){return function(r){var i=this;return i._orientation=r.orientation||[1,0,0],i._stereo=r.stereo||null,i._pos=r.pos||null,i._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},i._onstereo=r.onstereo?[{fn:r.onstereo}]:[],i._onpos=r.onpos?[{fn:r.onpos}]:[],i._onorientation=r.onorientation?[{fn:r.onorientation}]:[],n.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,r){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(n,r)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof n=="number")i._stereo=n,i._pos=[n,0,0];else return i._stereo;for(var o=i._getSoundIds(r),a=0;a<o.length;a++){var l=i._soundById(o[a]);if(l)if(typeof n=="number")l._stereo=n,l._pos=[n,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&e(l,s),s==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(n,0,0):l._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),i._emit("stereo",l._id);else return l._stereo}return i},Howl.prototype.pos=function(n,r,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(n,r,i,s)}}),o;if(r=typeof r!="number"?0:r,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof n=="number")o._pos=[n,r,i];else return o._pos;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof n=="number")c._pos=[n,r,i],c._node&&((!c._panner||c._panner.pan)&&e(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):c._panner.setPosition(n,r,i)),o._emit("pos",c._id);else return c._pos}return o},Howl.prototype.orientation=function(n,r,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(n,r,i,s)}}),o;if(r=typeof r!="number"?o._orientation[1]:r,i=typeof i!="number"?o._orientation[2]:i,typeof s>"u")if(typeof n=="number")o._orientation=[n,r,i];else return o._orientation;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof n=="number")c._orientation=[n,r,i],c._node&&(c._panner||(c._pos||(c._pos=o._pos||[0,0,-.5]),e(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):c._panner.setOrientation(n,r,i)),o._emit("orientation",c._id);else return c._orientation}return o},Howl.prototype.pannerAttr=function(){var n=this,r=arguments,i,s,o;if(!n._webAudio)return n;if(r.length===0)return n._pannerAttr;if(r.length===1)if(typeof r[0]=="object")i=r[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),n._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:n._panningModel});else return o=n._soundById(parseInt(r[0],10)),o?o._pannerAttr:n._pannerAttr;else r.length===2&&(i=r[0],s=parseInt(r[1],10));for(var a=n._getSoundIds(s),l=0;l<a.length;l++)if(o=n._soundById(a[l]),o){var c=o._pannerAttr;c={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:c.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:c.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:c.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:c.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:c.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:c.panningModel};var d=o._panner;d?(d.coneInnerAngle=c.coneInnerAngle,d.coneOuterAngle=c.coneOuterAngle,d.coneOuterGain=c.coneOuterGain,d.distanceModel=c.distanceModel,d.maxDistance=c.maxDistance,d.refDistance=c.refDistance,d.rolloffFactor=c.rolloffFactor,d.panningModel=c.panningModel):(o._pos||(o._pos=n._pos||[0,0,-.5]),e(o,"spatial"))}return n},Sound.prototype.init=function(n){return function(){var r=this,i=r._parent;r._orientation=i._orientation,r._stereo=i._stereo,r._pos=i._pos,r._pannerAttr=i._pannerAttr,n.call(this),r._stereo?i.stereo(r._stereo):r._pos&&i.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var r=this,i=r._parent;return r._orientation=i._orientation,r._stereo=i._stereo,r._pos=i._pos,r._pannerAttr=i._pannerAttr,r._stereo?i.stereo(r._stereo):r._pos?i.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,i._refreshBuffer(r)),n.call(this)}}(Sound.prototype.reset);var e=function(n,r){r=r||"spatial",r==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}}()}),wr=class{modifyById(t,e){let n=this;if(n[t]===void 0)throw new Error("not expected");{let r={...n,[t]:e};return Object.setPrototypeOf(r,wr.prototype),r}}add(t,e){var n,r;return(r=(n=this.runOp({type:1,id:t,data:e}))==null?void 0:n.data)!=null?r:this}runOp(t){let e=this;if(t.type===1){let n=e[t.id],r;n===void 0?r={type:2,id:t.id}:r={type:1,id:t.id,data:n};let{id:i,data:s}=t,o={...e,[i]:s};return Object.setPrototypeOf(o,wr.prototype),{data:o,actual:t,reverse:r}}else if(t.type===2){let{id:n}=t,r=e[n];if(r===void 0)return null;{let i={...e};return Object.setPrototypeOf(i,wr.prototype),delete i[n],{data:i,actual:t,reverse:{type:1,id:n,data:r}}}}throw new Error("illegal arg")}};function D2(t){if(t.deepFreeze!==void 0){t.deepFreeze(t);return}let e=Object.getOwnPropertyNames(t);for(let n of e){let r=t[n];r&&typeof r=="object"&&D2(r)}return Object.freeze(t)}function PX(t,e){let n=0;for(;n<t.length&&n<e.length;){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1;n+=1}return n!==e.length?-1:n!==t.length?1:0}var p4=class extends Error{};function Ya(t,e,n){if(t===void 0?e===void 0?(t=0,e=10):t=e-10:e===void 0&&(e=t+10),t>e){let s=t;t=e,e=s}let r=[],i=1/(n+1);for(let s=0;s<n;s++){let o=t+(e-t)*(s+.75+Math.random()*.5)*i;r.push(o)}return r}function Mv(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array}function LX(){return typeof process<"u"}function m4(t,e){for(let n of t)e(n.id,n.data),m4(n.children,e)}function g4(t,e){e(t.id,t.data);for(let n of t.children)g4(n,e)}var mi=class extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,mi.prototype)}deepFreeze(){let t=0;for(;t<this.length;)D2(this[t]),t++}fillCaches0(t,e){this.objCaches.set(t.id,t),this.parentCaches.set(t.id,e);for(let n of t.children)this.fillCaches0(n,t.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let t of this)this.fillCaches0(t,null)}}randomId(){this.fillCaches();let t=Array.from(this.objCaches.keys());if(t.length!==0)return t[Math.max(0,Math.floor(Math.random()*t.length)-1)]}isDescendantOf(t,e){for(;t;){let n=this.parent(t);if(n===e)return!0;t=n}return!1}data(t){var e;return(e=this.get(t))==null?void 0:e.data}has(t){return this.childrenOf(t)!==void 0}get(t){return this.fillCaches(),this.objCaches.get(t)}childrenOf(t){var e;return t===null?this:(e=this.get(t))==null?void 0:e.children}traverseFrom(t,e){if(t===null)this.traverse(e);else{let n=this.get(t);n&&g4(n,e)}}traverse(t){m4(this,t)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(t){return this.fillCaches(),this.parentCaches.get(t)}childrenArray(t){return t===null?this:this.get(t).children}modifyById(t,e){if(this.get(t)===void 0)throw new Error("not expected");{let n=this.parent(t),r=this.childrenArray(n),i=r.findIndex(o=>o.id===t);if(i<0)throw new Error("not expected");let s=r[i];return r=[...r],r[i]={...s,data:e},this.modifyArrayBy(n,r)}}modifyArrayBy(t,e){let n=t,r=e;for(;n!==null;){let s=r,o=n;if(n=this.parent(n),n===void 0)throw new Error;r=this.childrenArray(n);let a=r.findIndex(l=>l.id===o);if(a<0)throw new Error;r=[...r],r[a]={...r[a],children:s}}Object.setPrototypeOf(r,mi.prototype);let i=r;return i.fillCaches(),i}runOp(t){switch(t.type){case 7:return this.addOp(t);case 8:return this.deleteOp(t);case 9:return this.moveOp(t)}}checkDuplicatedIdRec({id:t,children:e}){if(this.get(t)!==void 0)return!0;for(let n of e)if(this.checkDuplicatedIdRec(n))return!0;return!1}addOp(t){let{parent:e,fi:n,id:r,data:i,children:s}=t;if(e!==null&&this.get(e)===void 0||this.checkDuplicatedIdRec(t))return null;{let o=e,a=this.childrenArray(o),l={fi:n,id:r,data:i,children:s};return a=[...a,l],a.sort((c,d)=>c.fi-d.fi),t.localIndex=a.indexOf(l),{data:this.modifyArrayBy(o,a),actual:t,reverse:{type:8,id:r}}}}deleteOp(t){let{id:e}=t;if(this.get(e)===null)return null;{let n=this.parent(e);if(n===void 0)return null;let r=this.childrenArray(n),i=r.findIndex(o=>o.id===e);t.localIndex=i,r=[...r];let s=r.splice(i,1)[0];return{data:this.modifyArrayBy(n,r),actual:t,reverse:{type:7,...s,parent:n}}}}moveOp(t){let{parent:e,fi:n,id:r}=t;if(e!==null&&this.get(e)===void 0)return this.deleteOp({type:8,id:r});if(e!==null){let u=e;for(;u!==null;){if(u===void 0)throw new Error;if(u===r)throw new p4("cyclic tree");u=this.parent(u)}}let i=this.parent(r);if(i===void 0)return null;let s=i,o=this.childrenArray(i),a=o.findIndex(u=>u.id===r);o=[...o];let l=o.splice(a,1)[0],c=this.modifyArrayBy(i,o);i=e,o=c.childrenArray(i);let d=l.fi;return l={...l,fi:n},o=[...o,l],o.sort((u,h)=>u.fi-h.fi),t.localIndex=o.indexOf(l),c=c.modifyArrayBy(i,o),{data:c,actual:t,reverse:{type:9,parent:s,fi:d,id:r}}}previous(t,e){if(e===null){let r=this.childrenArray(t);return r.length===0?null:r[r.length-1].id}let n=null;for(let r of this.childrenArray(t)){if(r.id===e)return n;n=r.id}return null}traverseSortNext(t){let e=this.parent(t);if(e!==void 0){let n=this.childrenArray(e),r=n.findIndex(i=>i.id===t)+1;if(r<n.length)return n[r].id;if(e)return this.traverseSortNext(e)}}sortNext(t){let e=this.childrenArray(t);return e.length>0?e[0].id:this.traverseSortNext(t)}traverseSortPrevious(t){let e=this.childrenArray(t);return e.length>0?this.traverseSortPrevious(e[e.length-1].id):t}sortPrevious(t){let e=this.parent(t);if(e!==void 0){let n=this.childrenArray(e),r=n.findIndex(i=>i.id===t)-1;return r>=0?this.traverseSortPrevious(n[r].id):e}}getAllSorted(t){let e=[];for(let n of t){let r=this.getWithSortKey(n.id);r!==void 0&&e.push({...n,...r})}e.sort((n,r)=>PX(n.sortKey,r.sortKey));for(let n of e)delete n.sortKey;return e}getWithSortKey(t){var e=t;let n=[],r=this.get(e),i=r;if(r!==void 0){for(;e;)n.splice(0,0,r.fi),e=this.parent(e),e!==null&&(r=this.get(e));return{...i,sortKey:n}}}insertBeforeHelper(t,e,n){return this.insertAfterHelper(t,this.previous(t,e),n)}insertAfterHelper(t,e,n){let r=this.childrenArray(t);if(e===null){if(r.length===0)return Ya(0,n,n);{let i=r[0].fi;return Ya(i-n,i,n)}}else{let i=this.get(e);if(i===void 0||this.parent(e)!==t)throw new Error("illegal args");let s=r.find(o=>o.fi>i.fi);if(s===void 0){let o=r[r.length-1].fi;return Ya(o,o+n,n)}else return Ya(i.fi,s.fi,n)}}},Ev;(t=>{function e(n,r){if(Array.isArray(n)){let i=r.props,s={},o=[...n],a=!1;if(i)for(let l of Object.keys(i)){let c=parseInt(l);if(isNaN(c))throw new Error("wrong index");s[l]=o[c],o[c]=i[l],a=!0}return a?{data:o,actual:r,reverse:{type:0,props:s}}:null}else{let i=r.props,s={},o={...n},a=!1;if(i)for(let l of Object.keys(i)){s[l]=o[l];let c=i[l];c===void 0?delete o[l]:o[l]=c,a=!0}return a?{data:o,actual:r,reverse:{type:0,props:s}}:null}}t.runOp=e})(Ev||(Ev={}));var an=class extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,an.prototype)}deepFreeze(){let t=0;for(;t<this.length;)D2(this[t]),t++}fillCaches0(t){this.objCaches.set(t.id,t)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let t of this)this.fillCaches0(t)}}randomId(){this.fillCaches();let t=Array.from(this.objCaches.keys());if(t.length!==0)return t[Math.max(0,Math.floor(Math.random()*t.length)-1)]}data(t){var e;return(e=this.get(t))==null?void 0:e.data}get(t){return this.fillCaches(),this.objCaches.get(t)}modifyById(t,e){if(this.get(t)===void 0)throw new Error("not expected");{let n=this,r=n.findIndex(s=>s.id===t);if(r<0)throw new Error("not expected");let i=n[r];return n=[...n],n[r]={...i,data:e},this.modifyArrayBy(n)}}modifyArrayBy(t){Object.setPrototypeOf(t,an.prototype);let e=t;return LX()||e.fillCaches(),e}runOp(t){switch(t.type){case 4:return this.addOp(t);case 5:return this.deleteOp(t);case 6:return this.moveOp(t)}}addOp(t){let{fi:e,id:n,data:r}=t,i=this,s={fi:e,id:n,data:r};return i=[...i,s],i.sort((o,a)=>o.fi-a.fi),t.localIndex=i.indexOf(s),{data:this.modifyArrayBy(i),actual:t,reverse:{type:5,id:n}}}deleteOp(t){let{id:e}=t,n=this,r=n.findIndex(s=>s.id===e);if(r===-1)return null;t.localIndex=r,n=[...n];let i=n.splice(r,1)[0];return{data:this.modifyArrayBy(n),actual:t,reverse:{type:4,...i}}}moveOp(t){let{fi:e,id:n}=t,r=this;r=[...r];let i=r.findIndex(a=>a.id===n);if(i===-1)return null;let s=r[i].fi,o={...r[i],fi:e};return r[i]=o,r.sort((a,l)=>a.fi-l.fi),t.localIndex=r.indexOf(o),{data:this.modifyArrayBy(r),actual:t,reverse:{type:6,fi:s,id:n}}}previous(t){if(t===null)return this.length===0?null:this[this.length-1].id;let e=null;for(let n of this){if(n.id===t)return e;e=n.id}return null}insertBeforeHelper(t,e){return this.insertAfterHelper(this.previous(t),e)}insertAfterHelper(t,e){let n=this;if(t===null){if(n.length===0)return Ya(0,e,e);{let r=n[0].fi;return Ya(r-e,r,e)}}else{let r=this.get(t);if(r===void 0)throw new Error("illegal args");let i=n.find(s=>s.fi>r.fi);if(i===void 0){let s=n[n.length-1].fi;return Ya(s,s+e,e)}else return Ya(r.fi,i.fi,e)}}},Eu=class{unusedFun(t){}runOp(t){let e=[],n=this,r=0,i={};for(;r<t.path.length;){if(e.push(n),n=n===void 0?void 0:n[t.path[r]],n instanceof mi||n instanceof an)return null;r+=1}n={...n};for(let[a,l]of Object.entries(t.props)){let c=n[a];i[a]=c,l===void 0?delete n[a]:n[a]=l}for(;r>0;)Object.keys(n).length===0?(n={...e[r-1]},delete n[t.path[r-1]]):n={...e[r-1],[t.path[r-1]]:n},r-=1;let s=Object.setPrototypeOf(n,Eu.prototype),o={...t,props:i};return{data:s,actual:t,reverse:o}}},sP;(t=>{function e(r,i){var s;return(s=gp(r,i))!=null?s:r}t.apply=e;function n(r,i){if(i.type===0){let s=0,o=i.path,a=r;for(;s<o.length&&a!==void 0;){if(a=Vu.zoomOnce(a,o[s]),a instanceof mi||a instanceof an)return;s+=1}if(a===void 0)return i;if(typeof a=="string"||typeof a=="number"||Mv(a))return;if(a&&typeof a=="object"){let l={...i.props};for(let c of Object.keys(a))delete l[c];return{...i,props:l}}else return}else if(i.type===1||i.type===4||i.type===7){let s=Vu.zoom(r,[...i.path,i.id]);if(s===void 0)return i;if(typeof s=="string"||typeof s=="number"||Mv(s))return;if(s&&typeof s=="object"){let o={...i.data,...s};return{...i,data:o}}else return}else return i}t.filterOp=n})(sP||(sP={}));function v4(t,e){if(e===void 0)return;let n=!1,r=t.map(i=>{let s=i.id,o=gp(i.data,e[s]);n=n||o!==void 0,o===void 0&&(o=i.data);let a=v4(i.children,e);return a!==void 0?n=!0:a=i.children,{...i,id:s,data:o,children:a}});if(n)return r}function OX(t,e){if(e===void 0)return;let n=!1,r=t.map(i=>{let s=i.id,o=gp(i.data,e[s]);return n=n||o!==void 0,o===void 0&&(o=i.data),{...i,id:s,data:o}});if(n)return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),r}function gp(t,e){if(e!==void 0){if(e instanceof an||e instanceof mi||typeof e=="string"||typeof e=="number"||e===null)return e;if(t instanceof mi){let n=v4(t,e);return n!==void 0&&Object.setPrototypeOf(n,Object.getPrototypeOf(t)),n}else{if(t instanceof an)return OX(t,e);if(Array.isArray(t)){let n=!1,r=t.map((i,s)=>{let o=gp(i,e[s]);return n=n||o!==void 0,o===void 0&&(o=i),o});return n?(Object.setPrototypeOf(r,Object.getPrototypeOf(t)),r):void 0}else if(t&&typeof t=="object"){let n={},r=!1;for(let[i,s]of Object.entries(t)){let o=gp(s,e[i]);r=r||o!==void 0,o===void 0&&(o=s),n[i]=o}return r?(Object.setPrototypeOf(n,Object.getPrototypeOf(t)),n):void 0}else return e!=null?e:t}}}function IX(t,e){var r;let n={cur:[],result:[],len:0};return t=(r=vp(t,e,n))!=null?r:t,[t,n.result]}function Tv(t,e){return t===null?null:(t.cur[t.len]=e,t.len+=1,t)}function Av(t){t&&(t.len-=1)}function DX(t){if(t===null)return null;t.result.push(t.cur.slice(0,t.len))}function y4(t,e,n){let r=!1,i=t.map(s=>{let o=s.id,a=e[o];if(a!==void 0&&typeof a=="string"&&(r=!0,o=a,n!==null))throw new Error("not supported");let l=vp(s.data,e,Tv(n,o));Av(n),r=r||l!==void 0,l===void 0&&(l=s.data);let c=y4(s.children,e,n);return c!==void 0?r=!0:c=s.children,{...s,id:o,data:l,children:c}});if(r)return i}function RX(t,e,n){let r=!1,i=t.map(s=>{let o=s.id,a=e[o];if(a!==void 0&&typeof a=="string"&&(r=!0,o=a,n!==null))throw new Error("not supported");let l=vp(s.data,e,Tv(n,o));return Av(n),r=r||l!==void 0,l===void 0&&(l=s.data),{...s,id:o,data:l}});if(r)return Object.setPrototypeOf(i,Object.getPrototypeOf(t)),i}function vp(t,e,n){if(t instanceof mi){let r=y4(t,e,n);return r!==void 0&&Object.setPrototypeOf(r,Object.getPrototypeOf(t)),r}else{if(t instanceof an)return RX(t,e,n);if(Array.isArray(t)){let r=!1,i=t.map((s,o)=>{let a=vp(s,e,Tv(n,o));return Av(n),r=r||a!==void 0,a===void 0&&(a=s),a});return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(t)),i):void 0}else if(t&&typeof t=="object"){let r={},i=!1;for(let[s,o]of Object.entries(t))if(s!=="name"&&s!=="text"){let a=e[s];if(typeof a=="string"){if(n!==null)throw new Error("not supported");i=!0,s=a}let l=vp(o,e,Tv(n,s));Av(n),i=i||l!==void 0,l===void 0&&(l=o),r[s]=l}else r[s]=o;return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(t)),r):void 0}else if(typeof t=="string"){let r=e[t];if(r!==void 0){if(t.length!==36)throw new Error("for now you should only call this method when the key is a uuid");DX(n)}return r}else return}}var oP;(t=>{function e(n,r){let i=Vu.zoom(r,n.path);if(typeof i=="object"){let s={};for(let o of Object.keys(n.props))s[o]=i[o];return{...n,props:s}}else return{...n,props:{}}}t.replaceProps=e})(oP||(oP={}));var vu;(t=>{function e(l,c){return{...l,path:l.path.slice(c)}}t.drop=e;function n(l,c){var d,u;return(u=(d=r(l,c))==null?void 0:d.data)!=null?u:l}t.applySimple=n;function r(l,c){var h,m;let d=c.path;for(var u=[];;){let g;if(l instanceof Eu&&c.type===0&&(g=l.runOp({...c,path:d.slice(u.length)}),g===null&&(g=void 0)),u.length===d.length&&(l instanceof mi||l instanceof an||l instanceof wr?g=l.runOp(c):g=Ev.runOp(l,c)),g!==void 0)if(g!==null){let v=g.data;for(let _=u.length-1;_>=0;_--){let S=d[_],b=u[_];if(b instanceof mi){if(typeof S=="number")throw new Error("illegal arg");v=b.modifyById(S,v)}else if(b instanceof an){if(typeof S=="number")throw new Error("illegal arg");v=b.modifyById(S,v)}else if(b instanceof wr){if(typeof S=="number")throw new Error("illegal arg");v=b.modifyById(S,v)}else if(b instanceof Eu){let A={...b,[S]:v};v=Object.setPrototypeOf(A,Eu.prototype)}else if(typeof b=="object")if(Array.isArray(b)){if(typeof S=="string"&&(S=parseInt(S),isNaN(S)))throw new Error("Invalid path");let A=v;v=[...b],v[S]=A}else v={...b,[S]:v};else return null}return{data:v,actual:{...g.actual,path:d},reverse:{...g.reverse,path:d}}}else return null;let x=d[u.length],y;if(l instanceof mi){if(typeof x=="number")throw new Error("");y=(h=l.get(x))==null?void 0:h.data}else if(l instanceof an){if(typeof x=="number")throw new Error("");y=(m=l.get(x))==null?void 0:m.data}else l!==null&&(y=l[x]);if(y!==void 0)u.push(l),l=y;else return null}}t.apply=r;function i(l,c){for(let d=0;d<l.length&&d<c.length;d++)if(l[d]!==c[d])return!0;return!1}t.pathDisjoint=i;function s(l,c){if(l.length!==c.length)return!1;for(let d=0;d<l.length;d++)if(l[d]!==c[d])return!1;return!0}t.pathEq=s;function o(l,c){return i(l.path,c.path)}t.commutative=o;function a(l,c){return l.type===0&&c.type===0&&s(l.path,c.path)?Object.keys(l.props).every(d=>c.props[d]!==void 0):!1}t.subsumed=a})(vu||(vu={}));var aP;(t=>{function e(){return[]}t.empty=e;function n(c,d){let u=[];for(let h of c){let[m,...g]=h.path;m===d&&u.push({...h,path:g})}return u}t.removePrefix=n;function r(c,d){return c.map(u=>({...u,path:[d,...u.path]}))}t.addPrefix=r;function i(c,d){return[...c,...d]}t.concat=i;function s(c,d){return[...c.filter(u=>!d.some(h=>vu.subsumed(u,h))),...d]}t.compress=s;function o(c,d){return c.every(u=>d.every(h=>vu.commutative(u,h)))}t.commutative=o;function a(c,d){for(let u of d){let h=l(c,u);h!==null&&(c=h.data)}return c}t.applyAll=a;function l(c,d){var u=c;let h=[],m=[];for(let g of d)try{if(g.type===3){let x=Vu.zoom(u,[...g.path,g.id]),y=vu.apply(u,{...g,type:2});if(y!==null){u=y.data;let[v,_]=IX(u,{[g.id]:x});u=v;for(let S of _){let b=S[S.length-1];S.splice(S.length-1,1),h.push({type:0,path:S,props:{[b]:x}}),m.push({type:0,path:S,props:{[b]:g.id}})}m.push(y.reverse),h.push(y.actual)}}else{let x=vu.apply(u,g);x!==null&&(h.push(x.actual),u=x.data,m.push(x.reverse))}}catch(x){if(x instanceof p4)return null;throw x}return{data:u,actual:h,reverse:m.reverse()}}t.apply=l})(aP||(aP={}));var x4=Symbol(),Xp=Symbol(),Yp=class{reportOp(t,e,n=[]){let r=this;if(e===null)return;r._current=e.data;let i=n;for(;!(r instanceof S4);){let s=r._path,o=r._current;if(s!==""&&i.splice(0,0,s),r=r._parent,r===null)return;r.update(s,o)}r.push(i,t,e.actual,e.reverse)}deleteChildren(t){if(this._children){let e=this._children[t];if(e){let n=e[Xp];n&&n(),delete this._children[t]}}}},zX=class extends Yp{constructor(t,e,n){super(),this._parent=t,this._path=e,this._current=n}update(t,e){if(Array.isArray(this._current)){if(typeof t=="string"&&(t=parseInt(t),isNaN(t)))throw new Error("Invalid path");this._current=[...this._current],this._current[t]=e}else this._current={...this._current,[t]:e}}runOp(t){this.reportOp(t,Ev.runOp(this._current,t),t.path)}},NX=class extends Yp{constructor(t,e,n){super(),this._parent=t,this._path=e,this._current=n}update(t,e){this._current={...this._current,[t]:e},Object.setPrototypeOf(this._current,wr.prototype)}runOp(t){this.reportOp(t,this._current.runOp(t))}},_4={get(t,e){if(e===Xp)return()=>{t._parent=null};if(e===x4)return t._current;let{_current:n,_children:r}=t;if(e==="push"&&Array.isArray(n))throw new Error("not supported to expand array");let i=r===void 0?void 0:r[e];if(i!==void 0)return i;let s=n[e],o=Vy(t,e,s);return o!==s?(r===void 0&&(r={},t._children=r),r[e]=o,o):s},has(t,e){return e in t._current},ownKeys(t){return Reflect.ownKeys(t._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(t){return Object.getPrototypeOf(t._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(t,e){let n=t._current,r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:!0,enumerable:r.enumerable,value:n[e]}}},kX={..._4,set(t,e,n){var i;let r={type:0,props:{[e]:(i=ms(n))!=null?i:n}};return t.deleteChildren(e),t.runOp(r),!0},deleteProperty(t,e){let n={type:0,props:{[e]:void 0}};return t.deleteChildren(e),t.runOp(n),!0}},BX={..._4,set(t,e,n){return n===void 0?this.deleteProperty(t,e):(t.deleteChildren(e),t.runOp({type:1,id:e,data:n})),!0},deleteProperty(t,e){return t.runOp({type:2,id:e}),!0}},R2=class extends Yp{constructor(t,e,n){super(),this._children={},this._parent=t,this._path=e,this._current=n,this[Xp]=()=>{this._parent=null}}unproxy(){return this._current}update(t,e){this._current=this._current.modifyById(t,e)}runOp(t){this.reportOp(t,this._current.runOp(t))}randomId(){return this._current.randomId()}isDescendantOf(t,e){return this._current.isDescendantOf(t,e)}childrenOf(t){return this._current.childrenOf(t)}traverse(t){return this._current.traverse(t)}get(t){return this._current.get(t)}parent(t){return this._current.parent(t)}traverse(t){this._current.traverse((e,n)=>{t(e,this.data(e))})}data(t){var o;let{_current:e,_children:n}=this,r=n===void 0?void 0:n[t];if(r!==void 0)return r;let i=(o=e.get(t))==null?void 0:o.data,s=Vy(this,t,i);return s!==i?(n===void 0&&(n={},this._children=n),n[t]=s,s):i}add(t,e,n,r,i){this.runOp({type:7,parent:t,fi:e,id:n,data:r,children:i})}move(t,e,n){this.runOp({type:9,parent:t,fi:e,id:n})}insertAfter(t,e,n){let r=this._current.insertAfterHelper(t,e,n.length);for(let i=0;i<n.length;i++){let s=n[i];this.add(t,r[i],s.id,s.data,s.children)}}insertBefore(t,e,n){let r=this._current.insertBeforeHelper(t,e,n.length);for(let i=0;i<n.length;i++){let s=n[i];this.add(t,r[i],s.id,s.data,s.children)}}moveAfter(t,e,n){let r=this._current.insertAfterHelper(t,e,n.length);for(let i=0;i<n.length;i++){let s=n[i];this.move(t,r[i],s)}}moveBefore(t,e,n){let r=this._current.insertBeforeHelper(t,e,n.length);for(let i=0;i<n.length;i++){let s=n[i];this.move(t,r[i],s)}}delete(t){this.deleteChildren(t),this.runOp({type:8,id:t})}sortNext(t){return this._current.sortNext(t)}sortPrevious(t){return this._current.sortPrevious(t)}getAllSorted(t){return this._current.getAllSorted(t)}},w4=class extends Yp{constructor(t,e,n){super(),this._parent=t,this._path=e,this._current=n,this[Xp]=()=>{this._parent=null}}feedOp(t){let{path:e,...n}=t;this.reportOp(n,vu.apply(this._current,t),e)}},z2=class extends Yp{constructor(t,e,n){super(),this._children={},this._parent=t,this._path=e,this._current=n,this[Xp]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(t){let e=this.length;for(let n=0;n<e;n++){let r=this._current[n].id,i=this._current[n].fi;t(this.data(this._current[n].id),r,i)}}find(t){let e=this.length;for(let n=0;n<e;n++){let r=this._current[n].id;if(t(this.data(r),r))return this.get(r)}}update(t,e){this._current=this._current.modifyById(t,e)}randomId(){return this._current.randomId()}get(t){return{...this._current.get(t),data:this.data(t)}}data(t){var o;let{_current:e,_children:n}=this,r=n===void 0?void 0:n[t];if(r!==void 0)return r;let i=(o=e.get(t))==null?void 0:o.data,s=Vy(this,t,i);return s!==i?(n===void 0&&(n={},this._children=n),n[t]=s,s):i}runOp(t){this.reportOp(t,this._current.runOp(t))}add(t,e,n){this.runOp({type:4,fi:t,id:e,data:n})}move(t,e){this.runOp({type:6,fi:t,id:e})}insertAfter(t,e){let n=this._current.insertAfterHelper(t,e.length);for(let r=0;r<e.length;r++){let i=e[r];this.add(n[r],i.id,i.data)}}insertBefore(t,e){let n=this._current.insertBeforeHelper(t,e.length);for(let r=0;r<e.length;r++){let i=e[r];this.add(n[r],i.id,i.data)}}moveAfter(t,e){let n=this._current.insertAfterHelper(t,e.length);for(let r=0;r<e.length;r++){let i=e[r];this.move(n[r],i)}}moveBefore(t,e){let n=this._current.insertBeforeHelper(t,e.length);for(let r=0;r<e.length;r++){let i=e[r];this.move(n[r],i)}}delete(t){this.deleteChildren(t),this.runOp({type:5,id:t})}};function k_(t,e,n){if(t.length>0){let r=t[t.length-1];if(r.type===0&&e.type===0&&Vu.equal(r.path,n)){Object.assign(r.props,e.props);return}}t.push({...e,path:n})}var S4=class{constructor(t){this.ts=[],this.actual=[],this.reverse=[],this._current=t}update(t,e){if(t!=="")throw new Error("");this._current=e}push(t,e,n,r){k_(this.ts,e,t),k_(this.actual,n,t),k_(this.reverse,r,t)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function Vy(t,e,n){return n instanceof mi?new R2(t,e,n):n instanceof an?new z2(t,e,n):n instanceof Eu?new w4(t,e,n):n instanceof wr?new Proxy(new NX(t,e,n),BX):n!==null&&typeof n=="object"?Mv(n)?n:new Proxy(new zX(t,e,n),kX):n}function b4(t){let e=new S4(t);return[Vy(e,"",t),e]}function lP(t,e){let[n,r]=b4(t);return e(n),r.result()}function ms(t){return t instanceof R2||t instanceof z2||t instanceof w4?t._current:t!==null&&typeof t=="object"?t[x4]:t}var Vu;(t=>{function e(s,o){if(o.length===s.length)for(var a=0;a<s.length;){if(s[a]!==o[a])return!1;a+=1}else return!1;return!0}t.equal=e;function n(s,o,a){let l=i(a,s);if(l!==void 0&&typeof l=="object"&&l!==null){let c={...o};return Object.keys(l).forEach(d=>{delete c[d]}),c}else return o}t.removeOverridden=n;function r(s,o){if((s instanceof mi||s instanceof R2)&&typeof o=="string"||(s instanceof an||s instanceof z2)&&typeof o=="string")return s.data(o);if(typeof o=="number"&&Array.isArray(s)||typeof o=="string"&&typeof s=="object")return s[o]}t.zoomOnce=r;function i(s,o,a=0){for(;a<o.length&&s!==void 0;)s=r(s,o[a]),a+=1;return s}t.zoom=i})(Vu||(Vu={}));var M4=class{},uP=class extends M4{constructor(t){super(),this.id=t}},cP=class extends M4{constructor(t){super(),this.data=t}},QS;try{QS=new TextDecoder}catch{}var Ye,cl,he=0,oi={},Xt,Za,rs=0,vo=0,Ei,sa,Yr=[],Qt,dP={useRecords:!1,mapsAsObjects:!0},E4=class{},T4=new E4;T4.name="MessagePack 0xC1";var zd=!1,Cv=class{constructor(t){t&&(t.useRecords===!1&&t.mapsAsObjects===void 0&&(t.mapsAsObjects=!0),t.structures?t.structures.sharedLength=t.structures.length:t.getStructures&&((t.structures=[]).uninitialized=!0,t.structures.sharedLength=0)),Object.assign(this,t)}unpack(t,e){if(Ye)return I4(()=>(eb(),this?this.unpack(t,e):Cv.prototype.unpack.call(dP,t,e)));cl=e>-1?e:t.length,he=0,vo=0,Za=null,Ei=null,Ye=t;try{Qt=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(n){throw Ye=null,t instanceof Uint8Array?n:new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof Cv){if(oi=this,this.structures)return Xt=this.structures,s0();(!Xt||Xt.length>0)&&(Xt=[])}else oi=dP,(!Xt||Xt.length>0)&&(Xt=[]);return s0()}unpackMultiple(t,e){let n,r=0;try{zd=!0;let i=t.length,s=this?this.unpack(t,i):Gy.unpack(t,i);if(e){for(e(s);he<i;)if(r=he,e(s0())===!1)return}else{for(n=[s];he<i;)r=he,n.push(s0());return n}}catch(i){throw i.lastPosition=r,i.values=n,i}finally{zd=!1,eb()}}_mergeStructures(t,e){t=t||[];for(let n=0,r=t.length;n<r;n++){let i=t[n];i&&(i.isShared=!0,n>=32&&(i.highByte=n-32>>5))}t.sharedLength=t.length;for(let n in e||[])if(n>=0){let r=t[n],i=e[n];i&&(r&&((t.restoreStructures||(t.restoreStructures=[]))[n]=r),t[n]=i)}return this.structures=t}decode(t,e){return this.unpack(t,e)}};function s0(){try{if(!oi.trusted&&!zd){let e=Xt.sharedLength||0;e<Xt.length&&(Xt.length=e)}let t=Rn();if(he==cl)Xt.restoreStructures&&hP(),Xt=null,Ye=null,sa&&(sa=null);else if(he>cl){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}else if(!zd)throw new Error("Data read, but end of buffer not reached");return t}catch(t){throw Xt.restoreStructures&&hP(),eb(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer"))&&(t.incomplete=!0),t}}function hP(){for(let t in Xt.restoreStructures)Xt[t]=Xt.restoreStructures[t];Xt.restoreStructures=null}function Rn(){let t=Ye[he++];if(t<160)if(t<128){if(t<64)return t;{let e=Xt[t&63]||oi.getStructures&&A4()[t&63];return e?(e.read||(e.read=N2(e,t&63)),e.read()):t}}else if(t<144)if(t-=128,oi.mapsAsObjects){let e={};for(let n=0;n<t;n++)e[P4()]=Rn();return e}else{let e=new Map;for(let n=0;n<t;n++)e.set(Rn(),Rn());return e}else{t-=144;let e=new Array(t);for(let n=0;n<t;n++)e[n]=Rn();return e}else if(t<192){let e=t-160;if(vo>=he)return Za.slice(he-rs,(he+=e)-rs);if(vo==0&&cl<140){let n=e<16?k2(e):C4(e);if(n!=null)return n}return KS(e)}else{let e;switch(t){case 192:return null;case 193:return Ei?(e=Rn(),e>0?Ei[1].slice(Ei.position1,Ei.position1+=e):Ei[0].slice(Ei.position0,Ei.position0-=e)):T4;case 194:return!1;case 195:return!0;case 196:return B_(Ye[he++]);case 197:return e=Qt.getUint16(he),he+=2,B_(e);case 198:return e=Qt.getUint32(he),he+=4,B_(e);case 199:return ql(Ye[he++]);case 200:return e=Qt.getUint16(he),he+=2,ql(e);case 201:return e=Qt.getUint32(he),he+=4,ql(e);case 202:if(e=Qt.getFloat32(he),oi.useFloat32>2){let n=B2[(Ye[he]&127)<<1|Ye[he+1]>>7];return he+=4,(n*e+(e>0?.5:-.5)>>0)/n}return he+=4,e;case 203:return e=Qt.getFloat64(he),he+=8,e;case 204:return Ye[he++];case 205:return e=Qt.getUint16(he),he+=2,e;case 206:return e=Qt.getUint32(he),he+=4,e;case 207:return oi.int64AsNumber?(e=Qt.getUint32(he)*4294967296,e+=Qt.getUint32(he+4)):e=Qt.getBigUint64(he),he+=8,e;case 208:return Qt.getInt8(he++);case 209:return e=Qt.getInt16(he),he+=2,e;case 210:return e=Qt.getInt32(he),he+=4,e;case 211:return oi.int64AsNumber?(e=Qt.getInt32(he)*4294967296,e+=Qt.getUint32(he+4)):e=Qt.getBigInt64(he),he+=8,e;case 212:if(e=Ye[he++],e==114)return vP(Ye[he++]&63);{let n=Yr[e];if(n)return n.read?(he++,n.read(Rn())):n.noBuffer?(he++,n()):n(Ye.subarray(he,++he));throw new Error("Unknown extension "+e)}case 213:return e=Ye[he],e==114?(he++,vP(Ye[he++]&63,Ye[he++])):ql(2);case 214:return ql(4);case 215:return ql(8);case 216:return ql(16);case 217:return e=Ye[he++],vo>=he?Za.slice(he-rs,(he+=e)-rs):UX(e);case 218:return e=Qt.getUint16(he),he+=2,vo>=he?Za.slice(he-rs,(he+=e)-rs):VX(e);case 219:return e=Qt.getUint32(he),he+=4,vo>=he?Za.slice(he-rs,(he+=e)-rs):HX(e);case 220:return e=Qt.getUint16(he),he+=2,pP(e);case 221:return e=Qt.getUint32(he),he+=4,pP(e);case 222:return e=Qt.getUint16(he),he+=2,mP(e);case 223:return e=Qt.getUint32(he),he+=4,mP(e);default:if(t>=224)return t-256;if(t===void 0){let n=new Error("Unexpected end of MessagePack data");throw n.incomplete=!0,n}throw new Error("Unknown MessagePack token "+t)}}}var FX=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function N2(t,e){function n(){if(n.count++>2){let i=t.read=new Function("r","return function(){return {"+t.map(s=>FX.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"}}")(Rn);return t.highByte===0&&(t.read=fP(e,t.read)),i()}let r={};for(let i=0,s=t.length;i<s;i++){let o=t[i];r[o]=Rn()}return r}return n.count=0,t.highByte===0?fP(e,n):n}var fP=(t,e)=>function(){let n=Ye[he++];if(n===0)return e();let r=t<32?-(t+(n<<5)):t+(n<<5),i=Xt[r]||A4()[r];if(!i)throw new Error("Record id is not defined for "+r);return i.read||(i.read=N2(i,t)),i.read()};function A4(){let t=I4(()=>(Ye=null,oi.getStructures()));return Xt=oi._mergeStructures(t,Xt)}var KS=Hy,UX=Hy,VX=Hy,HX=Hy;function Hy(t){let e;if(t<16&&(e=k2(t)))return e;if(t>64&&QS)return QS.decode(Ye.subarray(he,he+=t));let n=he+t,r=[];for(e="";he<n;){let i=Ye[he++];if((i&128)===0)r.push(i);else if((i&224)===192){let s=Ye[he++]&63;r.push((i&31)<<6|s)}else if((i&240)===224){let s=Ye[he++]&63,o=Ye[he++]&63;r.push((i&31)<<12|s<<6|o)}else if((i&248)===240){let s=Ye[he++]&63,o=Ye[he++]&63,a=Ye[he++]&63,l=(i&7)<<18|s<<12|o<<6|a;l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|l&1023),r.push(l)}else r.push(i);r.length>=4096&&(e+=pr.apply(String,r),r.length=0)}return r.length>0&&(e+=pr.apply(String,r)),e}function pP(t){let e=new Array(t);for(let n=0;n<t;n++)e[n]=Rn();return e}function mP(t){if(oi.mapsAsObjects){let e={};for(let n=0;n<t;n++)e[P4()]=Rn();return e}else{let e=new Map;for(let n=0;n<t;n++)e.set(Rn(),Rn());return e}}var pr=String.fromCharCode;function C4(t){let e=he,n=new Array(t);for(let r=0;r<t;r++){let i=Ye[he++];if((i&128)>0){he=e;return}n[r]=i}return pr.apply(String,n)}function k2(t){if(t<4)if(t<2){if(t===0)return"";{let e=Ye[he++];if((e&128)>1){he-=1;return}return pr(e)}}else{let e=Ye[he++],n=Ye[he++];if((e&128)>0||(n&128)>0){he-=2;return}if(t<3)return pr(e,n);let r=Ye[he++];if((r&128)>0){he-=3;return}return pr(e,n,r)}else{let e=Ye[he++],n=Ye[he++],r=Ye[he++],i=Ye[he++];if((e&128)>0||(n&128)>0||(r&128)>0||(i&128)>0){he-=4;return}if(t<6){if(t===4)return pr(e,n,r,i);{let s=Ye[he++];if((s&128)>0){he-=5;return}return pr(e,n,r,i,s)}}else if(t<8){let s=Ye[he++],o=Ye[he++];if((s&128)>0||(o&128)>0){he-=6;return}if(t<7)return pr(e,n,r,i,s,o);let a=Ye[he++];if((a&128)>0){he-=7;return}return pr(e,n,r,i,s,o,a)}else{let s=Ye[he++],o=Ye[he++],a=Ye[he++],l=Ye[he++];if((s&128)>0||(o&128)>0||(a&128)>0||(l&128)>0){he-=8;return}if(t<10){if(t===8)return pr(e,n,r,i,s,o,a,l);{let c=Ye[he++];if((c&128)>0){he-=9;return}return pr(e,n,r,i,s,o,a,l,c)}}else if(t<12){let c=Ye[he++],d=Ye[he++];if((c&128)>0||(d&128)>0){he-=10;return}if(t<11)return pr(e,n,r,i,s,o,a,l,c,d);let u=Ye[he++];if((u&128)>0){he-=11;return}return pr(e,n,r,i,s,o,a,l,c,d,u)}else{let c=Ye[he++],d=Ye[he++],u=Ye[he++],h=Ye[he++];if((c&128)>0||(d&128)>0||(u&128)>0||(h&128)>0){he-=12;return}if(t<14){if(t===12)return pr(e,n,r,i,s,o,a,l,c,d,u,h);{let m=Ye[he++];if((m&128)>0){he-=13;return}return pr(e,n,r,i,s,o,a,l,c,d,u,h,m)}}else{let m=Ye[he++],g=Ye[he++];if((m&128)>0||(g&128)>0){he-=14;return}if(t<15)return pr(e,n,r,i,s,o,a,l,c,d,u,h,m,g);let x=Ye[he++];if((x&128)>0){he-=15;return}return pr(e,n,r,i,s,o,a,l,c,d,u,h,m,g,x)}}}}}function B_(t){return oi.copyBuffers?Uint8Array.prototype.slice.call(Ye,he,he+=t):Ye.subarray(he,he+=t)}function ql(t){let e=Ye[he++];if(Yr[e])return Yr[e](Ye.subarray(he,he+=t));throw new Error("Unknown extension type "+e)}var gP=new Array(4096);function P4(){let t=Ye[he++];if(t>=160&&t<192){if(t=t-160,vo>=he)return Za.slice(he-rs,(he+=t)-rs);if(!(vo==0&&cl<180))return KS(t)}else return he--,Rn();let e=(t<<5^(t>1?Qt.getUint16(he):t>0?Ye[he]:0))&4095,n=gP[e],r=he,i=he+t-3,s,o=0;if(n&&n.bytes==t){for(;r<i;){if(s=Qt.getUint32(r),s!=n[o++]){r=1879048192;break}r+=4}for(i+=3;r<i;)if(s=Ye[r++],s!=n[o++]){r=1879048192;break}if(r===i)return he=r,n.string;i-=3,r=he}for(n=[],gP[e]=n,n.bytes=t;r<i;)s=Qt.getUint32(r),n.push(s),r+=4;for(i+=3;r<i;)s=Ye[r++],n.push(s);let a=t<16?k2(t):C4(t);return a!=null?n.string=a:n.string=KS(t)}var vP=(t,e)=>{var n=Rn();let r=t;e!==void 0&&(t=t<32?-((e<<5)+t):(e<<5)+t,n.highByte=e);let i=Xt[t];return i&&i.isShared&&((Xt.restoreStructures||(Xt.restoreStructures=[]))[t]=i),Xt[t]=n,n.read=N2(n,r),n.read()},L4=typeof self=="object"?self:global;Yr[0]=()=>{};Yr[0].noBuffer=!0;Yr[101]=()=>{let t=Rn();return(L4[t[0]]||Error)(t[1])};Yr[105]=t=>{let e=Qt.getUint32(he-4);sa||(sa=new Map);let n=Ye[he],r;n>=144&&n<160||n==220||n==221?r=[]:r={};let i={target:r};sa.set(e,i);let s=Rn();return i.used?Object.assign(r,s):(i.target=s,s)};Yr[112]=t=>{let e=Qt.getUint32(he-4),n=sa.get(e);return n.used=!0,n.target};Yr[115]=()=>new Set(Rn());var O4=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(t=>t+"Array");Yr[116]=t=>{let e=t[0],n=O4[e];if(!n)throw new Error("Could not find typed array for code "+e);return new L4[n](Uint8Array.prototype.slice.call(t,1).buffer)};Yr[120]=()=>{let t=Rn();return new RegExp(t[0],t[1])};Yr[98]=t=>{let e=(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3],n=he;he+=e-4,Ei=[Rn(),Rn()],Ei.position0=0,Ei.position1=0;let r=he;he=n;try{return Rn()}finally{he=r}};Yr[255]=t=>t.length==4?new Date((t[0]*16777216+(t[1]<<16)+(t[2]<<8)+t[3])*1e3):t.length==8?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+((t[3]&3)*4294967296+t[4]*16777216+(t[5]<<16)+(t[6]<<8)+t[7])*1e3):t.length==12?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+((t[4]&128?-281474976710656:0)+t[6]*1099511627776+t[7]*4294967296+t[8]*16777216+(t[9]<<16)+(t[10]<<8)+t[11])*1e3):new Date("invalid");function I4(t){let e=cl,n=he,r=rs,i=vo,s=Za,o=sa,a=Ei,l=new Uint8Array(Ye.slice(0,cl)),c=Xt,d=Xt.slice(0,Xt.length),u=oi,h=zd,m=t();return cl=e,he=n,rs=r,vo=i,Za=s,sa=o,Ei=a,Ye=l,zd=h,Xt=c,Xt.splice(0,Xt.length,...d),oi=u,Qt=new DataView(Ye.buffer,Ye.byteOffset,Ye.byteLength),m}function eb(){Ye=null,sa=null,Xt=null}function GX(t){t.unpack?Yr[t.type]=t.unpack:Yr[t.type]=t}var B2=new Array(147);for(let t=0;t<256;t++)B2[t]=+("1e"+Math.floor(45.15-t*.30103));var Gy=new Cv({useRecords:!1});Gy.unpack;Gy.unpackMultiple;Gy.unpack;var WX=new Float32Array(1);new Uint8Array(WX.buffer,0,4);var F0;try{F0=new TextEncoder}catch{}var Pv,F2,Wy=typeof Buffer<"u",F_=Wy?Buffer.allocUnsafeSlow:Uint8Array,D4=Wy?Buffer:Uint8Array,yP=Wy?4294967296:2144337920,Oe,Hn,we=0,oo,ao=null,jX=/[\u0080-\uFFFF]/,Zh=Symbol("record-id"),R4=class extends Cv{constructor(t){super(t),this.offset=0;let e,n,r,i,s,o=0,a=D4.prototype.utf8Write?function(E,C,T){return Oe.utf8Write(E,C,T)}:F0&&F0.encodeInto?function(E,C){return F0.encodeInto(E,Oe.subarray(C)).written}:!1,l=this;t||(t={});let c=t&&t.sequential,d=t.structures||t.saveStructures,u=t.maxSharedStructures;if(u==null&&(u=d?32:0),u>8160)throw new Error("Maximum maxSharedStructure is 8160");let h=t.maxOwnStructures;h==null&&(h=d?32:64),c&&!t.saveStructures&&(this.structures=[]);let m=u>32||h+u>64,g=u+64,x=u+h+64;if(x>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let y=[],v=0,_=0;this.pack=this.encode=function(E,C){if(Oe||(Oe=new F_(8192),Hn=new DataView(Oe.buffer,0,8192),we=0),oo=Oe.length-10,oo-we<2048?(Oe=new F_(Oe.length),Hn=new DataView(Oe.buffer,0,Oe.length),oo=Oe.length-10,we=0):we=we+7&2147483640,e=we,s=l.structuredClone?new Map:null,l.bundleStrings?(ao=["",""],Oe[we++]=214,Oe[we++]=98,ao.position=we-e,we+=4):ao=null,n=l.structures,n){n.uninitialized&&(n=l._mergeStructures(l.getStructures()));let T=n.sharedLength||0;if(T>u)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+n.sharedLength);if(!n.transitions){n.transitions=Object.create(null);for(let O=0;O<T;O++){let L=n[O];if(!L)continue;let k,B=n.transitions;for(let G=0,H=L.length;G<H;G++){let Y=L[G];k=B[Y],k||(k=B[Y]=Object.create(null)),B=k}B[Zh]=O+64}o=T}c||(n.nextId=T+64)}r&&(r=!1),i=n||[];try{if(S(E),ao){Hn.setUint32(ao.position+e,we-ao.position-e);let T=ao;ao=null,S(T[0]),S(T[1])}if(l.offset=we,s&&s.idsToInsert){we+=s.idsToInsert.length*6,we>oo&&A(we),l.offset=we;let T=qX(Oe.subarray(e,we),s.idsToInsert);return s=null,T}return C&XX?(Oe.start=e,Oe.end=we,Oe):Oe.subarray(e,we)}finally{if(n){if(_<10&&_++,v>1e4)n.transitions=null,_=0,v=0,y.length>0&&(y=[]);else if(y.length>0&&!c){for(let T=0,O=y.length;T<O;T++)y[T][Zh]=0;y=[]}if(r&&l.saveStructures){let T=n.sharedLength||u;n.length>T&&(n=n.slice(0,T));let O=Oe.subarray(e,we);return l.saveStructures(n,o)===!1?(l._mergeStructures(l.getStructures()),l.pack(E)):(o=T,O)}}C&YX&&(we=e)}};let S=E=>{we>oo&&(Oe=A(we));var C=typeof E,T;if(C==="string"){let O=E.length;if(ao&&O>=8&&O<4096){let B=jX.test(E);ao[B?0:1]+=E,Oe[we++]=193,S(B?-O:O);return}let L;O<32?L=1:O<256?L=2:O<65536?L=3:L=5;let k=O*3;if(we+k>oo&&(Oe=A(we+k)),O<64||!a){let B,G,H,Y=we+L;for(B=0;B<O;B++)G=E.charCodeAt(B),G<128?Oe[Y++]=G:G<2048?(Oe[Y++]=G>>6|192,Oe[Y++]=G&63|128):(G&64512)===55296&&((H=E.charCodeAt(B+1))&64512)===56320?(G=65536+((G&1023)<<10)+(H&1023),B++,Oe[Y++]=G>>18|240,Oe[Y++]=G>>12&63|128,Oe[Y++]=G>>6&63|128,Oe[Y++]=G&63|128):(Oe[Y++]=G>>12|224,Oe[Y++]=G>>6&63|128,Oe[Y++]=G&63|128);T=Y-we-L}else T=a(E,we+L,k);T<32?Oe[we++]=160|T:T<256?(L<2&&Oe.copyWithin(we+2,we+1,we+1+T),Oe[we++]=217,Oe[we++]=T):T<65536?(L<3&&Oe.copyWithin(we+3,we+2,we+2+T),Oe[we++]=218,Oe[we++]=T>>8,Oe[we++]=T&255):(L<5&&Oe.copyWithin(we+5,we+3,we+3+T),Oe[we++]=219,Hn.setUint32(we,T),we+=4),we+=T}else if(C==="number")if(E>>>0===E)E<64?Oe[we++]=E:E<256?(Oe[we++]=204,Oe[we++]=E):E<65536?(Oe[we++]=205,Oe[we++]=E>>8,Oe[we++]=E&255):(Oe[we++]=206,Hn.setUint32(we,E),we+=4);else if(E>>0===E)E>=-32?Oe[we++]=256+E:E>=-128?(Oe[we++]=208,Oe[we++]=E+256):E>=-32768?(Oe[we++]=209,Hn.setInt16(we,E),we+=2):(Oe[we++]=210,Hn.setInt32(we,E),we+=4);else{let O;if((O=this.useFloat32)>0&&E<4294967296&&E>=-2147483648){Oe[we++]=202,Hn.setFloat32(we,E);let L;if(O<4||(L=E*B2[(Oe[we]&127)<<1|Oe[we+1]>>7])>>0===L){we+=4;return}else we--}Oe[we++]=203,Hn.setFloat64(we,E),we+=8}else if(C==="object")if(!E)Oe[we++]=192;else{if(s){let L=s.get(E);if(L){if(!L.id){let k=s.idsToInsert||(s.idsToInsert=[]);L.id=k.push(L)}Oe[we++]=214,Oe[we++]=112,Hn.setUint32(we,L.id),we+=4;return}else s.set(E,{offset:we-e})}let O=E.constructor;if(O===Object)b(E,!0);else if(O===Array){T=E.length,T<16?Oe[we++]=144|T:T<65536?(Oe[we++]=220,Oe[we++]=T>>8,Oe[we++]=T&255):(Oe[we++]=221,Hn.setUint32(we,T),we+=4);for(let L=0;L<T;L++)S(E[L])}else if(O===Map){T=E.size,T<16?Oe[we++]=128|T:T<65536?(Oe[we++]=222,Oe[we++]=T>>8,Oe[we++]=T&255):(Oe[we++]=223,Hn.setUint32(we,T),we+=4);for(let[L,k]of E)S(L),S(k)}else{for(let L=0,k=Pv.length;L<k;L++){let B=F2[L];if(E instanceof B){let G=Pv[L];if(G.write){G.type&&(Oe[we++]=212,Oe[we++]=G.type,Oe[we++]=0),S(G.write.call(this,E));return}let H=Oe,Y=Hn,te=we;Oe=null;let Z;try{Z=G.pack.call(this,E,D=>(Oe=H,H=null,we+=D,we>oo&&A(we),{target:Oe,targetView:Hn,position:we-D}),S)}finally{H&&(Oe=H,Hn=Y,we=te,oo=Oe.length-10)}Z&&(Z.length+we>oo&&A(Z.length+we),we=$X(Z,Oe,we,G.type));return}}b(E,!E.hasOwnProperty)}}else if(C==="boolean")Oe[we++]=E?195:194;else if(C==="bigint"){if(E<BigInt(1)<<BigInt(63)&&E>=-(BigInt(1)<<BigInt(63)))Oe[we++]=211,Hn.setBigInt64(we,E);else if(E<BigInt(1)<<BigInt(64)&&E>0)Oe[we++]=207,Hn.setBigUint64(we,E);else if(this.largeBigIntToFloat)Oe[we++]=203,Hn.setFloat64(we,Number(E));else throw new RangeError(E+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");we+=8}else if(C==="undefined")this.encodeUndefinedAsNil?Oe[we++]=192:(Oe[we++]=212,Oe[we++]=0,Oe[we++]=0);else if(C==="function")S(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+C)},b=this.useRecords===!1?this.variableMapSize?E=>{let C=Object.keys(E),T=C.length;T<16?Oe[we++]=128|T:T<65536?(Oe[we++]=222,Oe[we++]=T>>8,Oe[we++]=T&255):(Oe[we++]=223,Hn.setUint32(we,T),we+=4);let O;for(let L=0;L<T;L++)S(O=C[L]),S(E[O])}:(E,C)=>{Oe[we++]=222;let T=we-e;we+=2;let O=0;for(let L in E)(C||E.hasOwnProperty(L))&&(S(L),S(E[L]),O++);Oe[T+++e]=O>>8,Oe[T+e]=O&255}:E=>{let C=Object.keys(E),T,O=i.transitions||(i.transitions=Object.create(null)),L=0;for(let B=0,G=C.length;B<G;B++){let H=C[B];T=O[H],T||(T=O[H]=Object.create(null),L++),O=T}let k=O[Zh];if(k)k>=96&&m?(Oe[we++]=((k-=96)&31)+96,Oe[we++]=k>>5):Oe[we++]=k;else{k=i.nextId,k||(k=64),k<g&&this.shouldShareStructure&&!this.shouldShareStructure(C)?(k=i.nextOwnId,k<x||(k=g),i.nextOwnId=k+1):(k>=x&&(k=g),i.nextId=k+1);let B=C.highByte=k>=96&&m?k-96>>5:-1;O[Zh]=k,i[k-64]=C,k<g?(C.isShared=!0,i.sharedLength=k-63,r=!0,B>=0?(Oe[we++]=(k&31)+96,Oe[we++]=B):Oe[we++]=k):(B>=0?(Oe[we++]=213,Oe[we++]=114,Oe[we++]=(k&31)+96,Oe[we++]=B):(Oe[we++]=212,Oe[we++]=114,Oe[we++]=k),L&&(v+=_*L),y.length>=h&&(y.shift()[Zh]=0),y.push(O),S(C))}for(let B=0,G=C.length;B<G;B++)S(E[C[B]])},A=E=>{let C;if(E>16777216){if(E-e>yP)throw new Error("Packed buffer would be larger than maximum buffer size");C=Math.min(yP,Math.round(Math.max((E-e)*(E>67108864?1.25:2),4194304)/4096)*4096)}else C=(Math.max(E-e<<2,Oe.length-1)>>12)+1<<12;let T=new F_(C);return Hn=new DataView(T.buffer,0,C),Oe.copy?Oe.copy(T,0,e,E):T.set(Oe.slice(e,E)),we-=e,e=0,oo=T.length-10,Oe=T}}useBuffer(t){Oe=t,Hn=new DataView(Oe.buffer,Oe.byteOffset,Oe.byteLength),we=0}};F2=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,E4];Pv=[{pack(t,e,n){let r=t.getTime()/1e3;if((this.useTimestamp32||t.getMilliseconds()===0)&&r>=0&&r<4294967296){let{target:i,targetView:s,position:o}=e(6);i[o++]=214,i[o++]=255,s.setUint32(o,r)}else if(r>0&&r<17179869184){let{target:i,targetView:s,position:o}=e(10);i[o++]=215,i[o++]=255,s.setUint32(o,t.getMilliseconds()*4e6+(r/1e3/4294967296>>0)),s.setUint32(o+4,r)}else if(isNaN(r)){if(this.onInvalidDate)return e(0),n(this.onInvalidDate());let{target:i,targetView:s,position:o}=e(3);i[o++]=212,i[o++]=255,i[o++]=255}else{let{target:i,targetView:s,position:o}=e(15);i[o++]=199,i[o++]=12,i[o++]=255,s.setUint32(o,t.getMilliseconds()*1e6),s.setBigInt64(o+4,BigInt(Math.floor(r)))}}},{pack(t,e,n){let r=Array.from(t),{target:i,position:s}=e(this.structuredClone?3:0);this.structuredClone&&(i[s++]=212,i[s++]=115,i[s++]=0),n(r)}},{pack(t,e,n){let{target:r,position:i}=e(this.structuredClone?3:0);this.structuredClone&&(r[i++]=212,r[i++]=101,r[i++]=0),n([t.name,t.message])}},{pack(t,e,n){let{target:r,position:i}=e(this.structuredClone?3:0);this.structuredClone&&(r[i++]=212,r[i++]=120,r[i++]=0),n([t.source,t.flags])}},{pack(t,e){this.structuredClone?xP(t,16,e):_P(Wy?Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let n=t.constructor;n!==D4&&this.structuredClone?xP(t,O4.indexOf(n.name),e):_P(t,e)}},{pack(t,e){let{target:n,position:r}=e(1);n[r]=193}}];function xP(t,e,n,r){let i=t.byteLength;if(i+1<256){var{target:s,position:o}=n(4+i);s[o++]=199,s[o++]=i+1}else if(i+1<65536){var{target:s,position:o}=n(5+i);s[o++]=200,s[o++]=i+1>>8,s[o++]=i+1&255}else{var{target:s,position:o,targetView:a}=n(7+i);s[o++]=201,a.setUint32(o,i+1),o+=4}s[o++]=116,s[o++]=e,s.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o)}function _P(t,e){let n=t.byteLength;var r,i;if(n<256){var{target:r,position:i}=e(n+2);r[i++]=196,r[i++]=n}else if(n<65536){var{target:r,position:i}=e(n+3);r[i++]=197,r[i++]=n>>8,r[i++]=n&255}else{var{target:r,position:i,targetView:s}=e(n+5);r[i++]=198,s.setUint32(i,n),i+=4}r.set(t,i)}function $X(t,e,n,r){let i=t.length;switch(i){case 1:e[n++]=212;break;case 2:e[n++]=213;break;case 4:e[n++]=214;break;case 8:e[n++]=215;break;case 16:e[n++]=216;break;default:i<256?(e[n++]=199,e[n++]=i):i<65536?(e[n++]=200,e[n++]=i>>8,e[n++]=i&255):(e[n++]=201,e[n++]=i>>24,e[n++]=i>>16&255,e[n++]=i>>8&255,e[n++]=i&255)}return e[n++]=r,e.set(t,n),n+=i,n}function qX(t,e){let n,r=e.length*6,i=t.length-r;for(e.sort((s,o)=>s.offset>o.offset?1:-1);n=e.pop();){let s=n.offset,o=n.id;t.copyWithin(s+r,s,i),r-=6;let a=s+r;t[a++]=214,t[a++]=105,t[a++]=o>>24,t[a++]=o>>16&255,t[a++]=o>>8&255,t[a++]=o&255,i=s}return t}function Kd(t){if(t.Class){if(!t.pack&&!t.write)throw new Error("Extension has no pack or write function");if(t.pack&&!t.type)throw new Error("Extension has no type (numeric code to identify the extension)");F2.unshift(t.Class),Pv.unshift(t)}GX(t)}var z4=new R4({useRecords:!1});z4.pack;z4.pack;var XX=512,YX=1024,wP=new R4({structuredClone:!0});Kd({Class:wr.prototype.constructor,type:1,write(t){return{...t}},read(t){return Object.setPrototypeOf(t,wr.prototype),t}});Kd({Class:an.prototype.constructor,type:2,write(t){return[...t]},read(t){return Object.setPrototypeOf(t,an.prototype),t}});Kd({Class:mi.prototype.constructor,type:3,write(t){return[...t]},read(t){return Object.setPrototypeOf(t,mi.prototype),t}});Kd({Class:uP.prototype.constructor,type:4,write(t){return t.id},read(t){return new uP(t)}});Kd({Class:cP.prototype.constructor,type:5,write(t){return t.data},read(t){return new cP(t)}});Kd({Class:Eu.prototype.constructor,type:6,write(t){return{...t}},read(t){return Object.setPrototypeOf(t,Eu.prototype),t}});function ZX(t){var e=0;if(t.length===0)return e;for(let n=0;n<t.length;n++){let r=t[n];e=(e<<5)-e+r,e=e&e}return e}function tb(t){if(Mv(t))return t;if(Array.isArray(t))return t.map(tb);if(typeof t=="object"&&t!==null){let e={};for(let n of Object.keys(t).sort())e[n]=tb(t[n]);return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),e}else return t}var nb;(t=>{function e(i){return wP.pack(i)}t.serialize=e;function n(i){return wP.unpack(i)}t.deserialize=n;function r(i){return ZX(e(tb(i))).toString()}t.checksum=r})(nb||(nb={}));var SP;(t=>{function e(r,i){return r[0]===i[0]&&r[1]===i[1]}t.isEqual=e;function n(r,i,s){return[r[0]+(i[0]-r[0])*s,r[1]+(i[1]-r[1])*s]}t.lerp=n})(SP||(SP={}));var Lf;(t=>{function e(s,o){return s[0]===o[0]&&s[1]===o[1]&&s[2]===o[2]}t.isEqual=e;function n(s,o){return[s[0]+o[0],s[1]+o[1],s[2]+o[2]]}t.add=n;function r(s,o){return[s[0]-o[0],s[1]-o[1],s[2]-o[2]]}t.sub=r;function i(s,o,a){return[s[0]+(o[0]-s[0])*a,s[1]+(o[1]-s[1])*a,s[2]+(o[2]-s[2])*a]}t.lerp=i})(Lf||(Lf={}));var bP;(t=>{function e(r,i){return r[0]===i[0]&&r[1]===i[1]&&r[2]===i[2]&&r[3]===i[3]}t.isEqual=e;function n(r,i,s){return[r[0]+(i[0]-r[0])*s,r[1]+(i[1]-r[1])*s,r[2]+(i[2]-r[2])*s,r[3]+(i[3]-r[3])*s]}t.lerp=n})(bP||(bP={}));var Nd;(t=>{t.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function e(i,s){for(let o=0;o<16;o++)if(i[o]!==s[o])return!1;return!0}t.isEqual=e;function n(i){return i!=null?i:t.identity}t.simplify=n;function r(i,s){let o=s.slice(0);for(var a=0,l=s.length;a<l;a+=3){let c=i[3]*s[a]+i[7]*s[a+1]+i[11]*s[a+2]+i[15];o[a]=(i[0]*s[a]+i[4]*s[a+1]+i[8]*s[a+2]+i[12])/c,o[a+1]=(i[1]*s[a]+i[5]*s[a+1]+i[9]*s[a+2]+i[13])/c,o[a+2]=(i[2]*s[a]+i[6]*s[a+1]+i[10]*s[a+2]+i[14])/c}return o}t.applyMatrix4=r})(Nd||(Nd={}));var us;(t=>{t.white={r:1,g:1,b:1},t.red={r:1,g:0,b:0},t.black={r:0,g:0,b:0};function e(o){return{r:Math.round(o.r*255),g:Math.round(o.g*255),b:Math.round(o.b*255),a:1}}t.toRgb255a1=e;function n(o){return{r:o.r,g:o.g,b:o.b}}t.clone=n;function r(o){return o=Math.floor(o),{r:(o>>16&255)/255,g:(o>>8&255)/255,b:(o&255)/255}}t.fromHex=r;function i(o,a){return o.r===a.r&&o.g===a.g&&o.b===a.b}t.equals=i;function s(o,a,l){return{r:o.r+(a.r-o.r)*l,g:o.g+(a.g-o.g)*l,b:o.b+(a.b-o.b)*l}}t.lerp=s})(us||(us={}));var na;(t=>{t.white={...us.white,a:1},t.transparent={...us.white,a:0};function e(o){return{r:o[0],g:o[1],b:o[2],a:o[3]}}t.from0to1=e;function n(o,a){return{...us.fromHex(o),a}}t.fromHexAndA=n;function r(o){return{r:Math.round(o.r*255),g:Math.round(o.g*255),b:Math.round(o.b*255),a:o.a}}t.toRgb255a1=r;function i(o,a){return us.equals(o,a)&&o.a===a.a}t.equals=i;function s(o,a,l){return{r:o.r+(a.r-o.r)*l,g:o.g+(a.g-o.g)*l,b:o.b+(a.b-o.b)*l,a:o.a+(a.a-o.a)*l}}t.lerp=s})(na||(na={}));var rb;(t=>t.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(rb||(rb={}));var MP;(t=>t.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(MP||(MP={}));var EP;(t=>t.defaultData={control1:[.5,.05],control2:[.1,.3]})(EP||(EP={}));var Lv;(t=>{t.all=["PerspectiveCamera","OrthographicCamera"];function e(n){return t.all.includes(n)}t.is=e})(Lv||(Lv={}));var yp;(t=>{t.DefaultUp=[0,1,0],t.DefaultTargetOffset=1e3,t.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:5,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:t.DefaultUp,isUpVectorFlipped:!1,targetOffset:t.DefaultTargetOffset};function e(n){return n.type==="PerspectiveCamera"?n.perspective.zoom:n.orthographic.zoom}t.getZoom=e})(yp||(yp={}));var ib;(t=>{function e(n,r=.1){return{type:"radial",hideBase:!1,count:3,radial:{radius:Math.max(n[0],n[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},linear:{scale:[1,1,1],rotation:[0,0,0],position:[n[0]+n[0]*r,0,0]},grid:{count:[2,2,2],size:n.map(i=>i*(1+r)),useCenter:!0}}}t.defaultData=e})(ib||(ib={}));var sb;(t=>{t.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function e(n){return t.all.includes(n)}t.is=e})(sb||(sb={}));var ob;(t=>{function e(r){return n(r)}t.defaultData=e;function n(r){if(r==="PointLight")return{type:r,color:na.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,depth:1e5};if(r==="SpotLight")return{type:r,color:na.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,shadowResolution:1024,shadowRadius:1};if(r==="DirectionalLight")return{type:r,color:na.white,intensity:1,shadows:!0,size:1e3,depth:1e5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(ob||(ob={}));var ab;(t=>{t.defaultData={castShadow:!0,receiveShadow:!0};function e(n,r){return n.castShadow===r.castShadow&&n.receiveShadow===r.receiveShadow}t.equals=e})(ab||(ab={}));var lb;(t=>{t.defaultData={flatShading:!1,wireframe:!1,side:0};function e(n,r){return n.flatShading===r.flatShading&&n.side===r.side&&n.wireframe===r.wireframe}t.equals=e})(lb||(lb={}));var ub;(t=>t.defaultData={...lb.defaultData,...ab.defaultData,cloner:null,booleanExclude:null})(ub||(ub={}));var JX=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],QX=["wrapping","image"],Ja;(t=>{function e(i,s){return i==="light"&&s?n(s):r(i)}t.defaultData=e;function n(i){switch(i){case"phong":return{category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",alpha:.6,visible:!0,mode:0};case"toon":return{category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1,visible:!0,mode:0};case"lambert":return{category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0};case"physical":return{category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0}}}function r(i){switch(i){case"texture":return{alpha:1,visible:!0,size:[128,128],mode:0,axis:"x",side:2,type:"texture",projection:0,texture:{image:"image_0",wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!0};case"color":return{type:"color",alpha:1,visible:!0,mode:0,color:us.fromHex(4737101)};case"depth":return{type:"depth",alpha:1,visible:!0,mode:0,gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{type:"normal",alpha:1,visible:!0,mode:0,cnormal:[1,1,1]};case"gradient":return{type:"gradient",alpha:1,visible:!0,mode:0,gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{type:"noise",alpha:1,visible:!0,mode:0,size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...us.fromHex(6710886),a:1},colorB:{...us.fromHex(6710886),a:1},colorC:{...us.fromHex(16777215),a:1},colorD:{...us.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8]};case"fresnel":return{type:"fresnel",alpha:1,visible:!0,mode:0,color:na.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{type:"rainbow",alpha:1,visible:!0,mode:0,filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{type:"toon",alpha:1,visible:!0,mode:0,positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:na.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{type:"outline",alpha:1,visible:!0,mode:0,outlineColor:na.fromHexAndA(0,1),contourColor:na.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{type:"matcap",alpha:1,visible:!0,mode:0,texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{type:"transmission",alpha:1,visible:!0,mode:0,thickness:10,ior:1.5,roughness:1};case"displace":return{type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,visible:!0}}}})(Ja||(Ja={}));var oa;(t=>{function e(l){return!l.layers.some(c=>c.data.type==="texture"&&c.data.projection!==0||c.data.type==="depth"&&!c.data.isWorldSpace||c.data.type==="noise"||c.data.type==="displace")&&!r(l)}t.isMergable=e;function n(l){let c="";return l.layers.forEach(d=>{Object.entries(d.data).forEach(([u,h])=>{c+=`${u}${h}`,Array.isArray(h)?h.forEach(m=>c+=`${m}`):typeof h=="object"?Object.values(h).forEach(m=>{typeof m=="number"?c+=`${m.toFixed(4)}`:c+=`${m}`}):c+=`${h}`})}),c}t.getHash=n;function r(l){let c=0;for(let d of l.layers)"alpha"in d.data&&d.data.type!=="light"&&d.data.type!=="fresnel"&&(c+=(1-c)*d.data.alpha);return c<1}t.isTransparent=r;function i(){return{layers:new an}}t.defaultEmptyData=i;function s(l="layer1",c="layer2"){return o("phong",l,c)}t.defaultData=s;function o(l,c="layer1",d="layer2"){let u=new an;return u.push({fi:0,data:Ja.defaultData("light",l),id:c}),u.push({fi:1,data:Ja.defaultData("color"),id:d}),{layers:u}}t.defaultTwoLayerData=o;function a(l,c="phong",d="layer1",u="layer2"){let h=Ja.defaultData("texture");Object.assign(h.texture,{image:l});let m=new an;return m.push({fi:0,data:h,id:d}),m.push({fi:1,data:Ja.defaultData("light",c),id:u}),{layers:m}}t.defaultTwoLayerTextureData=a})(oa||(oa={}));var Ov;(t=>{function e(){return{points:new an,roundness:0,shapeHoles:[],isClosed:!1}}t.defaultData=e})(Ov||(Ov={}));var cb;(t=>{function e(n){return n==="PolygonGeometry"||n==="RectangleGeometry"||n==="StarGeometry"||n==="TriangleGeometry"||n==="EllipseGeometry"}t.is2DParametricMesh=e})(cb||(cb={}));var vd;(t=>{function e(n){if(n==="RectangleGeometry")return{width:320,height:320,type:n,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(n==="VectorGeometry")return{width:1,height:1,type:n,subdivisions:12,shape:Ov.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(n==="BooleanGeometry")return{type:n,operation:2,width:0,height:0,depth:0,phongAngle:35};if(n==="TextGeometry")return{type:n,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:"",textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};throw new Error("not implemented")}t.defaultData=e})(vd||(vd={}));var KX=typeof global=="object"&&global&&global.Object===Object&&global,N4=KX,eY=typeof self=="object"&&self&&self.Object===Object&&self,tY=N4||eY||Function("return this")(),Ao=tY,nY=Ao.Symbol,Eo=nY,k4=Object.prototype,rY=k4.hasOwnProperty,iY=k4.toString,Jh=Eo?Eo.toStringTag:void 0;function sY(t){var e=rY.call(t,Jh),n=t[Jh];try{t[Jh]=void 0;var r=!0}catch{}var i=iY.call(t);return r&&(e?t[Jh]=n:delete t[Jh]),i}var oY=sY,aY=Object.prototype,lY=aY.toString;function uY(t){return lY.call(t)}var cY=uY,dY="[object Null]",hY="[object Undefined]",TP=Eo?Eo.toStringTag:void 0;function fY(t){return t==null?t===void 0?hY:dY:TP&&TP in Object(t)?oY(t):cY(t)}var ec=fY;function pY(t){return t!=null&&typeof t=="object"}var Cl=pY,mY="[object Symbol]";function gY(t){return typeof t=="symbol"||Cl(t)&&ec(t)==mY}var U2=gY;function vY(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var B4=vY,yY=Array.isArray,qs=yY,xY=1/0,AP=Eo?Eo.prototype:void 0,CP=AP?AP.toString:void 0;function F4(t){if(typeof t=="string")return t;if(qs(t))return B4(t,F4)+"";if(U2(t))return CP?CP.call(t):"";var e=t+"";return e=="0"&&1/t==-xY?"-0":e}var _Y=F4;function wY(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var To=wY;function SY(t){return t}var U4=SY,bY="[object AsyncFunction]",MY="[object Function]",EY="[object GeneratorFunction]",TY="[object Proxy]";function AY(t){if(!To(t))return!1;var e=ec(t);return e==MY||e==EY||e==bY||e==TY}var V2=AY,CY=Ao["__core-js_shared__"],U_=CY,PP=function(){var t=/[^.]+$/.exec(U_&&U_.keys&&U_.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function PY(t){return!!PP&&PP in t}var LY=PY,OY=Function.prototype,IY=OY.toString;function DY(t){if(t!=null){try{return IY.call(t)}catch{}try{return t+""}catch{}}return""}var tc=DY,RY=/[\\^$.*+?()[\]{}|]/g,zY=/^\[object .+?Constructor\]$/,NY=Function.prototype,kY=Object.prototype,BY=NY.toString,FY=kY.hasOwnProperty,UY=RegExp("^"+BY.call(FY).replace(RY,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function VY(t){if(!To(t)||LY(t))return!1;var e=V2(t)?UY:zY;return e.test(tc(t))}var HY=VY;function GY(t,e){return t==null?void 0:t[e]}var WY=GY;function jY(t,e){var n=WY(t,e);return HY(n)?n:void 0}var nc=jY,$Y=nc(Ao,"WeakMap"),db=$Y,LP=Object.create,qY=function(){function t(){}return function(e){if(!To(e))return{};if(LP)return LP(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),XY=qY;function YY(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var ZY=YY;function JY(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var V4=JY,QY=800,KY=16,eZ=Date.now;function tZ(t){var e=0,n=0;return function(){var r=eZ(),i=KY-(r-n);if(n=r,i>0){if(++e>=QY)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var nZ=tZ;function rZ(t){return function(){return t}}var iZ=rZ,sZ=function(){try{var t=nc(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Iv=sZ,oZ=Iv?function(t,e){return Iv(t,"toString",{configurable:!0,enumerable:!1,value:iZ(e),writable:!0})}:U4,aZ=oZ,lZ=nZ(aZ),H4=lZ;function uZ(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var cZ=uZ,dZ=9007199254740991,hZ=/^(?:0|[1-9]\d*)$/;function fZ(t,e){var n=typeof t;return e=e!=null?e:dZ,!!e&&(n=="number"||n!="symbol"&&hZ.test(t))&&t>-1&&t%1==0&&t<e}var jy=fZ;function pZ(t,e,n){e=="__proto__"&&Iv?Iv(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var H2=pZ;function mZ(t,e){return t===e||t!==t&&e!==e}var $y=mZ,gZ=Object.prototype,vZ=gZ.hasOwnProperty;function yZ(t,e,n){var r=t[e];(!(vZ.call(t,e)&&$y(r,n))||n===void 0&&!(e in t))&&H2(t,e,n)}var G2=yZ;function xZ(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),i?H2(n,a,l):G2(n,a,l)}return n}var eh=xZ,OP=Math.max;function _Z(t,e,n){return e=OP(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=OP(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),ZY(t,this,a)}}var G4=_Z;function wZ(t,e){return H4(G4(t,e,U4),t+"")}var SZ=wZ,bZ=9007199254740991;function MZ(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=bZ}var W2=MZ;function EZ(t){return t!=null&&W2(t.length)&&!V2(t)}var qy=EZ;function TZ(t,e,n){if(!To(n))return!1;var r=typeof e;return(r=="number"?qy(n)&&jy(e,n.length):r=="string"&&e in n)?$y(n[e],t):!1}var AZ=TZ;function CZ(t){return SZ(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&AZ(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,s)}return e})}var PZ=CZ,LZ=Object.prototype;function OZ(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||LZ;return t===n}var j2=OZ;function IZ(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var DZ=IZ,RZ="[object Arguments]";function zZ(t){return Cl(t)&&ec(t)==RZ}var IP=zZ,W4=Object.prototype,NZ=W4.hasOwnProperty,kZ=W4.propertyIsEnumerable,BZ=IP(function(){return arguments}())?IP:function(t){return Cl(t)&&NZ.call(t,"callee")&&!kZ.call(t,"callee")},xp=BZ;function FZ(){return!1}var UZ=FZ,j4=typeof exports=="object"&&exports&&!exports.nodeType&&exports,DP=j4&&typeof module=="object"&&module&&!module.nodeType&&module,VZ=DP&&DP.exports===j4,RP=VZ?Ao.Buffer:void 0,HZ=RP?RP.isBuffer:void 0,GZ=HZ||UZ,$2=GZ,WZ="[object Arguments]",jZ="[object Array]",$Z="[object Boolean]",qZ="[object Date]",XZ="[object Error]",YZ="[object Function]",ZZ="[object Map]",JZ="[object Number]",QZ="[object Object]",KZ="[object RegExp]",eJ="[object Set]",tJ="[object String]",nJ="[object WeakMap]",rJ="[object ArrayBuffer]",iJ="[object DataView]",sJ="[object Float32Array]",oJ="[object Float64Array]",aJ="[object Int8Array]",lJ="[object Int16Array]",uJ="[object Int32Array]",cJ="[object Uint8Array]",dJ="[object Uint8ClampedArray]",hJ="[object Uint16Array]",fJ="[object Uint32Array]",gn={};gn[sJ]=gn[oJ]=gn[aJ]=gn[lJ]=gn[uJ]=gn[cJ]=gn[dJ]=gn[hJ]=gn[fJ]=!0;gn[WZ]=gn[jZ]=gn[rJ]=gn[$Z]=gn[iJ]=gn[qZ]=gn[XZ]=gn[YZ]=gn[ZZ]=gn[JZ]=gn[QZ]=gn[KZ]=gn[eJ]=gn[tJ]=gn[nJ]=!1;function pJ(t){return Cl(t)&&W2(t.length)&&!!gn[ec(t)]}var mJ=pJ;function gJ(t){return function(e){return t(e)}}var q2=gJ,$4=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Of=$4&&typeof module=="object"&&module&&!module.nodeType&&module,vJ=Of&&Of.exports===$4,V_=vJ&&N4.process,yJ=function(){try{var t=Of&&Of.require&&Of.require("util").types;return t||V_&&V_.binding&&V_.binding("util")}catch{}}(),kd=yJ,zP=kd&&kd.isTypedArray,xJ=zP?q2(zP):mJ,q4=xJ,_J=Object.prototype,wJ=_J.hasOwnProperty;function SJ(t,e){var n=qs(t),r=!n&&xp(t),i=!n&&!r&&$2(t),s=!n&&!r&&!i&&q4(t),o=n||r||i||s,a=o?DZ(t.length,String):[],l=a.length;for(var c in t)(e||wJ.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||jy(c,l)))&&a.push(c);return a}var X4=SJ;function bJ(t,e){return function(n){return t(e(n))}}var Y4=bJ,MJ=Y4(Object.keys,Object),EJ=MJ,TJ=Object.prototype,AJ=TJ.hasOwnProperty;function CJ(t){if(!j2(t))return EJ(t);var e=[];for(var n in Object(t))AJ.call(t,n)&&n!="constructor"&&e.push(n);return e}var PJ=CJ;function LJ(t){return qy(t)?X4(t):PJ(t)}var X2=LJ;function OJ(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var IJ=OJ,DJ=Object.prototype,RJ=DJ.hasOwnProperty;function zJ(t){if(!To(t))return IJ(t);var e=j2(t),n=[];for(var r in t)r=="constructor"&&(e||!RJ.call(t,r))||n.push(r);return n}var NJ=zJ;function kJ(t){return qy(t)?X4(t,!0):NJ(t)}var Zp=kJ,BJ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,FJ=/^\w*$/;function UJ(t,e){if(qs(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||U2(t)?!0:FJ.test(t)||!BJ.test(t)||e!=null&&t in Object(e)}var VJ=UJ,HJ=nc(Object,"create"),_p=HJ;function GJ(){this.__data__=_p?_p(null):{},this.size=0}var WJ=GJ;function jJ(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var $J=jJ,qJ="__lodash_hash_undefined__",XJ=Object.prototype,YJ=XJ.hasOwnProperty;function ZJ(t){var e=this.__data__;if(_p){var n=e[t];return n===qJ?void 0:n}return YJ.call(e,t)?e[t]:void 0}var JJ=ZJ,QJ=Object.prototype,KJ=QJ.hasOwnProperty;function eQ(t){var e=this.__data__;return _p?e[t]!==void 0:KJ.call(e,t)}var tQ=eQ,nQ="__lodash_hash_undefined__";function rQ(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=_p&&e===void 0?nQ:e,this}var iQ=rQ;function th(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}th.prototype.clear=WJ;th.prototype.delete=$J;th.prototype.get=JJ;th.prototype.has=tQ;th.prototype.set=iQ;var NP=th;function sQ(){this.__data__=[],this.size=0}var oQ=sQ;function aQ(t,e){for(var n=t.length;n--;)if($y(t[n][0],e))return n;return-1}var Xy=aQ,lQ=Array.prototype,uQ=lQ.splice;function cQ(t){var e=this.__data__,n=Xy(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():uQ.call(e,n,1),--this.size,!0}var dQ=cQ;function hQ(t){var e=this.__data__,n=Xy(e,t);return n<0?void 0:e[n][1]}var fQ=hQ;function pQ(t){return Xy(this.__data__,t)>-1}var mQ=pQ;function gQ(t,e){var n=this.__data__,r=Xy(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var vQ=gQ;function nh(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}nh.prototype.clear=oQ;nh.prototype.delete=dQ;nh.prototype.get=fQ;nh.prototype.has=mQ;nh.prototype.set=vQ;var Yy=nh,yQ=nc(Ao,"Map"),wp=yQ;function xQ(){this.size=0,this.__data__={hash:new NP,map:new(wp||Yy),string:new NP}}var _Q=xQ;function wQ(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var SQ=wQ;function bQ(t,e){var n=t.__data__;return SQ(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Zy=bQ;function MQ(t){var e=Zy(this,t).delete(t);return this.size-=e?1:0,e}var EQ=MQ;function TQ(t){return Zy(this,t).get(t)}var AQ=TQ;function CQ(t){return Zy(this,t).has(t)}var PQ=CQ;function LQ(t,e){var n=Zy(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var OQ=LQ;function rh(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}rh.prototype.clear=_Q;rh.prototype.delete=EQ;rh.prototype.get=AQ;rh.prototype.has=PQ;rh.prototype.set=OQ;var Y2=rh,IQ="Expected a function";function Z2(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(IQ);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(Z2.Cache||Y2),n}Z2.Cache=Y2;var DQ=Z2,RQ=500;function zQ(t){var e=DQ(t,function(r){return n.size===RQ&&n.clear(),r}),n=e.cache;return e}var NQ=zQ,kQ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,BQ=/\\(\\)?/g,FQ=NQ(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(kQ,function(n,r,i,s){e.push(i?s.replace(BQ,"$1"):r||n)}),e}),UQ=FQ;function VQ(t){return t==null?"":_Y(t)}var HQ=VQ;function GQ(t,e){return qs(t)?t:VJ(t,e)?[t]:UQ(HQ(t))}var ih=GQ,WQ=1/0;function jQ(t){if(typeof t=="string"||U2(t))return t;var e=t+"";return e=="0"&&1/t==-WQ?"-0":e}var Jy=jQ;function $Q(t,e){e=ih(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[Jy(e[n++])];return n&&n==r?t:void 0}var Z4=$Q;function qQ(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var J2=qQ,kP=Eo?Eo.isConcatSpreadable:void 0;function XQ(t){return qs(t)||xp(t)||!!(kP&&t&&t[kP])}var YQ=XQ;function J4(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=YQ),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?J4(a,e-1,n,r,i):J2(i,a):r||(i[i.length]=a)}return i}var ZQ=J4;function JQ(t){var e=t==null?0:t.length;return e?ZQ(t,1):[]}var QQ=JQ;function KQ(t){return H4(G4(t,void 0,QQ),t+"")}var Q4=KQ,eK=Y4(Object.getPrototypeOf,Object),Q2=eK,tK="[object Object]",nK=Function.prototype,rK=Object.prototype,K4=nK.toString,iK=rK.hasOwnProperty,sK=K4.call(Object);function oK(t){if(!Cl(t)||ec(t)!=tK)return!1;var e=Q2(t);if(e===null)return!0;var n=iK.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&K4.call(n)==sK}var ek=oK;function aK(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}var lK=aK;function uK(){this.__data__=new Yy,this.size=0}var cK=uK;function dK(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var hK=dK;function fK(t){return this.__data__.get(t)}var pK=fK;function mK(t){return this.__data__.has(t)}var gK=mK,vK=200;function yK(t,e){var n=this.__data__;if(n instanceof Yy){var r=n.__data__;if(!wp||r.length<vK-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Y2(r)}return n.set(t,e),this.size=n.size,this}var xK=yK;function sh(t){var e=this.__data__=new Yy(t);this.size=e.size}sh.prototype.clear=cK;sh.prototype.delete=hK;sh.prototype.get=pK;sh.prototype.has=gK;sh.prototype.set=xK;var tk=sh;function _K(t,e){return t&&eh(e,X2(e),t)}var wK=_K;function SK(t,e){return t&&eh(e,Zp(e),t)}var bK=SK,nk=typeof exports=="object"&&exports&&!exports.nodeType&&exports,BP=nk&&typeof module=="object"&&module&&!module.nodeType&&module,MK=BP&&BP.exports===nk,FP=MK?Ao.Buffer:void 0,UP=FP?FP.allocUnsafe:void 0;function EK(t,e){if(e)return t.slice();var n=t.length,r=UP?UP(n):new t.constructor(n);return t.copy(r),r}var rk=EK;function TK(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}var AK=TK;function CK(){return[]}var ik=CK,PK=Object.prototype,LK=PK.propertyIsEnumerable,VP=Object.getOwnPropertySymbols,OK=VP?function(t){return t==null?[]:(t=Object(t),AK(VP(t),function(e){return LK.call(t,e)}))}:ik,K2=OK;function IK(t,e){return eh(t,K2(t),e)}var DK=IK,RK=Object.getOwnPropertySymbols,zK=RK?function(t){for(var e=[];t;)J2(e,K2(t)),t=Q2(t);return e}:ik,sk=zK;function NK(t,e){return eh(t,sk(t),e)}var kK=NK;function BK(t,e,n){var r=e(t);return qs(t)?r:J2(r,n(t))}var ok=BK;function FK(t){return ok(t,X2,K2)}var UK=FK;function VK(t){return ok(t,Zp,sk)}var ak=VK,HK=nc(Ao,"DataView"),hb=HK,GK=nc(Ao,"Promise"),fb=GK,WK=nc(Ao,"Set"),pb=WK,HP="[object Map]",jK="[object Object]",GP="[object Promise]",WP="[object Set]",jP="[object WeakMap]",$P="[object DataView]",$K=tc(hb),qK=tc(wp),XK=tc(fb),YK=tc(pb),ZK=tc(db),eu=ec;(hb&&eu(new hb(new ArrayBuffer(1)))!=$P||wp&&eu(new wp)!=HP||fb&&eu(fb.resolve())!=GP||pb&&eu(new pb)!=WP||db&&eu(new db)!=jP)&&(eu=function(t){var e=ec(t),n=e==jK?t.constructor:void 0,r=n?tc(n):"";if(r)switch(r){case $K:return $P;case qK:return HP;case XK:return GP;case YK:return WP;case ZK:return jP}return e});var e3=eu,JK=Object.prototype,QK=JK.hasOwnProperty;function KK(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&QK.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var eee=KK,tee=Ao.Uint8Array,qP=tee;function nee(t){var e=new t.constructor(t.byteLength);return new qP(e).set(new qP(t)),e}var t3=nee;function ree(t,e){var n=e?t3(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var iee=ree,see=/\w*$/;function oee(t){var e=new t.constructor(t.source,see.exec(t));return e.lastIndex=t.lastIndex,e}var aee=oee,XP=Eo?Eo.prototype:void 0,YP=XP?XP.valueOf:void 0;function lee(t){return YP?Object(YP.call(t)):{}}var uee=lee;function cee(t,e){var n=e?t3(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var lk=cee,dee="[object Boolean]",hee="[object Date]",fee="[object Map]",pee="[object Number]",mee="[object RegExp]",gee="[object Set]",vee="[object String]",yee="[object Symbol]",xee="[object ArrayBuffer]",_ee="[object DataView]",wee="[object Float32Array]",See="[object Float64Array]",bee="[object Int8Array]",Mee="[object Int16Array]",Eee="[object Int32Array]",Tee="[object Uint8Array]",Aee="[object Uint8ClampedArray]",Cee="[object Uint16Array]",Pee="[object Uint32Array]";function Lee(t,e,n){var r=t.constructor;switch(e){case xee:return t3(t);case dee:case hee:return new r(+t);case _ee:return iee(t,n);case wee:case See:case bee:case Mee:case Eee:case Tee:case Aee:case Cee:case Pee:return lk(t,n);case fee:return new r;case pee:case vee:return new r(t);case mee:return aee(t);case gee:return new r;case yee:return uee(t)}}var Oee=Lee;function Iee(t){return typeof t.constructor=="function"&&!j2(t)?XY(Q2(t)):{}}var uk=Iee,Dee="[object Map]";function Ree(t){return Cl(t)&&e3(t)==Dee}var zee=Ree,ZP=kd&&kd.isMap,Nee=ZP?q2(ZP):zee,kee=Nee,Bee="[object Set]";function Fee(t){return Cl(t)&&e3(t)==Bee}var Uee=Fee,JP=kd&&kd.isSet,Vee=JP?q2(JP):Uee,Hee=Vee,Gee=1,Wee=2,jee=4,ck="[object Arguments]",$ee="[object Array]",qee="[object Boolean]",Xee="[object Date]",Yee="[object Error]",dk="[object Function]",Zee="[object GeneratorFunction]",Jee="[object Map]",Qee="[object Number]",hk="[object Object]",Kee="[object RegExp]",ete="[object Set]",tte="[object String]",nte="[object Symbol]",rte="[object WeakMap]",ite="[object ArrayBuffer]",ste="[object DataView]",ote="[object Float32Array]",ate="[object Float64Array]",lte="[object Int8Array]",ute="[object Int16Array]",cte="[object Int32Array]",dte="[object Uint8Array]",hte="[object Uint8ClampedArray]",fte="[object Uint16Array]",pte="[object Uint32Array]",hn={};hn[ck]=hn[$ee]=hn[ite]=hn[ste]=hn[qee]=hn[Xee]=hn[ote]=hn[ate]=hn[lte]=hn[ute]=hn[cte]=hn[Jee]=hn[Qee]=hn[hk]=hn[Kee]=hn[ete]=hn[tte]=hn[nte]=hn[dte]=hn[hte]=hn[fte]=hn[pte]=!0;hn[Yee]=hn[dk]=hn[rte]=!1;function U0(t,e,n,r,i,s){var o,a=e&Gee,l=e&Wee,c=e&jee;if(n&&(o=i?n(t,r,i,s):n(t)),o!==void 0)return o;if(!To(t))return t;var d=qs(t);if(d){if(o=eee(t),!a)return V4(t,o)}else{var u=e3(t),h=u==dk||u==Zee;if($2(t))return rk(t,a);if(u==hk||u==ck||h&&!i){if(o=l||h?{}:uk(t),!a)return l?kK(t,bK(o,t)):DK(t,wK(o,t))}else{if(!hn[u])return i?t:{};o=Oee(t,u,a)}}s||(s=new tk);var m=s.get(t);if(m)return m;s.set(t,o),Hee(t)?t.forEach(function(y){o.add(U0(y,e,n,y,t,s))}):kee(t)&&t.forEach(function(y,v){o.set(v,U0(y,e,n,v,t,s))});var g=c?l?ak:UK:l?Zp:X2,x=d?void 0:g(t);return cZ(x||t,function(y,v){x&&(v=y,y=t[v]),G2(o,v,U0(y,e,n,v,t,s))}),o}var fk=U0,mte=1,gte=4;function vte(t){return fk(t,mte|gte)}var pk=vte;function yte(t,e){return t!=null&&e in Object(t)}var xte=yte;function _te(t,e,n){e=ih(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=Jy(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&W2(i)&&jy(o,i)&&(qs(t)||xp(t)))}var wte=_te;function Ste(t,e){return t!=null&&wte(t,e,xte)}var bte=Ste;function Mte(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[t?a:++i];if(n(s[l],l,s)===!1)break}return e}}var Ete=Mte,Tte=Ete(),Ate=Tte;function Cte(t,e,n){(n!==void 0&&!$y(t[e],n)||n===void 0&&!(e in t))&&H2(t,e,n)}var mb=Cte;function Pte(t){return Cl(t)&&qy(t)}var Lte=Pte;function Ote(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var gb=Ote;function Ite(t){return eh(t,Zp(t))}var Dte=Ite;function Rte(t,e,n,r,i,s,o){var a=gb(t,n),l=gb(e,n),c=o.get(l);if(c){mb(t,n,c);return}var d=s?s(a,l,n+"",t,e,o):void 0,u=d===void 0;if(u){var h=qs(l),m=!h&&$2(l),g=!h&&!m&&q4(l);d=l,h||m||g?qs(a)?d=a:Lte(a)?d=V4(a):m?(u=!1,d=rk(l,!0)):g?(u=!1,d=lk(l,!0)):d=[]:ek(l)||xp(l)?(d=a,xp(a)?d=Dte(a):(!To(a)||V2(a))&&(d=uk(l))):u=!1}u&&(o.set(l,d),i(d,l,r,s,o),o.delete(l)),mb(t,n,d)}var zte=Rte;function mk(t,e,n,r,i){t!==e&&Ate(e,function(s,o){if(i||(i=new tk),To(s))zte(t,e,o,n,mk,r,i);else{var a=r?r(gb(t,o),s,o+"",t,e,i):void 0;a===void 0&&(a=s),mb(t,o,a)}},Zp)}var Nte=mk;function kte(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Bte=kte;function Fte(t,e){return e.length<2?t:Z4(t,lK(e,0,-1))}var Ute=Fte,Vte=PZ(function(t,e,n){Nte(t,e,n)}),Dv=Vte;function Hte(t,e){return e=ih(e,t),t=Ute(t,e),t==null||delete t[Jy(Bte(e))]}var Gte=Hte;function Wte(t){return ek(t)?void 0:t}var jte=Wte,$te=1,qte=2,Xte=4,Yte=Q4(function(t,e){var n={};if(t==null)return n;var r=!1;e=B4(e,function(s){return s=ih(s,t),r||(r=s.length>1),s}),eh(t,ak(t),n),r&&(n=fk(n,$te|qte|Xte,jte));for(var i=e.length;i--;)Gte(n,e[i]);return n}),vb=Yte;function Zte(t,e,n,r){if(!To(t))return t;e=ih(e,t);for(var i=-1,s=e.length,o=s-1,a=t;a!=null&&++i<s;){var l=Jy(e[i]),c=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(i!=o){var d=a[l];c=r?r(d,l,a):void 0,c===void 0&&(c=To(d)?d:jy(e[i+1])?[]:{})}G2(a,l,c),a=a[l]}return t}var Jte=Zte;function Qte(t,e,n){for(var r=-1,i=e.length,s={};++r<i;){var o=e[r],a=Z4(t,o);n(a,o)&&Jte(s,ih(o,t),a)}return s}var Kte=Qte;function ene(t,e){return Kte(t,e,function(n,r){return bte(t,r)})}var tne=ene,nne=Q4(function(t,e){return t==null?{}:tne(t,e)}),Rv=nne,Sp;(t=>{t.identity={...rb.identity,hiddenMatrix:Nd.identity};function e(i){return{position:i.position,rotation:i.rotation,scale:i.scale,hiddenMatrix:i.hiddenMatrix}}t.fromObject=e;function n(i,s){return{position:(s==null?void 0:s.position)||i.position,rotation:(s==null?void 0:s.rotation)||i.rotation,scale:(s==null?void 0:s.scale)||i.scale,hiddenMatrix:(s==null?void 0:s.hiddenMatrix)||i.hiddenMatrix}}t.merge=n;function r(i,s){return{position:Lf.isEqual(i.position,s.position)?null:s.position,rotation:Lf.isEqual(i.rotation,s.rotation)?null:s.rotation,scale:Lf.isEqual(i.scale,s.scale)?null:s.scale,hiddenMatrix:Nd.isEqual(i.hiddenMatrix,s.hiddenMatrix)?null:s.hiddenMatrix}}t.diff=r})(Sp||(Sp={}));var yb;(t=>t.defaultData={fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(yb||(yb={}));var bo;(t=>t.defaultData={states:new an,events:new an,visible:!0,raycastLock:!1,physics:null,...Sp.identity})(bo||(bo={}));var QP;(t=>t.defaultData={type:"Empty",...bo.defaultData})(QP||(QP={}));var yd;(t=>t.defaultData={type:"Mesh",...bo.defaultData,...ub.defaultData})(yd||(yd={}));var xb;(t=>t.defaultData={...bo.defaultData,...Sp.identity,...yp.defaultData})(xb||(xb={}));var KP;(t=>{function e(n){return{...bo.defaultData,...ob.defaultData(n)}}t.defaultData=e})(KP||(KP={}));var eL;(t=>(t.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Nd.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:yb.defaultData,states:new an,events:new an,...yp.defaultData},t.defaultMeshObject={name:"Rectangle",...bo.defaultData,...yd.defaultData,geometry:vd.defaultData("RectangleGeometry"),material:oa.defaultTwoLayerData("phong","layer1","layer2")},t.defaultBooleanObject={name:"Boolean",...bo.defaultData,...yd.defaultData,geometry:vd.defaultData("BooleanGeometry"),material:oa.defaultTwoLayerData("phong","layer1","layer2")},t.defaultTextObject={name:"Text",...bo.defaultData,...yd.defaultData,geometry:vd.defaultData("TextGeometry"),material:oa.defaultTwoLayerData("phong","layer1","layer2")}))(eL||(eL={}));var tL;(t=>{function e(r,i){if(i===void 0)return r;let s={...r};return"material"in s&&"material"in i&&i.material&&(s.material=lP(s.material,o=>{if(typeof o!="string")for(let[a,l]of Object.entries(i.material.layers)){let c=o.layers.data(a);c&&Dv(c,l)}}).data),s.materials&&i.materials&&(s.materials=lP(s.materials,o=>{var a,l;for(let c=0;c<s.materials.length;c++){let d=i.materials[c];if(typeof d!="string")for(let[u,h]of Object.entries(d.layers)){let m=(l=(a=o[c])==null?void 0:a.layers)==null?void 0:l.data(u);m&&Dv(m,h)}}}).data),s}t.patchMaterialState=e;function n(r,i){var o,a;if(i===void 0)return r;let s={...r};if(Object.assign(s,Sp.merge(s,i)),Lv.is(r.type)){s.orthographic={...s.orthographic},s.perspective={...s.perspective};let l=i;((o=l.orthographic)==null?void 0:o.zoom)!==void 0&&(s.orthographic.zoom=l.orthographic.zoom),((a=l.perspective)==null?void 0:a.zoom)!==void 0&&(s.perspective.zoom=l.perspective.zoom),l.isUpVectorFlipped!==void 0&&(s.isUpVectorFlipped=l.isUpVectorFlipped),l.targetOffset!==void 0&&(s.targetOffset=l.targetOffset)}else if(r.type==="Mesh")s.geometry={...s.geometry},Object.assign(s.geometry,i.geometry),s=e(s,i);else if(sb.is(r.type)){let l=i;l.intensity!==void 0&&(s.intensity=l.intensity),l.color!==void 0&&(typeof l.color=="string"?s.color=l.color:s.color=us.clone(l.color))}return s}t.patch=n})(tL||(tL={}));var zv;(t=>t.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,isTouchZoom:!0,orbitTouches:2,panTouches:3})(zv||(zv={}));var _b;(t=>t.defaultData={orbitControls:zv.defaultData,playCamera:null,withBackground:!0,preventScroll:!1,settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:1,stopMode:"manual",duration:5e3},web:{compress:!0,preset:1,preload:!0}},stopRaycast:!0,joystickSizeAndXYOffset:Array(12).fill(0).map((e,n)=>{let r=0,i=0;return n<5?i=-30:n<10&&(i=30),n===0||n===10||n===5?r=30:(n===4||n===11||n===9)&&(r=-30),[120,[r,i],"show"]}),gameControlObject:null})(_b||(_b={}));function Qy(t,e){return Object.setPrototypeOf(t,e),t}function rne(t){return Array.isArray(t)?t:[t]}var wb;(t=>{function e(){let r={};return r["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},Qy(r,wr.prototype)}t.defaultColors=e;function n(){return{materials:new wr,images:new wr,colors:new wr,audios:new wr,fonts:new wr,penumbraSize:[.5,.5,.5]}}t.emptyData=n})(wb||(wb={}));function nL(t){t.layers.forEach(e=>{if(e.type==="depth"&&e.colorA!==void 0){let n=e.colorA,r=e.colorB,i=[[n.r,n.g,n.b,n.a],[r.r,r.g,r.b,r.a]],s=[0,1];for(let a=2;a<10;a++)i.push(i[1]),s.push(1);let o={...Rv(ms(e),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,e.near),far:Math.max(0,e.far),colors:i,steps:s,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(e,o)}else if(e.type==="depth"&&e.gradientType===1&&(e.near<0||e.far<0)){let n={...ms(e),near:Math.max(e.near,0),far:Math.max(e.far,0)};Object.assign(e,n)}})}function V0(t,e){Object.values(t.shared.materials).forEach(n=>e(n))}function H0(t,e){t.scene.objects.traverse((n,r)=>{"materials"in r?r.materials.forEach(i=>{typeof i!="string"&&e(i)}):"material"in r&&typeof r.material!="string"&&e(r.material)})}function ine(t){Object.assign(t.scene.publish,{orbitControls:{...zv.defaultData,...ms(t.scene.publish.orbitControls)}})}function sne(t){Object.assign(t.scene.publish.settings,{video:{..._b.defaultData.settings.video,...ms(t.scene.publish.settings.video)}})}function one(t){function e(n){if(n.layers){for(let r of Object.values(n.layers))if(r){for(let[i,s]of Object.entries(r))if((JX.includes(i)||typeof s=="boolean")&&delete r[i],i==="texture")for(let[o,a]of Object.entries(s))(QX.includes(o)||typeof a=="boolean")&&delete s[o]}}}t.scene.objects.traverse((n,r)=>{r.states.forEach(i=>{let s=i;s.material?e(s.material):s.materials&&s.materials.forEach(o=>{e(o)})})})}function ane(t){t.scene.publish.withBackground=!0}function lne(t){t.scene.publish.settings.web={compress:!0,preload:!0,preset:1}}function une(t){t.scene.objects.traverse((e,n)=>{let r=n.cloner;r&&(r.radial.scale=r.radial.scale.map(i=>i+1),r.linear.scale=r.linear.scale.map(i=>i+1))})}function cne(t){t.scene.objects.traverse((e,n)=>{let r=n.geometry;r&&(r.type==="DodecahedronGeometry"||r.type==="IcosahedronGeometry")&&(r.detail=Math.round(r.detail))})}function dne(t){t.scene.objects.traverse((e,n)=>{var i;let r=t.scene.objects.parent(e);n.type==="Mesh"&&(!r||((i=t.scene.objects.data(r).geometry)==null?void 0:i.type)!=="BooleanGeometry")&&(n.booleanExclude=null)})}function rL(t){t.layers===void 0&&Object.assign(t,oa.defaultTwoLayerData("lambert"))}function H_(t){!t.layers||t.layers.forEach(e=>{if(e.type==="depth"&&e.colors.length===10){let n=[...e.colors];n.push(e.colors[9]);let r=[...e.steps];r.push(e.steps[9]);let i={...ms(e),colors:n,steps:r};Object.assign(e,i)}})}function hne(t){t.scene.objects.traverse((e,n)=>{n.type==="Mesh"&&(n.geometry.type==="BooleanGeometry"||n.geometry.type==="SubdivGeometry")&&(n.geometry.phongAngle=35)})}function iL(t){t.scene.objects.traverse((e,n)=>{"materials"in n?n.materials.forEach(r=>{typeof r!="string"&&H_(r)}):"material"in n&&typeof n.material!="string"&&H_(n.material)}),Object.values(t.shared.materials).forEach(e=>H_(e))}function fne(t){t.scene.environment.ambientLight.softShadows=!1,t.scene.environment.ambientLight.softShadowQuality="low",t.scene.objects.traverse((e,n)=>{(n.type==="DirectionalLight"||n.type==="SpotLight")&&(n.shadowResolution=1024,n.shadowRadius=1,n.depth=1e5)}),t.shared.penumbraSize=new Array(5).fill(.5)}function pne(t){t.shared.audios=Qy({},wr.prototype)}function mne(t){let e=t.shared.materials;Object.entries(e).forEach(([n,r])=>{if(!r.layers){let i={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(e,{[n]:i})}})}function gne(t){Object.entries(ms(t.shared.images)).filter(e=>e[1].asset===!1).map(e=>e[0]).forEach(e=>{delete t.shared.images[e]}),Object.entries(ms(t.shared.audios)).filter(e=>e[1].asset===!1).map(e=>e[0]).forEach(e=>{delete t.shared.audios[e]})}function vne(t){t.scene.publish.settings.web.preload=!1}function sL(t){t.layers&&t.layers.forEach(e=>{e.type==="depth"&&e.num!==void 0&&(e.colors=e.colors.slice(0,e.num),e.steps=e.steps.slice(0,e.num),delete e.num)})}function yne(t){t.shared.fonts=Qy({},wr.prototype)}function xne(t){return t.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function _ne(t){let e=[];t.scene.objects.traverse((n,r)=>{let i=r;if(i.type==="TextFrame"){let s=oa.defaultTwoLayerData("phong"),o=typeof i.color=="string"?t.shared.colors[i.color]:i.color;s.layers[1].data.color={r:o.r,g:o.g,b:o.b},s.layers[1].data.alpha=i.alpha;let a=xne(i.font);t.shared.fonts[a]===void 0&&(t.shared.fonts[a]={name:a});let l={name:i.name,...bo.defaultData,...yd.defaultData,flatShading:!1,wireframe:!1,geometry:{...vd.defaultData("TextGeometry"),width:i.width,height:i.height,font:a,depth:0,horizontalAlign:i.horizontalAlign,verticalAlign:i.verticalAlign,fontSize:i.fontSize*1.40625,lineHeight:i.lineHeight/1.40625,letterSpacing:i.letterSpacing-1,text:i.text,textTransform:i.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:s,states:ms(i.states),events:ms(i.events),visible:i.visible,raycastLock:i.raycastLock,position:i.position,rotation:i.rotation,scale:i.scale,hiddenMatrix:i.hiddenMatrix},c=ms(t.scene.objects).parent(n);t.scene.objects.insertAfter(c!=null?c:null,n,[{id:n+"new",data:l,children:[]}]),e.push(n)}}),e.forEach(n=>{t.scene.objects.delete(n)})}function wne(t){let e={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};t.scene.objects.traverse((n,r)=>{r.events.forEach(i=>{if(e[Number(i.type)])if(Object.assign(i,{type:e[Number(i.type)]}),i.type==="Audio"&&"audioEvent"in i&&(Object.assign(i,{playAudio:i.audioEvent}),delete i.audioEvent),i.type==="GameControl")Object.assign(i,{gameActions:{idle:new an,move:new an,jump:new an}});else{let s=new an;Object.assign(i,{actions:s}),(i.type==="MouseDown"||i.type==="MouseUp"||i.type==="KeyDown"||i.type==="KeyUp")&&"url"in i&&s.push({fi:0,id:nn.generateUUID(),data:{type:"Link",url:i.url,delay:0}}),"targets"in i&&(i.targets.forEach((o,a,l)=>{let c={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},d={easing:o.easing,duration:o.duration};o.easing===6?Object.assign(d,Rv(o,"mass","stiffness","damping","velocity")):o.easing===5&&Object.assign(d,{control1:{...o.control1},control2:{...o.control2}});let u={repeat:o.repeat?-1:0,delay:o.delay,delayDirection:o.delayDirection,direction:o.cycle&&o.rewind?"pingpong-rewind":o.cycle?"pingpong":"normal"},h={state:o.state,...u,...d},m={allowSlerp:!0,type:"Transition",object:o.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new an({fi:0,id:nn.generateUUID(),data:c},{fi:1,id:nn.generateUUID(),data:h})};s.push({fi:l,id:a,data:m})}),delete i.targets)}})})}function Sne(t){t.scene.objects.traverse((e,n)=>{function r(i,s){var l;let o=new an,a=[];if(n.events.forEach((c,d,u)=>{if(c.type==="Audio"&&c.trigger===s){let h;a.push(d),c.interaction==="play"?h={...Rv(c,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in c?c.after:void 0,toggle:"after"in c?c.toggle:void 0,type:"Audio"}:(c.interaction==="pause"||c.interaction==="stop")&&(h={...Rv(c,"interaction","delay","object","playAudio"),type:"Audio"}),h&&o.push({fi:u,id:d,data:h})}}),a.forEach(c=>n.events.delete(c)),o.length){let c=(l=n.events.find(d=>d.type===i))==null?void 0:l.data;c?"actions"in c&&c.actions.insertBefore(null,o):n.events.insertBefore(null,[{id:nn.generateUUID(),data:{type:i,actions:o}}])}}r("Start","start"),r("MouseDown","mouseDown"),r("MouseUp","mouseUp"),r("KeyDown","keyDown"),r("KeyUp","keyUp")})}function oL(t){var n;let e=(n=t.layers.find(r=>r.type==="light"))==null?void 0:n.data;if((e==null?void 0:e.category)==="basic"){let r=Ja.defaultData("light","phong"),i=e;Object.assign(i,r),i.visible=!1}}function bne(t){V0(t,oL),H0(t,oL)}var aL=22;function Mne(t){var n;let e=(n=t.schema)!=null?n:0;e!==aL&&(console.warn("updating from ",e,"to ",aL),e<1&&(H0(t,nL),V0(t,nL),t.schema=1),e<2&&(ine(t),t.schema=2),e<3&&(one(t),t.schema=3),e<4&&(ane(t),t.schema=4),e<5&&(lne(t),t.schema=5),e<6&&(une(t),t.schema=6),e<7&&(cne(t),t.schema=7),e<8&&(dne(t),t.schema=8),e<9&&(iL(t),t.schema=9),e<10&&(hne(t),t.schema=10),e<11&&(fne(t),t.schema=11),e<12&&(iL(t),t.schema=12),e<13&&(pne(t),t.schema=13),e<14&&(mne(t),t.schema=14),e<15&&(gne(t),t.schema=15),e<16&&(vne(t),t.schema=16),e<17&&(H0(t,sL),V0(t,sL),t.schema=17),e<18&&(H0(t,rL),V0(t,rL),t.schema=18),e<19&&(sne(t),t.schema=19),e<20&&(yne(t),_ne(t),t.schema=20),e<21&&(wne(t),Sne(t),t.schema=21),e<22&&(bne(t),t.schema=22))}var Sb;(t=>t.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII="})(Sb||(Sb={}));var Ene=class extends Rt{},Tne=class extends Ene{constructor(t){super(),this.object=t,this.matrixAutoUpdate=!0}get castShadow(){return this.object.castShadow}set castShadow(t){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(t){}get isMesh(){return!0}get isLight(){return!1}get layers(){return this.object.layers}set layers(t){}get isCamera(){return!1}get geometry(){return this.object.geometry}get material(){return this.object.material}},bb=class extends Rt{constructor(t,e={}){super(),this.object=t;let n=t.recursiveBBox.getSize(new R),r=.1;this.parameters=ib.defaultData(n.toArray(),r),Dv(this.parameters,e),this.update(),this.setHideBase(this.parameters.hideBase)}setHideBase(t){this.parameters.hideBase=t}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters)}this.children.forEach(t=>t.updateMatrix())}_updateCount(){let t=this.parameters.type==="grid"?this.parameters.grid.count[0]*this.parameters.grid.count[1]*this.parameters.grid.count[2]:this.parameters.count;if(this.children.length!==t)if(this.children.length<t)for(let e=0,n=t-this.children.length;e<n;++e){let r=new Tne(this.object);r.visible=!0,this.add(r),this.parameters.hideBase&&this.setHideBase(!0)}else for(let e=0,n=this.children.length-t;e<n;++e)this.remove(this.children[0])}_updateRadial(t){let e=t.radial,n=e.start*nn.DEG2RAD,r=e.end*nn.DEG2RAD,i=n-r,s=new gl(e.rotation[0]*nn.DEG2RAD,e.rotation[1]*nn.DEG2RAD,e.rotation[2]*nn.DEG2RAD),o;switch(e.axis){case"z":o=new R(0,0,1);break;case"y":o=new R(0,1,0);break;default:case"x":o=new R(1,0,0);break}for(let[a,l]of this.children.entries()){l.scale.x=e.scale[0],l.scale.y=e.scale[1],l.scale.z=e.scale[2],l.position.setScalar(0);let c=i/t.count*a-n;switch(e.axis){case"x":l.rotation.set(0,c,0);break;case"y":l.rotation.set(0,0,c);break;case"z":l.rotation.set(c,0,0);break}l.translateOnAxis(o,e.radius),l.position.x+=e.position[0],l.position.y+=e.position[1],l.position.z+=e.position[2],e.alignment===!0?(l.rotation.x+=s.x,l.rotation.y+=s.y,l.rotation.z+=s.z):l.rotation.copy(s)}}_updateLinear(t){if(t.type!=="linear")throw new Error;let e=t.linear,n=new gl(e.rotation[0]*nn.DEG2RAD,e.rotation[1]*nn.DEG2RAD,e.rotation[2]*nn.DEG2RAD);for(let[r,i]of this.children.entries())i.scale.x=1+(e.scale[0]-1)*r,i.scale.y=1+(e.scale[1]-1)*r,i.scale.z=1+(e.scale[2]-1)*r,i.rotation.x=n.x*r,i.rotation.y=n.y*r,i.rotation.z=n.z*r,i.position.x=e.position[0]*r,i.position.y=e.position[1]*r,i.position.z=e.position[2]*r}_updateGrid(t){let e=0,n=t.grid;if(n.useCenter===!0){let r={x:n.count[0]%2===0?2:1,y:n.count[1]%2===0?2:1,z:n.count[2]%2===0?2:1},i=new R(n.size[0]*(n.count[0]-r.x)*.5,n.size[1]*(n.count[1]-r.y)*.5,n.size[2]*(n.count[2]-r.z)*.5);for(let s=0;s<n.count[0];s++)for(let o=0;o<n.count[1];o++)for(let a=0;a<n.count[2];a++){let l=this.children[e++];l.scale.setScalar(1),l.rotation.set(0,0,0),l.position.x=n.size[0]*s-i.x,l.position.y=n.size[1]*o-i.y,l.position.z=n.size[2]*a-i.z}}else for(let r=0;r<n.count[0];r++)for(let i=0;i<n.count[1];i++)for(let s=0;s<n.count[2];s++){let o=this.children[e++];o.scale.setScalar(1),o.rotation.set(0,0,0),o.position.x=n.size[0]*r,o.position.y=-n.size[1]*i,o.position.z=-n.size[2]*s}}fromClonerState(t){return t.hideBase!==void 0&&this.setHideBase(t.hideBase),Dv(this.parameters,t),this.update(),this}},Jp=t=>{var e;return e=class extends t{constructor(){super(...arguments),this.isObjectHelper=!0}},e.geometryHelper=new _s(30,30,30),e},o0=new Sl,G_=new xs,lL=new nt,Qp=(t,e,n,r,i=!1)=>{let s=e,o=t.matrixWorld;if(s.boundingSphere===null&&s.computeBoundingSphere(),G_.copy(s.boundingSphere),G_.applyMatrix4(o),n.ray.intersectsSphere(G_)===!1||(lL.copy(o).invert(),o0.copy(n.ray).applyMatrix4(lL),s.boundingBox!==null&&o0.intersectsBox(s.boundingBox)===!1))return;let a,l,c,d,u=s.index,h=s.attributes.position,m=s.drawRange,g,x;if(i===!1){let v=Math.max(0,m.start),_=Math.min(u.count,m.start+m.count);for(g=v,x=_;g<x;g+=3)if(l=u.getX(g),c=u.getX(g+1),d=u.getX(g+2),a=y(t,n,o0,h,l,c,d),a){a.faceIndex=Math.floor(g/3),r.push(a);return}}else{let v=s.attributes.position,_=new R,S=new R,b=new R,A=new R,E=2,C=1/((t.scale.x+t.scale.y+t.scale.z)/3),T=C*C,O=Math.max(0,m.start),L=Math.min(v.count,m.start+m.count);for(let k=O,B=L-1;k<B;k+=E){if(_.fromBufferAttribute(v,k),S.fromBufferAttribute(v,k+1),o0.distanceSqToSegment(_,S,A,b)>T)continue;A.applyMatrix4(t.matrixWorld);let G=n.ray.origin.distanceTo(A);G<n.near||G>n.far||r.push({distance:G,point:b.clone().applyMatrix4(t.matrixWorld),object:t})}}function y(v,_,S,b,A,E,C){let T=new R,O=new R,L=new R,k=new R,B=new R;if(T.fromBufferAttribute(b,A),O.fromBufferAttribute(b,E),L.fromBufferAttribute(b,C),S.intersectTriangle(T,O,L,!1,k)===null)return null;B.copy(k),B.applyMatrix4(v.matrixWorld);let G=_.ray.origin.distanceTo(B);return G<_.near||G>_.far?null:{faceIndex:1,distance:G,point:B.clone(),object:v}}},a0=new R,Ki=new Xu,Ane=class extends Xs{constructor(t){let e=new tt,n=new Ur({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],s={},o=new We(15711266),a=new We(15711266),l=new We(2857471);c("n1","n2",o),c("n2","n4",o),c("n4","n3",o),c("n3","n1",o),c("f1","f2",o),c("f2","f4",o),c("f4","f3",o),c("f3","f1",o),c("n1","f1",o),c("n2","f2",o),c("n3","f3",o),c("n4","f4",o),c("p","n1",a),c("p","n2",a),c("p","n3",a),c("p","n4",a),c("u1","u2",l),c("u2","u3",l),c("u3","u1",l);function c(u,h,m){d(u,m),d(h,m)}function d(u,h){r.push(0,0,0),i.push(h.r,h.g,h.b),s[u]===void 0&&(s[u]=[]),s[u].push(r.length/3-1)}e.setAttribute("position",new Ne(r,3)),e.setAttribute("color",new Ne(i,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){let t=this.geometry,e=this.pointMap;Ki.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let n=1,r=1,i=.8;Os("n1",e,t,Ki,-n,-r,i),Os("n2",e,t,Ki,n,-r,i),Os("n3",e,t,Ki,-n,r,i),Os("n4",e,t,Ki,n,r,i);let s=i;Os("f1",e,t,Ki,-n,-r,s),Os("f2",e,t,Ki,n,-r,s),Os("f3",e,t,Ki,-n,r,s),Os("f4",e,t,Ki,n,r,s);let o=s,a=.5;Os("u1",e,t,Ki,n*.7*a,r*1.1,o),Os("u2",e,t,Ki,-n*.7*a,r*1.1,o),Os("u3",e,t,Ki,0,r*(1.1+.9*a),o),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Os(t,e,n,r,i,s,o){a0.set(i,s,o).unproject(r);let a=e[t];if(a!==void 0){let l=n.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],a0.x,a0.y,a0.z)}}var Cne=class extends Jp(Ane){constructor(t){super(t),this.object=t,this.object=t,this.name=`CombinedCameraHelper: ${t.uuid}`}updateMatrixWorld(t){super.updateMatrixWorld(t),this.updateTarget()}updateTarget(){let t=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(t)}raycast(t,e){Qp(this.object,this.geometry,t,e,!0)}},gk=class extends Jp(zN){constructor(t,e=15,n=10066329){super(t,e,n),this.object=t,this.added=!1,this.name=`DirectionalLightHelper: ${t.uuid}`}raycast(t,e){Qp(this.object,gk.geometryHelper,t,e)}},vk=class extends Jp(NN){constructor(t,e=15){super(e),this.object=t,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${t.uuid}`,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}raycast(t,e){Qp(this.object,vk.geometryHelper,t,e)}update(){}},yk=class extends Jp(RN){constructor(t,e=15,n=6710886){super(t,e,n),this.object=t,this.name=`PointLightHelper: ${t.uuid}`}raycast(t,e){Qp(this.object,yk.geometryHelper,t,e)}},Mb=class extends Jp(IN){constructor(t,e=6710886){super(t,e),this.object=t,this.name=`SpotLightHelper: ${t.uuid}`}raycast(t,e){Qp(this.object,Mb.geometryHelper,t,e)}update(){if(this.object!==void 0){let t=Mb._vector,e=this.object.distance?this.object.distance:1e3,n=e*Math.tan(this.object.angle);this.cone.scale.set(n,n,e),t.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(t);let r=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let i=0,s=this.cone.material.length;i<s;i++)this.cone.material[i].color.set(r);else this.cone.material.color.set(r)}}},xk=Mb;xk._vector=new R;var Qh=1e-12,n3=class{constructor(t){this.position=new se,this.startPosition=new se,this.uuid=nn.generateUUID(),this.position=t.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(t){this.position.copy(this.startPosition).add(t)}copy(t){return this.position.copy(t.position),this.startPosition.copy(t.startPosition),this}clone(){return new n3(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},Eb=class extends n3{constructor(t){super(t.position),this.parent=t}copy(t){return super.copy(t),this}clone(){return new Eb(this.parent).copy(this)}},xd=class extends n3{constructor(t,e){super(e),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=t,this.controls.push(new Eb(this),new Eb(this))}static create(t,e){let n=new xd(t,new se(...e.position));return n.controls[0].position.set(...e.controlPrevious.position),n.controls[1].position.set(...e.controlNext.position),n.roundness=e.roundness,n.areControlsDirectionsMirrored=e.areControlsDirectionsMirrored,n}getOppositeControl(t){let e=this.controls.indexOf(t);return e===0?this.controls[1]:e===1?this.controls[0]:null}applyOffsetToControls(t,e=1){for(let n=0,r=this.controls.length;n<r;n++){let i=this.controls[n];this.position.distanceTo(i.position)<=e?i.position.copy(this.position):i.applyOffset(t)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(t){return super.copy(t),this.controls[0].copy(t.controls[0]),this.controls[1].copy(t.controls[1]),this.roundness=t.roundness,this.uuid=t.uuid,this}clone(){return new xd(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var n,r;let t=(n=this.curveBefore)==null?void 0:n.getTangentAt(1),e=(r=this.curveAfter)==null?void 0:r.getTangentAt(0);return[t,e]}computeNormals(t=new se,e=new se){let[n,r]=this.computeTangents();return n&&r&&(uL(n,t),uL(r,e)),[t,e]}computeTangent(t=new se){let[e,n]=this.computeTangents();return e&&n&&t.copy(e).add(n).normalize(),t}computeNormal(t=new se){let[e,n]=this.computeNormals();return t.copy(e).add(n).normalize(),t}};function uL(t,e=new se){let n=t.length();return e.set(-t.y/n,t.x/n)}var r3=t=>t,oh=new se,Ky=new se,Pne=new se,Lne=new se,One=new se,Ine=new se,_k=new R,wk=new R;function Dne(t){let e=new se;e.addVectors(t.v0,oh.subVectors(t.v1,t.v0).multiplyScalar(2/3));let n=new se;return n.addVectors(t.v2,Ky.subVectors(t.v1,t.v2).multiplyScalar(2/3)),new hs(t.v0,e,n,t.v2)}function df(t,e,n=Number.EPSILON){return Math.abs(t-e)<n}function Rne(t,e,n=Number.EPSILON){return t.distanceTo(e)<n}function zne(t,e,n=Number.EPSILON){return t.distanceTo(e)<n}function Sk(t,e,n){let r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),i=Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)),s=Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2));return Math.acos((i*i+r*r-s*s)/(2*i*r))}function Nne(t,e,n){return dL(t,e)&&dL(e,n)&&Tb(t.position,e.position,n.position)}function Tb(t,e,n){return oh.copy(e).sub(t).cross(Ky.copy(n).sub(t))===0}function kne(t,e,n,r,i){let s=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),o=(t.y+e.y)/2,a=(t.x+e.x)/2,l=Math.sqrt(Math.pow(n,2)-Math.pow(s/2,2))*(t.y-e.y)/s,c=Math.sqrt(Math.pow(n,2)-Math.pow(s/2,2))*(e.x-t.x)/s;return r.set(a+l,o+c),i.set(a-l,o-c),[r,i]}function Bne(t,e,n){let r=t.distanceTo(n),i=e.distanceTo(n);return r<i?e:t}function Fne(t,e,n,r,i,s){let o=e.x-t.x,a=e.y-t.y,l=n.x-t.x,c=n.y-t.y,d=Math.sqrt((o+l)*(o+l)+(a+c)*(a+c)),u;return Sk(e,t,n)>Math.PI&&(d*=-1),df(c,a)?u=(a+c)*(r/d-.5)*8/3/(o-l):u=(o+l)*(r/d-.5)*8/3/(c-a),i.set(e.x-u*a,e.y+u*o),s.set(n.x+u*c,n.y-u*l),[i,s]}function cL(t,e){return t.position.equals(t.controls[1].position)&&e.position.equals(e.controls[0].position)}function dL(t,e){return Tb(t.position,t.controls[1].position,e.position)&&Tb(t.position,e.controls[0].position,e.position)}function Une(t,e,n,r,i=.5){let s=oh.subVectors(e,t).multiplyScalar(i).add(t),o=Ky.subVectors(n,e).multiplyScalar(i).add(e),a=Pne.subVectors(r,n).multiplyScalar(i).add(n),l=s,c=Lne.subVectors(o,s).multiplyScalar(i).add(s),d=One.subVectors(a,o).multiplyScalar(i).add(o),u=a,h=Ine.subVectors(d,c).multiplyScalar(i).add(c);return[t.x,t.y,l.x,l.y,c.x,c.y,h.x,h.y,d.x,d.y,u.x,u.y,r.x,r.y]}function Vne(t,e,n=12,r=!0){let i=wk.set(0,0,0),s,o=0;for(let a=0;a<e.length;a++){let l=r3(e[a]),c=oh,d=Tu(l,n);for(let u=0;u<=d;u++)if(l instanceof hs||l instanceof pa||l instanceof ps){if(l.getPoint(u/d,c),i.set(c.x,c.y,0),s!==void 0&&zne(s,i))continue;s===void 0&&(s=_k),s.copy(i),t.setXYZ(o,i.x,i.y,i.z),o++}}return r&&o>1&&!(t.getX(o-1)===t.getX(0)&&t.getY(o-1)===t.getY(0)&&t.getZ(o-1)===t.getZ(0))&&(t.setXYZ(o,t.getX(0),t.getY(0),t.getZ(0)),o++),t}function Hne(t,e,n,r=12,i=!0){let s=wk.set(0,0,0),o=0,a=[];for(let l=0;l<e.length;l++){if(n[l]===!1)continue;let c,d=r3(e[l]),u=oh,h=Tu(d,r);a.push(h);for(let m=0;m<=h;m++)if(d instanceof hs||d instanceof pa||d instanceof ps){if(d.getPoint(m/h,u),s.set(u.x,u.y,0),c==null?void 0:c.equals(s))continue;c===void 0?c=_k:(t.setXYZ(o,c.x,c.y,c.z),o++,t.setXYZ(o,s.x,s.y,s.z),o++),c.copy(s)}}return i&&o>1&&!(t.getX(o-1)===t.getX(0)&&t.getY(o-1)===t.getY(0)&&t.getZ(o-1)===t.getZ(0))&&(t.setXYZ(o,t.getX(0),t.getY(0),t.getZ(0)),o++),a}function hL(t,e=12,n=!1){let r=[];for(let i=0,s=t.length;i<s;i++){let o=t[i],a=0;if(n&&o.roundedCurveCorner!==void 0){let l=Tu(o.roundedCurveCorner,e)*.5;i>0&&(r[i-1]+=l),a+=l}o.curveAfter!==void 0&&(a+=Tu(o.curveAfter,e)),r.push(a)}return t.length>0&&n&&t[0].roundedCurveCorner!==void 0&&(r[t.length-1]+=Tu(t[0].roundedCurveCorner,e)*.5),r}function Tu(t,e=12){return t&&t instanceof Np?e*2:t&&(t instanceof ps||t instanceof a2)?1:t&&t instanceof Dy?e*t.points.length:e}function Gne(t,e,n=12,r=!0){let i,s=0;for(let o=0;o<e.length;o++){let a=r3(e[o]),l=Tu(a,n),c=oh;for(let d=0;d<=l;d++)if(a instanceof hs||a instanceof pa||a instanceof ps){if(a.getPoint(d/l,c),i!==void 0&&Rne(i,c,Qh))continue;i===void 0&&(i=Ky),i.copy(c),t.push(c.x,c.y),s++}}return df(t[0],t[t.length-2],Qh)&&df(t[1],t[t.length-1],Qh)&&(t.pop(),t.pop()),r&&s>1&&!(df(t[s-1],t[1],Qh)&&df(t[s-2],t[0],Qh))&&(t.push(t[0],t[1]),s++),t}var W_=new se,Wne=new se,jne=new se,$ne=new se,qne=new se,Xne=new se,zn=class extends Hs{constructor(t=100,e=100){super(),this.points=[],this.shapeHoles=[],this.eventDispatcher=new Ss,this.plane=new qo(new R(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=nn.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=t,this._height=e}static createFromState(t,e,n){let r=new zn;return r.isClosed=t.isClosed,r.points=t.points.map(i=>xd.create(i.id,i.data)),typeof t.roundness=="number"&&(r.roundness=t.roundness),r.shapeHoles=t.shapeHoles.map(i=>zn.createFromState(i)),e!==void 0&&n!==void 0&&r.applySize(e,n),r.update(),r}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(t){if(this._roundness!==t){this._roundness=t;for(let e=0,n=this.points.length;e<n;e++)this.points[e].roundness=t;this.needsUpdate=!0}}getPointsIndexesByIds(t){return t.map(e=>this.getPointIndexById(e)).filter(e=>e>=0)}getPointIndexById(t){let e=this.points.length,n=this.points.findIndex(r=>r.uuid===t);if(n<0){let r=e;for(let i=0,s=this.shapeHoles.length;i<s;i++){let o=this.shapeHoles[i],a=o.points.length,l=o.getPointIndexById(t);if(l<0)r+=a;else return l+r}}return n}getLineIndexById(t){return this.getPointIndexById(t)}getBezierPoint(t){if(t<=this.points.length-1)return this.points[t];if(this.shapeHoles.length>0){let e=this.points.length;for(let n=0,r=this.shapeHoles.length;n<r;n++){let i=this.shapeHoles[n],s=t-e;if(s<=i.points.length-1)return i.points[s];e+=i.points.length}}throw new Error("This shape does not have a point for this index: "+t)}getBezierPointIndex(t){let e=this.points.indexOf(t);if(e>=0)return e;if(e=this.points.length,this.shapeHoles.length>0)for(let n=0,r=this.shapeHoles.length;n<r;n++){let i=this.shapeHoles[n],s=i.points.indexOf(t);if(s>=0)return e+s;e+=i.points.length}return-1}getAllPoints(){let t=[].concat(...this.shapeHoles.map(e=>e.points));return[...this.points,...t]}applySize(t,e){t===0&&(t=.001),e===0&&(e=.001),this._width=t,this._height=e}applyScale(t,e){let n=W_.set(t,e);for(let r=0,i=this.points.length;r<i;r++){let s=this.points[r];s.position.multiply(n),s.controls[0].position.multiply(n),s.controls[1].position.multiply(n)}for(let r=0,i=this.shapeHoles.length;r<i;r++)this.shapeHoles[r].applyScale(t,e);this._update(!1)}createPoint(t,e=0,n=nn.generateUUID()){let r;t instanceof se?r=t:r=new se(t,e);let i=new xd(n,r);return i.roundness=this.roundness,i}addPoint(t){this.points.push(t),this.needsUpdate=!0}addPointAt(t,e){this.points.splice(e,0,t),this.needsUpdate=!0}getPointByUuid(t){for(let e=0,n=this.points.length;e<n;e++){let r=this.points[e];if(r.uuid===t)return r}for(let e=0,n=this.shapeHoles.length;e<n;e++){let r=this.shapeHoles[e].getPointByUuid(t);if(r)return r}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(t){let e=this.points.indexOf(t);e>=0&&this.points.splice(e,1),this.needsUpdate=!0}removePointById(t){let e=this.points.find(n=>n.uuid===t);e&&this.removePoint(e)}update(t=!0){for(let e=0,n=this.shapeHoles.length;e<n;e++)this.shapeHoles[e].update(!1);this._update(t)}extractShapePointsToBuffer(t,e=12,n=!1){this.subdivision=e,this.curveDivisions===void 0&&this.computeCurveDivisions(e);let r=n?this.roundedCurveDivisions:this.curveDivisions;return Vne(t,n?this.roundedCurves:this.curves,e,this.autoClose),r.reduce((i,s)=>i+s,0)+1}computeCurveDivisions(t=12){return this.curveDivisions=hL(this.points,t,!1),this.roundedCurveDivisions=hL(this.points,t,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(t,e,n=12){return Hne(t,this.curves,e,n,this.autoClose).reduce((r,i)=>r+i,0)*2}extractShapePointsToFlatArray(t,e=12){return this.subdivision=e,this.curveDivisions===void 0&&this.computeCurveDivisions(e),Gne(t,this.roundedCurves,e,this.autoClose)}getCurveIndexFromVertexId(t,e=!1){let n=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let r=e?this.roundedCurveDivisions:this.curveDivisions,i=0;e&&this.points[0].roundedCurveCorner!==void 0&&(i=Tu(this.points[0].roundedCurveCorner,this.subdivision)*.5);let s=t-i;s<0&&(s+=r.reduce((o,a)=>o+a,0));for(let o=0,a=r.length;o<a;o++){let l=r[o];if(s<n+l)return[o,(s-n+1)/l];n+=l}return[0,1]}getCurveT(t,e,n){let r=this.points[t],i=this.points[t>=this.points.length-1?0:t+1],s=this.curveDivisions,o=s[t];if(cL(r,i)){let l=r.position.distanceTo(i.position);return r.position.distanceTo(W_.set(n.x,n.y))/l}let a=0;for(let l=0;l<t;l++)a+=s[l];return(e-a)/o}dispose(){this.eventDispatcher=null}_applyCurveForPoint(t,e){cL(e,t)?this.lineTo(t.position.x,t.position.y):this.bezierCurveTo(e.controls[1].position.x,e.controls[1].position.y,t.controls[0].position.x,t.controls[0].position.y,t.position.x,t.position.y);let n=this.curves[this.curves.length-1];t.curveBefore=n,e.curveAfter=n;let r=n.clone();t.roundedCurveBefore=r,e.roundedCurveAfter=r,t.roundedCurveCorner=void 0,this.roundedCurves.push(r)}_update(t=!0){var n,r,i;if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let s=0,o=this.points.length;s<o;s++){let a=this.points[s];if(s===0)this.moveTo(a.position.x,a.position.y);else{let l=this.points[s-1];this._applyCurveForPoint(a,l)}}let e=this.getLastPoint();if(e!=null&&e.curveAfter&&(e.curveAfter=void 0),this.isClosed){let s=this.points[0],o=this.points[this.points.length-1];this._applyCurveForPoint(s,o)}if(this.points.length>2){let s=0;for(let o=0,a=this.points.length;o<a;o++){let l=this.points[o],c=(n=this.points[o-1])!=null?n:this.points[this.points.length-1],d=(r=this.points[o+1])!=null?r:this.points[0],u=l.roundness,h=c&&d&&Nne(c,l,d);if(!l.controlsMoved()&&u>0&&!h){let m=l.curveBefore,g=l.curveAfter;if(m===void 0||g===void 0)continue;let x=l.roundedCurveBefore,y=l.roundedCurveAfter,v=m.getLength(),_=g.getLength(),S=Math.min(u,v*.499),b=Math.min(u,_*.499),A=Math.min(S,b),E=1-A/v,C=A/_,T=m.getPointAt(E,W_),O=g.getPointAt(C,Wne);this._subSplitCurve(m,x,E,T,void 0),this._subSplitCurve(g,y,C,void 0,O);let L;if(this.useCubicForRoundedCorners){let k=Sk(T,l.position,O)/2,B=Math.tan(k)*T.distanceTo(l.position),[G,H]=kne(T,O,B,jne,$ne),Y=Bne(G,H,l.position),[te,Z]=Fne(Y,T,O,B,qne,Xne);L=new hs(T.clone(),te.clone(),Z.clone(),O.clone())}else L=new pa(T.clone(),l.position.clone(),O.clone());l.roundedCurveCorner=L,this.roundedCurves.splice(o+s,0,L),s++}}}t&&((i=this.eventDispatcher)==null||i.dispatchEvent({type:"update"}))}_subSplitCurve(t,e,n,r,i){if(t instanceof ps)r!==void 0&&e.v2.copy(r),i!==void 0&&e.v1.copy(i);else{let s=t,o=e,a=s.getUtoTmapping(n,0),l=Une(s.v0,s.v1,s.v2,s.v3,a);return r!==void 0&&(o.v0.set(l[0],l[1]),o.v1.set(l[2],l[3]),o.v2.set(l[4],l[5]),o.v3.set(l[6],l[7])),i!==void 0&&(o.v0.set(l[6],l[7]),o.v1.set(l[8],l[9]),o.v2.set(l[10],l[11]),o.v3.set(l[12],l[13])),o}return e}clone(){let t=new zn(this._width,this._height);return t.points=this.points.map(e=>e.clone()),t.isClosed=this.isClosed,t.roundness=this.roundness,t.isMesh2D=this.isMesh2D,t.shapeHoles=this.shapeHoles.map(e=>e.clone()),t}toJSON(){return{points:this.points.reduce((t,e)=>t.concat(e.toJSON()),[]),shapeHoles:this.shapeHoles.map(t=>t.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(t){var n;this.points=[],this.pointIDs=0;let e=t.points.length/7;for(let r=0;r<e;r++){let i=r*7,s=t.points[i+0],o=t.points[i+1],a=t.points[i+2],l=t.points[i+3],c=t.points[i+4],d=t.points[i+5],u=t.points[i+6],h=new xd(nn.generateUUID(),new se(s,o));h.controls[0].position.set(a,l),h.controls[1].position.set(c,d),h.roundness=u,this.points.push(h)}return this.shapeHoles=(n=t.shapeHoles)!=null&&n.length?t.shapeHoles.map(r=>{let i=new zn;return i.fromJSON(r),i}):[],this.isClosed=t.isClosed,this._roundness=t.roundness,this._update(),this}fromShape(t){let e=(r,i)=>{i instanceof hs&&i.v3.equals(r.position)&&r.controls[0].position.copy(i.v2)},n=r=>{let i=[],s,o;for(s=0,o=r.length;s<o;s++)r[s]instanceof pa&&(r[s]=Dne(r[s]));for(s=0,o=r.length;s<o;s++){let c=r[s],d=s>0?r[s-1]:null,u;c instanceof hs?(u=this.createPoint(c.v0),u.controls[1].position.copy(c.v1)):c instanceof ps&&(u=this.createPoint(c.v1)),u!==void 0&&(d!==null&&e(u,d),i.push(u))}let a=r[r.length-1],l=!1;return a instanceof hs?a.v3.equals(i[0].position)&&(i[0].controls[0].position.copy(a.v2),l=!0):a instanceof ps&&a.v2.equals(i[0].position)&&(l=!0),this.isClosed=l,i};return this.points=n(t.curves),t instanceof Hs&&(this.shapeHoles=t.holes.map(r=>{let i=new zn;return i.fromShape(r),i})),this.update(),this}},yn;(function(t){t[t.ODD=0]="ODD",t[t.NONZERO=1]="NONZERO",t[t.POSITIVE=2]="POSITIVE",t[t.NEGATIVE=3]="NEGATIVE",t[t.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(yn||(yn={}));var Sr;(function(t){t[t.POLYGONS=0]="POLYGONS",t[t.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",t[t.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(Sr||(Sr={}));function pt(t,e){if(!t)throw e||"Assertion Failed!"}var lt=function(){function t(){}return t.vertEq=function(e,n){return e.s===n.s&&e.t===n.t},t.vertLeq=function(e,n){return e.s<n.s||e.s===n.s&&e.t<=n.t},t.transLeq=function(e,n){return e.t<n.t||e.t===n.t&&e.s<=n.s},t.edgeGoesLeft=function(e){return t.vertLeq(e.Dst,e.Org)},t.edgeGoesRight=function(e){return t.vertLeq(e.Org,e.Dst)},t.vertL1dist=function(e,n){return Math.abs(e.s-n.s)+Math.abs(e.t-n.t)},t.edgeEval=function(e,n,r){pt(t.vertLeq(e,n)&&t.vertLeq(n,r));var i=n.s-e.s,s=r.s-n.s;return i+s>0?i<s?n.t-e.t+(e.t-r.t)*(i/(i+s)):n.t-r.t+(r.t-e.t)*(s/(i+s)):0},t.edgeSign=function(e,n,r){pt(t.vertLeq(e,n)&&t.vertLeq(n,r));var i=n.s-e.s,s=r.s-n.s;return i+s>0?(n.t-r.t)*i+(n.t-e.t)*s:0},t.transEval=function(e,n,r){pt(t.transLeq(e,n)&&t.transLeq(n,r));var i=n.t-e.t,s=r.t-n.t;return i+s>0?i<s?n.s-e.s+(e.s-r.s)*(i/(i+s)):n.s-r.s+(r.s-e.s)*(s/(i+s)):0},t.transSign=function(e,n,r){pt(t.transLeq(e,n)&&t.transLeq(n,r));var i=n.t-e.t,s=r.t-n.t;return i+s>0?(n.s-r.s)*i+(n.s-e.s)*s:0},t.vertCCW=function(e,n,r){return e.s*(n.t-r.t)+n.s*(r.t-e.t)+r.s*(e.t-n.t)>=0},t.interpolate=function(e,n,r,i){return e=e<0?0:e,r=r<0?0:r,e<=r?r===0?(n+i)/2:n+(i-n)*(e/(e+r)):i+(n-i)*(r/(e+r))},t.intersect=function(e,n,r,i,s){var o,a,l;t.vertLeq(e,n)||(l=e,e=n,n=l),t.vertLeq(r,i)||(l=r,r=i,i=l),t.vertLeq(e,r)||(l=e,e=r,r=l,l=n,n=i,i=l),t.vertLeq(r,n)?t.vertLeq(n,i)?(o=t.edgeEval(e,r,n),a=t.edgeEval(r,n,i),o+a<0&&(o=-o,a=-a),s.s=t.interpolate(o,r.s,a,n.s)):(o=t.edgeSign(e,r,n),a=-t.edgeSign(e,i,n),o+a<0&&(o=-o,a=-a),s.s=t.interpolate(o,r.s,a,i.s)):s.s=(r.s+n.s)/2,t.transLeq(e,n)||(l=e,e=n,n=l),t.transLeq(r,i)||(l=r,r=i,i=l),t.transLeq(e,r)||(l=e,e=r,r=l,l=n,n=i,i=l),t.transLeq(r,n)?t.transLeq(n,i)?(o=t.transEval(e,r,n),a=t.transEval(r,n,i),o+a<0&&(o=-o,a=-a),s.t=t.interpolate(o,r.t,a,n.t)):(o=t.transSign(e,r,n),a=-t.transSign(e,i,n),o+a<0&&(o=-o,a=-a),s.t=t.interpolate(o,r.t,a,i.t)):s.t=(r.t+n.t)/2},t}(),Kh=function(){function t(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return t}(),l0=function(){function t(e){this.side=e,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(t.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(e){this.Sym.Lface=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(e){this.Sym.Org=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(e){this.Sym.Lnext=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(e){this.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(e){this.Lnext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(e){this.Sym.Onext=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(e){this.Sym.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(e){this.Sym.Lnext.Sym=e},enumerable:!0,configurable:!0}),t}(),Uc=function(){function t(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return t}(),fL=function(){function t(){var e=new Uc,n=new Kh,r=new l0(0),i=new l0(1);e.next=e.prev=e,e.anEdge=null,n.next=n.prev=n,r.next=r,r.Sym=i,i.next=i,i.Sym=r,this.vHead=e,this.fHead=n,this.eHead=r,this.eHeadSym=i}return t.prototype.makeEdge_=function(e){var n=new l0(0),r=new l0(1);e.Sym.side<e.side&&(e=e.Sym);var i=e.Sym.next;return r.next=i,i.Sym.next=n,n.next=e,e.Sym.next=r,n.Sym=r,n.Onext=n,n.Lnext=r,n.Org=null,n.Lface=null,n.winding=0,n.activeRegion=null,r.Sym=n,r.Onext=r,r.Lnext=n,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,n},t.prototype.splice_=function(e,n){var r=e.Onext,i=n.Onext;r.Sym.Lnext=n,i.Sym.Lnext=e,e.Onext=i,n.Onext=r},t.prototype.makeVertex_=function(e,n,r){var i=e;pt(i,"Vertex can't be null!");var s=r.prev;i.prev=s,s.next=i,i.next=r,r.prev=i,i.anEdge=n;var o=n;do o.Org=i,o=o.Onext;while(o!==n)},t.prototype.makeFace_=function(e,n,r){var i=e;pt(i,"Face can't be null");var s=r.prev;i.prev=s,s.next=i,i.next=r,r.prev=i,i.anEdge=n,i.trail=null,i.marked=!1,i.inside=r.inside;var o=n;do o.Lface=i,o=o.Lnext;while(o!==n)},t.prototype.killEdge_=function(e){e.Sym.side<e.side&&(e=e.Sym);var n=e.next,r=e.Sym.next;n.Sym.next=r,r.Sym.next=n},t.prototype.killVertex_=function(e,n){var r=e.anEdge,i=r;do i.Org=n,i=i.Onext;while(i!==r);var s=e.prev,o=e.next;o.prev=s,s.next=o},t.prototype.killFace_=function(e,n){var r=e.anEdge,i=r;do i.Lface=n,i=i.Lnext;while(i!==r);var s=e.prev,o=e.next;o.prev=s,s.next=o},t.prototype.makeEdge=function(){var e=new Uc,n=new Uc,r=new Kh,i=this.makeEdge_(this.eHead);return this.makeVertex_(e,i,this.vHead),this.makeVertex_(n,i.Sym,this.vHead),this.makeFace_(r,i,this.fHead),i},t.prototype.splice=function(e,n){var r=!1,i=!1;if(e!==n){if(n.Org!==e.Org&&(i=!0,this.killVertex_(n.Org,e.Org)),n.Lface!==e.Lface&&(r=!0,this.killFace_(n.Lface,e.Lface)),this.splice_(n,e),!i){var s=new Uc;this.makeVertex_(s,n,e.Org),e.Org.anEdge=e}if(!r){var o=new Kh;this.makeFace_(o,n,e.Lface),e.Lface.anEdge=e}}},t.prototype.delete=function(e){var n=e.Sym,r=!1;if(e.Lface!==e.Rface&&(r=!0,this.killFace_(e.Lface,e.Rface)),e.Onext===e)this.killVertex_(e.Org,null);else if(e.Rface.anEdge=e.Oprev,e.Org.anEdge=e.Onext,this.splice_(e,e.Oprev),!r){var i=new Kh;this.makeFace_(i,e,e.Lface)}n.Onext===n?(this.killVertex_(n.Org,null),this.killFace_(n.Lface,null)):(e.Lface.anEdge=n.Oprev,n.Org.anEdge=n.Onext,this.splice_(n,n.Oprev)),this.killEdge_(e)},t.prototype.addEdgeVertex=function(e){var n=this.makeEdge_(e),r=n.Sym;this.splice_(n,e.Lnext),n.Org=e.Dst;var i=new Uc;return this.makeVertex_(i,r,n.Org),n.Lface=r.Lface=e.Lface,n},t.prototype.splitEdge=function(e){var n=this.addEdgeVertex(e),r=n.Sym;return this.splice_(e.Sym,e.Sym.Oprev),this.splice_(e.Sym,r),e.Dst=r.Org,r.Dst.anEdge=r.Sym,r.Rface=e.Rface,r.winding=e.winding,r.Sym.winding=e.Sym.winding,r.idx=e.idx,r.Sym.idx=e.Sym.idx,r},t.prototype.connect=function(e,n){var r=!1,i=this.makeEdge_(e),s=i.Sym;if(n.Lface!==e.Lface&&(r=!0,this.killFace_(n.Lface,e.Lface)),this.splice_(i,e.Lnext),this.splice_(s,n),i.Org=e.Dst,s.Org=n.Org,i.Lface=s.Lface=e.Lface,e.Lface.anEdge=s,!r){var o=new Kh;this.makeFace_(o,i,e.Lface)}return i},t.prototype.zapFace=function(e){var n=e.anEdge,r,i,s,o,a;i=n.Lnext;do r=i,i=r.Lnext,r.Lface=null,r.Rface===null&&(r.Onext===r?this.killVertex_(r.Org,null):(r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),s=r.Sym,s.Onext===s?this.killVertex_(s.Org,null):(s.Org.anEdge=s.Onext,this.splice_(s,s.Oprev)),this.killEdge_(r));while(r!=n);o=e.prev,a=e.next,a.prev=o,o.next=a},t.prototype.countFaceVerts_=function(e){var n=e.anEdge,r=0;do r++,n=n.Lnext;while(n!==e.anEdge);return r},t.prototype.mergeConvexFaces=function(e){var n,r,i,s,o,a,l;for(n=this.fHead.next;n!==this.fHead;n=n.next)if(n.inside)for(r=n.anEdge,o=r.Org;i=r.Lnext,s=r.Sym,s&&s.Lface&&s.Lface.inside&&(a=this.countFaceVerts_(n),l=this.countFaceVerts_(s.Lface),a+l-2<=e&&lt.vertCCW(r.Lprev.Org,r.Org,s.Lnext.Lnext.Org)&&lt.vertCCW(s.Lprev.Org,s.Org,r.Lnext.Lnext.Org)&&(i=s.Lnext,this.delete(s),r=null,s=null)),!(r&&r.Lnext.Org===o);)r=i;return!0},t.prototype.check=function(){var e=this.fHead,n=this.vHead,r=this.eHead,i,s,o,a,l,c;for(s=e,s=e;(i=s.next)!==e;s=i){pt(i.prev===s),l=i.anEdge;do pt(l.Sym!==l),pt(l.Sym.Sym===l),pt(l.Lnext.Onext.Sym===l),pt(l.Onext.Sym.Lnext===l),pt(l.Lface===i),l=l.Lnext;while(l!==i.anEdge)}for(pt(i.prev===s&&i.anEdge===null),a=n,a=n;(o=a.next)!==n;a=o){pt(o.prev===a),l=o.anEdge;do pt(l.Sym!==l),pt(l.Sym.Sym===l),pt(l.Lnext.Onext.Sym===l),pt(l.Onext.Sym.Lnext===l),pt(l.Org===o),l=l.Onext;while(l!==o.anEdge)}for(pt(o.prev===a&&o.anEdge===null),c=r,c=r;(l=c.next)!==r;c=l)pt(l.Sym.next===c.Sym),pt(l.Sym!==l),pt(l.Sym.Sym===l),pt(l.Org!==null),pt(l.Dst!==null),pt(l.Lnext.Onext.Sym===l),pt(l.Onext.Sym.Lnext===l);pt(l.Sym.next===c.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},t}(),pL=function(){function t(){this.handle=null}return t}(),mL=function(){function t(){this.key=null,this.node=0}return t}(),Yne=function(){function t(e,n){this.leq=n,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=e,this.nodes=[],this.handles=[];for(var r=0;r<e+1;r++)this.nodes[r]=new pL,this.handles[r]=new mL;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return t.prototype.floatDown_=function(e){var n=this.nodes,r=this.handles,i,s,o;for(i=n[e].handle;;){if(o=e<<1,o<this.size&&this.leq(r[n[o+1].handle].key,r[n[o].handle].key)&&++o,pt(o<=this.max),s=n[o].handle,o>this.size||this.leq(r[i].key,r[s].key)){n[e].handle=i,r[i].node=e;break}n[e].handle=s,r[s].node=e,e=o}},t.prototype.floatUp_=function(e){var n=this.nodes,r=this.handles,i,s,o;for(i=n[e].handle;;){if(o=e>>1,s=n[o].handle,o===0||this.leq(r[s].key,r[i].key)){n[e].handle=i,r[i].node=e;break}n[e].handle=s,r[s].node=e,e=o}},t.prototype.init=function(){for(var e=this.size;e>=1;--e)this.floatDown_(e);this.initialized=!0},t.prototype.min=function(){return this.handles[this.nodes[1].handle].key},t.prototype.insert=function(e){var n,r;if(n=++this.size,n*2>this.max){this.max*=2;var i,s;for(s=this.nodes.length,this.nodes.length=this.max+1,i=s;i<this.nodes.length;i++)this.nodes[i]=new pL;for(s=this.handles.length,this.handles.length=this.max+1,i=s;i<this.handles.length;i++)this.handles[i]=new mL}return this.freeList===0?r=n:(r=this.freeList,this.freeList=this.handles[r].node),this.nodes[n].handle=r,this.handles[r].node=n,this.handles[r].key=e,this.initialized&&this.floatUp_(n),r},t.prototype.extractMin=function(){var e=this.nodes,n=this.handles,r=e[1].handle,i=n[r].key;return this.size>0&&(e[1].handle=e[this.size].handle,n[e[1].handle].node=1,n[r].key=null,n[r].node=this.freeList,this.freeList=r,--this.size,this.size>0&&this.floatDown_(1)),i},t.prototype.delete=function(e){var n=this.nodes,r=this.handles,i;pt(e>=1&&e<=this.max&&r[e].key!==null),i=r[e].node,n[i].handle=n[this.size].handle,r[n[i].handle].node=i,--this.size,i<=this.size&&(i<=1||this.leq(r[n[i>>1].handle].key,r[n[i].handle].key)?this.floatDown_(i):this.floatUp_(i)),r[e].key=null,r[e].node=this.freeList,this.freeList=e},t}(),j_=function(){function t(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return t}(),gL=function(){function t(){this.key=null,this.next=null,this.prev=null}return t}(),Zne=function(){function t(e,n){this.frame=e,this.leq=n,this.head=new gL,this.head.next=this.head,this.head.prev=this.head}return t.prototype.min=function(){return this.head.next},t.prototype.max=function(){return this.head.prev},t.prototype.insert=function(e){return this.insertBefore(this.head,e)},t.prototype.search=function(e){var n=this.head;do n=n.next;while(n.key!==null&&!this.leq(this.frame,e,n.key));return n},t.prototype.insertBefore=function(e,n){do e=e.prev;while(e.key!==null&&!this.leq(this.frame,e.key,n));var r=new gL;return r.key=n,r.next=e.next,e.next.prev=r,r.prev=e,e.next=r,r},t.prototype.delete=function(e){e.next.prev=e.prev,e.prev.next=e.next},t}(),Jne=function(){function t(){}return t.regionBelow=function(e){return e.nodeUp.prev.key},t.regionAbove=function(e){return e.nodeUp.next.key},t.debugEvent=function(e){},t.addWinding=function(e,n){e.winding+=n.winding,e.Sym.winding+=n.Sym.winding},t.edgeLeq=function(e,n,r){var i=e.event,s=n.eUp,o=r.eUp;if(s.Dst===i)return o.Dst===i?lt.vertLeq(s.Org,o.Org)?lt.edgeSign(o.Dst,s.Org,o.Org)<=0:lt.edgeSign(s.Dst,o.Org,s.Org)>=0:lt.edgeSign(o.Dst,i,o.Org)<=0;if(o.Dst===i)return lt.edgeSign(s.Dst,i,s.Org)>=0;var a=lt.edgeEval(s.Dst,i,s.Org),l=lt.edgeEval(o.Dst,i,o.Org);return a>=l},t.deleteRegion=function(e,n){n.fixUpperEdge&&pt(n.eUp.winding===0),n.eUp.activeRegion=null,e.dict.delete(n.nodeUp)},t.fixUpperEdge=function(e,n,r){pt(n.fixUpperEdge),e.mesh.delete(n.eUp),n.fixUpperEdge=!1,n.eUp=r,r.activeRegion=n},t.topLeftRegion=function(e,n){var r=n.eUp.Org,i;do n=t.regionAbove(n);while(n.eUp.Org===r);if(n.fixUpperEdge){if(i=e.mesh.connect(t.regionBelow(n).eUp.Sym,n.eUp.Lnext),i===null)return null;t.fixUpperEdge(e,n,i),n=t.regionAbove(n)}return n},t.topRightRegion=function(e){var n=e.eUp.Dst;do e=t.regionAbove(e);while(e.eUp.Dst===n);return e},t.addRegionBelow=function(e,n,r){var i=new j_;return i.eUp=r,i.nodeUp=e.dict.insertBefore(n.nodeUp,i),i.fixUpperEdge=!1,i.sentinel=!1,i.dirty=!1,r.activeRegion=i,i},t.isWindingInside=function(e,n){switch(e.windingRule){case yn.ODD:return(n&1)!==0;case yn.NONZERO:return n!==0;case yn.POSITIVE:return n>0;case yn.NEGATIVE:return n<0;case yn.ABS_GEQ_TWO:return n>=2||n<=-2}throw new Error("Invalid winding rulle")},t.computeWinding=function(e,n){n.windingNumber=t.regionAbove(n).windingNumber+n.eUp.winding,n.inside=t.isWindingInside(e,n.windingNumber)},t.finishRegion=function(e,n){var r=n.eUp,i=r.Lface;i.inside=n.inside,i.anEdge=r,t.deleteRegion(e,n)},t.finishLeftRegions=function(e,n,r){for(var i,s=null,o=n,a=n.eUp;o!==r;){if(o.fixUpperEdge=!1,s=t.regionBelow(o),i=s.eUp,i.Org!=a.Org){if(!s.fixUpperEdge){t.finishRegion(e,o);break}i=e.mesh.connect(a.Lprev,i.Sym),t.fixUpperEdge(e,s,i)}a.Onext!==i&&(e.mesh.splice(i.Oprev,i),e.mesh.splice(a,i)),t.finishRegion(e,o),a=s.eUp,o=s}return a},t.addRightEdges=function(e,n,r,i,s,o){var a,l,c,d,u=!0;c=r;do pt(lt.vertLeq(c.Org,c.Dst)),t.addRegionBelow(e,n,c.Sym),c=c.Onext;while(c!==i);for(s===null&&(s=t.regionBelow(n).eUp.Rprev),l=n,d=s;a=t.regionBelow(l),c=a.eUp.Sym,c.Org===d.Org;)c.Onext!==d&&(e.mesh.splice(c.Oprev,c),e.mesh.splice(d.Oprev,c)),a.windingNumber=l.windingNumber-c.winding,a.inside=t.isWindingInside(e,a.windingNumber),l.dirty=!0,!u&&t.checkForRightSplice(e,l)&&(t.addWinding(c,d),t.deleteRegion(e,l),e.mesh.delete(d)),u=!1,l=a,d=c;l.dirty=!0,pt(l.windingNumber-c.winding===a.windingNumber),o&&t.walkDirtyRegions(e,l)},t.spliceMergeVertices=function(e,n,r){e.mesh.splice(n,r)},t.vertexWeights=function(e,n,r){var i=lt.vertL1dist(n,e),s=lt.vertL1dist(r,e),o=.5*s/(i+s),a=.5*i/(i+s);e.coords[0]+=o*n.coords[0]+a*r.coords[0],e.coords[1]+=o*n.coords[1]+a*r.coords[1],e.coords[2]+=o*n.coords[2]+a*r.coords[2]},t.getIntersectData=function(e,n,r,i,s,o){n.coords[0]=n.coords[1]=n.coords[2]=0,n.idx=-1,t.vertexWeights(n,r,i),t.vertexWeights(n,s,o)},t.checkForRightSplice=function(e,n){var r=t.regionBelow(n),i=n.eUp,s=r.eUp;if(lt.vertLeq(i.Org,s.Org)){if(lt.edgeSign(s.Dst,i.Org,s.Org)>0)return!1;lt.vertEq(i.Org,s.Org)?i.Org!==s.Org&&(e.pq.delete(i.Org.pqHandle),t.spliceMergeVertices(e,s.Oprev,i)):(e.mesh.splitEdge(s.Sym),e.mesh.splice(i,s.Oprev),n.dirty=r.dirty=!0)}else{if(lt.edgeSign(i.Dst,s.Org,i.Org)<0)return!1;t.regionAbove(n).dirty=n.dirty=!0,e.mesh.splitEdge(i.Sym),e.mesh.splice(s.Oprev,i)}return!0},t.checkForLeftSplice=function(e,n){var r=t.regionBelow(n),i=n.eUp,s=r.eUp,o;if(pt(!lt.vertEq(i.Dst,s.Dst)),lt.vertLeq(i.Dst,s.Dst)){if(lt.edgeSign(i.Dst,s.Dst,i.Org)<0)return!1;t.regionAbove(n).dirty=n.dirty=!0,o=e.mesh.splitEdge(i),e.mesh.splice(s.Sym,o),o.Lface.inside=n.inside}else{if(lt.edgeSign(s.Dst,i.Dst,s.Org)>0)return!1;n.dirty=r.dirty=!0,o=e.mesh.splitEdge(s),e.mesh.splice(i.Lnext,s.Sym),o.Rface.inside=n.inside}return!0},t.checkForIntersect=function(e,n){var r=t.regionBelow(n),i=n.eUp,s=r.eUp,o=i.Org,a=s.Org,l=i.Dst,c=s.Dst,d,u,h=new Uc,m,g;if(pt(!lt.vertEq(c,l)),pt(lt.edgeSign(l,e.event,o)<=0),pt(lt.edgeSign(c,e.event,a)>=0),pt(o!==e.event&&a!==e.event),pt(!n.fixUpperEdge&&!r.fixUpperEdge),o===a||(d=Math.min(o.t,l.t),u=Math.max(a.t,c.t),d>u))return!1;if(lt.vertLeq(o,a)){if(lt.edgeSign(c,o,a)>0)return!1}else if(lt.edgeSign(l,a,o)<0)return!1;return t.debugEvent(e),lt.intersect(l,o,c,a,h),pt(Math.min(o.t,l.t)<=h.t),pt(h.t<=Math.max(a.t,c.t)),pt(Math.min(c.s,l.s)<=h.s),pt(h.s<=Math.max(a.s,o.s)),lt.vertLeq(h,e.event)&&(h.s=e.event.s,h.t=e.event.t),m=lt.vertLeq(o,a)?o:a,lt.vertLeq(m,h)&&(h.s=m.s,h.t=m.t),lt.vertEq(h,o)||lt.vertEq(h,a)?(t.checkForRightSplice(e,n),!1):!lt.vertEq(l,e.event)&&lt.edgeSign(l,e.event,h)>=0||!lt.vertEq(c,e.event)&&lt.edgeSign(c,e.event,h)<=0?c===e.event?(e.mesh.splitEdge(i.Sym),e.mesh.splice(s.Sym,i),n=t.topLeftRegion(e,n),i=t.regionBelow(n).eUp,t.finishLeftRegions(e,t.regionBelow(n),r),t.addRightEdges(e,n,i.Oprev,i,i,!0),!0):l===e.event?(e.mesh.splitEdge(s.Sym),e.mesh.splice(i.Lnext,s.Oprev),r=n,n=t.topRightRegion(n),g=t.regionBelow(n).eUp.Rprev,r.eUp=s.Oprev,s=t.finishLeftRegions(e,r,null),t.addRightEdges(e,n,s.Onext,i.Rprev,g,!0),!0):(lt.edgeSign(l,e.event,h)>=0&&(t.regionAbove(n).dirty=n.dirty=!0,e.mesh.splitEdge(i.Sym),i.Org.s=e.event.s,i.Org.t=e.event.t),lt.edgeSign(c,e.event,h)<=0&&(n.dirty=r.dirty=!0,e.mesh.splitEdge(s.Sym),s.Org.s=e.event.s,s.Org.t=e.event.t),!1):(e.mesh.splitEdge(i.Sym),e.mesh.splitEdge(s.Sym),e.mesh.splice(s.Oprev,i),i.Org.s=h.s,i.Org.t=h.t,i.Org.pqHandle=e.pq.insert(i.Org),t.getIntersectData(e,i.Org,o,l,a,c),t.regionAbove(n).dirty=n.dirty=r.dirty=!0,!1)},t.walkDirtyRegions=function(e,n){for(var r=t.regionBelow(n),i,s;;){for(;r.dirty;)n=r,r=t.regionBelow(r);if(!n.dirty&&(r=n,n=t.regionAbove(n),n===null||!n.dirty))return;if(n.dirty=!1,i=n.eUp,s=r.eUp,i.Dst!==s.Dst&&t.checkForLeftSplice(e,n)&&(r.fixUpperEdge?(t.deleteRegion(e,r),e.mesh.delete(s),r=t.regionBelow(n),s=r.eUp):n.fixUpperEdge&&(t.deleteRegion(e,n),e.mesh.delete(i),n=t.regionAbove(r),i=n.eUp)),i.Org!==s.Org)if(i.Dst!==s.Dst&&!n.fixUpperEdge&&!r.fixUpperEdge&&(i.Dst===e.event||s.Dst===e.event)){if(t.checkForIntersect(e,n))return}else t.checkForRightSplice(e,n);i.Org===s.Org&&i.Dst===s.Dst&&(t.addWinding(s,i),t.deleteRegion(e,n),e.mesh.delete(i),n=t.regionAbove(r))}},t.connectRightVertex=function(e,n,r){var i,s=r.Onext,o=t.regionBelow(n),a=n.eUp,l=o.eUp,c=!1;if(a.Dst!==l.Dst&&t.checkForIntersect(e,n),lt.vertEq(a.Org,e.event)&&(e.mesh.splice(s.Oprev,a),n=t.topLeftRegion(e,n),s=t.regionBelow(n).eUp,t.finishLeftRegions(e,t.regionBelow(n),o),c=!0),lt.vertEq(l.Org,e.event)&&(e.mesh.splice(r,l.Oprev),r=t.finishLeftRegions(e,o,null),c=!0),c){t.addRightEdges(e,n,r.Onext,s,s,!0);return}lt.vertLeq(l.Org,a.Org)?i=l.Oprev:i=a,i=e.mesh.connect(r.Lprev,i),t.addRightEdges(e,n,i,i.Onext,i.Onext,!1),i.Sym.activeRegion.fixUpperEdge=!0,t.walkDirtyRegions(e,n)},t.connectLeftDegenerate=function(e,n,r){var i,s,o,a,l;if(i=n.eUp,lt.vertEq(i.Org,r)){pt(!1),t.spliceMergeVertices(e,i,r.anEdge);return}if(!lt.vertEq(i.Dst,r)){e.mesh.splitEdge(i.Sym),n.fixUpperEdge&&(e.mesh.delete(i.Onext),n.fixUpperEdge=!1),e.mesh.splice(r.anEdge,i),t.sweepEvent(e,r);return}pt(!1),n=t.topRightRegion(n),l=t.regionBelow(n),o=l.eUp.Sym,s=a=o.Onext,l.fixUpperEdge&&(pt(s!==o),t.deleteRegion(e,l),e.mesh.delete(o),o=s.Oprev),e.mesh.splice(r.anEdge,o),lt.edgeGoesLeft(s)||(s=null),t.addRightEdges(e,n,o.Onext,a,s,!0)},t.connectLeftVertex=function(e,n){var r,i,s,o,a,l,c=new j_;if(c.eUp=n.anEdge.Sym,r=e.dict.search(c).key,i=t.regionBelow(r),!!i){if(o=r.eUp,a=i.eUp,lt.edgeSign(o.Dst,n,o.Org)===0){t.connectLeftDegenerate(e,r,n);return}if(s=lt.vertLeq(a.Dst,o.Dst)?r:i,r.inside||s.fixUpperEdge){if(s===r)l=e.mesh.connect(n.anEdge.Sym,o.Lnext);else{var d=e.mesh.connect(a.Dnext,n.anEdge);l=d.Sym}s.fixUpperEdge?t.fixUpperEdge(e,s,l):t.computeWinding(e,t.addRegionBelow(e,r,l)),t.sweepEvent(e,n)}else t.addRightEdges(e,r,n.anEdge,n.anEdge,null,!0)}},t.sweepEvent=function(e,n){e.event=n,t.debugEvent(e);for(var r=n.anEdge;r.activeRegion===null;)if(r=r.Onext,r===n.anEdge){t.connectLeftVertex(e,n);return}var i=t.topLeftRegion(e,r.activeRegion);pt(i!==null);var s=t.regionBelow(i),o=s.eUp,a=t.finishLeftRegions(e,s,null);a.Onext===o?t.connectRightVertex(e,i,a):t.addRightEdges(e,i,a.Onext,o,o,!0)},t.addSentinel=function(e,n,r,i){var s=new j_,o=e.mesh.makeEdge();o.Org.s=r,o.Org.t=i,o.Dst.s=n,o.Dst.t=i,e.event=o.Dst,s.eUp=o,s.windingNumber=0,s.inside=!1,s.fixUpperEdge=!1,s.sentinel=!0,s.dirty=!1,s.nodeUp=e.dict.insert(s)},t.initEdgeDict=function(e){e.dict=new Zne(e,t.edgeLeq);var n=e.bmax[0]-e.bmin[0],r=e.bmax[1]-e.bmin[1],i=e.bmin[0]-n,s=e.bmax[0]+n,o=e.bmin[1]-r,a=e.bmax[1]+r;t.addSentinel(e,i,s,o),t.addSentinel(e,i,s,a)},t.doneEdgeDict=function(e){for(var n,r=0;(n=e.dict.min().key)!==null;)n.sentinel||(pt(n.fixUpperEdge),pt(++r===1)),pt(n.windingNumber===0),t.deleteRegion(e,n)},t.removeDegenerateEdges=function(e){var n,r,i,s=e.mesh.eHead;for(n=s.next;n!==s;n=r)r=n.next,i=n.Lnext,lt.vertEq(n.Org,n.Dst)&&n.Lnext.Lnext!==n&&(t.spliceMergeVertices(e,i,n),e.mesh.delete(n),n=i,i=n.Lnext),i.Lnext===n&&(i!==n&&((i===r||i===r.Sym)&&(r=r.next),e.mesh.delete(i)),(n===r||n===r.Sym)&&(r=r.next),e.mesh.delete(n))},t.initPriorityQ=function(e){var n,r,i,s=0;for(i=e.mesh.vHead,r=i.next;r!==i;r=r.next)s++;for(s+=8,n=e.pq=new Yne(s,lt.vertLeq),i=e.mesh.vHead,r=i.next;r!==i;r=r.next)r.pqHandle=n.insert(r);return r!==i?!1:(n.init(),!0)},t.donePriorityQ=function(e){e.pq=null},t.removeDegenerateFaces=function(e,n){var r,i,s;for(r=n.fHead.next;r!==n.fHead;r=i)i=r.next,s=r.anEdge,pt(s.Lnext!==s),s.Lnext.Lnext===s&&(t.addWinding(s.Onext,s),e.mesh.delete(s));return!0},t.computeInterior=function(e,n){n===void 0&&(n=!0);var r,i;if(t.removeDegenerateEdges(e),!t.initPriorityQ(e))return!1;for(t.initEdgeDict(e);(r=e.pq.extractMin())!==null;){for(;i=e.pq.min(),!(i===null||!lt.vertEq(i,r));)i=e.pq.extractMin(),t.spliceMergeVertices(e,r.anEdge,i.anEdge);t.sweepEvent(e,r)}return e.event=e.dict.min().key.eUp.Org,t.debugEvent(e),t.doneEdgeDict(e),t.donePriorityQ(e),t.removeDegenerateFaces(e,e.mesh)?(n&&e.mesh.check(),!0):!1},t}(),Qne=function(){function t(){this.mesh=new fL,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=yn.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return t.prototype.dot_=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]},t.prototype.normalize_=function(e){var n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(!n)throw"Zero-size vector!";n=Math.sqrt(n),e[0]/=n,e[1]/=n,e[2]/=n},t.prototype.longAxis_=function(e){var n=0;return Math.abs(e[1])>Math.abs(e[0])&&(n=1),Math.abs(e[2])>Math.abs(e[n])&&(n=2),n},t.prototype.computeNormal_=function(e){var n,r,i,s,o,a,l=[0,0,0],c=[0,0,0],d=[0,0,0],u=[0,0,0],h=[0,0,0],m=[null,null,null],g=[null,null,null],x=this.mesh.vHead;n=x.next;for(var y=0;y<3;++y)s=n.coords[y],c[y]=s,g[y]=n,l[y]=s,m[y]=n;for(n=x.next;n!==x;n=n.next)for(var v=0;v<3;++v)s=n.coords[v],s<c[v]&&(c[v]=s,g[v]=n),s>l[v]&&(l[v]=s,m[v]=n);var _=0;if(l[1]-c[1]>l[0]-c[0]&&(_=1),l[2]-c[2]>l[_]-c[_]&&(_=2),c[_]>=l[_]){e[0]=0,e[1]=0,e[2]=1;return}for(a=0,r=g[_],i=m[_],d[0]=r.coords[0]-i.coords[0],d[1]=r.coords[1]-i.coords[1],d[2]=r.coords[2]-i.coords[2],n=x.next;n!==x;n=n.next)u[0]=n.coords[0]-i.coords[0],u[1]=n.coords[1]-i.coords[1],u[2]=n.coords[2]-i.coords[2],h[0]=d[1]*u[2]-d[2]*u[1],h[1]=d[2]*u[0]-d[0]*u[2],h[2]=d[0]*u[1]-d[1]*u[0],o=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],o>a&&(a=o,e[0]=h[0],e[1]=h[1],e[2]=h[2]);a<=0&&(e[0]=e[1]=e[2]=0,e[this.longAxis_(d)]=1)},t.prototype.checkOrientation_=function(){for(var e=this.mesh.fHead,n,r=this.mesh.vHead,i,s=0,o=e.next;o!==e;o=o.next)if(i=o.anEdge,!(i.winding<=0))do s+=(i.Org.s-i.Dst.s)*(i.Org.t+i.Dst.t),i=i.Lnext;while(i!==o.anEdge);if(s<0){for(n=r.next;n!==r;n=n.next)n.t=-n.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},t.prototype.projectPolygon_=function(){var e=this.mesh.vHead,n=[0,0,0],r,i,s=!1;n[0]=this.normal[0],n[1]=this.normal[1],n[2]=this.normal[2],!n[0]&&!n[1]&&!n[2]&&(this.computeNormal_(n),s=!0),r=this.sUnit,i=this.tUnit;var o=this.longAxis_(n);r[o]=0,r[(o+1)%3]=1,r[(o+2)%3]=0,i[o]=0,i[(o+1)%3]=0,i[(o+2)%3]=n[o]>0?1:-1;for(var a=e.next;a!==e;a=a.next)a.s=this.dot_(a.coords,r),a.t=this.dot_(a.coords,i);s&&this.checkOrientation_();for(var l=!0,c=e.next;c!==e;c=c.next)l?(this.bmin[0]=this.bmax[0]=c.s,this.bmin[1]=this.bmax[1]=c.t,l=!1):(c.s<this.bmin[0]&&(this.bmin[0]=c.s),c.s>this.bmax[0]&&(this.bmax[0]=c.s),c.t<this.bmin[1]&&(this.bmin[1]=c.t),c.t>this.bmax[1]&&(this.bmax[1]=c.t))},t.prototype.addWinding_=function(e,n){e.winding+=n.winding,e.Sym.winding+=n.Sym.winding},t.prototype.tessellateMonoRegion_=function(e,n){var r,i;if(r=n.anEdge,!(r.Lnext!==r&&r.Lnext.Lnext!==r))throw"Mono region invalid";for(;lt.vertLeq(r.Dst,r.Org);r=r.Lprev);for(;lt.vertLeq(r.Org,r.Dst);r=r.Lnext);i=r.Lprev;for(var s=void 0;r.Lnext!==i;)if(lt.vertLeq(r.Dst,i.Org)){for(;i.Lnext!==r&&(lt.edgeGoesLeft(i.Lnext)||lt.edgeSign(i.Org,i.Dst,i.Lnext.Dst)<=0);)s=e.connect(i.Lnext,i),i=s.Sym;i=i.Lprev}else{for(;i.Lnext!==r&&(lt.edgeGoesRight(r.Lprev)||lt.edgeSign(r.Dst,r.Org,r.Lprev.Org)>=0);)s=e.connect(r,r.Lprev),r=s.Sym;r=r.Lnext}if(i.Lnext===r)throw"Mono region invalid";for(;i.Lnext.Lnext!==r;)s=e.connect(i.Lnext,i),i=s.Sym;return!0},t.prototype.tessellateInterior_=function(e){for(var n,r=e.fHead.next;r!==e.fHead;r=n)if(n=r.next,r.inside&&!this.tessellateMonoRegion_(e,r))return!1;return!0},t.prototype.discardExterior_=function(e){for(var n,r=e.fHead.next;r!==e.fHead;r=n)n=r.next,r.inside||e.zapFace(r)},t.prototype.setWindingNumber_=function(e,n,r){for(var i,s=e.eHead.next;s!==e.eHead;s=i)i=s.next,s.Rface.inside!==s.Lface.inside?s.winding=s.Lface.inside?n:-n:r?e.delete(s):s.winding=0},t.prototype.getNeighbourFace_=function(e){return!e.Rface||!e.Rface.inside?-1:e.Rface.n},t.prototype.outputPolymesh_=function(e,n,r,i){var s,o=0,a=0,l;r>3&&e.mergeConvexFaces(r);for(var c=e.vHead.next;c!==e.vHead;c=c.next)c.n=-1;for(var d=e.fHead.next;d!==e.fHead;d=d.next)if(d.n=-1,!!d.inside){s=d.anEdge,l=0;do{var c=s.Org;c.n===-1&&(c.n=a,a++),l++,s=s.Lnext}while(s!==d.anEdge);if(l>r)throw"Face vertex greater that support polygon";d.n=o,++o}this.elementCount=o,n===Sr.CONNECTED_POLYGONS&&(o*=2),this.elements=[],this.elements.length=o*r,this.vertexCount=a,this.vertices=[],this.vertices.length=a*i,this.vertexIndices=[],this.vertexIndices.length=a;for(var c=e.vHead.next;c!==e.vHead;c=c.next)if(c.n!==-1){var u=c.n*i;this.vertices[u+0]=c.coords[0],this.vertices[u+1]=c.coords[1],i>2&&(this.vertices[u+2]=c.coords[2]),this.vertexIndices[c.n]=c.idx}for(var h=0,d=e.fHead.next;d!==e.fHead;d=d.next)if(d.inside){s=d.anEdge,l=0;do{var c=s.Org;this.elements[h++]=c.n,l++,s=s.Lnext}while(s!==d.anEdge);for(var m=l;m<r;++m)this.elements[h++]=-1;if(n===Sr.CONNECTED_POLYGONS){s=d.anEdge;do this.elements[h++]=this.getNeighbourFace_(s),s=s.Lnext;while(s!==d.anEdge);for(var g=l;g<r;++g)this.elements[h++]=-1}}},t.prototype.outputContours_=function(e,n){var r,i,s=0,o=0;this.vertexCount=0,this.elementCount=0;for(var a=e.fHead.next;a!==e.fHead;a=a.next)if(a.inside){i=r=a.anEdge;do this.vertexCount++,r=r.Lnext;while(r!==i);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*n,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,c=0,d=0;s=0;for(var a=e.fHead.next;a!==e.fHead;a=a.next)if(a.inside){o=0,i=r=a.anEdge;do this.vertices[l++]=r.Org.coords[0],this.vertices[l++]=r.Org.coords[1],n>2&&(this.vertices[l++]=r.Org.coords[2]),this.vertexIndices[c++]=this.vertexIdCallback?this.vertexIdCallback(r):r.Org.idx,o++,r=r.Lnext;while(r!==i);this.elements[d++]=s,this.elements[d++]=o,s+=o}},t.prototype.addContour=function(e,n){this.mesh===null&&(this.mesh=new fL),e<2&&(e=2),e>3&&(e=3);for(var r=null,i=0;i<n.length;i+=e)r===null?(r=this.mesh.makeEdge(),this.mesh.splice(r,r.Sym)):(this.mesh.splitEdge(r),r=r.Lnext),r.Org.coords[0]=n[i+0],r.Org.coords[1]=n[i+1],e>2?r.Org.coords[2]=n[i+2]:r.Org.coords[2]=0,r.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(r),r.winding=1,r.Sym.winding=-1},t.prototype.tesselate=function(e,n,r,i,s,o){if(e===void 0&&(e=yn.ODD),n===void 0&&(n=Sr.POLYGONS),o===void 0&&(o=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,s&&(this.normal[0]=s[0],this.normal[1]=s[1],this.normal[2]=s[2]),this.windingRule=e,i<2&&(i=2),i>3&&(i=3),!this.mesh)return!1;this.projectPolygon_(),Jne.computeInterior(this,o);var a=this.mesh;return n===Sr.BOUNDARY_CONTOURS?this.setWindingNumber_(a,1,!0):this.tessellateInterior_(a),o&&a.check(),n===Sr.BOUNDARY_CONTOURS?this.outputContours_(a,i):this.outputPolymesh_(a,n,r,i),!0},t}();function hf(t){var e=t.windingRule,n=e===void 0?yn.ODD:e,r=t.elementType,i=r===void 0?Sr.POLYGONS:r,s=t.polySize,o=s===void 0?3:s,a=t.vertexSize,l=a===void 0?2:a,c=t.normal,d=c===void 0?[0,0,1]:c,u=t.contours,h=u===void 0?[]:u,m=t.strict,g=m===void 0?!0:m,x=t.debug,y=x===void 0?!1:x;if(!h&&g)throw new Error("Contours can't be empty");if(h){var v=new Qne;t.edgeCreateCallback&&(v.edgeCreateCallback=t.edgeCreateCallback),t.vertexIdCallback&&(v.vertexIdCallback=t.vertexIdCallback);for(var _=0;_<h.length;_++)v.addContour(l||2,h[_]);return v.tesselate(n,i,o,l,d,g),{vertices:v.vertices,vertexIndices:v.vertexIndices,vertexCount:v.vertexCount,elements:v.elements,elementCount:v.elementCount,mesh:y?v.mesh:void 0}}}yn.ODD;yn.NONZERO;yn.POSITIVE;yn.NEGATIVE;yn.ABS_GEQ_TWO;Sr.POLYGONS;Sr.CONNECTED_POLYGONS;Sr.BOUNDARY_CONTOURS;var bk=class extends tt{constructor(t,e=12,n={}){var h,m,g;super(),this.type="ShapeGeometry",this.windingRule=yn.ODD,this.elementType=Sr.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=t,this._curveSegments=e,this._triangulationOptions=Object.assign({windingRule:yn.ODD,elementType:Sr.POLYGONS,polySize:3,vertexSize:2,strict:!0},n);let r=this._shape.extractShapePointsToFlatArray([],this._curveSegments),i=this._shape.shapeHoles.map(x=>x.extractShapePointsToFlatArray([],this._curveSegments)),s,o=!0,a=!0,l,c;for(let x=0,y=r.length/2;x<y;x++){let v=x*2,_=r[v+0],S=r[v+1];if(l!==void 0&&_!==l&&(o=!1),c!==void 0&&S!==c&&(a=!1),l=_,c=S,!o&&!a)break}!o&&!a&&(s=hf({contours:[r,...i],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict}));let d=(h=s==null?void 0:s.vertexCount)!=null?h:1,u=(m=s==null?void 0:s.elementCount)!=null?m:1;if(this._positionAttribute=new vt(new Float32Array(d*3),3),this._normalAttribute=new vt(new Float32Array(d*3),3),this._uvAttribute=new vt(new Float32Array(d*2),2),this._indexAttribute=new vt(new Uint32Array(u*3),1),s){let x=1/0,y=-1/0,v=1/0,_=-1/0;for(let A=0,E=d;A<E;A++){let C=A*2,T=s.vertices[C+0],O=s.vertices[C+1];T<x&&(x=T),T>y&&(y=T),O<v&&(v=O),O>_&&(_=O)}let S=y-x,b=_-v;for(let A=0,E=d;A<E;A++){let C=A*2,T=s.vertices[C+0],O=s.vertices[C+1],L=(T-x)/S,k=(O-v)/b;this._positionAttribute.setXYZ(A,T,O,0),this._normalAttribute.setXYZ(A,0,0,1),this._uvAttribute.setXY(A,L,k)}for(let A=0,E=u;A<E;A++){let C=A*3,T=s.elements[C+0],O=s.elements[C+1],L=s.elements[C+2];this._indexAttribute.setX(C+0,T),this._indexAttribute.setX(C+1,O),this._indexAttribute.setX(C+2,L)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((g=s==null?void 0:s.elementCount)!=null?g:1)*3)}clone(){let t=new bk(this._shape,this._curveSegments);return t.userData=pk(this.userData),t}},Ab=class{constructor(t=256,e=!1){this.capacity=t,this.size=0,this.debug=e,this.debug&&console.log(`allocating with cap ${t}`);let n=t*Ab.eSize;this.buffer=new ArrayBuffer(n);let r=Float32Array.BYTES_PER_ELEMENT,i=0;this.positions=new Float32Array(this.buffer,i*r,3*t),i+=3*t,this.normals=new Float32Array(this.buffer,i*r,3*t),i+=3*t,this.uvs=new Float32Array(this.buffer,i*r,2*t)}realloc(t,e=!1){if(t<this.size)throw Error("cannot shrink buffer");if(t<=this.capacity&&!e)return;this.debug&&console.log(`resizing from ${this.capacity} \u2192 ${t}`);let n=t*Ab.eSize,r=new ArrayBuffer(n),i=Float32Array.BYTES_PER_ELEMENT,s=0,o=new Float32Array(r,s*i,3*t);s+=3*t;let a=new Float32Array(r,s*i,3*t);s+=3*t;let l=new Float32Array(r,s*i,2*t);o.set(this.positions.slice(0,this.size*3)),a.set(this.normals.slice(0,this.size*3)),l.set(this.uvs.slice(0,this.size*2)),this.buffer=r,this.positions=o,this.normals=a,this.uvs=l,this.capacity=t}get(t=1){let e=this.size+t;if(e>this.capacity){let r=this.capacity;for(;e>r;)r*=2;this.realloc(r)}let n=this.size;return this.size=e,n}reserve(t){let e=this.size+t;e>this.capacity&&this.realloc(e)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} \u2192 ${this.size}`),this.realloc(this.size,!0)}},Mk=Ab;Mk.eSize=(3+3+2)*Float32Array.BYTES_PER_ELEMENT;var $_=(t,e)=>([n,r])=>(r<n&&(r+=e),(t>=n?t:t+e)<=r),Ek=class extends tt{constructor(t,e,n=0,r=12,i=3,s=yn.ODD){super(),this.type="ShapeGeometry",this.vertexCache={},this._shape=t,this._depth=e,this._bevel=n,this._curveSegments=r,this._bevelSegmentsInput=i,n<=0?(this._bevelSize=0,this._bevelSegments=0):(this._bevelSize=Math.min(n,e/2-1e-12),this._bevelSegments=Math.floor(i));let o=this._shape.extractShapePointsToFlatArray([],r),a=this._shape.shapeHoles.map(E=>{let C=E.extractShapePointsToFlatArray([],r),T=[];for(let O=C.length-1;O>=1;O-=2){let L=C[O-1],k=C[O-0];T.push(L,k)}return T}),l=hf({windingRule:s,elementType:Sr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[o]}),c=hf({windingRule:yn.ODD,elementType:Sr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...a]});if(!l)throw new Error("error generating geometry");let d=l.elementCount;if(c){l.elementCount+=c.elementCount;for(let E=0;E<c.elements.length;E++){let C=c.elements[E],T=E%2===0?l.vertexCount:0;l.elements.push(C+T)}for(let E=0;E<c.vertexIndices.length;E++){let C=c.vertexIndices[E],T=l.vertexCount;l.vertexIndices.push(C+T)}for(let E=0;E<c.vertices.length;E++){let C=c.vertices[E];l.vertices.push(C)}}let u=1/0,h=-1/0,m=1/0,g=-1/0;for(let E=0,C=l.vertexCount;E<C;E++){let T=E*2,O=l.vertices[T+0],L=l.vertices[T+1];O<u&&(u=O),O>h&&(h=O),L<m&&(m=L),L>g&&(g=L)}this._minX=u,this._minY=m,this._width=h-u,this._height=g-m;let x=l.vertexCount*2*(2+this._bevelSegments);this._buffer=new Mk(x);let y=[],v=[];for(let E=l.elementCount-1;E>=0;E--){let C=E>=d,T=E*2,O=l.elements[T+0],L=l.elements[T+1],k=O+L,B={start:O,count:L,normals:[],continuous:[],concave:[]},G=O,H=k-1,Y=O+1,te=this._shape.roundedCurves.length;do{let z=G-O,U=l.vertices[H*2+0],V=l.vertices[H*2+1],X=l.vertices[G*2+0],J=l.vertices[G*2+1],ee=l.vertices[Y*2+0],q=l.vertices[Y*2+1],re=X-U,ie=J-V,K=Math.sqrt(re*re+ie*ie);re/=K,ie/=K;let oe=X-ee,ye=J-q,ne=Math.sqrt(oe*oe+ye*ye);oe/=ne,ye/=ne,B.normals[z*2+0]=-ye,B.normals[z*2+1]=oe,B.concave[z]=re*ye-ie*oe>0;let Q=l.vertexIndices[G];if(Array.isArray(Q))B.continuous[z]=!1;else{let[de,pe]=this._shape.getCurveIndexFromVertexId(Q-1,!0);if(pe>0&&pe<1)B.continuous[z]=!0;else{let ve=pe===1?de+1:de-1;ve=(ve+te)%te;let Re=pe===1?0:1,Le=this._shape.roundedCurves[de].getTangent(pe),De=this._shape.roundedCurves[ve].getTangent(Re);B.continuous[z]=Le.dot(De)>.95}}C&&(B.normals[z*2+0]*=-1,B.normals[z*2+1]*=-1),[H,G,Y]=[G,Y,Y+1],Y>=k&&(Y-=L)}while(Y!==O+1);let Z=[];Z.push({bevelI:0,angle:0,size:0,boundary:{vertices:l.vertices.slice(O*2,k*2),vertexCount:L,vertexIndices:new Array(L).fill(!0).map((z,U)=>[U,U]),elements:[0,L],elementCount:1,mesh:null},reverseMap:[],insetPoints:l.vertices.slice(O*2,k*2)});for(let z=1;z<=this._bevelSegments;z++){let U=z/this._bevelSegments*Math.PI/2,V=(1-Math.cos(U))*this._bevelSize,X=[],J=[],ee=0;for(let re=0;re<L;re++){let ie=re*2,K=(re-1+L)%L*2,oe=l.vertices[B.start*2+ie+0],ye=l.vertices[B.start*2+ie+1],ne=-B.normals[K+0]*V,Q=-B.normals[K+1]*V,de=-B.normals[ie+0]*V,pe=-B.normals[ie+1]*V;if(B.concave[re]||!B.concave[re]&&C){let ve=Math.atan2(Q,ne),Re=Math.atan2(pe,de);Re>ve&&(Re-=Math.PI*2);let Le=Re-ve;if(B.continuous[re]||C){let De=ve+Le/2,gt=Math.cos(De)*V,je=Math.sin(De)*V;X[2*ee+0]=oe+gt*(C?-1:1),X[2*ee+1]=ye+je*(C?-1:1),J[ee]=re,ee++}else{let De=Math.max(1,Math.floor(r/4*Math.abs(Le)/Math.PI));for(let gt=0;gt<=De;gt++){let je=ve+Le*(gt/De),j=Math.cos(je)*V,F=Math.sin(je)*V;X[2*ee+0]=oe+j,X[2*ee+1]=ye+F,J[ee]=re,ee++}}}else X[2*ee+0]=oe+ne,X[2*ee+1]=ye+Q,J[ee]=re,ee++,X[2*ee+0]=oe,X[2*ee+1]=ye,J[ee]=re,ee++,X[2*ee+0]=oe+de,X[2*ee+1]=ye+pe,J[ee]=re,ee++}let q=hf({windingRule:yn.POSITIVE,elementType:Sr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[X],edgeCreateCallback:re=>{let ie=re.Org.idx,K=J[ie],oe=J[(ie+1)%J.length];re.idx=[K,oe],re.Sym.idx=[oe,K]},vertexIdCallback:re=>{let ie=re.Lprev.idx;return[ie?ie[1]:0,re.idx[0]]}});if(!q)throw console.log("Error"),new Error(`error generating bevel geometry for ${z}'th loop`);if(!q.vertexCount)break;for(let re=0;re<q.vertexIndices.length;re++){let[ie,K]=q.vertexIndices[re];if(ie===K)continue;let oe=K;K<ie&&(oe+=L);for(let ye=ie;ye<oe;ye++){let ne=ye%L,Q=(ye+1)%L;if(!B.continuous[ne]||!B.continuous[Q]){q.vertexIndices[re]=[ie,ne],q.vertexIndices.splice(re+1,0,[Q,K]),q.vertices.splice((re+1)*2,0,q.vertices[re*2],q.vertices[re*2+1]);break}}}Z.push({bevelI:z,angle:U,size:V,boundary:q,reverseMap:J,insetPoints:X})}let D=(z,U,V)=>{let X=0,J=z.boundary.vertexIndices.length;for(;X<J&&V(z.boundary.vertexIndices[U]);)U=(U+1)%J,X++;return X},N=y.length;for(let z=1;z<Z.length;z++){let U=Z[z-1],V=Z[z],X=U.boundary.vertexIndices.length,J=V.boundary.vertexIndices.length;if(!X||!J)break;let ee=B.concave.length,q=0,re=$_(q,L);for(;!U.boundary.vertexIndices.filter(re).length||!V.boundary.vertexIndices.filter(re).length;)q++,re=$_(q,L);let ie=U.boundary.vertexIndices.findIndex(re),K=V.boundary.vertexIndices.findIndex(re);do ie=(ie+1)%X;while(re(U.boundary.vertexIndices[ie]));do K=(K+1)%J;while(re(V.boundary.vertexIndices[K]));q=(q+1)%L;let oe=q,ye=this.buildBevelVert(B,U,(ie-1+X)%X),ne=this.buildBevelVert(B,V,(K-1+J)%J),Q=ye,de=ne,pe,ve,Re=!1;do{re=$_(q,L);let Le=D(U,ie,re),De=D(V,K,re),gt=Re;if(Re=!1,Le&&!De){for(let je=0;je<Le;je++)pe=this.buildBevelVert(B,U,(ie+je)%X,je/(Le-1)),y.push(Q.topN,pe.topP,de.topN),y.push(pe.bottomP,Q.bottomN,de.bottomN),Q=pe;Re=!0}else if(!Le&&De)for(let je=0;je<De;je++)ve=this.buildBevelVert(B,V,(K+je)%J,je/(De-1)),y.push(de.topN,Q.topP,ve.topP),y.push(Q.bottomP,de.bottomN,ve.bottomP),de=ve;else if(Le&&De)if(pe=this.buildBevelVert(B,U,ie,0),ve=this.buildBevelVert(B,V,K,0),gt?(y.push(Q.topN,ve.topP,de.topN),y.push(Q.topN,pe.topP,ve.topP),y.push(ve.bottomP,Q.bottomN,de.bottomN),y.push(ve.bottomP,pe.bottomP,Q.bottomN)):(y.push(de.topN,Q.topN,pe.topP),y.push(de.topN,pe.topP,ve.topP),y.push(pe.bottomP,Q.bottomN,de.bottomN),y.push(pe.bottomP,de.bottomN,ve.bottomP)),Q=pe,de=ve,Le===De)for(let je=1;je<Le;je++)pe=this.buildBevelVert(B,U,(ie+je)%X,je/(Le-1)),ve=this.buildBevelVert(B,V,(K+je)%J,je/(De-1)),y.push(Q.topN,pe.topP,de.topN),y.push(de.topN,pe.topP,ve.topP),y.push(pe.bottomP,Q.bottomN,de.bottomN),y.push(pe.bottomP,de.bottomN,ve.bottomP),Q=pe,de=ve;else if(Le>De){let je=Le/De,j=0;for(let F=1;F<Le;F++)pe=this.buildBevelVert(B,U,(ie+F)%X,F/(Le-1)),y.push(Q.topN,pe.topP,de.topN),y.push(pe.bottomP,Q.bottomN,de.bottomN),Q=pe,F>(j+1)*je&&(j++,ve=this.buildBevelVert(B,V,(K+j)%J,j/(De-1)),y.push(de.topN,pe.topP,ve.topP),y.push(pe.bottomP,de.bottomN,ve.bottomP),de=ve)}else{let je=De/Le,j=0;for(let F=1;F<De;F++)ve=this.buildBevelVert(B,V,(K+F)%J,F/(De-1)),y.push(de.topN,pe.topP,ve.topP),y.push(pe.bottomP,de.bottomN,ve.bottomP),de=ve,F>(j+1)*je&&(j++,pe=this.buildBevelVert(B,U,(ie+j)%X,j/(Le-1)),y.push(Q.topN,pe.topP,de.topN),y.push(pe.bottomP,Q.bottomN,de.bottomN),Q=pe)}ie=(ie+Le)%X,K=(K+De)%J,q=(q+1)%ee}while(q!==oe)}{let z=Z[0];for(let U=0,V=z.boundary.vertexCount;U<V;U++){let X=this.buildBevelVert(B,z,U),J=this.buildBevelVert(B,z,(U+1)%V);y.push(J.topP,X.topN,X.bottomN),y.push(J.topP,X.bottomN,J.bottomP)}}if(C){let z=[];for(let U=y.length-1;U>=N+2;U-=3){let V=y[U-2],X=y[U-1],J=y[U-0];z.push(J,X,V)}y.splice(N,y.length-N,...z)}if(C){let z=[];for(let U=Z[Z.length-1].boundary.vertices.length-1;U>=1;U-=2){let V=Z[Z.length-1].boundary.vertices[U-1],X=Z[Z.length-1].boundary.vertices[U-0];z.push(V,X)}v.push(z)}if(!C){let z=Z[Z.length-1],U=hf({windingRule:Z.length>1?yn.POSITIVE:yn.ODD,elementType:Sr.POLYGONS,vertexSize:2,strict:!0,contours:[z.insetPoints,...v]});if(!U)throw new Error("Error generating geometry for surface");a.length===0&&Object.assign(this,{capStartIndex:y.length});for(let V=0;V<U.elementCount*3;V+=3){let X=this.buildSurfaceVert(U,U.elements[V+0]),J=this.buildSurfaceVert(U,U.elements[V+1]),ee=this.buildSurfaceVert(U,U.elements[V+2]);y.push(X.top,J.top,ee.top),y.push(ee.bottom,J.bottom,X.bottom)}}this.vertexCache={}}this._buffer.shrink();let _=new vt(Uint32Array.from(y),1),S=new vt(this._buffer.positions,3),b=new vt(this._buffer.normals,3),A=new vt(this._buffer.uvs,2);S.needsUpdate=!0,b.needsUpdate=!0,A.needsUpdate=!0,_.needsUpdate=!0,this.setAttribute("position",S),this.setAttribute("normal",b),this.setAttribute("uv",A),this.setIndex(_)}buildSurfaceVert(t,e){let n=e.toString();if(n in this.vertexCache)return this.vertexCache[n];let r=t.vertices[e*2+0],i=t.vertices[e*2+1],s=(r-this._minX)/this._width,o=(i-this._minY)/this._height,a=this._buffer.get(2),l=a*3,c=a*2,d={top:a+0,bottom:a+1};return this._buffer.positions[l+0]=r,this._buffer.positions[l+1]=i,this._buffer.positions[l+2]=this._depth,this._buffer.normals[l+0]=0,this._buffer.normals[l+1]=0,this._buffer.normals[l+2]=1,this._buffer.uvs[c+0]=s,this._buffer.uvs[c+1]=o,this._buffer.positions[l+3]=r,this._buffer.positions[l+4]=i,this._buffer.positions[l+5]=0,this._buffer.normals[l+3]=0,this._buffer.normals[l+4]=0,this._buffer.normals[l+5]=-1,this._buffer.uvs[c+2]=s,this._buffer.uvs[c+3]=o,this.vertexCache[n]=d,d}buildBevelVert(t,e,n,r=1){let i=`${e.bevelI}:${n}`;if(i in this.vertexCache)return this.vertexCache[i];let[s,o]=e.boundary.vertexIndices[n],a,l,c,d;s!==o?(l=s,a=o,d=!1,c=t.continuous[l]&&t.continuous[a]):(a=s,l=(a-1+t.count)%t.count,d=t.concave[a]&&e.bevelI>0,c=t.continuous[a]||d);let u=Math.cos(e.angle),h=Math.sin(e.angle),m=n*2,g=a*2,x=l*2,y=e.boundary.vertices[m+0],v=e.boundary.vertices[m+1],_=(1-h)*this._bevelSize,S=(y-this._minX)/this._width,b=(v-this._minY)/this._height,A=t.normals[g+0],E=t.normals[g+1],C=t.normals[x+0],T=t.normals[x+1];if(d){let G=C-A,H=T-E;A=A+G*(1-r),E=E+H*(1-r);let Y=Math.sqrt(A*A+E*E);A/=Y,E/=Y}let O=this._buffer.get(c?2:4),L=O*3,k=O*2,B={i:n,fi:a,topP:O+0,topN:O+0,bottomP:O+1,bottomN:O+1};return this._buffer.positions[L+0]=y,this._buffer.positions[L+1]=v,this._buffer.positions[L+2]=this._depth-_,this._buffer.normals[L+0]=A*u,this._buffer.normals[L+1]=E*u,this._buffer.normals[L+2]=h,this._buffer.uvs[k+0]=S,this._buffer.uvs[k+1]=b,this._buffer.positions[L+3]=y,this._buffer.positions[L+4]=v,this._buffer.positions[L+5]=_,this._buffer.normals[L+3]=A*u,this._buffer.normals[L+4]=E*u,this._buffer.normals[L+5]=-h,this._buffer.uvs[k+2]=b,this._buffer.uvs[k+3]=S,c||(O+=2,L+=6,k+=4,B.topP=O+0,B.bottomP=O+1,this._buffer.positions[L+0]=y,this._buffer.positions[L+1]=v,this._buffer.positions[L+2]=this._depth-_,this._buffer.normals[L+0]=C*u,this._buffer.normals[L+1]=T*u,this._buffer.normals[L+2]=h,this._buffer.uvs[k+0]=S,this._buffer.uvs[k+1]=b,this._buffer.positions[L+3]=y,this._buffer.positions[L+4]=v,this._buffer.positions[L+5]=_,this._buffer.normals[L+3]=C*u,this._buffer.normals[L+4]=T*u,this._buffer.normals[L+5]=-h,this._buffer.uvs[k+2]=b,this._buffer.uvs[k+3]=S),this.vertexCache[i]=B,B}clone(){let t=new Ek(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return t.userData=pk(this.userData),t}},ma=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var c,d,u,h,m,g,x;let n=Object.assign({},(c=e==null?void 0:e.parameters)!=null?c:{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:yn.ODD},t.parameters),r=Math.abs(n.width),i=Math.abs((d=n.height)!=null?d:n.width),s=Math.abs((u=n.depth)!=null?u:0),o=(h=t.shape)!=null?h:e==null?void 0:e.shape,a=(m=o==null?void 0:o.roundness)!=null?m:n.roundness;o!==void 0&&(o instanceof zn?(o.width!==r||o.height!==i)&&o.applySize(r,i):o=new zn(r,i).fromJSON(o),((g=t.parameters)==null?void 0:g.roundness)!==void 0&&((x=t.parameters)==null?void 0:x.roundness)>0&&o.update(!1));let l=o!=null?o:new zn(r,i);return{parameters:Object.assign(n,{width:r,height:i,depth:s,roundness:a}),shape:l}}static build(t){let{depth:e,extrudeBevelSize:n,extrudeBevelSegments:r,subdivisions:i,roundness:s,windingRule:o}=t.parameters;t.shape.roundness=s;let a;return e<=0?a=new bk(t.shape,i,{windingRule:o}):a=new Ek(t.shape,e,n,i,r,o),Object.assign(a,{userData:{...t,type:"VectorGeometry"}})}},Kne=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var o,a,l,c,d;let n=Object.assign({},(o=e==null?void 0:e.parameters)!=null?o:{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:0,cornerSegments:8,hollow:0},t.parameters),r=n.width/2,i=(a=n.radiusTop)!=null?a:r,s=(l=n.radiusBottom)!=null?l:r;return i===s?(i=r,s=r):i>s?(i=r,s=s*r/i):(i=i*r/s,s=r),{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs((c=n.height)!=null?c:n.width),depth:Math.abs((d=n.depth)!=null?d:n.width),radiusTop:i,radiusBottom:s})}}static build(t){let{width:e,depth:n,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l,radiusTop:c,radiusBottom:d,cornerRadius:u,cornerSegments:h,hollow:m}=t.parameters,g;return u||m?g=new Tk(c,d,r,i,s,o,a,l*Math.PI/180,u,u,h,m):g=new Tl(c,d,r,i,s,o,a,l*Math.PI/180),g.scale(1,1,n/e),Object.assign(g,{userData:{...t,type:"CylinderGeometry"}})}};function Ba(t,e,n){n.x=t.x*e.x,n.y=t.y,n.z=t.x*e.y}function vL(t){return new se(t.y,-t.x)}var Tk=class extends tt{constructor(t,e,n,r,i,s,o,a,l,c,d,u,h=!1){super(),this.type="RoundedCylinderBufferGeometry",t=t!==void 0?t:1,e=e!==void 0?e:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,s=s!==void 0?s:!1,o=o!==void 0?o:0,a=a!==void 0?a:Math.PI*2,s&&(l=0,c=0);let m=[],g=[],x=[],y=[],v=0,_=n/2,S=new R,b=new R;h&&t==0&&(t=l),h&&e==0&&(e=c);let A=new se(t,_),E=new se(e,-_),C=null,T=null,O=null,L=null,k=A.clone().sub(E),B=0,G=0,H=0;u>0&&(B=Math.min(t,e)*(1-u),G=t-B,H=e-B);let Y=A.clone();Y.x-=B;let te=Math.PI-k.angle(),Z=k.angle(),D=Math.tan(Z/2),N=Math.tan(te/2),z=D+N,U=u?z:N,V=u?z:D;if(l=Math.min(l,(t-G)/U,k.length()/z),c=Math.min(c,(e-H)/V,k.length()/z),l>0){let ie=l/D;C=A.clone().sub(new se(ie,l)),u&&(O=C.clone(),O.x-=B-z*l),A.sub(k.clone().setLength(ie))}if(c>0){let ie=c/N;T=E.clone().sub(new se(ie,-c)),E.add(k.clone().setLength(ie)),u&&(L=T.clone(),L.x-=B-z*c,Y.sub(k.clone().setLength(ie)))}k=A.clone().sub(E);let X=k.length()<.5,J=[];for(let ie=0;ie<=r;ie++){let K=[],oe=ie/r,ye=oe*a+o,ne=new se(Math.sin(ye),Math.cos(ye));L&&T?(ee(K,oe,ne,te,c,L,-1,!0),ee(K,oe,ne,Z,c,T,-1,!1)):T?(q(K,ne,T.x,0,-1),ee(K,oe,ne,Z,c,T,-1,!1)):s||q(K,ne,e,H,-1);let Q=vL(k).normalize();if(Ba(Q,ne,S),!X)for(let de=0;de<=i;de++){let pe=de/i,ve=k.clone().multiplyScalar(pe).add(E);Ba(ve,ne,b),g.push(b.x,b.y,b.z),x.push(S.x,S.y,S.z),y.push(oe,.5+b.y/n),K.push(v++)}if(O&&C?(ee(K,oe,ne,te,l,C,1,!1),ee(K,oe,ne,Z,l,O,1,!0)):C?(ee(K,oe,ne,te,l,C,1,!1),q(K,ne,C.x,0,1)):s||q(K,ne,t,G,1),u&&!X){let de=vL(k).multiplyScalar(-1).normalize();Ba(de,ne,S);for(let pe=0;pe<=i;pe++){let ve=pe/i,Re=k.clone().multiplyScalar(-ve).add(Y);Ba(Re,ne,b),g.push(b.x,b.y,b.z),x.push(S.x,S.y,S.z),y.push(oe,.5+b.y/n),K.push(v++)}}u&&!s&&K.push(K[0]),J.push(K)}for(let ie=0;ie<J.length-1;ie++)for(let K=0;K<J[0].length-1;K++){if(s&&u&&K==i)continue;let oe=J[ie][K],ye=J[ie+1][K],ne=J[ie+1][K+1],Q=J[ie][K+1],de=g[ne*3+0],pe=g[ne*3+2];m.push(oe,ye,Q),(de!=0||pe!=0)&&m.push(ye,ne,Q)}a<Math.PI*2&&(re(-1,J[0],o),re(1,J[J.length-1],o+a)),this.setIndex(m),this.setAttribute("position",new Ne(g,3)),this.setAttribute("normal",new Ne(x,3)),this.setAttribute("uv",new Ne(y,2));function ee(ie,K,oe,ye,ne,Q,de,pe){for(let ve=0;ve<d+1;ve++){let Re=ve/d,Le=de<0?Re:1-Re;pe&&(Le-=1),Le*=ye;let De=new se(Math.sin(Le),Math.cos(Le)*de),gt=De.clone().multiplyScalar(ne).add(Q);Ba(gt,oe,b),g.push(b.x,b.y,b.z),Ba(De,oe,S),x.push(S.x,S.y,S.z),y.push(K,.5+b.y/n),ie.push(v++)}}function q(ie,K,oe,ye,ne){let Q=new R,de=new se,pe=[oe,ye];ne<0&&pe.reverse();for(let ve of pe)de.set(ve,_*ne),Ba(de,K,Q),g.push(Q.x,Q.y,Q.z),x.push(0,ne,0),y.push(.5,.5),ie.push(v++)}function re(ie,K,oe){let ye=new se(Math.sin(oe),Math.cos(oe)),ne=new se(-Math.cos(oe),Math.sin(oe)),Q=new R,de=ie<0?(Re,Le,De)=>m.push(Re,Le,De):(Re,Le,De)=>m.push(Re,De,Le),pe=new se((t+e+G+H)/4,0);Ba(pe,ye,Q),g.push(Q.x,Q.y,Q.z),x.push(ne.x,0,ne.y),y.push(.5,.5);let ve=v++;for(let Re of K){let Le=g.slice(Re*3,Re*3+3);g.push(...Le),x.push(ne.x,0,ne.y);let De=y.slice(Re*2,Re*2+2);y.push(...De),v++}for(let Re=ve+1;Re<v-1;Re++)de(ve,Re,Re+1);de(ve,v-1,ve+1)}}},ere=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var r,i,s;let n=Object.assign({},(r=e==null?void 0:e.parameters)!=null?r:{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:0,cornerRadiusBottom:0,cornerSegments:8},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs((i=n.height)!=null?i:n.width),depth:Math.abs((s=n.depth)!=null?s:n.width)})}}static build(t){let{width:e,depth:n,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l,cornerRadiusTop:c,cornerRadiusBottom:d,cornerSegments:u}=t.parameters,h;return c>0||d>0||l<360?h=new Tk(0,e/2,r,i,s,o,a,l*Math.PI/180,c,d,u,0,!0):h=new qd(e/2,r,i,s,o),h.scale(1,1,n/e),Object.assign(h,{userData:{...t,type:"ConeGeometry"}})}},tre=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var r,i,s;let n=Object.assign({},(r=e==null?void 0:e.parameters)!=null?r:{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:0,cornerSegments:8},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs((i=n.height)!=null?i:n.width),depth:Math.abs((s=n.depth)!=null?s:n.width)})}}static build(t){let{width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:o,cornerRadius:a,cornerSegments:l}=t.parameters,c;return a==0?c=new _s(e,n,r,i,s,o):c=new nre(e,n,r,i,s,o,a,l),Object.assign(c,{userData:{...t,type:"CubeGeometry"}})}},q_=Math.PI/2,nre=class extends tt{constructor(t=1,e=1,n=1,r=1,i=1,s=1,o=0,a=4){super(),this.type="BoxGeometry";let l=this;r=Math.floor(r),i=Math.floor(i),s=Math.floor(s),a=Math.floor(a),o=Math.min(o,t/2,e/2,n/2);let c=[],d=[],u=[],h=[],m=0,g=0;x("z","y","x",-1,-1,n,e,t,s,i,0),x("z","y","x",1,-1,n,e,-t,s,i,1),x("x","z","y",1,1,t,n,e,r,s,2),x("x","z","y",1,-1,t,n,-e,r,s,3),x("x","y","z",1,-1,t,e,n,r,i,4),x("x","y","z",-1,-1,t,e,-n,r,i,5),o>0&&(y("z","y","x",-1,-1,1,n,e,t,s,0),y("z","y","x",1,-1,-1,n,e,t,s,1),y("z","y","x",-1,1,-1,n,e,t,s,1),y("z","y","x",1,1,1,n,e,t,s,0),y("x","y","z",-1,-1,-1,t,e,n,r,0),y("x","y","z",1,-1,1,t,e,n,r,1),y("x","y","z",-1,1,1,t,e,n,r,0),y("x","y","z",1,1,-1,t,e,n,r,1),y("y","x","z",-1,-1,1,e,t,n,i,0),y("y","x","z",1,-1,-1,e,t,n,i,1),y("y","x","z",1,1,1,e,t,n,i,1),y("y","x","z",-1,1,-1,e,t,n,i,0),v(1,1,1),v(-1,1,1),v(1,-1,1),v(-1,-1,1),v(1,1,-1),v(-1,1,-1),v(1,-1,-1),v(-1,-1,-1)),this.setIndex(c),this.setAttribute("position",new Ne(d,3)),this.setAttribute("normal",new Ne(u,3)),this.setAttribute("uv",new Ne(h,2));function x(_,S,b,A,E,C,T,O,L,k,B){let G=(C-2*o)/L,H=(T-2*o)/k,Y=C/2-o,te=T/2-o,Z=O/2,D=L+1,N=k+1,z=0,U=0,V=new R;for(let X=0;X<N;X++){let J=X*H-te;for(let ee=0;ee<D;ee++){let q=ee*G-Y;V[_]=q*A,V[S]=J*E,V[b]=Z,d.push(V.x,V.y,V.z),V[_]=0,V[S]=0,V[b]=O>0?1:-1,u.push(V.x,V.y,V.z),h.push(ee/L),h.push(1-X/k),z+=1}}for(let X=0;X<k;X++)for(let J=0;J<L;J++){let ee=m+J+D*X,q=m+J+D*(X+1),re=m+(J+1)+D*(X+1),ie=m+(J+1)+D*X;c.push(ee,q,ie),c.push(q,re,ie),U+=6}l.addGroup(g,U,B),g+=U,m+=z}function y(_,S,b,A,E,C,T,O,L,k,B){let G=(T-2*o)/k,H=T/2-o,Y=O/2-o,te=L/2,Z=k+1,D=0,N=0,z=new R,U=new R;for(let V=0;V<a+1;V++){let X=V/a*q_,J=Math.sin(X)*o,ee=(1-Math.cos(X))*o,q=Math.sin(X),re=Math.cos(X);z[S]=(Y+J)*E,z[b]=(te-ee)*C,U[_]=0,U[S]=q*Math.sign(z[S]),U[b]=re*Math.sign(z[b]);for(let ie=0;ie<Z;ie++){let K=ie*G-H;z[_]=K*A,d.push(z.x,z.y,z.z),u.push(U.x,U.y,U.z),h.push(ie/k),h.push(0),D+=1}}for(let V=0;V<a;V++)for(let X=0;X<k;X++){let J=m+X+Z*V,ee=m+X+Z*(V+1),q=m+(X+1)+Z*(V+1),re=m+(X+1)+Z*V;c.push(J,ee,re),c.push(ee,q,re),N+=6}l.addGroup(g,N,B),g+=N,m+=D}function v(_,S,b){let A=new R,E=new R(t/2,e/2,n/2);E.subScalar(o);let C=[],T=_*S*b>0?(L,k,B)=>c.push(L,k,B):(L,k,B)=>c.push(L,B,k);for(let L=0;L<=a;L++){let k=[],B=q_*(1-L/a),G=Math.cos(B),H=Math.sin(B),Y=0;for(let te=0;te<=L;te++){let Z=Math.cos(Y),D=Math.sin(Y);A.x=G*Z,A.y=H,A.z=G*D;let N=E.clone().addScaledVector(A,o);d.push(_*N.x,S*N.y,b*N.z),u.push(_*A.x,S*A.y,b*A.z),h.push(0,0),k.push(m++),Y+=q_/L}C.push(k)}let O=C.length-1;for(let L=0;L<O;L++){let k=C[L],B=C[L+1],G=k.length-1;T(k[0],B[1],B[0]);for(let H=1;H<=G;H++)T(k[H-1],k[H],B[H]),T(k[H],B[H+1],B[H])}}}},i3=class extends tt{constructor(t=[],e=[],n="",r=1,i=.2,s=4){super(),this.type="PolyhedronGeometryRound";let o=[],a=[],l=[];c(),d(),this.setAttribute("position",new Ne(o,3)),this.setAttribute("normal",new Ne(l,3)),this.setAttribute("uv",new Ne(a,2));return;function c(){var Z;i=Math.min(1-1e-5,i),i==0&&(s=0);let u={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[n],h=new R,m=h.clone(),g=new Ai,x=i*r,y=r-x,v=s+1,_=new R,S=(D,N)=>_.subVectors(D,N).normalize(),b=(D,N)=>Array(D).fill(void 0).map(N),A=b(t.length/3,(D,N)=>new R().fromArray(t,N*3).setLength(r)),E=[],C=1e6;for(let D=0;D<A.length;D++){let N=A[D],z=[],U,V,X,J=1e10,ee=-1;for(;(ee=e.indexOf(D,ee+1))!=-1;){let K=ee-ee%3;U=e[K+(ee+1)%3],V=e[K+(ee+2)%3],X=N.distanceToSquared(A[U]),J=Math.min(J,X),z.push([U,V,X])}J+=1e-6;let q=[],re=0,ie=z.length;for(let K=0;K<ie;K++){[U,V,X]=z[re];let oe=((Z=E[U])==null?void 0:Z.includes(D))==!0;X<=J&&q.push(U+ +oe*C),re=z.findIndex(ye=>ye[0]==V)}E.push(q)}let T=[];{let D=0,N=0,z,U,V=u==3;for(let X=0;X<=s;X++){z=X*(X+1)/2,U=(X+1)*(X+2)/2;for(let J=0;J<s-X;J++)[D,N]=[z+J+X+2,U+J+X+3],T.push(z,U,...V?[N,z]:[D,U],N,D),[z,U]=[D,N];T.push(z,U,z+s+2)}}let O=h.clone(),L=h.clone(),k=h.clone(),B=h.clone(),G=h.clone(),H=[],Y=b(A.length,()=>b(u,()=>h.clone()));for(let D=0;D<A.length;D++){h.copy(A[D]).normalize(),O.copy(h).multiplyScalar(y);let N=E[D];for(let q=0;q<N.length;q++){let re=N[q],ie=N[(q+1)%u];g.setFromPointsAndIndices(A,D,re%C,ie%C),g.b.sub(g.a).setLength(1e10).add(g.a),g.c.sub(g.a).setLength(1e10).add(g.a),g.closestPointToPoint(O,Y[D][q])}let z=[],U=[],V=[],X=new R;s==0&&[...Y[D]].reduce((q,re)=>q.add(re),X).multiplyScalar(1/u);for(let q=0;q<u;q++){let re=[],ie=(q-1+u)%u,K=Y[D][ie],oe=Y[D][q];h.copy(K).sub(O),m.copy(oe).sub(O);let ye=O.angleTo(h),ne=h.angleTo(m),Q=Math.cos(ye)*x;s==0?L.copy(X):L.copy(O).setLength(y+Q),U.push(Q);let de=[L,K,oe];for(let pe=0;pe<2;pe++){let ve=de[pe],Re=de[pe+1];B.subVectors(ve,O),G.subVectors(Re,O),k.crossVectors(B,G).normalize();for(let Le=0;Le<v;Le++){let De=[ye,ne][pe]*Le/v;h.copy(B).applyAxisAngle(k,De).add(O),z.push(h.clone()),pe&&(S(h,O),re.push([Le==0?ve:h.clone(),_.clone()]))}pe&&(S(Re,O),re.push([Re,_.clone()]))}V.push(re)}H.push(V);let J=2*v,ee=2;for(let q=0;q<u;q++){let re=J*q,ie=J*((q+1)%u),K=[z[re]];for(let ye=1;ye<v;ye++){B=z[re+ye],G=z[ie+ye],K.push(B);for(let ne=1,Q=ye-ee+1;ne<=Q;ne++)h.lerpVectors(B,G,ne/(Q+1)),h.sub(O).setLength(U[q]).add(O),K.push(h.clone());K.push(G)}for(let ye=0;ye<v;ye++)K.push(z[ye+v+re]);K.push(z[ie+v]);let oe=T.map(ye=>K[ye]);o.push(...oe.map(ye=>[ye.x,ye.y,ye.z]).flat()),l.push(...oe.map(ye=>(S(ye,O),[_.x,_.y,_.z])).flat())}}let te=[];for(let D=0;D<E.length;D++)for(let N=0;N<u;N++){let z=E[D][N];if(z<C){let U=E[z].findIndex(J=>J%C==D),V=H[D][N],X=H[z][U];for(let J=0;J<v;J++){let ee=V[J],q=X[v-J],re=V[J+1],ie=X[v-(J+1)];[ee,q,re,re,q,ie].forEach(K=>{o.push(K[0].x,K[0].y,K[0].z),l.push(K[1].x,K[1].y,K[1].z)})}te.push(V[0][0],X[v][0],V[v][0],X[0][0])}}for(;te.length;){let D,N,z,U;[D,N]=te.splice(0,2);let V=[D];for(;D!=N;)V.push(N),z=te.indexOf(N),U=z%2,N=te.splice(z-U,2)[1-U];_.subVectors(V[0],V[1]).cross(h.subVectors(V[0],V[2])).normalize();let X=_.dot(V[0])<0;X&&_.negate();for(let J=1;J<=V.length-2;J++)[V[J+ +X],V[J+1-+X],V[0]].forEach(ee=>{o.push(ee.x,ee.y,ee.z),l.push(_.x,_.y,_.z)})}}function d(){let u=new R;for(let E=0;E<o.length;E+=3){u.x=o[E+0],u.y=o[E+1],u.z=o[E+2];let C=b(u)/2/Math.PI+.5,T=A(u)/Math.PI+.5;a.push(C,1-T)}let h=new R,m=new R,g=new R,x=new R,y=new se,v=new se,_=new se,S=(E,C,T,O)=>{O<0&&E.x===1&&(a[C]=E.x-1),T.x===0&&T.z===0&&(a[C]=O/2/Math.PI+.5)};for(let E=0,C=0;E<o.length;E+=9,C+=6){h.set(o[E+0],o[E+1],o[E+2]),m.set(o[E+3],o[E+4],o[E+5]),g.set(o[E+6],o[E+7],o[E+8]),y.set(a[C+0],a[C+1]),v.set(a[C+2],a[C+3]),_.set(a[C+4],a[C+5]),x.copy(h).add(m).add(g).divideScalar(3);let T=b(x);S(y,C+0,h,T),S(v,C+2,m,T),S(_,C+4,g,T)}for(let E=0;E<a.length;E+=6){let C=a[E+0],T=a[E+2],O=a[E+4],L=Math.max(C,T,O),k=Math.min(C,T,O);L>.9&&k<.1&&(C<.2&&(a[E+0]+=1),T<.2&&(a[E+2]+=1),O<.2&&(a[E+4]+=1))}function b(E){return Math.atan2(E.z,-E.x)}function A(E){return Math.atan2(-E.y,Math.sqrt(E.x*E.x+E.z*E.z))}}}static fromJSON(t){return new i3(t.vertices,t.indices,t.radius,t.corner,t.cornerSides)}},rre=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var r,i,s;let n=Object.assign({},(r=e==null?void 0:e.parameters)!=null?r:{width:100,detail:0,corner:0,cornerSides:4},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs((i=n.height)!=null?i:n.width),depth:Math.abs((s=n.depth)!=null?s:n.width)})}}static build(t){let{width:e,height:n,depth:r,detail:i,corner:s,cornerSides:o}=t.parameters,a=i===0&&s!==0?new Ak(e*.5,s,o):new Xd(e*.5,i);return a.scale(1,n/e,r/e),Object.assign(a,{userData:{...t,type:"DodecahedronGeometry"}})}},Ak=class extends i3{constructor(t=1,e=.2,n=4){let r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a="DodecahedronGeometry";super(s,o,a,t,e,n),this.type=a}static fromJSON(t){return new Ak(t.radius,t.corner,t.cornerSides)}},Cb=Math.PI*2;function X_({x:t,y:e},n,r,i,s){return{x:t*n+i,y:e*r+s}}function ire(t,e){let n=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=Math.cos(t),i=Math.sin(t),s=Math.cos(t+e),o=Math.sin(t+e);return[{x:r-i*n,y:i+r*n},{x:s+o*n,y:o-s*n},{x:s,y:o}]}function yL(t,e,n,r){let i=t*r-e*n<0?-1:1,s=Math.min(1,Math.max(-1,t*n+e*r));return i*Math.acos(s)}function sre(t,e,n,r,i,s,o,a,l,c){let d=Math.pow(i,2),u=Math.pow(s,2),h=Math.pow(o,2),m=Math.pow(a,2),g=d*u-d*m-u*h;g<0&&(g=0),g/=d*m+u*h,g=Math.sqrt(g)*(l===c?-1:1);let x=g*i/s*a,y=g*-s/i*o,v=x+(t+n)/2,_=y+(e+r)/2,S=(o-x)/i,b=(a-y)/s,A=(-o-x)/i,E=(-a-y)/s,C=yL(1,0,S,b),T=yL(S,b,A,E);return!c&&T>0&&(T-=Cb),c&&T<0&&(T+=Cb),{centerx:v,centery:_,ang1:C,ang2:T}}function ore({px:t,py:e,cx:n,cy:r,rx:i,ry:s,largeArcFlag:o,sweepFlag:a}){let l=[];if(i===0||s===0)return[];let c=(t-n)/2,d=(e-r)/2;if(c===0&&d===0)return[];i=Math.abs(i),s=Math.abs(s);let u=Math.pow(c,2)/Math.pow(i,2)+Math.pow(d,2)/Math.pow(s,2);u>1&&(i*=Math.sqrt(u),s*=Math.sqrt(u));let h=sre(t,e,n,r,i,s,c,d,o,a),{ang1:m,ang2:g}=h,{centerx:x,centery:y}=h,v=Math.abs(g)/(Cb/4);Math.abs(1-v)<1e-7&&(v=1);let _=Math.max(Math.ceil(v),1);g/=_;for(let S=0;S<_;S++)l.push(ire(m,g)),m+=g;return l.map(S=>{let{x:b,y:A}=X_(S[0],i,s,x,y),{x:E,y:C}=X_(S[1],i,s,x,y),{x:T,y:O}=X_(S[2],i,s,x,y);return{x1:b,y1:A,x2:E,y2:C,x:T,y:O}})}var Ck=Math.PI*2,are=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var r,i,s;let n=Object.assign({},(r=e==null?void 0:e.parameters)!=null?r:{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},t.parameters);return{shape:t.shape&&t.shape instanceof zn?t.shape:new zn,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs((i=n.height)!=null?i:n.width),depth:Math.abs((s=n.depth)!=null?s:0)})}}static build(t){let{width:e,height:n,spikes:r,angle:i,innerRadius:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}=t.parameters,c=t.shape,d=e*.5,u=n*.5,h=lre(c,d,u,i*Math.PI/180,r,s);c.isClosed=!0,c.update();let m=ma.create({shape:c,parameters:{subdivisions:h,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}});return Object.assign(m,{userData:{...t,type:"EllipseGeometry"}})}};function lre(t,e,n,r,i,s){if(r>=Ck)return i>30||i%4===0?(cre(t,e,n,s),Math.round(i/4)):xL(t,r,i,e,n,s);let o={x:0,y:n},a=r+Math.PI*.5,l={x:Math.cos(a)*e,y:Math.sin(a)*n},c=ore({px:o.x,py:o.y,cx:l.x,cy:l.y,rx:e,ry:n,largeArcFlag:r>Math.PI,sweepFlag:!0});return i>30||i%c.length===0?ure(t,o.x,o.y,c,i,e,n,s):xL(t,r,i,e,n,s)}function ure(t,e,n,r,i,s,o,a){let l=Math.round(i/r.length);t.addPoint(_d(e,n));for(let c=0,d=r.length;c<d;c++){let u=r[c],h=t.points[c],m=_d(u.x,u.y);h.controls[1].position.set(u.x1,u.y1),m.controls[0].position.set(u.x2,u.y2),t.addPoint(m)}return a>0?Pk(t,s,o,a):t.addPoint(_d(0,0)),l}function xL(t,e,n,r,i,s){let o=-e/n;for(let a=0;a<=n;a++){let l=o*a,c=Math.sin(l)*r,d=Math.cos(l)*i;t.addPoint(_d(c,d))}return e<Ck?s>0?Pk(t,r,i,s):t.addPoint(_d(0,0)):(t.removePoint(t.points[t.points.length-1]),s>0&&Lk(t,r,i,s)),1}function cre(t,e,n,r=0,i=0,s=0){let o=.5522847498,a=e*o,l=n*o;t.addPoint(u0(i-e,s,i-e,s-l,i-e,s+l)),t.addPoint(u0(i,s+n,i-a,s+n,i+a,s+n)),t.addPoint(u0(i+e,s,i+e,s+l,i+e,s-l)),t.addPoint(u0(i,s-n,i+a,s-n,i-a,s-n)),r>0&&Lk(t,e,n,r)}function _d(t,e){return new xd(nn.generateUUID(),new se(t,e))}function u0(t,e,n,r,i,s){let o=_d(t,e);return o.controls[0].position.set(n,r),o.controls[1].position.set(i,s),o}function Pk(t,e,n,r){Ok(t,e,n,r).forEach(i=>t.addPoint(i))}function Lk(t,e,n,r){let i=Ok(t,e,n,r),s=new zn;i.forEach(o=>s.addPoint(o)),s.isClosed=!0,t.shapeHoles.push(s)}function Ok(t,e,n,r){let i=r*e/100,s=i*(Math.abs(n)/Math.abs(e)),o=new se(i/e,s/n),a=t.points.map(l=>{let c=l.clone();return c.uuid=nn.generateUUID(),c}).reverse();return a.forEach(l=>{l.position.multiply(o);let c=l.controls[0].position.clone().multiply(o),d=l.controls[1].position.clone().multiply(o);l.controls[0].position.copy(d),l.controls[1].position.copy(c)}),a}var dre=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var a,l,c;let n=Object.assign({},(a=e==null?void 0:e.parameters)!=null?a:{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},t.parameters),r=Math.abs(n.width),i=Math.abs((l=n.height)!=null?l:r),s=Math.abs((c=n.depth)!=null?c:r),o=Math.abs(Math.min(r,s))/2;return{parameters:Object.assign(n,{width:r,height:i,depth:s,radius:o,segments:Math.round(n.segments),pathSegments:Math.round(n.pathSegments),cornerSegments:Math.round(n.cornerSegments)})}}static build(t){let{width:e,height:n,depth:r,radius:i,revolutions:s,segments:o,pathRadius:a,pathType:l,pathSegments:c,cornerRadius:d,cornerSegments:u}=t.parameters,h=new Ik(!1,e,n,r,i,s,o,a,l,c,d,u);return Object.assign(h,{userData:{...t,type:"HelixGeometry"}})}},Ik=class extends tt{constructor(t=!0,e=1,n=1,r=1,i=1,s=1,o=1,a=1,l=1,c=1,d=1,u=1){super();let h=t&&s===1;h&&(u=0),d>100&&(d=100);let m=()=>new R,g=new R,x=m(),y=m(),v=m(),_,S,b,A,E,C,T,O,L=m(),k=m(),B=m(),G=m(),H=m(),Y=m(),te=m(),Z=m(),D=n-2*a+.001,N=D/s,z=Math.ceil(o*s),U=z+1,V=D/z,X=-D/2,J=c+1,ee=2*Math.PI/c,q=Math.PI/2/u,re=.01,ie=Math.min((1-d/100)*a,a-re),K=a-ie,oe=0,ye=2,ne=u*ye+ye,Q=J*ne/ye,de=Q+J*U,pe=J*(U+ne),[ve,Re,Le]=[3,3,2].map(Ge=>Array(pe*Ge).fill(0)),De=[],gt=i-a;function je(Ge,Je){let qe=Math.PI/2;C=Je*V,O=2*Math.PI*(C%N)/N+qe,C+=X,T=Math.sin(O)*gt,E=Math.cos(O)*gt,t?Ge.set(E,T,C):Ge.set(E,C,T)}je(g,-1e-10),je(x,0),L.copy(g),je(g,1);let j=g.distanceTo(x),F=K+ie,_e=j*z+2*F,Ie=ie,ke=_e-F;for(let Ge=0;Ge<=z;Ge++){je(y,Ge),Z.subVectors(y,L).normalize(),L.copy(y),Y.copy(y).setComponent(+t+1,0).normalize(),te.crossVectors(Z,Y).normalize();let Je=Ge===0,qe=Ge===z,at=Je?3*Math.PI/2:q,rt=Je?Ie:ke,Pt=Je?J:de,Wt=Je?0:pe-J,pn=Z.clone().multiplyScalar(Je?-K:K).add(y),ae=Z.clone().multiplyScalar(Je?-1:1).normalize();for(let be=0;be<J;be++){let Me=be*ee;if(k.addVectors(g.copy(Y).multiplyScalar(a*Math.cos(Me)),x.copy(te).multiplyScalar(a*Math.sin(Me))),B.copy(k).normalize(),Je||qe){h||(oe=Wt+be,[0,1,2].forEach(Ae=>{ve[oe*3+Ae]=pn.getComponent(Ae),Re[oe*3+Ae]=ae.getComponent(Ae)}),Le[oe*2]=+qe,Le[oe*2+1]=be/c),x.copy(B).multiplyScalar(ie),v.addVectors(y,x);for(let Ae=0;Ae<u;Ae++){let ze=Ae*q+at;G.addVectors(g.copy(Z).multiplyScalar(K*Math.sin(ze)),x.copy(B).multiplyScalar(K*Math.cos(ze))),H.copy(G).normalize(),x.addVectors(v,G),G.normalize(),oe=Pt+Ae*J+be,[0,1,2].forEach(dt=>{ve[oe*3+dt]=x.getComponent(dt),Re[oe*3+dt]=H.getComponent(dt)});let Ze=+Je+Math.sin(ze);Le[oe*2]=(rt+K*Ze)/_e,Le[oe*2+1]=be/c}}x.addVectors(y,k),oe=Q+Ge*J+be,[0,1,2].forEach(Ae=>{ve[oe*3+Ae]=x.getComponent(Ae),Re[oe*3+Ae]=B.getComponent(Ae)}),Le[oe*2]=(F+Ge*j)/_e,Le[oe*2+1]=be/c}}let Ve=U+2*u+ye,ut=1,[He,Ce]=h?[ut,ut+U-1]:[0,Ve-1];for(let Ge=He;Ge<=Ce-1;Ge++){let Je=h&&Ge===Ce-1;for(let qe=0;qe<J-1;qe++)_=Ge*J+qe,S=_+1,b=(Je?qe:_)+J,A=(Je?qe+1:S)+J,Ge===0?De.push(S,A,b):Ge===Ve-2?De.push(_,S,b):De.push(_,S,b,S,A,b)}this.setIndex(De),this.setAttribute("position",new Ne(ve,3)),this.setAttribute("normal",new Ne(Re,3)),this.setAttribute("uv",new Ne(Le,2))}},hre=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var r,i,s;let n=Object.assign({},(r=e==null?void 0:e.parameters)!=null?r:{width:100,detail:0,corner:0,cornerSides:4},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs((i=n.height)!=null?i:n.width),depth:Math.abs((s=n.depth)!=null?s:n.width)})}}static build(t){let{width:e,height:n,depth:r,detail:i,corner:s,cornerSides:o}=t.parameters,a=i===0&&s!==0?new Dk(e*.5,s,o):new Yd(e*.5,i);return a.scale(1,n/e,r/e),Object.assign(a,{userData:{...t,type:"IcosahedronGeometry"}})}},Dk=class extends i3{constructor(t=1,e=.2,n=4){let r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],o="IcosahedronGeometry";super(i,s,o,t,e,n),this.type=o}static fromJSON(t){return new Dk(t.radius,t.corner,t.cornerSides)}},fre=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var r,i,s,o,a;((i=(r=t.parameters)==null?void 0:r.points)!=null?i:[]).forEach(l=>{Array.isArray(l)&&(l.x=l[0],l.y=l[1])});let n=Object.assign({},(s=e==null?void 0:e.parameters)!=null?s:{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs((o=n.height)!=null?o:n.width),depth:Math.abs((a=n.depth)!=null?a:n.width)})}}static build(t){let{points:e,segments:n,verticalSegments:r}=t.parameters,i=new Hs;i.moveTo(e[0].x,e[0].y),i.bezierCurveTo(e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y);let s=new Yu(i.extractPoints(r).shape,n);return s.rotateZ(Math.PI),Object.assign(s,{userData:{...t,type:"LatheGeometry"}})}},lo=new nt,Y_=new Rt,c0=new R,Nv=class extends Ss{constructor(){super(),this.uuid=nn.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(t){let e=new ir().getNormalMatrix(t);for(let n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(t);for(let n=0,r=this.faces.length;n<r;n++){let i=this.faces[n];i.normal.applyMatrix3(e).normalize();for(let s=0,o=i.vertexNormals.length;s<o;s++)i.vertexNormals[s].applyMatrix3(e).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(t){return lo.makeRotationX(t),this.applyMatrix4(lo),this}rotateY(t){return lo.makeRotationY(t),this.applyMatrix4(lo),this}rotateZ(t){return lo.makeRotationZ(t),this.applyMatrix4(lo),this}translate(t,e,n){return lo.makeTranslation(t,e,n),this.applyMatrix4(lo),this}scale(t,e,n){return lo.makeScale(t,e,n),this.applyMatrix4(lo),this}lookAt(t){return Y_.lookAt(t),Y_.updateMatrix(),this.applyMatrix4(Y_.matrix),this}fromBufferGeometry(t){let e=this,n=t.index!==null?t.index:void 0,r=t.attributes;if(r.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let i=r.position,s=r.normal,o=r.color,a=r.uv,l=r.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let u=0;u<i.count;u++)e.vertices.push(new R().fromBufferAttribute(i,u)),o!==void 0&&e.colors.push(new We().fromBufferAttribute(o,u));function c(u,h,m,g){let x=o===void 0?[]:[e.colors[u].clone(),e.colors[h].clone(),e.colors[m].clone()],y=s===void 0?[]:[new R().fromBufferAttribute(s,u),new R().fromBufferAttribute(s,h),new R().fromBufferAttribute(s,m)],v=new Pb(u,h,m,y,x,g);e.faces.push(v),a!==void 0&&e.faceVertexUvs[0].push([new se().fromBufferAttribute(a,u),new se().fromBufferAttribute(a,h),new se().fromBufferAttribute(a,m)]),l!==void 0&&e.faceVertexUvs[1].push([new se().fromBufferAttribute(l,u),new se().fromBufferAttribute(l,h),new se().fromBufferAttribute(l,m)])}let d=t.groups;if(d.length>0)for(let u=0;u<d.length;u++){let h=d[u],m=h.start,g=h.count;for(let x=m,y=m+g;x<y;x+=3)n!==void 0?c(n.getX(x),n.getX(x+1),n.getX(x+2),h.materialIndex):c(x,x+1,x+2,h.materialIndex)}else if(n!==void 0)for(let u=0;u<n.count;u+=3)c(n.getX(u),n.getX(u+1),n.getX(u+2));else for(let u=0;u<i.count;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(c0).negate(),this.translate(c0.x,c0.y,c0.z),this}normalize(){this.computeBoundingSphere();let t=this.boundingSphere.center,e=this.boundingSphere.radius,n=e===0?1:1/e,r=new nt;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix4(r),this}computeFaceNormals(){let t=new R,e=new R;for(let n=0,r=this.faces.length;n<r;n++){let i=this.faces[n],s=this.vertices[i.a],o=this.vertices[i.b],a=this.vertices[i.c];t.subVectors(a,o),e.subVectors(s,o),t.cross(e),t.normalize(),i.normal.copy(t)}}computeVertexNormals(t=!0){let e=new Array(this.vertices.length);for(let n=0,r=this.vertices.length;n<r;n++)e[n]=new R;if(t){let n=new R,r=new R;for(let i=0,s=this.faces.length;i<s;i++){let o=this.faces[i],a=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c];n.subVectors(c,l),r.subVectors(a,l),n.cross(r),e[o.a].add(n),e[o.b].add(n),e[o.c].add(n)}}else{this.computeFaceNormals();for(let n=0,r=this.faces.length;n<r;n++){let i=this.faces[n];e[i.a].add(i.normal),e[i.b].add(i.normal),e[i.c].add(i.normal)}}for(let n=0,r=this.vertices.length;n<r;n++)e[n].normalize();for(let n=0,r=this.faces.length;n<r;n++){let i=this.faces[n],s=i.vertexNormals;s.length===3?(s[0].copy(e[i.a]),s[1].copy(e[i.b]),s[2].copy(e[i.c])):(s[0]=e[i.a].clone(),s[1]=e[i.b].clone(),s[2]=e[i.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let t=0,e=this.faces.length;t<e;t++){let n=this.faces[t],r=n.vertexNormals;r.length===3?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let e=0,n=this.faces.length;e<n;e++){let r=this.faces[e];r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]);for(let i=0,s=r.vertexNormals.length;i<s;i++)r.__originalVertexNormals[i]?r.__originalVertexNormals[i].copy(r.vertexNormals[i]):r.__originalVertexNormals[i]=r.vertexNormals[i].clone()}let t=new Nv;t.faces=this.faces;for(let e=0,n=this.morphTargets.length;e<n;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];let i=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(let o=0,a=this.faces.length;o<a;o++){let l=new R,c={a:new R,b:new R,c:new R};i.push(l),s.push(c)}}let r=this.morphNormals[e];t.vertices=this.morphTargets[e].vertices,t.computeFaceNormals(),t.computeVertexNormals();for(let i=0,s=this.faces.length;i<s;i++){let o=this.faces[i],a=r.faceNormals[i],l=r.vertexNormals[i];a.copy(o.normal),l.a.copy(o.vertexNormals[0]),l.b.copy(o.vertexNormals[1]),l.c.copy(o.vertexNormals[2])}}for(let e=0,n=this.faces.length;e<n;e++){let r=this.faces[e];r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ni),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xs),this.boundingSphere.setFromPoints(this.vertices)}merge(t,e,n=0){if(!(t&&t.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);return}let r,i=this.vertices.length,s=this.vertices,o=t.vertices,a=this.faces,l=t.faces,c=this.colors,d=t.colors;e!==void 0&&(r=new ir().getNormalMatrix(e));for(let u=0,h=o.length;u<h;u++){let m=o[u].clone();e!==void 0&&m.applyMatrix4(e),s.push(m)}for(let u=0,h=d.length;u<h;u++)c.push(d[u].clone());for(let u=0,h=l.length;u<h;u++){let m=l[u],g,x,y=m.vertexNormals,v=m.vertexColors,_=new Pb(m.a+i,m.b+i,m.c+i);_.normal.copy(m.normal),r!==void 0&&_.normal.applyMatrix3(r).normalize();for(let S=0,b=y.length;S<b;S++)g=y[S].clone(),r!==void 0&&g.applyMatrix3(r).normalize(),_.vertexNormals.push(g);_.color.copy(m.color);for(let S=0,b=v.length;S<b;S++)x=v[S],_.vertexColors.push(x.clone());_.materialIndex=m.materialIndex+n,a.push(_)}for(let u=0,h=t.faceVertexUvs.length;u<h;u++){let m=t.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let g=0,x=m.length;g<x;g++){let y=m[g],v=[];for(let _=0,S=y.length;_<S;_++)v.push(y[_].clone());this.faceVertexUvs[u].push(v)}}}mergeMesh(t){if(!(t&&t.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t);return}t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)}mergeVertices(t=4){let e={},n=[],r=[],i=Math.pow(10,t);for(let a=0,l=this.vertices.length;a<l;a++){let c=this.vertices[a],d=Math.round(c.x*i)+"_"+Math.round(c.y*i)+"_"+Math.round(c.z*i);e[d]===void 0?(e[d]=a,n.push(this.vertices[a]),r[a]=n.length-1):r[a]=r[e[d]]}let s=[];for(let a=0,l=this.faces.length;a<l;a++){let c=this.faces[a];c.a=r[c.a],c.b=r[c.b],c.c=r[c.c];let d=[c.a,c.b,c.c];for(let u=0;u<3;u++)if(d[u]===d[(u+1)%3]){s.push(a);break}}for(let a=s.length-1;a>=0;a--){let l=s[a];this.faces.splice(l,1);for(let c=0,d=this.faceVertexUvs.length;c<d;c++)this.faceVertexUvs[c].splice(l,1)}let o=this.vertices.length-n.length;return this.vertices=n,o}setFromPoints(t){this.vertices=[];for(let e=0,n=t.length;e<n;e++){let r=t[e];this.vertices.push(new R(r.x,r.y,r.z||0))}return this}sortFacesByMaterialIndex(){let t=this.faces,e=t.length;for(let a=0;a<e;a++)t[a]._id=a;function n(a,l){return a.materialIndex-l.materialIndex}t.sort(n);let r=this.faceVertexUvs[0],i=this.faceVertexUvs[1],s,o;r&&r.length===e&&(s=[]),i&&i.length===e&&(o=[]);for(let a=0;a<e;a++){let l=t[a]._id;s&&s.push(r[l]),o&&o.push(i[l])}s&&(this.faceVertexUvs[0]=s),o&&(this.faceVertexUvs[1]=o)}toJSON(){let t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.parameters!==void 0){let m=this.parameters;for(let g in m)m[g]!==void 0&&(t[g]=m[g]);return t}let e=[];for(let m=0;m<this.vertices.length;m++){let g=this.vertices[m];e.push(g.x,g.y,g.z)}let n=[],r=[],i={},s=[],o={},a=[],l={};for(let m=0;m<this.faces.length;m++){let g=this.faces[m],x=!0,y=!1,v=this.faceVertexUvs[0][m]!==void 0,_=g.normal.length()>0,S=g.vertexNormals.length>0,b=g.color.r!==1||g.color.g!==1||g.color.b!==1,A=g.vertexColors.length>0,E=0;if(E=c(E,0,0),E=c(E,1,x),E=c(E,2,y),E=c(E,3,v),E=c(E,4,_),E=c(E,5,S),E=c(E,6,b),E=c(E,7,A),n.push(E),n.push(g.a,g.b,g.c),n.push(g.materialIndex),v){let C=this.faceVertexUvs[0][m];n.push(h(C[0]),h(C[1]),h(C[2]))}if(_&&n.push(d(g.normal)),S){let C=g.vertexNormals;n.push(d(C[0]),d(C[1]),d(C[2]))}if(b&&n.push(u(g.color)),A){let C=g.vertexColors;n.push(u(C[0]),u(C[1]),u(C[2]))}}function c(m,g,x){return x?m|1<<g:m&~(1<<g)}function d(m){let g=m.x.toString()+m.y.toString()+m.z.toString();return i[g]!==void 0||(i[g]=r.length/3,r.push(m.x,m.y,m.z)),i[g]}function u(m){let g=m.r.toString()+m.g.toString()+m.b.toString();return o[g]!==void 0||(o[g]=s.length,s.push(m.getHex())),o[g]}function h(m){let g=m.x.toString()+m.y.toString();return l[g]!==void 0||(l[g]=a.length/2,a.push(m.x,m.y)),l[g]}return t.data={},t.data.vertices=e,t.data.normals=r,s.length>0&&(t.data.colors=s),a.length>0&&(t.data.uvs=[a]),t.data.faces=n,t}clone(){return new Nv().copy(this)}copy(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;let e=t.vertices;for(let u=0,h=e.length;u<h;u++)this.vertices.push(e[u].clone());let n=t.colors;for(let u=0,h=n.length;u<h;u++)this.colors.push(n[u].clone());let r=t.faces;for(let u=0,h=r.length;u<h;u++)this.faces.push(r[u].clone());for(let u=0,h=t.faceVertexUvs.length;u<h;u++){let m=t.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let g=0,x=m.length;g<x;g++){let y=m[g],v=[];for(let _=0,S=y.length;_<S;_++){let b=y[_];v.push(b.clone())}this.faceVertexUvs[u].push(v)}}let i=t.morphTargets;for(let u=0,h=i.length;u<h;u++){let m={};if(m.name=i[u].name,i[u].vertices!==void 0){m.vertices=[];for(let g=0,x=i[u].vertices.length;g<x;g++)m.vertices.push(i[u].vertices[g].clone())}if(i[u].normals!==void 0){m.normals=[];for(let g=0,x=i[u].normals.length;g<x;g++)m.normals.push(i[u].normals[g].clone())}this.morphTargets.push(m)}let s=t.morphNormals;for(let u=0,h=s.length;u<h;u++){let m={};if(s[u].vertexNormals!==void 0){m.vertexNormals=[];for(let g=0,x=s[u].vertexNormals.length;g<x;g++){let y=s[u].vertexNormals[g],v={};v.a=y.a.clone(),v.b=y.b.clone(),v.c=y.c.clone(),m.vertexNormals.push(v)}}if(s[u].faceNormals!==void 0){m.faceNormals=[];for(let g=0,x=s[u].faceNormals.length;g<x;g++)m.faceNormals.push(s[u].faceNormals[g].clone())}this.morphNormals.push(m)}let o=t.skinWeights;for(let u=0,h=o.length;u<h;u++)this.skinWeights.push(o[u].clone());let a=t.skinIndices;for(let u=0,h=a.length;u<h;u++)this.skinIndices.push(a[u].clone());let l=t.lineDistances;for(let u=0,h=l.length;u<h;u++)this.lineDistances.push(l[u]);let c=t.boundingBox;c!==null&&(this.boundingBox=c.clone());let d=t.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}toBufferGeometry(){let t=new pre().fromGeometry(this),e=new tt,n=new Float32Array(t.vertices.length*3);if(e.setAttribute("position",new vt(n,3).copyVector3sArray(t.vertices)),t.normals.length>0){let r=new Float32Array(t.normals.length*3);e.setAttribute("normal",new vt(r,3).copyVector3sArray(t.normals))}if(t.colors.length>0){let r=new Float32Array(t.colors.length*3);e.setAttribute("color",new vt(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){let r=new Float32Array(t.uvs.length*2);e.setAttribute("uv",new vt(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){let r=new Float32Array(t.uvs2.length*2);e.setAttribute("uv2",new vt(r,2).copyVector2sArray(t.uvs2))}e.groups=t.groups;for(let r in t.morphTargets){let i=[],s=t.morphTargets[r];for(let o=0,a=s.length;o<a;o++){let l=s[o],c=new Ne(l.data.length*3,3);c.name=l.name,i.push(c.copyVector3sArray(l.data))}e.morphAttributes[r]=i}if(t.skinIndices.length>0){let r=new Ne(t.skinIndices.length*4,4);e.setAttribute("skinIndex",r.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){let r=new Ne(t.skinWeights.length*4,4);e.setAttribute("skinWeight",r.copyVector4sArray(t.skinWeights))}return t.boundingSphere!==null&&(e.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(e.boundingBox=t.boundingBox.clone()),e}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(t){let e=new tt,n=t.geometry;if(t.isPoints||t.isLine){let r=new Ne(n.vertices.length*3,3),i=new Ne(n.colors.length*3,3);if(e.setAttribute("position",r.copyVector3sArray(n.vertices)),e.setAttribute("color",i.copyColorsArray(n.colors)),n.lineDistances&&n.lineDistances.length===n.vertices.length){let s=new Ne(n.lineDistances.length,1);e.setAttribute("lineDistance",s.copyArray(n.lineDistances))}n.boundingSphere!==null&&(e.boundingSphere=n.boundingSphere.clone()),n.boundingBox!==null&&(e.boundingBox=n.boundingBox.clone())}else t.isMesh&&(e=n.toBufferGeometry());return e}};Nv.prototype.isGeometry=!0;var pre=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(t){let e=[],n,r,i,s=t.faces;for(r=0;r<s.length;r++){let o=s[r];o.materialIndex!==i&&(i=o.materialIndex,n!==void 0&&(n.count=r*3-n.start,e.push(n)),n={start:r*3,materialIndex:i})}n!==void 0&&(n.count=r*3-n.start,e.push(n)),this.groups=e}fromGeometry(t){let e=t.faces,n=t.vertices,r=t.faceVertexUvs,i=r[0]&&r[0].length>0,s=r[1]&&r[1].length>0,o=t.morphTargets,a=o.length,l;if(a>0){l=[];for(let y=0;y<a;y++)l[y]={name:o[y].name,data:[]};this.morphTargets.position=l}let c=t.morphNormals,d=c.length,u;if(d>0){u=[];for(let y=0;y<d;y++)u[y]={name:c[y].name,data:[]};this.morphTargets.normal=u}let h=t.skinIndices,m=t.skinWeights,g=h.length===n.length,x=m.length===n.length;n.length>0&&e.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let y=0;y<e.length;y++){let v=e[y];this.vertices.push(n[v.a],n[v.b],n[v.c]);let _=v.vertexNormals;if(_.length===3)this.normals.push(_[0],_[1],_[2]);else{let b=v.normal;this.normals.push(b,b,b)}let S=v.vertexColors;if(S.length===3)this.colors.push(S[0],S[1],S[2]);else{let b=v.color;this.colors.push(b,b,b)}if(i===!0){let b=r[0][y];b!==void 0?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",y),this.uvs.push(new se,new se,new se))}if(s===!0){let b=r[1][y];b!==void 0?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",y),this.uvs2.push(new se,new se,new se))}for(let b=0;b<a;b++){let A=o[b].vertices;l[b].data.push(A[v.a],A[v.b],A[v.c])}for(let b=0;b<d;b++){let A=c[b].vertexNormals[y];u[b].data.push(A.a,A.b,A.c)}g&&this.skinIndices.push(h[v.a],h[v.b],h[v.c]),x&&this.skinWeights.push(m[v.a],m[v.b],m[v.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),this}},Pb=class{constructor(t,e,n,r,i,s=0){this.a=t,this.b=e,this.c=n,this.normal=r&&r.isVector3?r:new R,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new We,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=s}clone(){return new this.constructor().copy(this)}copy(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(let e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(let e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}},mre=["a","b","c"];function gre(t,e){switch(e){case"c":return t.c;case"b":return t.b;case"a":default:return t.a}}function Z_(t,e,n){let r=Math.min(t,e),i=Math.max(t,e),s=r+"_"+i;return n.get(s)}function J_(t,e,n,r,i,s){let o=Math.min(t,e),a=Math.max(t,e),l=o+"_"+a,c;if(r.has(l))c=r.get(l);else{let d=n[o],u=n[a];c={a:d,b:u,newEdge:null,faces:[]},r.set(l,c)}c.faces.push(i),s[t].edges.push(c),s[e].edges.push(c)}function vre(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;i++)n[i]={edges:[]};for(i=0,s=e.length;i<s;i++)o=e[i],J_(o.a,o.b,t,r,o,n),J_(o.b,o.c,t,r,o,n),J_(o.c,o.a,t,r,o,n)}function d0(t,e,n,r,i){t.push(new Pb(e,n,r,void 0,void 0,i))}function zc(t,e){return Math.abs(e-t)/2+Math.min(t,e)}function h0(t,e,n,r){t.push([e.clone(),n.clone(),r.clone()])}var yre=class{constructor(t=1){this.subdivisions=t}modify(t){t instanceof tt?t=new Nv().fromBufferGeometry(t):t=t.clone(),t.mergeVertices();let e=this.subdivisions;for(;e-- >0;)this._smooth(t);return t.computeFaceNormals(),t.computeVertexNormals(),t}_smooth(t){let e=new R,n,r,i,s,o,a=t.vertices,l=t.faces,c=t.faceVertexUvs[0],d=c!==void 0&&c.length>0,u=[],h=new Map;vre(a,l,u,h);let m=[],g,x,y,v,_,S,b;for(let re of Array.from(h.keys())){for(x=h.get(re),y=new R,_=3/8,S=1/8,b=x.faces.length,b!=2&&(_=.5,S=0,b!=1),y.addVectors(x.a,x.b).multiplyScalar(_),e.set(0,0,0),s=0;s<b;s++){for(v=x.faces[s],o=0;o<3&&(g=a[gre(v,mre[o])],!(g!==x.a&&g!==x.b));o++);g&&e.add(g)}e.multiplyScalar(S),y.add(e),x.newEdge=m.length,m.push(y)}let A,E,C,T,O,L,k,B=[];for(r=0,i=a.length;r<i;r++){for(L=a[r],O=u[r].edges,n=O.length,n==3?A=3/16:n>3&&(A=3/(8*n)),E=1-n*Number(A),C=A,n<=2&&(n==2?(E=3/4,C=1/8):n==1||n==0),k=L.clone().multiplyScalar(E),e.set(0,0,0),s=0;s<n;s++)T=O[s],g=T.a!==L?T.a:T.b,e.add(g);e.multiplyScalar(Number(C)),k.add(e),B.push(k)}let G=B.concat(m),H=B.length,Y,te,Z,D=[],N=[],z,U,V,X,J=new se,ee=new se,q=new se;for(r=0,i=l.length;r<i;r++)v=l[r],Y=Number(Z_(v.a,v.b,h).newEdge)+H,te=Number(Z_(v.b,v.c,h).newEdge)+H,Z=Number(Z_(v.c,v.a,h).newEdge)+H,d0(D,Y,te,Z,v.materialIndex),d0(D,v.a,Y,Z,v.materialIndex),d0(D,v.b,te,Y,v.materialIndex),d0(D,v.c,Z,te,v.materialIndex),d&&(z=c[r],U=z[0],V=z[1],X=z[2],J.set(zc(U.x,V.x),zc(U.y,V.y)),ee.set(zc(V.x,X.x),zc(V.y,X.y)),q.set(zc(U.x,X.x),zc(U.y,X.y)),h0(N,J,ee,q),h0(N,U,J,q),h0(N,V,ee,J),h0(N,X,q,ee));t.vertices=G,t.faces=D,d&&(t.faceVertexUvs[0]=N)}},tr=new R,xre=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var s,o;let n=(o=(s=t.geometry)!=null?s:e==null?void 0:e.geometry)!=null?o:new tt().copy(new _s(100,100,100)),r;e===void 0?(n.computeBoundingBox(),n.boundingBox.getSize(tr),r={width:tr.x,height:tr.y,depth:tr.z,subdivisions:0}):r=e.parameters;let i={...r,...t.parameters};return{parameters:{width:Math.abs(i.width),height:Math.abs(i.height),depth:Math.abs(i.depth),subdivisions:Math.abs(i.subdivisions)},geometry:n}}static build(t){var l;let{width:e,height:n,depth:r,subdivisions:i}=t.parameters,s=(l=t.geometry)!=null?l:new tt().copy(new _s(100,100,100)),o=s.userData.parameters;o===void 0?(s.computeBoundingBox(),s.boundingBox.getSize(tr)):tr.set(o.width,o.height,o.depth),(e!==tr.x||n!==tr.y||r!==tr.z)&&s.scale(tr.x===0?1:e/tr.x,tr.y===0?1:n/tr.y,tr.z===0?1:r/tr.z);let a=s.originalGeometry;return i>0?(a===void 0||(o==null?void 0:o.subdivisions)!==i)&&(a===void 0&&(a=s),s=new yre(i).modify(a).toBufferGeometry()):(a!==void 0&&(s=a),a=void 0,s.getAttribute("normal")===void 0&&s.computeVertexNormals()),a!==void 0&&Object.assign(s,{originalGeometry:a}),delete t.geometry,Object.assign(s,{userData:{...t,type:"NonParametricGeometry"}})}static loadFromUrl(t,e,n){new ky(n).load(t,r=>{let i=this.normalizeInputs({geometry:r});r.boundingBox.getSize(tr);let s=100/tr.x;Object.assign(i.parameters,{width:100,height:tr.y*s,depth:tr.z*s}),e(this.build(i))})}},_re=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var r,i,s;let n=Object.assign({},(r=e==null?void 0:e.parameters)!=null?r:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},t.parameters);return{shape:t.shape&&t.shape instanceof zn?t.shape:new zn,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs((i=n.height)!=null?i:n.width),depth:Math.abs((s=n.depth)!=null?s:0)})}}static build(t){let{width:e,height:n,spikes:r,cornerRadius:i,depth:s,extrudeBevelSize:o,extrudeBevelSegments:a}=t.parameters,l=t.shape,c=e*.5,d=n*.5,u=0,h=0,m=2*Math.PI/r;for(let x=0;x<r;x++){let y=m*x,v=u+Math.sin(y)*c,_=h+Math.cos(y)*d;l.addPoint(l.createPoint(v,_))}l.isClosed=!0;for(let x=0,y=l.points.length;x<y;x++)l.points[x].roundness=i;l.roundness=i,l.update();let g=ma.create({shape:l,parameters:{roundness:i,depth:s,extrudeBevelSize:o,extrudeBevelSegments:a}});return Object.assign(g,{userData:{...t,type:"PolygonGeometry"}})}},wre=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var r,i,s;let n=Object.assign({},(r=e==null?void 0:e.parameters)!=null?r:{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs((i=n.height)!=null?i:n.width),depth:Math.abs((s=n.depth)!=null?s:n.width)})}}static build(t){let{width:e,height:n,depth:r,radialSegments:i,heightSegments:s,openEnded:o,cornerRadius:a,cornerSegments:l}=t.parameters,c=new bre(e*.5,n,i,s,o,a,l);return c.scale(1,1,r/e),Object.assign(c,{userData:{...t,type:"PyramidGeometry"}})}};function ef(t,e,n){n.x=t.x*e.x,n.y=t.y,n.z=t.x*e.y}function Q_(t,e,n,r,i,s){let o=e.clone().sub(t),a=n.clone().sub(t),l=o.angleTo(a);if(o.normalize(),a.normalize(),r===i){let c=o.add(a).normalize();s.copy(t).addScaledVector(c,r/Math.sin(l/2))}else{let c=o.angleTo(a);s.copy(t),s.addScaledVector(o,i/Math.sin(c)),s.addScaledVector(a,r/Math.sin(c))}}function Sre(t,e,n){let r=t.clone().sub(e),i=n.clone().sub(e);return r.projectOnVector(i),r.add(e)}var bre=class extends tt{constructor(t=.5,e=1,n=4,r=1,i=!1,s=0,o=4){super(),n=Math.floor(Math.max(3,n)),r=Math.floor(r),o=Math.floor(o);let a=[],l=[],c=[],d=[],u=0,h=e/2,m=Math.PI/n,g=t*Math.cos(Math.PI/n),x=2*Math.PI/n,y=(n-2)*Math.PI/n,v=Math.PI-y,_=new R(0,-h,0),S=new R(0,h,0),b=new se(t,-h),A=new se(g,-h),E=new se(0,S.y).sub(A),C=new se(0,S.y).sub(b),T=new se(E.y,-E.x).normalize(),O=new se(C.y,-C.x).normalize(),L=t*Math.cos(Math.PI/n)*Math.tan((Math.PI-E.angle())/2)-1e-8;s=Math.min(s,L);let k;{let Z=new R(T.x,T.y,0),D=new R(Math.cos(x)*Z.x,Z.y,Math.sin(x)*Z.x);k=Z.angleTo(D)}let B=s/Math.tan((Math.PI-E.angle())/2),G=s/Math.tan((Math.PI-k)/2),H=new R;if(!i){l.push(_.x,_.y,_.z),c.push(0,-1,0),d.push(0,0);let Z=u++,D=[],N=b.clone(),z=B/Math.cos(Math.PI/n);N.x-=z;for(let U=0;U<n;U++){let V=U/n*Math.PI*2+m,X=new se(Math.sin(V),Math.cos(V));ef(N,X,H),l.push(H.x,H.y,H.z),c.push(0,-1,0),d.push(0,0),D.push(u++)}for(let U=0;U<D.length;U++)a.push(D[U],Z,D[(U+1)%D.length])}{let Z=new R,D=new R,N=new R,z=new R,U=new R,V=new R;for(let X=0;X<n;X++){let J=X/n*Math.PI*2+m,ee=(X+.5)/n*Math.PI*2+m,q=(X+1)/n*Math.PI*2+m,re=new se(Math.sin(J),Math.cos(J)),ie=new se(Math.sin(ee),Math.cos(ee)),K=new se(Math.sin(q),Math.cos(q));ef(b,re,D),ef(b,K,N),ef(T,ie,Z),Q_(S,D,N,G,G,z),l.push(z.x,z.y,z.z),Q_(D,S,N,G,B,U),l.push(U.x,U.y,U.z),Q_(N,D,S,B,G,V),l.push(V.x,V.y,V.z),c.push(Z.x,Z.y,Z.z),c.push(Z.x,Z.y,Z.z),c.push(Z.x,Z.y,Z.z),d.push(0,0),d.push(0,0),d.push(0,0);let oe=u++,ye=u++,ne=u++;if(a.push(oe,ye,ne),s>0){{let pe=D.clone().add(N).multiplyScalar(.5),ve=S.clone().sub(pe).normalize(),Re=_.clone().sub(pe).normalize().add(ve).normalize().multiplyScalar(-1),Le=V.clone().sub(U);Y(pe,Le,Re,E.angle())}let Q,de;{let pe=new R;ef(O,K,pe);let ve=V.clone().add(z).multiplyScalar(.5);ve=Sre(ve,N,S);let Re=V.clone().sub(z);[Q,de]=Y(ve,Re,pe,k,z.y)}{let pe=Q,ve=pe.clone().setY(0).normalize(),Re=new R(0,-1,0),Le=ve.clone().cross(Re);te(pe,ve,Re,Le)}{let pe=E.angle(),ve=Math.PI-pe,Re=S.clone();Re.y-=s/Math.sin(pe-Math.PI/2);let Le=new R,De=[];for(let je=0;je<o;je++){let j=[],F=Math.PI/2-ve*je/o,_e=Math.cos(F),Ie=Math.sin(F),ke=ee;for(let Ve=0;Ve<=je;Ve++){let ut=Math.cos(ke),He=Math.sin(ke);Z.x=_e*He,Z.y=Ie,Z.z=_e*ut,Le.copy(Re).addScaledVector(Z,s),l.push(Le.x,Le.y,Le.z),c.push(Z.x,Z.y,Z.z),d.push(0,0),j.push(u++),ke+=Math.PI*2/je/n}De.push(j)}de.reverse(),De.push(de);let gt=De.length-1;for(let je=0;je<gt;je++){let j=De[je],F=De[je+1],_e=j.length-1;a.push(F[1],j[0],F[0]);for(let Ie=1;Ie<=_e;Ie++)a.push(j[Ie],j[Ie-1],F[Ie]),a.push(F[Ie+1],j[Ie],F[Ie])}}}}}this.setIndex(a),this.setAttribute("position",new Ne(l,3)),this.setAttribute("normal",new Ne(c,3)),this.setAttribute("uv",new Ne(d,2));function Y(Z,D,N,z,U){let V=-z/2,X=(Math.PI-z)/2,J=D.clone().normalize().cross(N);Z.addScaledVector(N,-s/Math.sin(X));let ee=new R,q=new R,re=1,ie=u,K=[];for(let oe=0;oe<=o;oe++){let ye=V+oe/o*z;q.set(0,0,0),q.addScaledVector(J,Math.sin(ye)),q.addScaledVector(N,Math.cos(ye));for(let ne=0;ne<=re;ne++){let Q=ne/re-.5;if(ee.copy(Z),ee.addScaledVector(D,Q),ee.addScaledVector(q,s),U!=null){let de=Math.max(0,ee.y-U);ee.addScaledVector(D,-de/D.y)}l.push(ee.x,ee.y,ee.z),c.push(q.x,q.y,q.z),d.push(0,0),ne===0&&K.push(u),u++}}for(let oe=0;oe<o;oe++)for(let ye=0;ye<re;ye++){let ne=ie+ye+(re+1)*oe,Q=ne+(re+1),de=Q+1,pe=ne+1;a.push(ne,Q,pe),a.push(Q,de,pe)}return[Z.clone().addScaledVector(D,.5),K]}function te(Z,D,N,z){let U=Math.PI/2,V=C.angle()-U,X=[],J=new R,ee=new R;for(let re=0;re<=o;re++){let ie=[],K=re/o;for(let oe=0;oe<=re;oe++){let ye=((re?oe/re:0)-.5)*v,ne=Math.cos(ye),Q=Math.sin(ye),de=Math.atan(Math.tan(V)*ne),pe=(U+de)*K,ve=Math.cos(pe),Re=Math.sin(pe);J.set(0,0,0),J.addScaledVector(D,Re*ne),J.addScaledVector(N,ve),J.addScaledVector(z,Re*Q),ee.copy(Z).addScaledVector(J,s),l.push(ee.x,ee.y,ee.z),c.push(J.x,J.y,J.z),d.push(0,0),ie.push(u++)}X.push(ie)}let q=X.length-1;for(let re=0;re<q;re++){let ie=X[re],K=X[re+1],oe=ie.length-1;a.push(ie[0],K[1],K[0]);for(let ye=1;ye<=oe;ye++)a.push(ie[ye-1],ie[ye],K[ye]),a.push(ie[ye],K[ye+1],K[ye])}}}},Mre=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var i,s,o,a;let n=Object.assign({},(i=e==null?void 0:e.parameters)!=null?i:{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},t.parameters),r=Object.assign((s=e==null?void 0:e.ui)!=null?s:{enabledIndieCorners:!1},t.ui);return{shape:t.shape&&t.shape instanceof zn?t.shape:new zn,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs((o=n.height)!=null?o:n.width),depth:Math.abs((a=n.depth)!=null?a:0)}),ui:r}}static build(t){let e=t.shape,{width:n,height:r,cornerRadius:i,cornerType:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}=t.parameters,c={x:n*.5,y:r*.5},d={x:-c.x,y:-c.y},u={x:c.x,y:c.y};function h(b,A,E){return A>n&&E>r?Math.min(b*n/A,b*r/E):A>n?b*n/A:E>r?b*r/E:b}let m=[];m[0]=i[0]===0?0:h(i[0],i[0]+i[3],i[0]+i[1]),m[1]=i[1]===0?0:h(i[1],i[1]+i[2],i[1]+i[0]),m[2]=i[2]===0?0:h(i[2],i[2]+i[1],i[2]+i[3]),m[3]=i[3]===0?0:h(i[3],i[3]+i[0],i[3]+i[2]);let g=d.x,x=u.x,y=u.y,v=d.y;e.addPoint(e.createPoint(g,y)),e.addPoint(e.createPoint(x,y)),e.addPoint(e.createPoint(x,v)),e.addPoint(e.createPoint(g,v)),e.isClosed=!0;let _=!0;for(let b=0,A=e.points.length;b<A;b++)e.points[b].roundness=m[b],b>0&&m[b]!==m[b-1]&&(_=!1);_&&(e.roundness=m[0]),e.useCubicForRoundedCorners=s!==1,e.update();let S=ma.create({shape:e,parameters:{depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}});return Object.assign(S,{userData:{...t,type:"RectangleGeometry"}})}},Ere=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var r,i,s;let n=Object.assign({},(r=e==null?void 0:e.parameters)!=null?r:{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs((i=n.height)!=null?i:n.width),depth:Math.abs((s=n.depth)!=null?s:n.width)})}}static build(t){let{width:e=100,height:n=e,depth:r=e,widthSegments:i=64,heightSegments:s=64,phiStart:o,phiLength:a,thetaStart:l,thetaLength:c}=t.parameters,d=new Zu(.5*e,i,s,o,a,l,c);return d.scale(1,n/e,r/e),Object.assign(d,{userData:{...t,type:"SphereGeometry"}})}},Tre=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var r,i;let n=Object.assign({},(r=e==null?void 0:e.parameters)!=null?r:{width:100,depth:0,widthSegments:8,heightSegments:8},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs((i=n.height)!=null?i:n.width),depth:0})}}static build(t){let{width:e=100,height:n=e,widthSegments:r=8,heightSegments:i=8}=t.parameters,s=new Ml(e,n,r,i);return s.scale(1,1,1),Object.assign(s,{userData:{...t,type:"PlaneGeometry"}})}},Are=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var r,i,s;let n=Object.assign({},(r=e==null?void 0:e.parameters)!=null?r:{width:100,angle:90,cornerRadius:24,cornerSegments:8},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs((i=n.height)!=null?i:n.width),depth:Math.abs((s=n.depth)!=null?s:n.width)})}}static build(t){let{width:e,height:n,depth:r,angle:i,cornerRadius:s,cornerSegments:o}=t.parameters,a=new Cre(e,n,r,i,s,o);return Object.assign(a,{userData:{...t,type:"BackdropGeometry"}})}},Cre=class extends tt{constructor(t=1,e=1,n=1,r=90,i=10,s=24){super(),this.type="BackdropGeometry";let o=[],a=[],l=[],c=.001;i==0&&(s=1),s=Math.max(1,Math.floor(s)),i=Math.min(i,100),r=Math.min(180-c,r),r*=Math.PI/180;let d=[],u=Math.PI/2,h=(re=0,ie=0,K=0)=>new R(re,ie,K),m=h(),g=h(),[x,y,v]=[e/2,t/2,n/2],_=-y,S=+y,[b,A,E]=[h(_,-x,+v),h(_,-x,-v),h(_,+x,-v)],C=(re,ie=!1)=>Math.sin(re-Math.PI/(1+ +ie)),T=(re,ie=!1)=>Math.cos(re-Math.PI/(1+ +ie));E.y=Math.sin(r)*e-x;let O=Math.cos(r)*e-v,L=b.z-c;r<=u?(E.z=Math.min(O,L),E.z==L&&(E.y-=(O-L)/Math.tan(u-r))):A.z=Math.min(A.z-O-v,b.z-c),m.subVectors(b,A),g.subVectors(E,A);let k=Math.min(m.length(),g.length())*i/100,B=k*Math.tan(r/2),G=k/Math.cos(r/2),H=m.clone().normalize().add(g.normalize()).setLength(G).add(A);m.set(0,C(r,!0),T(r,!0)),d.push([E,m.clone()]);let Y=(Math.PI-r)/s;for(let re=0;re<=s;re++){let ie=u+r+re*Y;m.set(0,Math.sin(ie)*B,Math.cos(ie)*B),m.add(H),g.set(0,C(ie),T(ie)),d.push([m.clone(),g.clone()])}d.push([b,h(0,1,0)]);let te=Math.sin(Y/2)*B*2,Z=d.length-1,D=d[0][0].distanceTo(d[1][0]),N=d[Z-1][0].distanceTo(d[Z][0]),z=D+te*s+N;d[0].push(1);for(let re=0;re<=s;re++)d[re+1].push(1-(D+re*te)/z);d[Z].push(0);let[U,V,X]=d[0],J,ee,q;for(let re=1;re<d.length;re++)[J,ee,q]=d[re],o.push(_,U.y,U.z,_,J.y,J.z,S,U.y,U.z,S,U.y,U.z,_,J.y,J.z,S,J.y,J.z),a.push(0,V.y,V.z,0,ee.y,ee.z,0,V.y,V.z,0,V.y,V.z,0,ee.y,ee.z,0,ee.y,ee.z),l.push(0,X,0,q,1,X,1,X,0,q,1,q),[U,V,X]=[J,ee,q];this.setAttribute("position",new Ne(o,3)),this.setAttribute("normal",new Ne(a,3)),this.setAttribute("uv",new Ne(l,2))}},Pre=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var r,i,s;let n=Object.assign({},(r=e==null?void 0:e.parameters)!=null?r:{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},t.parameters);return{shape:t.shape&&t.shape instanceof zn?t.shape:new zn,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs((i=n.height)!=null?i:n.width),depth:Math.abs((s=n.depth)!=null?s:0)})}}static build(t){let{width:e,height:n,innerRadiusPercent:r,spikes:i,cornerRadius:s,angle:o,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}=t.parameters,d=t.shape,u=e*.5,h=n*.5,m=0,g=0,x=o*Math.PI/360/i,y=Math.PI/2*3*-1,v=u*r/100,_=h*r/100;if(i===3&&r===50){x=2*Math.PI/i;for(let b=0;b<i;b++){let A=x*b,E=m+Math.sin(A)*u,C=g+Math.cos(A)*h;d.addPoint(d.createPoint(E,C))}}else for(let b=0;b<i;b++){let A=m+Math.cos(y)*u,E=g+Math.sin(y)*h;d.addPoint(d.createPoint(A,E)),y+=x,A=m+Math.cos(y)*v,E=g+Math.sin(y)*_,d.addPoint(d.createPoint(A,E)),y+=x}d.isClosed=!0;for(let b=0,A=d.points.length;b<A;b++)d.points[b].roundness=s;d.roundness=s,d.update();let S=ma.create({shape:d,parameters:{roundness:s,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}});return Object.assign(S,{userData:{...t,type:"StarGeometry"}})}},Lre=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var r,i,s;let n=Object.assign({},(r=e==null?void 0:e.parameters)!=null?r:{width:100,depth:0},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs((i=n.height)!=null?i:n.width),depth:Math.abs((s=n.depth)!=null?s:0)})}}static build(t){let{width:e,height:n}=t.parameters,r=new Ml(e,n);return Object.assign(r,{userData:{...t,type:"TextFrameGeometry"}})}},Ore=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var o,a,l;let n=Object.assign({},(o=e==null?void 0:e.parameters)!=null?o:{width:100,radialSegments:32,tubularSegments:64,arc:Math.PI*2,cornerRadius:30,cornerSegments:8},t.parameters),r=Math.abs(n.width),i=Math.abs((a=n.height)!=null?a:n.width),s=Math.abs((l=n.depth)!=null?l:n.width*.25);return{parameters:Object.assign(n,{width:r,height:i,depth:s})}}static build(t){let{width:e,height:n,depth:r,radialSegments:i,tubularSegments:s,arc:o,cornerRadius:a,cornerSegments:l}=t.parameters,c=Ire(e,n,r,e*.5,o,s,0,0,i,a,l);return c.scale(1,n/e,1),Object.assign(c,{userData:{...t,type:"TorusGeometry"}})}};function Ire(t,e,n,r,i,s,o,a,l,c,d){return[e,n]=[n,e],o=e/2,i/=2*Math.PI,i==1&&(c=0),new Ik(!0,t,e,n,r,i,s,o,a,l,c,d)}var Dre=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var r,i,s,o;let n=Object.assign({},(r=e==null?void 0:e.parameters)!=null?r:{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs((i=n.height)!=null?i:n.width),depth:Math.abs((s=n.depth)!=null?s:n.width),tube:(o=n.tube)!=null?o:n.width*.125})}}static build(t){let{width:e,tube:n,tubularSegments:r,radialSegments:i,p:s,q:o}=t.parameters,a=e*.5;a!==n&&(a-=n);let l=new Jd(a,n,r,i,s,o);return Object.assign(l,{userData:{...t,type:"TorusKnotGeometry"}})}},Rre=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var r,i,s;let n=Object.assign({},(r=e==null?void 0:e.parameters)!=null?r:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},t.parameters);return{shape:t.shape&&t.shape instanceof zn?t.shape:new zn,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs((i=n.height)!=null?i:n.width*(n.isRect?1:Math.sqrt(3)/2)),depth:Math.abs((s=n.depth)!=null?s:0)})}}static build(t){let{width:e=100,height:n,cornerRadius:r,depth:i,extrudeBevelSize:s,extrudeBevelSegments:o,isRect:a}=t.parameters,l=t.shape,c=e*.5,d=n*.5;a?(l.addPoint(l.createPoint(-c,d)),l.addPoint(l.createPoint(c,-d)),l.addPoint(l.createPoint(-c,-d))):(l.addPoint(l.createPoint(0,d)),l.addPoint(l.createPoint(c,-d)),l.addPoint(l.createPoint(-c,-d))),l.isClosed=!0;for(let h=0,m=l.points.length;h<m;h++)l.points[h].roundness=r;l.roundness=r,l.update();let u=ma.create({shape:l,parameters:{roundness:r,depth:i,extrudeBevelSize:s,extrudeBevelSegments:o}});return Object.assign(u,{userData:{...t,type:"TriangleGeometry"}})}};function _L(){let t=new tt;return t.setAttribute("position",new vt(new Float32Array([]),3)),t.setIndex(new vt(new Uint16Array([]),1)),t}var zre=12,Rk=class extends tt{constructor(t,e){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.vectorShapes=[];let n=_L();Object.entries(n.attributes).forEach(([r,i])=>{this.setAttribute(r,i)}),this.setIndex(n.index),this.updateFont(t.font,e),this.update(t)}async updateFont(t,e){let n=e.getFont(t);n&&(this.font=n,await n.loadingPromise)}async update(t){let e=this.font;if(this.userData={parameters:t,type:"TextGeometry"},!e||!e.isLoaded){console.warn("Cannot update text because its font is not loaded");return}let{width:n,height:r,depth:i,extrudeBevelSize:s,extrudeBevelSegments:o,text:a,textTransform:l,subdivisions:c}=t;await e.loadingPromise;let d=l===2?a.toUpperCase():l===3?a.toLowerCase():a,u=Nre(t,e,d),{shapes:h,charWidths:m,charCoords:g}=await e.generateShapes(u,t),x=n*.5,y=r*.5,v=h.map(b=>new zn().fromShape(b));this.vectorShapes=v;let _=v.map(b=>ma.create({shape:b,parameters:{depth:i,extrudeBevelSegments:o,extrudeBevelSize:s,windingRule:i<=0?yn.NONZERO:yn.ODD,subdivisions:c!=null?c:zre}})),S=_.length?d4(_):_L();S.translate(-x,y,0),this.dispose(),this.wrappedText=u,this.charCoords=g,this.charWidths=m,Object.entries(S.attributes).forEach(([b,A])=>{this.setAttribute(b,A)}),this.setIndex(S.index),this.computeBoundingSphere()}clone(){let t=Qy(new tt,Rk.prototype);return t.copy(this),t}copy(t){return Object.entries(t.attributes).forEach(([e,n])=>{this.setAttribute(e,n)}),this.setIndex(t.index),this.userData={parameters:{...t.userData.parameters},type:"TextGeometry"},this}async setText(t){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:t})}get text(){var t;return(t=this.userData.parameters.text)!=null?t:""}};function Nre(t,e,n){n=n!=null?n:t.text;let r=[""],i="";for(let s of n)i+=s,s===" "||s===`
`?(r[r.length-1]+=i,i="",s===`
`&&r.push("")):e.getTextWidth(r[r.length-1]+i,t)>t.width&&(r[r.length-1].length&&r.push(""),e.getTextWidth(r[r.length-1]+i,t)>t.width&&(i.length===1?(r[r.length-1]+=i,i=""):(r[r.length-1]+=i.slice(0,-1),i=i[i.length-1],r.push(""))));return r[r.length-1]+=i,r}var zk=new Promise(t=>{});function Nk(t,e){return kre(t)}function kre(t){let e={parameters:t,type:t.type};if(t.type==="VectorGeometry"){let r=zn.createFromState(t.shape,t.width,t.height);e.shape=r}else t.type==="NonParametricGeometry"&&(t.data.groups&&t.data.groups.forEach(r=>{var i;return r.materialIndex=Math.max((i=r.materialIndex)!=null?i:0,0)}),e.geometry=new ky().parse(t));let n;try{n=Lb(e)}catch(r){console.error(r)}if(!n){let r=zn.createFromState(Ov.defaultData(),100,100);e.shape=r,n=Lb(e)}return n}var mt;zk.then(t=>{mt=t});var wL=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),SL=new Uint32Array([0,1,2,3]),bL=new Uint8Array([4]),ks=class{static build(t,e,n,r,i){var c,d;let s,o,a,l=(d=(c=t==null?void 0:t.phongAngle)!=null?c:e==null?void 0:e.phongAngle)!=null?d:35;if(r===!1&&(l=-1),t.positionWASM!==void 0){n&&n!==0&&(mt.free_bvh(n),mt.free_subdivision_surface(n));try{s=ks.allocate(t,i)}catch(u){console.error(u,t),s=ks.allocate({positionWASM:wL,indexWASM:SL,verticesPerFaceWASM:bL},i)}mt.set_destination_refinement_level(s,0),o=ks.buildLevel(s,!0,l)}else s=n,t.phongAngle!==void 0&&(o=ks.buildLevel(s,!0,l));return t.subdivisions!==void 0&&(mt.set_destination_refinement_level(s,t.subdivisions),t.subdivisions>0?a=ks.buildLevel(s,!1,l):a=null),{subdivPointer:s,originalGeometry:o,subdividedGeometry:a}}static primitiveToQuads(t,e){t.widthSegments>16&&(t.widthSegments=16),t.heightSegments>16&&(t.heightSegments=16),t.depthSegments>16&&(t.depthSegments=16),t.radialSegments>16&&(t.radialSegments=16),t.type==="DodecahedronGeometry"&&(t.detail=0);let n=t.shape!==void 0?e.geometry:Nk(t),r,i,s,o;({positions:r,triIndices:o}=kk(n.getAttribute("position"),n.getIndex()));let a;if(t.type==="CylinderGeometry"&&t.cornerRadius===0&&t.hollow===0&&t.openEnded===!1){let l=t.radialSegments*t.heightSegments*3*2,c=l+t.radialSegments*3;a=[l,c]}return{indices:i,verticesPerFace:s}=Bk(r,o,n,a),{positions:r,indices:i,verticesPerFace:s}}static allocate(t,e){var S;let n,r,i,s=[],o=[];t.positionWASM&&t.positionWASM.length>0?(n=t.positionWASM,r=t.indexWASM,i=t.verticesPerFaceWASM):(n=wL,r=SL,i=bL);let a=n.length,l=r.length,c=i.length,d=n.length+s.length+o.length,u=r.length+i.length,h=d*Float32Array.BYTES_PER_ELEMENT+u*Uint32Array.BYTES_PER_ELEMENT,m=d*Float32Array.BYTES_PER_ELEMENT,g=mt._malloc(h),x=new Float32Array(mt.HEAPF32.buffer,g,d),y=new Uint32Array(mt.HEAPU32.buffer,g+m,u);x.set(n,0),x.set(s,n.length),x.set(o,n.length+s.length),y.set(r,0),y.set(i,r.length);let v;(S=t==null?void 0:t.scaleBaked)!=null&&S.some(b=>b!==1)&&(v=new nt().makeScale(...t.scaleBaked)),e&&(v?v.premultiply(e):v=e);let _=v?mt.alloc_subdivision_surface2(g,a,g+m,l,g+m+r.length*Uint32Array.BYTES_PER_ELEMENT,c,v.elements):mt.alloc_subdivision_surface(g,a,g+m,l,g+m+r.length*Uint32Array.BYTES_PER_ELEMENT,c);return mt._free(g),_}static buildLevel(t,e,n,r,i){let s=i?mt.get_mesh_data2(t,e?mt.Level.CONTROL:mt.Level.REFINED,n,i.elements):mt.get_mesh_data(t,e?mt.Level.CONTROL:mt.Level.REFINED,n),o=8,a=mt.HEAPU32.subarray(s>>2,(s>>2)+o),l=a.subarray(4,4+4),c=0,d=mt.HEAPU32[a[c]>>2],u=mt.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let h=mt.HEAPU32[a[c]>>2],m=mt.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let g=mt.HEAPU32[a[c]>>2],x=mt.HEAPU32.subarray(g>>2,(g>>2)+l[c]);c++;let y=mt.HEAPU32[a[c]>>2],v=mt.HEAPU32.subarray(y>>2,(y>>2)+l[c]);if(c++,r===void 0){let _=new tt;if(_.setIndex(new md(v,1)),_.setAttribute("position",new Ne(u,3)),_.setAttribute("normal",new Ne(m,3)),e){_.setAttribute("faceMap",new md(x,1));let S=new Float32Array(m.length/3*4).fill(0);_.setAttribute("color",new vt(S,4))}return mt.free_mesh_data(s),_.userData.type="SubdivGeometry",_}r.getAttribute("position").copyArray(u),r.getAttribute("normal").copyArray(m),r.attributes.position.needsUpdate=!0,r.attributes.normal.needsUpdate=!0,mt.free_mesh_data(s)}static buildControlCageWireframe(t,e,n){let r=mt.get_wireframe_data_for_base_level(t),i=4,s=mt.HEAPU32.subarray(r>>2,(r>>2)+i),o=s.subarray(2,2+2),a=0,l=mt.HEAPU32[s[a]>>2],c=mt.HEAPF32.subarray(l>>2,(l>>2)+o[a]);a++;let d=mt.HEAPU32[s[a]>>2],u=mt.HEAPU32.subarray(d>>2,(d>>2)+o[a]);if(e===void 0){let h=new tt;h.setAttribute("position",new Ne(c,3));let m=new Float32Array(c.length);for(let g=0,x=c.length;g<x;)m[g++]=n.r,m[g++]=n.g,m[g++]=n.b;return h.setAttribute("color",new vt(m,3)),h.setIndex(new md(u,1)),mt.free_wireframe_data_for_base_level(r),h}e.getAttribute("position").copyArray(c),e.attributes.position.needsUpdate=!0,mt.free_wireframe_data_for_base_level(r)}static updateCollabMesh(t,e,n){let r=e===0;r||mt.set_destination_refinement_level(t,e);let i=n?mt.get_topological_data2(t,r?mt.Level.CONTROL:mt.Level.REFINED,n.elements):mt.get_topological_data(t,r?mt.Level.CONTROL:mt.Level.REFINED),s=6,o=mt.HEAPU32.subarray(i>>2,(i>>2)+s),a=o.subarray(3,3+3),l=0,c=mt.HEAPU32[o[l]>>2],d=new Float32Array(mt.HEAPF32.subarray(c>>2,(c>>2)+a[l]));l++;let u=mt.HEAPU32[o[l]>>2],h=new Uint32Array(mt.HEAPU32.subarray(u>>2,(u>>2)+a[l]));l++;let m=mt.HEAPU32[o[l]>>2],g=new Uint8Array(mt.HEAPU32.subarray(m>>2,(m>>2)+a[l]));return mt.free_topological_data(i),{positions:d,indices:h,verticesPerFace:g}}},ML=["getX","getY","getZ"];function kk(t,e){let n={},r=e?e.count:t.count,i=0,s=[],o=[],a=1e4;for(let c=0;c<r;c++){let d=e?e.getX(c):c,u="";for(let h=0;h<3;h++)u+=`${~~(t[ML[h]](d)*a)},`;if(u in n)s.push(n[u]);else{for(let h=0;h<3;h++)o.push(t[ML[h]](d));n[u]=i,s.push(i),i++}}let l=[];for(let c=0;c<s.length;c+=3)s[c]===s[c+1]||s[c]===s[c+2]||s[c+1]===s[c+2]||l.push(s[c],s[c+1],s[c+2]);return{positions:o,triIndices:l}}var f0=new R,K_=new R,ew=new R,tw=new R;function Bk(t,e,n,r){var o;let i=[],s=[];if(n.userData.shape!==void 0&&n.userData.parameters.depth===0&&n.userData.shape.shapeHoles.length===0){let a=n.userData.shape.extractShapePointsToFlatArray([]),l=0;for(let d=0;d<a.length;d+=2)l+=(a[d]-a[(d===0?a.length:d)-2])*(a[d+1]+a[(d===0?a.length:d)-1]);t.length=0;let c=0;if(l<0)for(let d=0;d<a.length;d+=2)t.push(a[d],a[d+1],0),i.push(c++);else for(let d=a.length-2;d>=0;d-=2)t.push(a[d],a[d+1],0),i.push(c++);return s.push(c),{indices:i,verticesPerFace:s}}for(let a=0,l=(o=n.capStartIndex)!=null?o:e.length;a<l;)if(e[a+1]===e[a+3]&&e[a+2]===e[a+5]||e[a+0]===e[a+3]&&e[a+2]===e[a+4]){f0.set(t[e[a]*3],t[e[a]*3+1],t[e[a]*3+2]),K_.set(t[e[a+1]*3],t[e[a+1]*3+1],t[e[a+1]*3+2]),ew.set(t[e[a+4]*3],t[e[a+4]*3+1],t[e[a+4]*3+2]),tw.set(t[e[a+5]*3],t[e[a+5]*3+1],t[e[a+5]*3+2]),K_.sub(f0).normalize(),ew.sub(f0).normalize(),tw.sub(f0).normalize();let c=K_.cross(ew).dot(tw);Math.abs(c)>.005||r&&r.some((d,u)=>u%2===1?!1:a>=r[u]&&a<r[u+1])?(i.push(e[a],e[a+1],e[a+2]),s.push(3),a+=3):(i.push(e[a],e[a+1],e[a+4],e[a+5]),s.push(4),a+=6)}else i.push(e[a],e[a+1],e[a+2]),s.push(3),a+=3;if(n.capStartIndex!==void 0){let a=[],l=[],c=0,d=new Float32Array([n.userData.parameters.depth])[0];for(let u=0,h=0;u<t.length;u+=3,h++)t[u+2]===0&&(a.push(h),c++),t[u+2]===d&&l.push(h);if(n.userData.parameters.extrudeBevelSize===0){let u=l[0];l[0]=l[1],l[1]=u}a.reverse(),i.push(...a,...l),s.push(c,c)}return{indices:i,verticesPerFace:s}}var Ha={};EX(Ha,{calcBoolean:()=>Vre,calcBooleanTopological:()=>Ure,freeMeshSet:()=>Wre,getMeshSet:()=>Hre,transformMeshSet:()=>Gre});var Bre=new Promise(t=>{}),Dt,wd;Bre.then(t=>Dt=t);function Fre(t,e,n){let r,{positions:i,triIndices:s}=kk(t.getAttribute("position"),t.getIndex()),o;if(e&&n){let{indices:a,verticesPerFace:l}=Bk(i,s,t);o=l.length,r=[];for(let c=0,d=0;c<o;c++){r.push(l[c]);for(let u=0;u<l[c];u++)r.push(a[d++])}}else{let a=s.length;r=Array(a+a/3),o=0;for(let l=0,c=0;c<r.length;)r[c++]=3,o++,r[c++]=s[l++],r[c++]=s[l++],r[c++]=s[l++]}return{positions:i,faceIndices:r,nFaces:o}}function Fk(t){let e=t.length,n=e*Uint32Array.BYTES_PER_ELEMENT,r=e*Float32Array.BYTES_PER_ELEMENT,i=Number.isInteger(t[0])?n:r,s=Dt._malloc(i);return(Number.isInteger(t[0])?new Uint32Array(Dt.HEAPU32.buffer,s,e):new Float32Array(Dt.HEAPF32.buffer,s,e)).set(t,0),s}function Uk(t){switch(t){case 0:return Dt.OP.UNION;case 1:return Dt.OP.INTERSECTION;case 2:return Dt.OP.A_MINUS_B;case 3:return Dt.OP.B_MINUS_A;case 4:return Dt.OP.SYMMETRIC_DIFFERENCE;case 5:return Dt.OP.ALL;default:throw new Error("Unknown boolean operation "+t)}}function Ure(t,e){wd===void 0&&(wd=Dt.init_csg());let n=Fk(t),r=Dt.csg_calc_topological(wd,n,t.length,Uk(e));Dt._free(n);let i=6,s=Dt.HEAPU32.subarray(r>>2,(r>>2)+i),o=s.subarray(3,3+3),a=0,l=Dt.HEAPU32[s[a]>>2],c=new Float32Array(Dt.HEAPF32.subarray(l>>2,(l>>2)+o[a]));a++;let d=Dt.HEAPU32[s[a]>>2],u=new Uint32Array(Dt.HEAPU32.subarray(d>>2,(d>>2)+o[a]));a++;let h=Dt.HEAPU32[s[a]>>2],m=new Uint8Array(Dt.HEAPU32.subarray(h>>2,(h>>2)+o[a]));return Dt.free_mesh_data(r),{positions:c,indices:u,verticesPerFace:m}}function Vre(t,e,n,r){wd===void 0&&(wd=Dt.init_csg());let i=Fk(t),s=Dt.csg_calc(wd,i,t.length,r,Uk(e));Dt._free(i);let o=5,a=Dt.HEAPU32.subarray(s>>2,(s>>2)+o),l=a.subarray(2,2+3),c=0,d=Dt.HEAPU32[a[c]>>2],u=Dt.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let h=Dt.HEAPU32[a[c]>>2],m=Dt.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let g=l[c];n.setAttribute("position",new Ne(u,3)),n.setAttribute("normal",new Ne(m,3));let x=Dt.HEAPF32.subarray((s>>2)+5,(s>>2)+5+6);return n.boundingSphere===null&&(n.boundingSphere=new xs),n.boundingSphere.center.set(x[0],x[1],x[2]),n.boundingSphere.radius=(x[3]**2+x[4]**2+x[5]**2)**.5,n.userData.parameters={width:x[3]*2,height:x[4]*2,depth:x[5]*2},Dt.free_mesh_data(s),g}function Hre(t,e,n){if(Dt===void 0)return-1;let r,i,s;if(e&&t.userData.positions!==void 0){let x=t.userData;s=x.verticesPerFace.length,r=x.positions,i=Array(x.verticesPerFace.reduce((y,v)=>y+v,0)+s);for(let y=0,v=0,_=0;y<x.verticesPerFace.length;y++){i[_++]=x.verticesPerFace[y];for(let S=0;S<x.verticesPerFace[y];S++)i[_++]=x.indices[v++]}}else({positions:r,faceIndices:i,nFaces:s}=Fre(t,e,n));let o=r.length,a=i.length,l=r.length,c=i.length,d=l*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,u=l*Float32Array.BYTES_PER_ELEMENT,h=Dt._malloc(d),m=new Float32Array(Dt.HEAPF32.buffer,h,l),g=new Uint32Array(Dt.HEAPU32.buffer,h+u,c);return m.set(r,0),g.set(i,0),Dt.get_csg_mesh(h,o,h+u,a,s)}function Gre(t,e){Dt.transform_csg_mesh(t,e.elements)}function Wre(t){Dt.free_csg_mesh(t)}var Vk={ConeGeometry:ere,CubeGeometry:tre,CylinderGeometry:Kne,DodecahedronGeometry:rre,EllipseGeometry:are,HelixGeometry:dre,IcosahedronGeometry:hre,LatheGeometry:fre,NonParametricGeometry:xre,PolygonGeometry:_re,PyramidGeometry:wre,RectangleGeometry:Mre,SphereGeometry:Ere,PlaneGeometry:Tre,BackdropGeometry:Are,StarGeometry:Pre,TextFrameGeometry:Lre,TorusGeometry:Ore,TorusKnotGeometry:Dre,TriangleGeometry:Rre,VectorGeometry:ma},Lb=t=>Vk[t.type].create(t);function ui(t,e){return e.color(t)}var EL=t=>"isEntity"in t,Bd=t=>"isAbstractMesh"in t,Hu=t=>t!==null&&t.objectType==="BooleanObject",jre=t=>t.objectType==="CombinedCamera",Hk=t=>"objectHelper"in t;function $re(t,e){var r;let n=!1;e.position&&(t.position.fromArray(e.position),n=!0),e.rotation&&(t.rotation.fromArray(e.rotation),n=!0),e.scale&&(n=!0,t.scale.fromArray(e.scale)),e.hiddenMatrix!==void 0&&"hiddenMatrix"in t&&(n=!0,t.hiddenMatrix.fromArray((r=e.hiddenMatrix)!=null?r:Nd.identity)),n&&(t.updateMatrix(),Hu(t.parent)&&Bd(t)&&t.invalidateDownstreamBooleanData(!0).recomputeBoolean()),e.position&&e.rotation&&e.scale&&e.hiddenMatrix!==void 0&&t.updateWorldMatrix(!1,!0),t.objectType==="CombinedCamera"&&(e.isUpVectorFlipped!==void 0&&(t.isUpVectorFlipped=e.isUpVectorFlipped),t.updateUp())}function qre(t,e){$re(t,e),e.name!==void 0&&(t.name=e.name),e.visible!==void 0&&(t.visible=e.visible)}function Xre(t,e,n){qre(t,e),e.color!==void 0&&(t.color=ui(e.color,n)),e.intensity!==void 0&&(t.intensity=e.intensity),e.shadows!==void 0&&!(t instanceof mp)&&(t.castShadow=e.shadows),t.shadow&&!(t instanceof mp)&&e.depth!==void 0&&(t.shadow.camera.far=e.depth,t.shadow.needsUpdate=!0)}function Yre(t,e){t.shadow.camera.right=e/2,t.shadow.camera.left=-e/2,t.shadow.camera.top=e/2,t.shadow.camera.bottom=-e/2,t.shadow.needsUpdate=!0}var Gk=t=>class extends t{hasEntityChild(){return this.children.some(e=>EL(e))}isDescendantOf(e){e instanceof Rt&&(e=e.uuid);let n=this;for(;n.parent;){if(n.parent.uuid===e)return!0;n=n.parent}return!1}attach(e,n){this.updateWorldMatrix(!0,!1);let r=new nt().copy(this.matrixWorld).invert();return e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),r.multiply(e.parent.matrixWorld)),EL(e)?e.hiddenMatrix.premultiply(r):e.applyMatrix4(r),e.updateWorldMatrix(!1,!1),this.add(e),n!==void 0&&(this.children.pop(),this.children.splice(n,0,e)),this}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){let i=e.children[r];this.add(i.clone())}return this}},Nc=new Ni,Ds=new R,ho=new R,Sd=new nt,Wk=[new R(-1,1,1),new R(-1,-1,1),new R(1,-1,1),new R(1,1,1),new R(-1,1,-1),new R(-1,-1,-1),new R(1,-1,-1),new R(1,1,-1)],Zre=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],Jre=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]];function Qre(t,e,n=0,r=e.count){let i=1/0,s=1/0,o=1/0,a=-1/0,l=-1/0,c=-1/0;for(let d=n;d<r;d++){let u=e.getX(d),h=e.getY(d),m=e.getZ(d);u<i&&(i=u),h<s&&(s=h),m<o&&(o=m),u>a&&(a=u),h>l&&(l=h),m>c&&(c=m)}return t.min.set(i,s,o),t.max.set(a,l,c),t}var TL=(t,e,n)=>{var r;if(Bd(t)){let i=t.geometry.userData.parameters,s=t.geometry.getAttribute("position");t.geometry.userData.type==="SubdivGeometry"?Ds.copy(t.originalGeometry.boundingSphere.center):t.geometry.userData.type==="TextGeometry"?Ds.set(0,0,i.depth*.5):s!==void 0&&(Qre(Nc,s,t.geometry.drawRange.start,t.geometry.drawRange.count<1/0?t.geometry.drawRange.count:s.count),Nc.getCenter(Ds)),t.forceComputeSize?Nc.getSize(ho).multiplyScalar(.5):ho.set(i.width,i.height,(r=i.depth)!=null?r:0).multiplyScalar(.5)}else if(Hk(t)&&t.objectHelper.visible){let i=t.geometryHelper.getAttribute("position");Nc.setFromArray(i.array),Nc.getCenter(Ds),Nc.getSize(ho).multiplyScalar(.5)}else Ds.setScalar(0),ho.setScalar(0);Sd.copy(e).multiply(t.matrixWorld),ho.x===0&&ho.y===0&&ho.z===0?n.push(new R(Ds.x,Ds.y,Ds.z).applyMatrix4(Sd)):Wk.forEach(i=>{n.push(i.clone().multiply(ho).add(Ds).applyMatrix4(Sd))})},AL=class extends Ni{constructor(){super(...arguments),this.matrix=new nt,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(t){return super.copy(t),this.matrix.copy(t.matrix),this.vertices=t.vertices.map(e=>e.clone()),this.faces=t.faces.map(e=>e.clone()),this.edges=t.edges.map(e=>e.clone()),this.centerEdges=t.centerEdges.map(e=>e.clone()),this}setFromObjectSize(t,e=!1){t.updateWorldMatrix(!1,e),this.makeEmpty(),this.matrix.copy(t.matrixWorld);let n=new nt().copy(t.matrixWorld).invert();return this.expandByObjectSize(t,n,e)}expandByObjectSize(t,e,n=!1){let r=[];return n===!0?t.traverseEntity(i=>{i.visible&&TL(i,e,r)}):TL(t,e,r),this.setFromPoints(r)}getCenter(t){return t=super.getCenter(t),t.applyMatrix4(this.matrix),t}getPositionToCenter(t){return t=super.getCenter(t),t.applyMatrix4(Sd.copy(this.matrix).setPosition(0,0,0)),t}computeVertices(){this.getSize(ho).multiplyScalar(.5),this.getCenter(Ds),Sd.copy(this.matrix).setPosition(Ds),this.vertices=Wk.map(t=>t.clone().multiply(ho).applyMatrix4(Sd))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=Zre.map(([t,e])=>new ON(this.vertices[t],this.vertices[e])),this.centerEdges=this.edges.map(t=>t.getCenter(new R))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=Jre.map(([t,e])=>this.vertices[t].clone().add(this.vertices[e]).multiplyScalar(.5))}},Zo=t=>"isEntity"in t,Kre=t=>"isAbstractMesh"in t,ah=t=>class extends Gk(t){constructor(){super(...arguments),this.objectType="",this.isEntity=!0,this.raycastLock=!1,this.scaleLock=!1,this.hiddenMatrix=new nt,this._singleBBox=new AL,this._recursiveBBox=new AL,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.forceComputeSize=!1,this.states={},this.currentState=null,this.currentTransitionAction=null}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}resetBBoxNeedsUpdate(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.traverseAncestors(e=>{Zo(e)&&(e.singleBBoxNeedsUpdate=!0,e.recursiveBBoxNeedsUpdate=!0)}),this.traverseEntity(e=>{e.singleBBoxNeedsUpdate=!0,e.recursiveBBoxNeedsUpdate=!0})}traverseEntity(e){e(this);for(let n of this.children)Zo(n)&&n.traverseEntity(e)}traverseVisibleEntity(e){e(this);for(let n of this.children)Zo(n)&&n.visible&&n.traverseVisibleEntity(e)}updateMatrix(){super.updateMatrix(),this.dispatchEvent({type:"updateMatrix"})}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);for(let n of this.children)n.updateMatrixWorld(e)}updateWorldMatrix(e,n){let r=this.parent;if(e&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),n)for(let i of this.children)i.updateWorldMatrix(!1,!0)}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(super.copy(e,!1),this.raycastLock=e.raycastLock,this.scaleLock=e.scaleLock,this.hiddenMatrix.copy(e.hiddenMatrix),n===!0)for(let r of e.children)Zo(r)&&this.add(r.clone());return this}keepChildrenMatrixWorld(){let e=new nt,n=this.matrixWorld.clone();this.updateWorldMatrix(!1,!1),e.copy(this.matrixWorld).invert(),e.multiply(n);for(let r of this.children)Zo(r)&&r.hiddenMatrix.premultiply(e)}toObjectTransformState(e=[]){this.updateWorldMatrix(!0,!1);let n={position:this.position.toArray(),rotation:[this.rotation.x,this.rotation.y,this.rotation.z],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return vb(n,e)}fromObjectTransformState(e){return e.position&&this.position.fromArray(e.position),e.rotation&&this.rotation.fromArray(e.rotation),e.scale&&this.scale.fromArray(e.scale),e.hiddenMatrix&&this.hiddenMatrix.fromArray(e.hiddenMatrix),this.updateMatrix(),this}toState(e=[]){let n={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(e)};return vb(n,e)}fromState(e,n){return e.name&&(this.name=e.name),e.raycastLock!==void 0&&(this.raycastLock=e.raycastLock),e.type!=="OrthographicCamera"&&e.type!=="PerspectiveCamera"&&(this.matrixAutoUpdate=!1),e.visible!==void 0&&(this.visible=e.visible),this.fromObjectTransformState(e),this}},CL=class{constructor(t){t=t!=null?t:{},this.name=t.name,this.type=t.type,this.node=t.node,this.size=t.size,this.needsUpdate=t.needsUpdate}get value(){return this.node.value}set value(t){this.node.value=t}},Pl=class{constructor(t){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=nn.generateUUID(),this.type=t,this.name=""}analyze(t,e){e=e!=null?e:{},t.analyzing=!0,this.build(t.addFlow(e.slot,e.cache,e.context),"v4"),t.clearVertexNodeCode(),t.clearFragmentNodeCode(),t.removeFlow(),t.analyzing=!1}analyzeAndFlow(t,e,n){return n=n!=null?n:{},this.analyze(t,n),this.flow(t,e,n)}flow(t,e,n){n=n!=null?n:{},t.addFlow(n.slot,n.cache,n.context);let r={result:this.build(t,e),code:t.clearNodeCode(),extra:t.context.extra};return t.removeFlow(),r}build(t,e,n){e=e!=null?e:this.getType(t,e);let r=t.getNodeData(n!=null?n:this);return t.analyzing&&this.appendDepsNode(t,r,e),t.nodes.indexOf(this)===-1&&t.nodes.push(this),this.updateFrame!==void 0&&t.updaters.indexOf(this)===-1&&t.updaters.push(this),this.generate(t,e,n)}updateFrame(t){}generateReadonly(t,e,n,r,i,s){return""}generate(t,e,n,r,i){return""}parse(t,e,n,r){}appendDepsNode(t,e,n){e.deps=(e.deps||0)+1;let r=t.getTypeLength(n);(r>(e.outputMax||0)||this.getType(t,n))&&(e.outputMax=r,e.output=n)}setName(t){this.name=t}getName(){return this.name}getType(t,e){return e==="sampler2D"||e==="samplerCube"?e:this.type}getHash(){let t="{",e,n;for(e in this)n=this[e],n instanceof Pl&&(t+='"'+e+'":'+n.getHash()+",");if(this.hashProperties)for(let r=0;r<this.hashProperties.length;r++)e=this.hashProperties[r],n=this[e],t+='"'+e+'":"'+String(n)+'",';return t+='"id":"'+this.uuid+'"}',t}},eie=class{constructor(){this.nodes={},this.keywords={}}add(t){this.nodes[t.name]=t}addKeyword(t,e,n){n=n!==void 0?n:!0,this.keywords[t]={callback:e,cache:n}}remove(t){delete this.nodes[t.name]}removeKeyword(t){delete this.keywords[t]}get(t){return this.nodes[t]}getKeyword(t,e){return this.keywords[t].callback(e)}getKeywordData(t){return this.keywords[t]}contains(t){return this.nodes[t]!==void 0}containsKeyword(t){return this.keywords[t]!==void 0}},ai=new eie,dn=class extends Pl{constructor(t,e){super(t),this.scope="",e=e!=null?e:{},this.shared=e.shared!==void 0?e.shared:!0,this.unique=e.unique!==void 0?e.unique:!1}build(t,e,n,r){if(e=e!=null?e:this.getType(t),this.getShared(t,e)){let i=this.getUnique(t,e);i&&this.uuid===void 0&&(this.uuid=nn.generateUUID()),n=t.getUUID(n!=null?n:this.getUUID(),!i);let s=t.getNodeData(n),o=s.output||this.getType(t);if(t.analyzing)return(s.deps||0)>0||this.getLabel()?(this.appendDepsNode(t,s,e),this.generate(t,e,n)):super.build(t,e,n);if(i)return s.name=s.name||super.build(t,e,n),s.name;if(!this.getLabel()&&(!this.getShared(t,o)||t.context.ignoreCache||s.deps===1))return super.build(t,e,n);n=this.getUUID(!1);let a=this.getTemp(t,n);if(a)return t.format(a,o,e);{a=super.generate(t,e,n,s.output,r);let l=this.generate(t,o,n);return t.addNodeCode(a+" = "+l+";"),t.format(a,o,e)}}return super.build(t,e,n)}getShared(t,e){return e!=="sampler2D"&&e!=="samplerCube"&&this.shared}getUnique(t,e){return this.unique}setLabel(t){return this.label=t,this}getLabel(){return this.label}getUUID(t){let e=this.uuid;return typeof this.scope=="string"&&(e=this.scope+"-"+e),e}getTemp(t,e){e=e||this.uuid;let n=t.getVars()[e];return n?n.name:void 0}generate(t,e,n,r,i){return this.getShared(t,e)||console.error("TempNode is not shared"),n=n!=null?n:this.uuid,t.getTempVar(n,r!=null?r:this.getType(t),i,this.getLabel()).name}},ki=class extends dn{constructor(t,e){e=e!=null?e:{},e.shared=e.shared!==void 0?e.shared:!1,super(t,e),this.readonly=!1}setReadonly(t){return this.readonly=t,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(t,e,n,r,i,s){n=t.getUUID(n!=null?n:this.getUUID()),r=r!=null?r:this.getType(t);let o=t.getNodeData(n);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(t,e,n,r,i,s):t.isShader("vertex")?(o.vertex||(o.vertex=t.createVertexUniform(r,this,i,s,this.getLabel())),t.format(o.vertex.name,r,e)):(o.fragment||(o.fragment=t.createFragmentUniform(r,this,i,s,this.getLabel())),t.format(o.fragment.name,r,e))}},is=class extends ki{constructor(t=0,e){super("v2"),this.nodeType="Vector2",this.value=t instanceof se?t:new se(t,e)}get x(){return this.value.x}set x(t){this.value.x=t}get y(){return this.value.y}set y(t){this.value.y=t}generateReadonly(t,e,n,r,i,s){return t.format("vec2("+this.value.x+", "+this.value.y+")",r,e)}},ts=class extends ki{constructor(t=0,e,n){super("v3"),this.nodeType="Vector3",this.value=t instanceof R?t:new R(t,e,n)}get x(){return this.value.x}set x(t){this.value.x=t}get y(){return this.value.y}set y(t){this.value.y=t}get z(){return this.value.z}set z(t){this.value.z=t}generateReadonly(t,e,n,r,i,s){return t.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",r,e)}},Ws=class extends We{constructor(t,e,n,r){super(t,e,n),this.isColorA=!0,this.a=r}setRGBA(t,e,n,r){super.setRGB(t,e,n),this.a=r}copy(t){return super.copy(t),this.a="a"in t?t.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(t){this.r=t}set y(t){this.g=t}set z(t){this.b=t}set w(t){this.a=t}},su=class extends ki{constructor(t){super("v4"),this.nodeType="Vector4",this.value=t instanceof Ws?t:new Ws(t.r,t.g,t.b,t.a)}generateReadonly(t,e,n,r,i,s){return t.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",r,e)}},tie=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,PL=/[a-z_0-9]+/gi,it=class extends dn{constructor(t,e,n,r,i){super(i),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=i===void 0,this.isInterface=!1,this.parse(t,e,n,r)}getShared(t,e){return!this.isMethod}getType(t){return t.getTypeByFormat(this.type)}getInputByName(t){if(this.inputs){let e=this.inputs.length;for(;e--;)if(this.inputs[e].name===t)return this.inputs[e]}}getIncludeByName(t){if(this.includes){let e=this.includes.length;for(;e--;)if(this.includes[e].name===t)return this.includes[e]}}generate(t,e,n,r,i){let s,o=0,a=this.src;if(this.includes)for(let c=0;c<this.includes.length;c++)t.include(this.includes[c],this);for(let c in this.extensions)t.extensions[c]=!0;let l=[];for(;s=PL.exec(this.src);)l.push(s);for(let c=0;c<l.length;c++){let d=l[c],u=d[0],h=this.isMethod?!this.getInputByName(u):!0,m=u;if(this.keywords[u]||this.useKeywords&&h&&ai.containsKeyword(u)){let g=this.keywords[u];if(!g){let x=ai.getKeywordData(u);x.cache&&(g=t.keywords[u]),g=g||ai.getKeyword(u,t),x.cache&&(t.keywords[u]=g)}m=g.build(t)}u!==m&&a[d.index+o-1]!=="."&&(a=a.substring(0,d.index+o)+m+a.substring(d.index+u.length+o),o+=m.length-u.length),this.getIncludeByName(m)===void 0&&ai.contains(m)&&t.include(ai.get(m))}return e==="source"?a:this.isMethod?(this.isInterface||t.include(this,void 0,a),this.name):t.format("( "+a+" )",this.getType(t),e)}parse(t,e,n,r){if(this.src=t||"",this.includes=e!=null?e:[],this.extensions=n!=null?n:{},this.keywords=r!=null?r:{},this.isMethod){let i=tie.exec(this.src);if(this.inputs=[],i&&i.length==4){this.type=i[1],this.name=i[2];let s=i[3].match(PL);if(s){let o=0;for(;o<s.length;){let a=s[o++],l;a==="in"||a==="out"||a==="inout"?l=s[o++]:(l=a,a="");let c=s[o++];this.inputs.push({name:c,type:l,qualifier:a})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},nie=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,jk=class extends dn{constructor(t="",e){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(t||jk.PI,void 0,void 0,void 0,e)}getType(t){return t.getTypeByFormat(this.type)}parse(t,e,n,r,i){this.src=t||"";let s,o,a="",l=nie.exec(t);this.useDefine=i!=null?i:this.src.charAt(0)==="#",l&&l.length>1?(o=l[1],s=l[2],a=l[3]):(s=this.src,o="f"),this.name=s,this.type=o,this.value=a}build(t,e){if(e==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return t.include(this),t.format(this.name,this.getType(t),e)}generate(t,e,n,r,i){return t.format(this.name,this.getType(t),e)}},tn=jk;tn.PI="PI",tn.PI2="PI2",tn.RECIPROCAL_PI="RECIPROCAL_PI",tn.RECIPROCAL_PI2="RECIPROCAL_PI2",tn.LOG2="LOG2",tn.EPSILON="EPSILON";var rie=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),iie=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),$k=class extends dn{constructor(t=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(t)}getType(t){return t.getTypeByFormat(this.name)}getInputByName(t){let e=this.inputs.length;for(;e--;)if(this.inputs[e].name===t)return this.inputs[e]}generate(t,e,n,r,i){return e==="source"?this.src+";":t.format("( "+this.src+" )",this.getType(t),e)}parse(t=""){this.src=t,this.inputs=[];let e=rie.exec(t);if(e){let n=e[2],r;for(;r=iie.exec(n);)this.inputs.push({type:r[1],name:r[2]});this.name=e[1]}else this.name="";this.type=this.name}},s3=class extends dn{constructor(t){super("v2",{shared:!1}),this.nodeType="UV",this.index=t!=null?t:0}generate(t,e){t.requires.uv[this.index]=!0;let n=this.index>0?this.index+1:"",r=t.isShader("vertex")?"uv"+n:"vUv"+n;return t.format(r,this.getType(t),e)}};ai.addKeyword("uv",function(){return new s3});ai.addKeyword("uv2",function(){return new s3(1)});var Vc=class extends dn{constructor(t,e){super("v4"),this.nodeType="ColorSpace",this.input=t,this.method=e!=null?e:Vc.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(t){switch(t){case ys:return["Linear"];case un:return["sRGB"];default:return[]}}generate(t,e){var o;let n=this.input.build(t,"v4"),r=this.getType(t),i=Vc.Nodes[this.method],s=t.include(i);if(s===Vc.LINEAR_TO_LINEAR)return t.format(n,r,e);if(((o=i.inputs)==null?void 0:o.length)===2){let a=this.factor.build(t,"f");return t.format(s+"( "+n+", "+a+" )",r,e)}else return t.format(s+"( "+n+" )",r,e)}fromEncoding(t){let e=Vc.getEncodingComponents(t);this.method="LinearTo"+e[0],this.factor=e[1]}fromDecoding(t){let e=Vc.getEncodingComponents(t);this.method=e[0]+"ToLinear",this.factor=e[1]}},xo=Vc;xo.Nodes={LinearToLinear:new it(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new it(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new it(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},xo.LINEAR_TO_LINEAR="LinearToLinear",xo.SRGB_TO_LINEAR="sRGBToLinear",xo.LINEAR_TO_SRGB="LinearTosRGB";var vn=class extends it{constructor(t="",e,n,r,i){super(t,i,r,n,e),this.nodeType="Expression"}},Qa=class extends ki{constructor(t=new Bn,e,n,r){super("v4",{shared:!0}),this.nodeType="Texture",this.value=t,this.uv=e!=null?e:new s3,this.bias=n,this.project=r!==void 0?r:!1}getTexture(t,e){return super.generate(t,e,this.value.uuid,"t")}generate(t,e){var c;if(e==="sampler2D")return this.getTexture(t,e);let n=this.getTexture(t,e),r=this.uv.build(t,this.project?"v4":"v2"),i=this.bias?this.bias.build(t,"f"):void 0;i===void 0&&t.context.bias&&(i=t.context.bias.setTexture(this).build(t,"f"));let s,o;this.project?s="texture2DProj":s=i?"tex2DBias":"tex2D",i?o=s+"( "+n+", "+r+", "+i+" )":o=s+"( "+n+", "+r+" )";let a={include:t.isShader("vertex"),ignoreCache:!0},l=this.getType(t);return t.addContext(a),this.colorSpace=(c=this.colorSpace)!=null?c:new xo(new vn("",l)),this.colorSpace.fromDecoding(t.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(o),o=this.colorSpace.build(t,l),t.removeContext(),t.format(o,l,e)}},et=class extends ki{constructor(t){super("f"),this.nodeType="Float",this.value=t!=null?t:0}generateReadonly(t,e,n,r,i,s){return t.format(this.value+(this.value%1?"":".0"),r,e)}},LL=class extends dn{constructor(t,e){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=t,this.inputs=e!=null?e:[]}getFunction(){return this.value}getType(t){return this.value.getType(t)}generate(t,e,n,r,i){r=this.getType(t);let s=this.value,o=s.build(t,e)+"( ",a=[];if(s.inputs){for(let l=0;l<s.inputs.length;l++){let c=s.inputs[l],d=this.inputs[l]||this.inputs[c.name];a.push(d.build(t,t.getTypeByFormat(c.type)))}o+=a.join(", ")+" )"}return t.format(o,r,e)}},qk=class extends dn{constructor(t,e,n=qk.ADD){super(),this.nodeType="Operator",this.type=t.type,this.a=t,this.b=e,this.op=n}getType(t){let e=this.a.getType(t),n=this.b.getType(t);return t.isTypeMatrix(e)?"v4":t.getTypeLength(n)>t.getTypeLength(e)?n:e}generate(t,e){let n=this.getType(t);this.type=n;let r=this.a.build(t,n),i=this.b.build(t,n);return t.format("( "+r+" "+this.op+" "+i+" )",n,e)}},_o=qk;_o.ADD="+",_o.SUB="-",_o.MUL="*",_o.DIV="/";var en=class extends dn{constructor(t,e=en.ABS,n,r){super(),this.nodeType="Math",this.a=t,typeof e!="string"?this.b=e:r=e,typeof n!="string"?this.c=n:r=n,this.method=r,this.hashProperties=["method"]}getNumInputs(t){switch(this.method){case en.MIX:case en.CLAMP:case en.REFRACT:case en.SMOOTHSTEP:case en.FACEFORWARD:return 3;case en.MIN:case en.MAX:case en.MOD:case en.STEP:case en.REFLECT:case en.DISTANCE:case en.DOT:case en.CROSS:case en.POW:return 2;default:return 1}}getInputType(t){let e=t.getTypeLength(this.a.getType(t)),n=this.b?t.getTypeLength(this.b.getType(t)):0,r=this.c?t.getTypeLength(this.c.getType(t)):0;return e>n&&e>r?this.a.getType(t):n>r?this.b.getType(t):this.c.getType(t)}getType(t){switch(this.method){case en.LENGTH:case en.DISTANCE:case en.DOT:return"f";case en.CROSS:return"v3"}return this.getInputType(t)}generate(t,e){let n,r,i,s=this.a?t.getTypeLength(this.a.getType(t)):0,o=this.b?t.getTypeLength(this.b.getType(t)):0,a=this.c?t.getTypeLength(this.c.getType(t)):0,l=this.getInputType(t),c=this.getType(t);switch(this.type=c,this.method){case en.NEGATE:return t.format("( -"+this.a.build(t,l)+" )",l,e);case en.INVERT:return t.format("( 1.0 - "+this.a.build(t,l)+" )",l,e);case en.CROSS:n=this.a.build(t,"v3"),r=this.b.build(t,"v3");break;case en.STEP:n=this.a.build(t,s===1?"f":l),r=this.b.build(t,l);break;case en.MIN:case en.MAX:case en.MOD:n=this.a.build(t,l),r=this.b.build(t,o===1?"f":l);break;case en.REFRACT:n=this.a.build(t,l),r=this.b.build(t,l),i=this.c.build(t,"f");break;case en.MIX:n=this.a.build(t,l),r=this.b.build(t,l),i=this.c.build(t,a===1?"f":l);break;default:n=this.a.build(t,l),this.b&&(r=this.b.build(t,l)),this.c&&(i=this.c.build(t,l));break}let d=[];d.push(n),r&&d.push(r),i&&d.push(i);let u=this.getNumInputs(t);if(d.length!==u)throw Error(`Arguments not match used in "${this.method}". Require ${u}, currently ${d.length}.`);return t.format(this.method+"( "+d.join(", ")+" )",c,e)}},yt=en;yt.RAD="radians",yt.DEG="degrees",yt.EXP="exp",yt.EXP2="exp2",yt.LOG="log",yt.LOG2="log2",yt.SQRT="sqrt",yt.INV_SQRT="inversesqrt",yt.FLOOR="floor",yt.CEIL="ceil",yt.NORMALIZE="normalize",yt.FRACT="fract",yt.SATURATE="saturate",yt.SIN="sin",yt.COS="cos",yt.TAN="tan",yt.ASIN="asin",yt.ACOS="acos",yt.ARCTAN="atan",yt.ABS="abs",yt.SIGN="sign",yt.LENGTH="length",yt.NEGATE="negate",yt.INVERT="invert",yt.MIN="min",yt.MAX="max",yt.MOD="mod",yt.STEP="step",yt.REFLECT="reflect",yt.DISTANCE="distance",yt.DOT="dot",yt.CROSS="cross",yt.POW="pow",yt.MIX="mix",yt.CLAMP="clamp",yt.REFRACT="refract",yt.SMOOTHSTEP="smoothstep",yt.FACEFORWARD="faceforward";var ff=class extends dn{constructor(t,e,n){super("v4"),this.nodeType="TextureCubeUV",this.value=t,this.uv=e,this.bias=n}bilinearCubeUV(t,e,n,r){var a,l,c,d;let i=new LL(ff.Nodes.bilinearCubeUV,[e,n,r]);this.colorSpaceTL=(a=this.colorSpaceTL)!=null?a:new xo(new vn("","v4")),this.colorSpaceTL.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(i.build(t)+".tl"),this.colorSpaceTR=(l=this.colorSpaceTR)!=null?l:new xo(new vn("","v4")),this.colorSpaceTR.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(i.build(t)+".tr"),this.colorSpaceBL=(c=this.colorSpaceBL)!=null?c:new xo(new vn("","v4")),this.colorSpaceBL.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(i.build(t)+".bl"),this.colorSpaceBR=(d=this.colorSpaceBR)!=null?d:new xo(new vn("","v4")),this.colorSpaceBR.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(i.build(t)+".br");let s={include:t.isShader("vertex"),ignoreCache:!0};t.addContext(s),this.colorSpaceTLExp=new vn(this.colorSpaceTL.build(t,"v4"),"v4"),this.colorSpaceTRExp=new vn(this.colorSpaceTR.build(t,"v4"),"v4"),this.colorSpaceBLExp=new vn(this.colorSpaceBL.build(t,"v4"),"v4"),this.colorSpaceBRExp=new vn(this.colorSpaceBR.build(t,"v4"),"v4"),t.removeContext();let o=new vn("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return o.keywords.cubeUV_TL=this.colorSpaceTLExp,o.keywords.cubeUV_TR=this.colorSpaceTRExp,o.keywords.cubeUV_BL=this.colorSpaceBLExp,o.keywords.cubeUV_BR=this.colorSpaceBRExp,o.keywords.cubeUV=i,o}generate(t,e){if(t.isShader("fragment")){let n=this.uv,r=this.bias||t.context.roughness,i=new LL(ff.Nodes.roughnessToMip,[r]),s=new yt(i,ff.Nodes.m0,ff.Nodes.cubeUV_maxMipLevel,yt.CLAMP),o=new yt(s,yt.FLOOR),a=new yt(s,yt.FRACT),l=this.bilinearCubeUV(t,this.value,n,o),c=this.bilinearCubeUV(t,this.value,n,new _o(o,new et(1).setReadonly(!0),_o.ADD)),d=new yt(l,c,a,yt.MIX);return t.format(d.build(t),"v4",e)}else return console.warn("TextureCubeUVNode is not compatible with "+t.shader+" shader."),t.format("vec4( 0.0 )",this.getType(t),e)}},Ob=ff;Ob.Nodes=function(){let t=new $k(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),e=new tn("float cubeUV_maxMipLevel 8.0",!0),n=new tn("float cubeUV_minMipLevel 4.0",!0),r=new tn("float cubeUV_maxTileSize 256.0",!0),i=new tn("float cubeUV_minTileSize 16.0",!0),s=new it(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);s.useKeywords=!1;let o=new it(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);o.useKeywords=!1;let a=new it(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[t,s,o,e,n,r,i]);a.useKeywords=!1;let l=new tn("float r0 1.0",!0),c=new tn("float v0 0.339",!0),d=new tn("float m0 -2.0",!0),u=new tn("float r1 0.8",!0),h=new tn("float v1 0.276",!0),m=new tn("float m1 -1.0",!0),g=new tn("float r4 0.4",!0),x=new tn("float v4 0.046",!0),y=new tn("float m4 2.0",!0),v=new tn("float r5 0.305",!0),_=new tn("float v5 0.016",!0),S=new tn("float m5 3.0",!0),b=new tn("float r6 0.21",!0),A=new tn("float v6 0.0038",!0),E=new tn("float m6 4.0",!0),C=[l,c,d,u,h,m,g,x,y,v,_,S,b,A,E],T=new it(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,C);return{bilinearCubeUV:a,roughnessToMip:T,m0:d,cubeUV_maxMipLevel:e}}();var Hc=class extends dn{constructor(t){super("v3"),this.nodeType="Normal",this.scope=t!=null?t:Hc.VIEW}getShared(){return this.scope===Hc.WORLD}build(t,e,n,r){let i=t.context[this.scope+"Normal"];return i?i.build(t,e,n,r):super.build(t,e,n)}generate(t,e,n,r,i){let s;switch(this.scope){case Hc.VIEW:t.isShader("vertex")?s="transformedNormal":s="geometryNormal";break;case Hc.LOCAL:t.isShader("vertex")?s="objectNormal":(t.requires.normal=!0,s="vObjectNormal");break;case Hc.WORLD:t.isShader("vertex")?s="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(t.requires.worldNormal=!0,s="vWNormal");break}return t.format(s,this.getType(t),e)}},ci=Hc;ci.LOCAL="local",ci.WORLD="world",ci.VIEW="view",ci.NORMAL="normal";ai.addKeyword("viewNormal",function(){return new ci(ci.VIEW)});ai.addKeyword("localNormal",function(){return new ci(ci.NORMAL)});ai.addKeyword("worldNormal",function(){return new ci(ci.WORLD)});var Wo=class extends dn{constructor(t){super("v3"),this.nodeType="Position",this.scope=t!=null?t:Wo.LOCAL}getType(){switch(this.scope){case Wo.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case Wo.LOCAL:case Wo.WORLD:return!1}return!0}generate(t,e,n,r,i){let s;switch(this.scope){case Wo.LOCAL:t.isShader("vertex")?s="transformed":(t.requires.position=!0,s="vPosition");break;case Wo.WORLD:if(t.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";t.requires.worldPosition=!0,s="vWPosition";break;case Wo.VIEW:s=t.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case Wo.PROJECTION:s=t.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return t.format(s,this.getType(),e)}},Bs=Wo;Bs.LOCAL="local",Bs.WORLD="world",Bs.VIEW="view",Bs.PROJECTION="projection";ai.addKeyword("position",function(){return new Bs});ai.addKeyword("worldPosition",function(){return new Bs(Bs.WORLD)});ai.addKeyword("viewPosition",function(){return new Bs(Bs.VIEW)});var uo=class extends dn{constructor(t){super("v3"),this.nodeType="Reflect",this.scope=t!=null?t:uo.CUBE}getUnique(t){return!t.context.viewNormal}getType(){switch(this.scope){case uo.SPHERE:return"v2"}return this.type}generate(t,e){let n=this.getUnique(t);if(t.isShader("fragment")){let r;switch(this.scope){case uo.VECTOR:{let i=new ci(ci.VIEW),s=t.context.roughness,o=i.build(t,"v3"),a=new Bs(Bs.VIEW).build(t,"v3"),l=s?s.build(t,"f"):void 0,c=`reflect( -normalize( ${a} ), ${o} )`;l&&(c=`normalize( mix( ${c}, ${o}, ${l} * ${l} ) )`);let d=`inverseTransformDirection( ${c}, viewMatrix )`;n?(t.addNodeCode(`vec3 reflectVec = ${d};`),r="reflectVec"):r=d;break}case uo.CUBE:{let i=new uo(uo.VECTOR).build(t,"v3"),s="vec3( -"+i+".x, "+i+".yz )";n?(t.addNodeCode(`vec3 reflectCubeVec = ${s};`),r="reflectCubeVec"):r=s;break}case uo.SPHERE:{let i=new uo(uo.VECTOR).build(t,"v3"),s="normalize( ( viewMatrix * vec4( "+i+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";n?(t.addNodeCode(`vec2 reflectSphereVec = ${s};`),r="reflectSphereVec"):r=s;break}}return t.format(r,this.getType(),e)}else return console.warn("ReflectNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.type,e)}},bd=uo;bd.CUBE="cube",bd.SPHERE="sphere",bd.VECTOR="vector";var sie=class extends dn{constructor(t=new Qa,e,n){super("v4"),this.nodeType="TextureCube",this.value=t,this.radianceNode=new Ob(this.value,e!=null?e:new bd(bd.VECTOR),n),this.irradianceNode=new Ob(this.value,new ci(ci.WORLD),new et(1).setReadonly(!0))}generate(t,e){return t.isShader("fragment")?(t.require("irradiance"),t.context.bias&&t.context.bias.setTexture(this.value),(t.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(t,e)):(console.warn("TextureCubeNode is not compatible with "+t.shader+" shader."),t.format("vec4( 0.0 )",this.getType(t),e))}},oie=class extends ki{constructor(t=new jd,e,n){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=t,this.uv=e!=null?e:new bd,this.bias=n}getTexture(t,e){return super.generate(t,e,this.value.uuid,"tc")}generate(t,e){var l,c;if(e==="samplerCube")return this.getTexture(t,e);let n=this.getTexture(t,e),r=(l=this.uv)==null?void 0:l.build(t,"v3"),i=this.bias?this.bias.build(t,"f"):void 0;i===void 0&&t.context.bias&&(i=t.context.bias.setTexture(this).build(t,"f"));let s;i?s="texCubeBias( "+n+", "+r+", "+i+" )":s="texCube( "+n+", "+r+" )";let o={include:t.isShader("vertex"),ignoreCache:!0},a=this.getType(t);return t.addContext(o),this.colorSpace=(c=this.colorSpace)!=null?c:new xo(new vn("",a)),this.colorSpace.fromDecoding(t.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(s),s=this.colorSpace.build(t,a),t.removeContext(),t.format(s,a,e)}},OL=["x","y","z","w"],aie=["float","vec2","vec3","vec4"],lie={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},uie={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},cie=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.getIncludesCode=function(){function t(e,n){return e.deps.length-n.deps.length}return function(e,n){let r=this.getIncludes(e,n);if(!r)return"";let i="";r=r.sort(t);for(let s=0;s<r.length;s++)r[s].src&&(i+=r[s].src+`
`);return i}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(t,e){this.buildShader("vertex",t),this.buildShader("fragment",e);for(let n=0;n<this.requires.uv.length;n++)if(this.requires.uv[n]){let r=n>0?n+1:"";this.addVaryCode("varying vec2 vUv"+r+";"),n>0&&this.addVertexParsCode("attribute vec2 uv"+r+";"),this.addVertexFinalCode("vUv"+r+" = uv"+r+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this}buildShader(t,e){this.resultCode[t]=e.build(this.setShader(t),"v4")}setMaterial(t,e){return this.material=t,this.renderer=e,this.defines={},this}addFlow(t,e,n){return this.addSlot(t).addCache(e).addContext(n)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(t){return this.cache=t!=null?t:"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(t){return this.context=Object.assign({},this.context,t),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(t){return this.slot=t||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(t,e){this.fragmentVariables[t]===void 0&&(this.addFragmentCode(`${e} ${t};`),this.fragmentVariables[t]="")}addFragmentParsVariable(t,e){this.fragmentParsVariables[t]===void 0&&(this.addFragmentParsCode(`${e} ${t};`),this.fragmentParsVariables[t]="")}addVertexParsVariable(t,e){this.vertexParsVariables[t]===void 0&&(this.addVertexParsCode(`${e} ${t};`),this.vertexParsVariables[t]="")}addVertexCode(t){this.addCode(t,"vertex")}addFragmentCode(t){this.addCode(t,"fragment")}addCode(t,e){this.code[e!=null?e:this.shader]+=t+`
`}addVertexNodeCode(t){this.addNodeCode(t,"vertex")}addFragmentNodeCode(t){this.addNodeCode(t,"fragment")}addNodeCode(t,e){this.nodeCode[e!=null?e:this.shader]+=t+`
`}clearNodeCode(t){t=t!=null?t:this.shader;let e=this.nodeCode[t];return this.nodeCode[t]="",e}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(t){this.addFinalCode(t,"vertex")}addFragmentFinalCode(t){this.addFinalCode(t,"fragment")}addFinalCode(t,e){this.finalCode[e!=null?e:this.shader]+=t+`
`}addVertexParsCode(t){this.addParsCode(t,"vertex")}addFragmentParsCode(t){this.addParsCode(t,"fragment")}addParsCode(t,e){this.parsCode[e!=null?e:this.shader]+=t+`
`}addVaryCode(t){this.addVertexParsCode(t),this.addFragmentParsCode(t)}isCache(t){return this.caches.indexOf(t)!==-1}isSlot(t){return this.slots.indexOf(t)!==-1}define(t,e){this.defines[t]=e===void 0?1:e}require(t){this.requires[t]=!0}isDefined(t){return this.defines[t]!==void 0}getVar(t,e,n,r="varying",i="V",s=""){let o=this.getVars(r),a=o[t];if(!a){let l=o.length;a={name:n||"node"+i+l+(s?"_"+s:""),type:e},o.push(a),o[t]=a}return a}getTempVar(t,e,n,r){return this.getVar(t,e,n,this.shader,"T",r)}getAttribute(t,e){if(!this.attributes[t]){let n=this.getVar(t,e);this.addVertexParsCode("attribute "+e+" "+t+";"),this.addVertexFinalCode(n.name+" = "+t+";"),this.attributes[t]={varying:n,name:t,type:e}}return this.attributes[t]}getCode(t){return[this.prefixCode,this.parsCode[t],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[t],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[t],"uniform"),this.getIncludesCode("consts",t),this.getIncludesCode("structs",t),this.getIncludesCode("functions",t),"void main() {",this.getVarListCode(this.getVars(t)),this.code[t],this.resultCode[t],this.finalCode[t],"}"].join(`
`)}getVarListCode(t,e){e=e!=null?e:"";let n="";for(let r=0,i=t.length;r<i;++r){let s=t[r],o=s.type,a=s.name,l=s.size,c=this.getFormatByType(o);if(c===void 0)throw new Error("Node pars "+c+" not found.");c.includes("[]")?n+=e+" "+c.substring(0,c.length-2)+" "+a+`[${l}];
`:n+=e+" "+c+" "+a+`;
`}return n}getVars(t){return this.inputs.vars[t!=null?t:this.shader]}getNodeData(t){let e=t instanceof Pl?t.uuid:t;return this.nodeData[e]=this.nodeData[e]||{}}createUniform(t,e,n,r,i,s){if(e.includes("[]")){let o=this.inputs.arrayUniforms,a=o.list.length,l=new CL({type:e,size:n.size,name:r||"nodeUA"+a+(s?"_"+s:""),node:n,needsUpdate:i});return o.list.push(l),o[t].push(l),o[t][l.name]=l,this.uniforms[l.name]=l,l}else{let o=this.inputs.uniforms,a=o.list.length,l=new CL({type:e,name:r||"nodeU"+a+(s?"_"+s:""),node:n,needsUpdate:i});return o.list.push(l),o[t].push(l),o[t][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(t,e,n,r,i){return this.createUniform("vertex",t,e,n,r,i)}createFragmentUniform(t,e,n,r,i){return this.createUniform("fragment",t,e,n,r,i)}include(t,e,n){var s;let r;if(t=typeof t=="string"?ai.get(t):t,this.context.include===!1)return t.name;t instanceof it?r=this.includes.functions:t instanceof tn?r=this.includes.consts:t instanceof $k&&(r=this.includes.structs);let i=r[this.shader]=r[this.shader]||[];if(t){let o=i[t.name];if(o||(o=i[t.name]={node:t,deps:[]},i.push(o),o.src=t.build(this,"source")),t instanceof it&&e&&i[e.name]&&i[e.name].deps.indexOf(t)===-1&&(i[e.name].deps.push(t),(s=t.includes)==null?void 0:s.length)){let a=0;do this.include(t.includes[a++],e);while(a<t.includes.length)}return n&&(o.src=n),t.name}else throw new Error("Include not found.")}colorToVectorProperties(t){return t.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(t){return t.replace(/c/g,"v3")}getIncludes(t,e){return this.includes[t][e||this.shader]}getConstructorFromLength(t){return aie[t-1]}isTypeMatrix(t){return/^m/.test(t)}getTypeLength(t){return t==="f"?1:parseInt(this.colorToVector(t).substr(1))}getTypeFromLength(t){return t===1?"f":"v"+t}findNode(...t){for(let e=0;e<arguments.length;e++){let n=t[e];if(n!=null&&n.isNode)return n}}resolve(...t){for(let e=0;e<arguments.length;e++){let n=t[e];if(n!==void 0){if(n.isNode)return n;if(n.isTexture)switch(n.mapping){case ha:case fa:return new oie(n);case ju:return new sie(new Qa(n));default:return new Qa(n)}else{if(n.isVector2)return new is(n);if(n.isVector3)return new ts(n);if(n.isVector4)return new su(n)}}}}format(t,e,n){switch(this.colorToVector(n+" <- "+e)){case"f <- v2":return t+".x";case"f <- v3":return t+".x";case"f <- v4":return t+".x";case"f <- i":case"f <- b":return"float( "+t+" )";case"v2 <- f":return"vec2( "+t+" )";case"v2 <- v3":return t+".xy";case"v2 <- v4":return t+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+t+" ) )";case"v3 <- f":return"vec3( "+t+" )";case"v3 <- v2":return"vec3( "+t+", 0.0 )";case"v3 <- v4":return t+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+t+" ) )";case"v4 <- f":return"vec4( "+t+" )";case"v4 <- v2":return"vec4( "+t+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+t+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+t+" ) )";case"i <- f":case"i <- b":return"int( "+t+" )";case"i <- v2":return"int( "+t+".x )";case"i <- v3":return"int( "+t+".x )";case"i <- v4":return"int( "+t+".x )";case"b <- f":return"( "+t+" != 0.0 )";case"b <- v2":return"( "+t+" != vec2( 0.0 ) )";case"b <- v3":return"( "+t+" != vec3( 0.0 ) )";case"b <- v4":return"( "+t+" != vec4( 0.0 ) )";case"b <- i":return"( "+t+" != 0 )"}return t}getTypeByFormat(t){return lie[t]||t}getFormatByType(t){return uie[t]||t}getUUID(t,e){return e=e!==void 0?e:!0,e&&this.cache&&(t=this.cache+"-"+t),t}getElementByIndex(t){return OL[t]}getIndexByElement(t){return OL.indexOf(t)}isShader(t){return this.shader===t}setShader(t){return this.shader=t,this}mergeDefines(t){for(let e in t)this.defines[e]=t[e];return this.defines}mergeUniform(t){for(let e in t)this.uniforms[e]=t[e];return this.uniforms}getTextureEncodingFromMap(t){let e;return t?t.isTexture&&(e=t.encoding):e=ys,e===ys&&this.context.gamma&&(e=un),e}},Nn=class extends ki{constructor(t=0,e,n,r){super("c"),this.nodeType="Color",this.value=t instanceof Ws?t:new Ws(t||0,e,n,r)}setRGBA(t){this.value.setRGBA(t.r,t.g,t.b,t.a)}generate(t,e,n,r,i,s){n=t.getUUID(n!=null?n:this.getUUID()),r=r!=null?r:this.getType(t);let o=t.getNodeData(n),a=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(t,"f");t.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return a?this.generateReadonly(t,e,n,r,i,s):t.isShader("vertex")?(o.vertex||(o.vertex=t.createVertexUniform(r,this,i,s,this.getLabel())),t.format(o.vertex.name,r,e)):(o.fragment||(o.fragment=t.createFragmentUniform(r,this,i,s,this.getLabel())),t.format(o.fragment.name,r,e))}generateReadonly(t,e,n,r,i,s){return t.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",r,e)}},on=class extends ki{constructor(t){super("i"),this.nodeType="Int",this.value=Math.floor(t!=null?t:0)}generateReadonly(t,e,n,r,i,s){return t.format(this.value.toString(),r,e)}},Xk=class extends Pl{constructor(){super("basic"),this.nodeType="Basic",this.color=new Nn(5855577),this.shadingAlpha=new et(1),this.shadingBlend=new on(0)}generate(t){let e;if(t.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform(qu.merge([Ue.fog])),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];n&&r.push(n.code,n.result?"displaced_position = "+n.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=r.join(`
`)}else{this.color===void 0&&(this.color=new Nn(5855577)),this.color.analyze(t,{slot:"color"}),this.alpha&&this.alpha.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"});let n=this.color.flow(t,"c",{slot:"color"}),r=this.alpha?this.alpha.flow(t,"f"):void 0,i=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0;t.requires.transparent=r!==void 0,t.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let s=["#include <normal_fragment_begin>",n.code];r&&s.push(r.code,"#ifdef ALPHATEST"," if ( "+r.result+" <= ALPHATEST ) discard;","#endif"),i?s.push(i.code,`vec3 outgoingLight = ${n.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${i.result}, 1.0, SPE_BLENDING_NORMAL);`):s.push(`vec3 finalColor = ${n.result};`),r?s.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${r.result} );`):s.push("gl_FragColor = vec4("+n.result+", 1.0 );"),s.push("#include <fog_fragment>","#include <dithering_fragment>"),e=s.join(`
`)}return e}},tf=class extends ki{constructor(t){super("b"),this.nodeType="Bool",this.value=t!=null?t:!1}generateReadonly(t,e,n,r){return t.format(this.value?"true":"false",r,e)}},Yk=class extends ki{constructor(t){super("m3"),this.nodeType="Matrix3",this.value=t!=null?t:new ir}generateReadonly(t,e,n,r,i,s){return t.format("mat3("+this.value.elements.join(", ")+")",r,e)}get elements(){return this.value.elements}set elements(t){this.value.fromArray(t)}},tu=class extends ki{constructor(t=1,e){super("f[]"),this.nodeType="FloatArray",this.size=t,this.value=Array.isArray(e)?e:typeof e=="number"?new Array(t).fill(e):new Array(t).fill(0)}},nu=class extends ki{constructor(t=1,e){super("v4[]"),this.nodeType="Vector4Array",this.size=t,this.value=Array.isArray(e)?e:e instanceof St?new Array(t).fill(e):new Array(t).fill(new St(0))}},o3=(t=>(t.SIMPLEX="simplex3d",t.SIMPLEX_FRACTAL="simplex3dFractal",t.ASHIMA="simplexAshima",t.FBM="fbm",t.PERLIN="perlin",t))(o3||{}),cs=function(){let t=new it(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),e=new it(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[t]);e.keywords.F3=new tn("float F3 0.3333333"),e.keywords.G3=new tn("float G3 0.1666667");let n=new it(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[e]),r=new it("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),i=new it("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),s=new it(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[r,i]),o=new it("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),a=new it("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[o]),l=new it(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[a]),c=new it(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[l]);c.keywords.NUM_OCTAVES=new tn(`int NUM_OCTAVES ${5}`);let d=new it("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),u=new it(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[r,i,d]);return{simplex:e,simplexFractal:n,simplexAshima:s,fbm:c,perlin:u}}(),Zk=class extends dn{constructor(t,e,n,r,i,s,o,a,l,c,d,u){super("v3"),this.nodeType="Noise",this.scale=t,this.size=e,this.move=n,this.fA=r,this.fB=i,this.distortion=s,this.colorA=o,this.colorB=a,this.colorC=l,this.colorD=c,this.alpha=d,this.noiseType=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e,n,r,i){t.require("uv"),t.requires.uv=[!0],t.addFragmentVariable(this.calpha,"float");let s=Object.values(o3)[this.noiseType.value],o=new it(`vec3 ${s}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, float alpha, out float calpha) {
                vec3 st = position / size;
				st /= scale;
				vec3 q = vec3(${s}(st),
							  ${s}(st + vec3(1.0)),
							  ${s}(st + vec3(1.0)));
				vec3 r = vec3(${s}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
							  ${s}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
							  ${s}(st * q));
				float f = ${s}(st + r);
				vec4 color;
				color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
				color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
				color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));

                float lalpha = alpha * color.a;
                calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			    accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return clamp(color, 0.0, 1.0).rgb;
			}`,[cs.simplex,cs.simplexFractal,cs.simplexAshima,cs.fbm,cs.perlin]),a=t.include(o),l=[];return l.push(this.scale.build(t,"f")),l.push(this.size.build(t,"v3")),l.push(this.move.build(t,"f")),l.push(this.fA.build(t,"v2")),l.push(this.fB.build(t,"v2")),l.push(this.distortion.build(t,"v2")),l.push(this.colorA.build(t,"v4")),l.push(this.colorB.build(t,"v4")),l.push(this.colorC.build(t,"v4")),l.push(this.colorD.build(t,"v4")),l.push(this.alpha.build(t,"f")),l.push(this.calpha),t.format(a+"("+l.join(",")+")",this.getType(t),e)}};Zk.numOctaves=5;var die=class extends Pl{constructor(){super("phong"),this.nodeType="Phong",this.color=new Nn(5855577),this.specular=new Nn(1118481),this.shininess=new et(30),this.shadingAlpha=new et(1),this.shadingBlend=new on(0)}build(t){let e;if(t.define("PHONG"),t.requires.lights=!0,t.extensions.derivatives=!0,t.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform(qu.merge([Ue.fog,Ue.lights])),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif


				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];n&&r.push(n.code,n.result?"displaced_position = "+n.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=r.join(`
`)}else{t.mergeUniform({penumbraSize:ss.penumbraSize}),this.color===void 0&&(this.color=new Nn(5855577)),this.color.analyze(t,{slot:"color"}),this.specular.analyze(t),this.shininess.analyze(t),this.shadingAlpha.analyze(t),this.shadingBlend.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(t);let n=this.color.flow(t,"c",{slot:"color"}),r=this.specular.flow(t,"c"),i=this.shininess.flow(t,"f"),s=this.shadingAlpha.flow(t,"f"),o=this.shadingBlend.flow(t,"i"),a=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(t,"f"):void 0;t.requires.transparent=l!==void 0,t.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;",`uniform float penumbraSize[${5}];`,"#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];c.push(n.code,"	vec3 diffuseColor = "+n.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",r.code,"	vec3 specular = "+r.result+";",i.code,"	float shininess = max( 0.0001, "+i.result+" );","	float specularStrength = 1.0;"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;"),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${o.result} );
				}
				`),a&&c.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),e=c.join(`
`)}return e}},Jk=class extends dn{constructor(t,e,n,r,i,s,o){super("v3"),this.nodeType="Fresnel",this.color=t,this.bias=e,this.scale=n,this.intensity=r,this.factor=i,this.alpha=s,this.mode=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.require("vWorldViewDir"),t.require("worldNormal"),t.isShader("fragment")){t.addFragmentVariable(this.calpha,"float");let n=t.include(Jk.Nodes.fresnel),r=[];return r.push(this.color.build(t,"c")),r.push(this.bias.build(t,"f")),r.push(this.scale.build(t,"f")),r.push(this.intensity.build(t,"f")),r.push(this.factor.build(t,"f")),r.push(this.alpha.build(t,"f")),r.push(this.mode.build(t,"i")),r.push(this.calpha),t.format(n+"("+r.join(",")+")",this.getType(t),e)}else return console.warn("FresnelNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},Qk=Jk;Qk.Nodes=function(){return{fresnel:new it(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, float alpha, int mode, out float calpha) {
				float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

				float lalpha = clamp( fresnel, 0.0, 1.0 ) * alpha;
				calpha = lalpha / clamp(lalpha + accumAlpha, 0.001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;
				return color;
			}`)}}();var Kk=class extends dn{constructor(t,e,n,r,i,s,o){super("v3"),this.nodeType="Rainbow",this.filmThickness=t,this.movement=e,this.wavelengths=n,this.noiseStrength=r,this.noiseScale=i,this.offset=s,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.require("vWorldViewDir"),t.require("worldNormal"),t.isShader("fragment")){t.require("uv"),t.requires.uv=[!0],t.addFragmentVariable(this.calpha,"float");let n=t.include(Kk.Nodes.rainbow),r=[];return r.push(this.filmThickness.build(t,"f")),r.push(this.movement.build(t,"f")),r.push(this.wavelengths.build(t,"v3")),r.push(this.noiseStrength.build(t,"f")),r.push(this.noiseScale.build(t,"f")),r.push(this.offset.build(t,"v3")),r.push(this.alpha.build(t,"f")),r.push(this.calpha),t.format(n+"("+r.join(",")+")",this.getType(t),e)}else return console.warn("RainbowNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},e5=Kk;e5.Nodes=function(){let t=new it(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[cs.simplex]);return{rainbow:new it(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, float alpha, out float calpha) {
                 vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

                 float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);
                 float lalpha = alpha * rainbowContribution;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

                 return res;
             }`,[t])}}();var t5=class extends dn{constructor(t,e,n,r,i,s,o,a,l,c,d,u,h,m,g,x){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=t,this.contourColor=e,this.outlineWidth=n,this.contourWidth=r,this.contourThreshold=i,this.outlineThreshold=s,this.contourFrequency=o,this.outlineSmoothing=a,this.contourDirection=l,this.positionalLines=c,this.compensation=d,this.resolution=u,this.normalMap=h,this.depthMap=m,this.pixelRatio=g,this.alpha=x,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.require("vWorldViewDir"),t.require("worldNormal"),t.extensions.derivatives=!0,this.firstTime){let n=this.outlineWidth.build(t,"f"),r=this.resolution.build(t,"v2"),i=this.compensation.build(t,"b"),s=this.pixelRatio.build(t,"f");t.addVertexParsVariable("randomColor","attribute vec3"),t.addVertexParsVariable("extrudeNormal","attribute vec3"),t.addVertexParsVariable(n,"uniform float"),t.addVertexParsVariable(r,"uniform vec2"),t.addVertexParsVariable(i,"uniform bool"),t.addVertexParsVariable(s,"uniform float"),t.addVertexParsVariable("vID","flat out float"),t.addFragmentParsVariable("vID","flat in float");let o=`g${this.uuid.toString().replace(/-/g,"")}`;t.addVertexFinalCode(`
                vID = randomColor.r;
                if (${i}) {
                    vec4 ${o}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${o}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    vec2 ${o}_offset = normalize(${o}_clipNormal.xy) / ${r} * (${n} / 2.0) * ${o}_clipPosition.w * 2.0 * ${s};
                    ${o}_clipPosition.xy += ${o}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${o}_clipPosition;
                }
            `)}if(t.isShader("fragment")){t.require("uv"),t.requires.uv=[!0],t.addFragmentVariable(this.calpha,"float");let n=t.include(t5.Nodes.outline),r=[];return r.push(this.outlineColor.build(t,"c")),r.push(this.contourColor.build(t,"c")),r.push(this.outlineWidth.build(t,"f")),r.push(this.contourWidth.build(t,"f")),r.push(this.contourThreshold.build(t,"f")),r.push(this.outlineThreshold.build(t,"f")),r.push(this.contourFrequency.build(t,"f")),r.push(this.outlineSmoothing.build(t,"f")),r.push(this.contourDirection.build(t,"v3")),r.push(this.positionalLines.build(t,"b")),r.push(this.resolution.build(t,"v2")),r.push(this.normalMap.getTexture(t,"t")),r.push(this.depthMap.getTexture(t,"t")),r.push(this.pixelRatio.build(t,"f")),r.push(this.compensation.build(t,"b")),r.push(this.alpha.build(t,"f")),r.push(this.calpha),this.firstTime=!this.firstTime,t.format(n+"("+r.join(",")+")",this.getType(t),e)}else return console.warn("OutlineNode is not compatible with "+t.shader+" shader."),""}},n5=t5;n5.Nodes=function(){let t=new it(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 texelSize = (vec2(1.0) / resolution) * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -texelSize.x, -texelSize.y);
	uvSamples[1] = uv + vec2(0.0, -texelSize.y);
	uvSamples[2] = uv + vec2(  texelSize.x, -texelSize.y);
	uvSamples[3] = uv + vec2( -texelSize.x, 0.0);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  texelSize.x, 0.0);
	uvSamples[6] = uv + vec2( -texelSize.x, texelSize.y);
	uvSamples[7] = uv + vec2(0.0, texelSize.y);
	uvSamples[8] = uv + vec2(  texelSize.x, texelSize.y);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec4 sobel_edge_h = normalSamples[2] + (2.0*normalSamples[5]) + normalSamples[8] - (normalSamples[0] + (2.0*normalSamples[3]) + normalSamples[6]);
  	vec4 sobel_edge_v = normalSamples[0] + (2.0*normalSamples[1]) + normalSamples[2] - (normalSamples[6] + (2.0*normalSamples[7]) + normalSamples[8]);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new it(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
                 return result;
             }`,[t])}}();var r5=class extends dn{constructor(t,e,n,r,i,s,o,a){super("v3"),this.nodeType="Transmission",this.thickness=t,this.ior=e,this.roughness=n,this.transmissionSamplerSize=r,this.transmissionSamplerMap=i,this.transmissionDepthMap=s,this.aspectRatio=o,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.extensions.shaderTextureLOD=!0,t.extensions.derivatives=!0,t.isShader("fragment")){t.define("NUM_SAMPLES",30),t.require("worldPosition"),t.requires.worldNormal=!0,t.requires.modelMatrix=!0,t.requires.projectionMatrix=!0,t.addFragmentVariable(this.calpha,"float");let n=t.include(r5.Nodes.transmission),r=[];return r.push(this.thickness.build(t,"f")),r.push(this.ior.build(t,"f")),r.push(this.roughness.build(t,"f")),r.push(this.transmissionSamplerSize.build(t,"v2")),r.push(this.transmissionSamplerMap.getTexture(t,"t")),r.push(this.transmissionDepthMap.getTexture(t,"t")),r.push(this.aspectRatio.build(t,"v2")),r.push("normal"),r.push(this.alpha.build(t,"f")),r.push(this.calpha),t.format(n+"("+r.join(",")+")",this.getType(t),e)}else return console.warn("TransmissionNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},i5=r5;i5.Nodes=function(){let t=new it(`
            float gaussian(vec2 i) {
                const float sigma = float(NUM_SAMPLES) * .25;
                return exp( -.5* dot(i/=sigma,i) ) / ( 6.28 * sigma*sigma );
            }`),e=new it(`
            vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

                const int LOD = 2;
                const int sLOD = 4; // tile size = 2^LOD

                vec3 O = vec3(0);
                float a = 0.0;
                const int s = NUM_SAMPLES/sLOD;
                for ( int i = 0; i < s*s; i++ ) {
                    int modulo = (i)-((i)/(s))*(s);
                    vec2 d = vec2(float(modulo), float(i/s))*float(sLOD) - float(NUM_SAMPLES)/2.;
                    vec2 uv = U + (scale * aspectRatio) * d;
                    // What is the depth of the opaque object we're trying to sample
                    float opaqueDepth = unpackRGBAToDepth(texture2D(dm, uv));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU + ((scale * min(lod / 2., 1.)) * aspectRatio) * d;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    float gaussian = gaussian(d);
		            #ifdef TEXTURE_LOD_EXT
                    O += gaussian * texture2DLodEXT( sp, uv, lod).rgb;
                    #else
                    O += gaussian * textureLod( sp, uv, lod).rgb;
                    #endif
                    a += gaussian;
                }
                return O / a;
            }`,[t]),n=new it(`
            vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        // Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		        // The thickness is specified in local space.
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),r=new it(`
float applyIorToRoughness( float roughness, float ior ) {
		// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
		// an IOR of 1.5 results in the default amount of microfacet refraction.
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	} `),i=new it(`
vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
        float lod = applyIorToRoughness(roughness, ior);

        return blur(transmissionSamplerMap, fragCoord, vec2(lod / (transmissionSamplerSize.x / 2.)), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
	}`,[r,e]),s=new it(`
vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
        vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
        vec3 refractedRayExit = position + transmissionRay;

        // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
        vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
        vec2 refractionCoords = ndcPos.xy / ndcPos.w;
        refractionCoords += 1.0;
        refractionCoords /= 2.0;

        vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
        vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
        unrefractedCoords += 1.0;
        unrefractedCoords /= 2.0;

        // Sample framebuffer to get pixel the refracted ray hits.
        return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    }`,[i,n]);return{transmission:new it(`
            vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                float lalpha = alpha;

                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
                 return transmission;
            }`,[s])}}();var pf=class extends dn{constructor(t,e,n,r,i,s,o,a,l,c,d){super("v3"),this.nodeType="Depth",this.gradientType=t,this.smooth=e,this.near=n,this.far=r,this.isVector=i,this.isWorldSpace=s,this.origin=o,this.direction=a,this.colors=l,this.steps=c,this.alpha=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){let n=`g${this.uuid.toString().replace(/-/g,"")}`,r=new it(`vec3 ${n}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${n}_MAX_COLORS], float steps[${n}_MAX_COLORS], float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${n}_IS_VECTOR
                   #ifdef ${n}_LINEAR
                       #ifdef ${n}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${n}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${n}_SMOOTH
				for ( int i = 1; i < ${n}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${n}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a;
               calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			   accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
               return color.rgb;
			}`,[pf.Nodes.vectorLinearWorldSpaceDepth,pf.Nodes.vectorLinearObjectSpaceDepth,pf.Nodes.vectorSphericalObjectSpaceDepth,pf.Nodes.vectorSphericalWorldSpaceDepth]);if(t.isShader("fragment")){t.define(`${n}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&t.define(`${n}_SMOOTH`),this.isVector.value>.5&&t.define(`${n}_IS_VECTOR`),this.gradientType.value===0&&t.define(`${n}_LINEAR`),this.isWorldSpace.value>.5&&t.define(`${n}_WORLDSPACE`),t.require("worldPosition"),t.addFragmentVariable(this.calpha,"float");let i=t.include(r),s=[];return s.push(this.near.build(t,"f")),s.push(this.far.build(t,"f")),s.push(this.origin.build(t,"v3")),s.push(this.direction.build(t,"v3")),s.push(this.colors.build(t,"v4[]")),s.push(this.steps.build(t,"f[]")),s.push(this.alpha.build(t,"f")),s.push(this.calpha),t.format(i+"("+s.join(",")+")",this.getType(t),e)}else return console.warn("DepthNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},s5=pf;s5.Nodes=function(){let t=new it(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),e=new it(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),n=new it(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),r=new it(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:t,vectorLinearObjectSpaceDepth:e,vectorSphericalWorldSpaceDepth:n,vectorSphericalObjectSpaceDepth:r}}();var IL=class extends dn{constructor(t,e,n,r){super("v3"),this.nodeType="Blend",this.a=t,this.b=e,this.alpha=n,this.mode=r}generate(t,e){if(t.isShader("fragment")){let n=[];return n.push(this.a.build(t,"c")),n.push(this.b.build(t,"c")),n.push(this.alpha.build(t,"f")),n.push(this.mode.build(t,"i")),t.format("spe_blend("+n.join(",")+")",this.getType(t),e)}else return console.warn("BlendNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},Ib=(t=>(t.NOISE="noise",t.MAP="map",t))(Ib||{}),o5=class extends dn{constructor(t,e,n,r,i){super("v3"),this.displacementTypeIndex=new on(0),this.nodeType="VertexDisplacement",this.intensity=t,this.movementOrTexture=e,Object.values(Ib)[this.displacementTypeIndex.value]==="map"&&(this.mat=new Yk(this.movementOrTexture.value.matrix)),this.cropOrOffset=n,this.scale=r,this.noiseFunctionIndex=i}generate(t,e){if(t.isShader("vertex")){t.define("USE_LAYER_DISPLACE");let n,r=[];switch(r.push("displaced_position"),r.push("displaced_normal"),Object.values(Ib)[this.displacementTypeIndex.value]){case"map":{n=t.include(o5.Nodes.map),r.push(this.movementOrTexture.getTexture(t,"t")),r.push("uv"),r.push(this.cropOrOffset.build(t,"f")),this.mat&&r.push(this.mat.build(t,"mat3"));break}case"noise":{let i=Object.values(o3)[this.noiseFunctionIndex.value],s=new it(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),o=new it(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement) {
							return p + n * ${i}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
						}`,[cs.simplex,cs.simplexFractal,cs.simplexAshima,cs.fbm,cs.perlin]),a=new it(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[o,s]);n=t.include(a),r.push(this.scale.build(t,"f")),r.push(this.cropOrOffset.build(t,"v3")),r.push(this.movementOrTexture.build(t,"f"));break}}return r.push(this.intensity.build(t,"f")),r.push("displaced_normal"),t.format(n+"("+r.join(",")+")",this.getType(t),e)}else return console.warn("VertexDisplacementNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},a5=o5;a5.Nodes=function(){let t=new it(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),e=new it(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new it(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[t,e])}}();var l5=class extends dn{constructor(t,e,n,r,i,s,o,a){super("v3"),this.nodeType="Gradient",this.gradientType=t,this.smooth=e,this.colors=n,this.steps=r,this.offset=i,this.morph=s,this.angle=o,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.isShader("fragment")){t.define("GRAD_MAX",10),t.require("uv"),t.requires.uv=[!0],t.addFragmentVariable(this.calpha,"float");let n=t.include(l5.Nodes.gradient),r=[];return r.push(this.gradientType.build(t,"i")),r.push(this.smooth.build(t,"b")),r.push(this.colors.build(t,"v4[]")),r.push(this.steps.build(t,"f[]")),r.push(this.offset.build(t,"v2")),r.push(this.morph.build(t,"v2")),r.push(this.angle.build(t,"f")),r.push(this.alpha.build(t,"f")),r.push(this.calpha),t.format(n+"("+r.join(",")+")",this.getType(t),e)}else return console.warn("GradientNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},u5=l5;u5.Nodes=function(){return{gradient:new it(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return color.xyz;
			}`)}}();var G0=class extends dn{constructor(t,e,n,r,i,s,o,a,l,c){super("v3"),this.nodeType="CustomTexture",this.firstTime=!0,this.texture=t,this.textureSize=e,this.crop=n,this.projection=r,this.axis=i,this.side=s,this.size=o,this.mat=a,this.alpha=l,this.mode=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){t.require("position"),t.require("normal"),t.require("uv"),t.requires.uv=[!0],t.extensions.shaderTextureLOD=!0,t.extensions.derivatives=!0;let n=`g${this.uuid.toString().replace(/-/g,"")}`,r;switch(this.projection.value){case 3:r=t.include(G0.Nodes.cylindrical);break;case 2:r=t.include(G0.Nodes.spherical);break;case 1:let s=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],o=new it(`
		vec3 ${n}_planarTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( (${n}_vCustomUv * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, mat * ${s}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);r=t.include(o);break;default:r=t.include(G0.Nodes.uv);break}if(this.projection.value===1&&this.firstTime){t.addVertexParsCode(`varying vec2 ${n}_vCustomUv;`),t.addFragmentParsCode(`varying vec2 ${n}_vCustomUv;`);let s=["zy","xz","xy"][this.axis.value];t.addVertexFinalCode(`${n}_vCustomUv = (1. + (transformed.${s})) / 2.;`)}t.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.texture.generate(t,"t")),i.push(this.textureSize.build(t,"v2")),i.push(this.crop.build(t,"f")),i.push(this.mat.build(t,"mat3")),i.push(this.size.build(t,"v2")),i.push(this.alpha.build(t,"f")),i.push(this.mode.build(t,"i")),i.push(this.calpha),this.firstTime=!this.firstTime,t.format(r+"("+i.join(",")+")",this.getType(t),e)}},c5=G0;c5.Nodes=function(){let t=new it(`
vec3 cylindricalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),e=new it(`
vec3 sphericalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),n=new it(`vec3 uvTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);return{cylindrical:t,spherical:e,uv:n}}();var d5=class extends dn{constructor(t,e){super("v3"),this.nodeType="CustomNormal",this.cnormal=t,this.alpha=e}generate(t,e){if(t.isShader("fragment")){let n=t.include(d5.Nodes.customNormal),r=[];return r.push(this.cnormal.build(t,"v3")),r.push("normal"),r.push(this.alpha.build(t,"f")),t.format(n+"("+r.join(",")+")",this.getType(t),e)}else return console.warn("CustomNormalNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},h5=d5;h5.Nodes=function(){return{customNormal:new it(`vec3 customNormal(vec3 cnormal, vec3 norm, float alpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return normal;
			}`)}}();var ss={normalRenderTarget:new Qa,normalRenderTargetDepth:new Qa,transmissionRenderTarget:new Qa,transmissionSize:new is(2048,2048),transmissionRenderTargetDepth:new Qa,pixelRatioNode:new et(1),resolution:new is,penumbraSize:new tu(5,.5)};for(let t of Object.values(ss))t.isRenderGlobal=!0;var hie=class extends Pl{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new Nn(5855577),this.emissive=new Nn(0),this.emissiveIntensity=new et(1),this.shadingAlpha=new et(1),this.shadingBlend=new on(0)}build(t){let e;if(t.define("LAMBERT"),t.requires.lights=!0,t.extensions.derivatives=!0,t.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform(qu.merge([Ue.fog,Ue.lights])),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];n&&r.push(n.code,n.result?"displaced_position = "+n.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=r.join(`
`)}else{t.mergeUniform({penumbraSize:ss.penumbraSize}),this.color===void 0&&(this.color=new Nn(5855577)),this.color.analyze(t,{slot:"color"}),this.shadingAlpha.analyze(t),this.shadingBlend.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(t);let n=this.color.flow(t,"c",{slot:"color"}),r=this.emissive.flow(t,"c",{slot:"emissive"}),i=this.emissiveIntensity.flow(t,"f",{slot:"emissive"}),s=this.shadingAlpha.flow(t,"f"),o=this.shadingBlend.flow(t,"i"),a=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(t,"f"):void 0;t.requires.transparent=l!==void 0,t.addParsCode([`uniform float penumbraSize[${5}];`,"varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];c.push(n.code,"vec3 diffuseColor = "+n.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),r&&c.push(r.code,"reflectedLight.directDiffuse += "+r.result+" * "+i.result+";"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;"),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${o.result} );
				}
				`),a&&c.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),e=c.join(`
`)}return e}},fie=class extends Pl{constructor(){super("standard"),this.nodeType="Standard",this.color=new Nn(5855577),this.roughness=new et(.3),this.metalness=new et(0),this.reflectivity=new et(.5),this.shadingAlpha=new et(1),this.shadingBlend=new on(0)}build(t){let e;if(t.define("STANDARD"),t.requires.lights=!0,t.extensions.derivatives=!0,t.extensions.shaderTextureLOD=!0,t.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform(qu.merge([Ue.fog,Ue.lights])),Ue.LTC_1&&(t.uniforms.ltc_1={value:void 0},t.uniforms.ltc_2={value:void 0}),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];n&&r.push(n.code,n.result?"displaced_position = "+n.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=r.join(`
`)}else{t.mergeUniform({penumbraSize:ss.penumbraSize});let n={gamma:!0};this.color===void 0&&(this.color=new Nn(5855577)),this.color.analyze(t,{slot:"color",context:n}),this.roughness.analyze(t),this.metalness.analyze(t),this.shadingAlpha.analyze(t),this.shadingBlend.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(t),this.reflectivity&&this.reflectivity.analyze(t);let r=this.color.flow(t,"c",{slot:"color",context:n}),i=this.roughness.flow(t,"f"),s=this.metalness.flow(t,"f"),o=this.shadingAlpha.flow(t,"f"),a=this.shadingBlend.flow(t,"i"),l=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(t,"f"):void 0,d=this.reflectivity?this.reflectivity.flow(t,"f"):void 0;t.requires.transparent=c!==void 0,t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;",`uniform float penumbraSize[${5}];`,"#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let u=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];u.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",i.code,"	float roughnessFactor = "+i.result+";",s.code,"	float metalnessFactor = "+s.result+";"),c&&u.push(c.code,"#ifdef ALPHATEST","	if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),u.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),u.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),d?u.push(d.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+d.result+" ) ), diffuseColor, metalnessFactor );"):u.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),u.push("#include <lights_fragment_begin>"),u.push("#include <lights_fragment_end>"),u.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;"),u.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result}, ${a.result} );
				}
				`),l&&u.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),e=u.join(`
`)}return e}},pie=class extends Pl{constructor(){super("toon"),this.nodeType="Toon",this.color=new Nn(5855577),this.specular=new Nn(1118481),this.shininess=new et(30),this.shadingAlpha=new et(1),this.shadingBlend=new on(0)}build(t){let e;if(t.define("TOON"),t.requires.lights=!0,t.extensions.derivatives=!0,t.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform(qu.merge([Ue.fog,Ue.lights])),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];n&&r.push(n.code,n.result?"displaced_position = "+n.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=r.join(`
`)}else{t.mergeUniform({penumbraSize:ss.penumbraSize}),this.color===void 0&&(this.color=new Nn(5855577)),this.color.analyze(t,{slot:"color"}),this.specular.analyze(t),this.shininess.analyze(t),this.shadingAlpha.analyze(t),this.shadingBlend.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(t);let n=this.color.flow(t,"c",{slot:"color"}),r=this.specular.flow(t,"c"),i=this.shininess.flow(t,"f"),s=this.shadingAlpha.flow(t,"f"),o=this.shadingBlend.flow(t,"i"),a=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(t,"f"):void 0;t.requires.transparent=l!==void 0,t.addParsCode([`uniform float penumbraSize[${5}];`,"varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];c.push(n.code,"	vec3 diffuseColor = "+n.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",r.code,"	vec3 specular = "+r.result+";",i.code,"	float shininess = max( 0.0001, "+i.result+" );","	float specularStrength = 1.0;"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${o.result} );
				}
				`),a&&c.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),e=c.join(`
`)}return e}};function mie(t,e){switch(t.type){case"fresnel":return yie(t,e);case"gradient":return xie(t);case"depth":return _ie(t);case"normal":return wie(t);case"noise":return Sie(t,e);case"rainbow":return bie(t);case"toon":return Mie(t,e);case"outline":return Eie(t,e);case"transmission":return Tie(t);case"color":return vie(t,e)}}function gie(t){return{type:t.type}}function Co(t){let{alpha:e,mode:n}=t;return{...gie(t),alpha:e,mode:n}}function vie(t,e){return{...Co(t),color:ui(t.color,e)}}function yie(t,e){let{bias:n,scale:r,intensity:i,factor:s,color:o}=t;return{...Co(t),color:ui(o,e),bias:n,scale:r,intensity:i,factor:s}}function xie(t){let{gradientType:e,smooth:n,colors:r,steps:i,angle:s,offset:o,morph:a}=t;return{...Co(t),gradientType:e,smooth:n,colors:r.map(l=>new St(l[0],l[1],l[2],l[3])),num:r.length,steps:i,offset:new se(...o),morph:new se(...a),angle:s}}function _ie(t){let{gradientType:e,near:n,far:r,isVector:i,isWorldSpace:s,origin:o,direction:a,colors:l,steps:c,smooth:d}=t;return{...Co(t),gradientType:e,near:n,far:r,isVector:i,isWorldSpace:s,origin:new R(...o),direction:a?new R(...a):new R(1,0,0),colors:l.map(u=>u!==void 0?new St(u[0],u[1],u[2],u[3]):new St(0,0,0,0)),steps:c.slice(0,l.length),smooth:d}}function wie(t){let{cnormal:e}=t;return{...Co(t),cnormal:new R(e[0],e[1],e[2])}}function Sie(t,e){return{...Co(t),scale:t.scale,move:t.move,fA:new se(...t.fA),fB:new se(...t.fB),size:new R(...t.size),distortion:new se(...t.distortion),colorA:ui(t.colorA,e),colorB:ui(t.colorB,e),colorC:ui(t.colorC,e),colorD:ui(t.colorD,e),noiseType:t.noiseType}}function bie(t){return{...Co(t),filmThickness:t.filmThickness,movement:t.movement,wavelengths:new R(...t.wavelengths),noiseStrength:t.noiseStrength,noiseScale:t.noiseScale,offset:new R(...t.offset)}}function Mie(t,e){return{...Co(t),positioning:t.positioning,colors:t.colors.map(n=>new St(n[0],n[1],n[2],n[3])),num:t.colors.length,steps:t.steps,source:new R(...t.source),isWorldSpace:t.isWorldSpace,noiseStrength:t.noiseStrength,noiseScale:t.noiseScale,shadowColor:ui(t.shadowColor,e),offset:new R(...t.offset)}}function Eie(t,e){return{...Co(t),outlineColor:ui(t.outlineColor,e),contourColor:ui(t.contourColor,e),outlineWidth:t.outlineWidth,contourWidth:t.contourWidth,outlineThreshold:t.outlineThreshold,contourThreshold:t.contourThreshold,outlineSmoothing:t.outlineSmoothing,contourFrequency:t.contourFrequency,contourDirection:t.contourDirection,positionalLines:t.positionalLines,compensation:t.compensation}}function Tie(t,e){return{...Co(t),thickness:t.thickness,ior:t.ior,roughness:t.roughness}}var kv=class extends Ws{},nw=new Map,If={url:"head",time:0,data:null,next:null,prev:null},ad={url:"tail",time:1/0,data:null,next:null,prev:null};If.next=ad;ad.prev=If;var DL=0;function Aie(t){if(typeof t=="string")return t;let e=Date.now(),n=nw.get(t);return n===void 0?(n={url:URL.createObjectURL(new Blob([t])),data:t,time:e,next:null,prev:null},nw.set(t,n)):(n.time=e,n.prev.next=n.next,n.next.prev=n.prev),n.prev=ad.prev,n.next=ad,ad.prev.next=n,ad.prev=n,e-DL>1e3*10&&(DL=e+1e3,setTimeout(()=>{let r=Date.now(),i=If.next;for(;i.time<r-1e3*10;)URL.revokeObjectURL(i.url),nw.delete(i.data),i=i.next,i.prev=If,If.next=i},900)),n.url}var f5=class{constructor(t,e){this.data=t,this.onImageLoad=e,this.loaded=!1,this.updateSrc(t.data)}updateSrc(t){typeof document>"u"||(this.dispose(),this.loaded=!1,this.img=new Image,this.img.src=Aie(t),this.img.onload=()=>{this.loaded=!0;let e=[1e3,1001,1002];for(let n of e){let r=this[n];r&&(r.image=this.img,r.needsUpdate=!0)}this.onImageLoad&&this.onImageLoad()})}getTexture(t){let e=this[t];if(e)return e;{let n=new Bn(this.img,void 0,t,t);return this.loaded&&(n.needsUpdate=!0),this[t]=n,n}}dispose(){var t,e,n;(t=this[1e3])==null||t.dispose(),this[1e3]=void 0,(e=this[1001])==null||e.dispose(),this[1001]=void 0,(n=this[1002])==null||n.dispose(),this[1002]=void 0}},Db=class extends f5{},a3=class extends ki{},p5={noise:["noiseType"],texture:["projection","axis","side"],displace:["noiseType"],depth:["smooth","isWorldSpace","gradientType","isVector"]},m5={depth:["colors"]};function Cie(t,e,n){var s,o;let r=p5[t.type],i=m5[t.type];if(i!==void 0){let a=t.color;if(i.includes(e)){let l=(o=(s=a[e])==null?void 0:s.value)==null?void 0:o.length;if(l!==void 0&&l!==n.length)return!0}}return r!==void 0?r.includes(e):!1}function g5(t,e,n){let r=n.uniforms[`f${n.id}_texture`];if(!r)return!1;let i=!1,s=t;if("image"in s){let o=s.image,a=e.image(o),l=r;l instanceof Db||l.image.dispose(),l.image=a}if("wrapping"in s){let o=r;o.wrap=s.wrapping}if("repeat"in s||"offset"in s){let o="mat",a=n.uniforms[`f${n.id}_${o}`];"repeat"in s&&(a.repeat=s.repeat),"offset"in s&&(a.offset=s.offset),a.updateMatrix()}return i}function Pie(t,e,n,r){let i=!1;for(let[s,o]of Object.entries(t)){if(!s||o===void 0)continue;if(S5(s,n,r)){s==="visible"&&n.type==="light"&&(i=!0);continue}n.visible=r.visible;let a=n.uniforms[`f${n.id}_${s}`];if(!!a&&!(a instanceof a3))switch(i=i||Cie(n,s,o),a.constructor){case Nn:if(typeof o=="string"){let l=e.getColor(o);l&&(a.value=l);break}else{let l=o;a.value instanceof kv?a.value=new Ws(l.r,l.g,l.b,l.a):a.setRGBA(l);break}case su:if(typeof o=="string"){let l=e.getColor(o);l&&(a.value=l);break}else{let l=o;a.value instanceof kv?a.value=new Ws(l.r,l.g,l.b,l.a):a.value.setRGBA(l.r,l.g,l.b,l.a);break}case is:{let l=o;a.value.setX(l[0]),a.value.setY(l[1]);break}case ts:{let l=o;a.value.setX(l[0]),a.value.setY(l[1]),a.value.setZ(l[2]);break}case Qa:{g5(o,e,n);break}case nu:{a.value=o.map(l=>new St(...l));break}default:{a.value=o;break}}}return i}var v5=class extends dn{constructor(t,e,n){super("v3"),this.nodeType="Matcap",this.texture=t,this.alpha=e,this.mode=n,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.isShader("fragment")){t.addFragmentVariable(this.calpha,"float");let n=t.include(v5.Nodes.matcap);t.require("normal"),t.requires.normal=!0;let r=[];return r.push(this.texture.generate(t,"t")),r.push("normal"),r.push(this.alpha.build(t,"f")),r.push(this.mode.build(t,"i")),r.push(this.calpha),t.format(n+"("+r.join(",")+")",this.getType(t),e)}else return console.warn("MatcapNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},y5=v5;y5.Nodes=function(){return{matcap:new it(`vec3 matcap(sampler2D matcapTex, vec3 normal, float alpha, int mode, out float calpha) {
                vec3 viewDir = normalize( vViewPosition );
                vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
                vec3 y = cross( viewDir, x );
                vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
                vec4 matcapColor = texture2D( matcapTex, uv );

                calpha =  alpha / clamp( alpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;
                
                return matcapColor.rgb;
            }
            `)}}();var RL=class extends a3{constructor(t,e){super("t"),this.image=t,this.wrap=e}get value(){return this.image.getTexture(this.wrap)}},Lie=class extends a3{constructor(t){super("v3"),this.image=t,this._value=new R}get value(){return this._value.x=this.image.img.width,this._value.y=this.image.img.height,this._value}},x5=class extends dn{constructor(t,e,n,r,i,s,o,a,l,c){super("v3"),this.nodeType="Toon",this.positioning=t,this.colors=e,this.steps=n,this.source=r,this.isWorldSpace=i,this.noiseStrength=s,this.noiseScale=o,this.shadowColor=a,this.offset=l,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.require("worldNormal"),t.require("worldPosition"),t.isShader("fragment")){t.define("COLORS_MAX",10),t.addFragmentVariable(this.calpha,"float");let n=t.include(x5.Nodes.toon),r=[];return r.push(this.positioning.build(t,"i")),r.push(this.colors.build(t,"v4[]")),r.push(this.steps.build(t,"f[]")),r.push(this.source.build(t,"v3")),r.push(this.isWorldSpace.build(t,"b")),r.push(this.noiseStrength.build(t,"f")),r.push(this.noiseScale.build(t,"f")),r.push(this.shadowColor.build(t,"v4")),r.push(this.offset.build(t,"v3")),r.push(this.alpha.build(t,"f")),r.push(this.calpha),t.format(n+"("+r.join(",")+")",this.getType(t),e)}else return console.warn("ToonNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},_5=x5;_5.Nodes=function(){let t=new it(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),e=new it(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),n=new it(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[e]),r=new it(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),i=new it(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[r]);return{toon:new it(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[cs.simplex,t,n,i])}}();function zL(t,e,n){t.setUvTransform(n[0],n[1],e[0],e[1],0,0,0)}var Oie=class extends Yk{constructor(t,e){super(new ir),this.repeat=t,this.offset=e,zL(this.value,t,e)}updateMatrix(){zL(this.value,this.repeat,this.offset)}},Au=class{constructor(t,e,n,r){this.id=t,this.uuid=e,this.data=n,this.uniforms={};for(let i in r)this.uniforms[`f${this.id}_${i}`]=r[i];for(let i in n)S5(i,this,n)}get type(){return this.data.type}static create(t,e,n,r){var i,s,o,a,l,c,d,u,h,m,g;if(n.type==="light")return ld.createLigherLayer(t,e,n,r);if(n.type==="texture"){let x=r.image(n.texture.image),y=new RL(x,n.texture.wrapping),v=new Lie(x),_=new Oie(n.texture.repeat,n.texture.offset),S=new et(n.crop?1:0),b=new on((i=n.projection)!=null?i:0),A=new on((s=["x","y","z"].indexOf(n.axis))!=null?s:0),E=new on((o=n.side)!=null?o:0),C=new is(n.size?new se(n.size[0],n.size[1]):new se(100,100)),T=new et((a=n.alpha)!=null?a:1),O=new on((l=n.mode)!=null?l:0),L=new c5(y,v,S,b,A,E,C,_,T,O),k=new vn(L.calpha,"f");return new zr(t,e,n,{texture:y,textureSize:v,crop:S,projection:b,axis:A,side:E,size:C,mat:_,alpha:T,mode:O},L,O,k)}else if(n.type==="matcap"){let x=r.image(n.texture.image),y=new RL(x,n.texture.wrapping),v=new et((c=n.alpha)!=null?c:1),_=new on((d=n.mode)!=null?d:0),S=new y5(y,v,_),b=new vn(S.calpha,"f");return new zr(t,e,n,{texture:y,alpha:v,mode:_},S,_,b)}else if(n.type==="displace")if(n.displacementType==="noise"){let x=new ts(new R(...n.offset)),y=new et((u=n.scale)!=null?u:10),v=new et((h=n.intensity)!=null?h:8),_=new et((m=n.movement)!=null?m:1),S=new on((g=n.noiseType)!=null?g:0),b=new a5(v,_,x,y,S);return new w5(t,e,n,{offset:x,scale:y,intensity:v,movement:_,noiseType:S},b)}else throw new Error;else return Rie(t,e,n,r)}updateByOp(t,e,n){let r=t;if(r.path[0]===void 0){if(r.type===0)return"type"in r.props||"category"in r.props?!0:Pie(r.props,n,this,e)}else if(r.path[0]==="texture")return"texture"in e?g5(r.props,n,this):!0;return!1}dispose(){}hasValueByKey(t){return this.uniforms[t]!==void 0}hasValue(t){return this.hasValueByKey(`f${this.id}_${t}`)}setValue(t,e){let n=`f${this.id}_${t}`;this.hasValueByKey(n)&&e!==void 0&&(this.uniforms[n].value=e)}getNode(t){let e=`f${this.id}_${t}`;if(this.hasValueByKey(e))return this.uniforms[e]}getValue(t){let e=`f${this.id}_${t}`;if(this.hasValueByKey(e))return this.uniforms[e].value}getName(t){let e=/f\d+_(.*)/.exec(t);if(e&&e.length>1)return e[1];console.log(`Layer.getName: error ${t}`)}getNames(){let t=[];for(let e in this.uniforms){let n=this.getName(e);n&&t.push(n)}return t}},zr=class extends Au{constructor(t,e,n,r,i,s,o){super(t,e,n,r),this.color=i,this.mode=s,this.alpha=o}},w5=class extends Au{constructor(t,e,n,r,i){super(t,e,n,r),this.position=i}},ld=class extends Au{constructor(t,e,n,r,i){super(t,e,n,i),this.data=n,this.node=r}static createLigherLayer(t,e,n,r){var l,c,d,u,h,m,g,x;let i,s=new et(n.alpha),o=new on(n.mode),a;if(!n.visible)i=new Xk,a={};else if(n.category==="lambert"){i=new hie;let y=new Nn((l=r.color(n.emissive))!=null?l:0);a={emissive:y},i.emissive=y}else if(n.category==="toon"){i=new pie;let y=new et((c=n.shininess)!=null?c:30),v=new Nn((d=r.color(n.specular))!=null?d:1118481);a={shininess:y,specular:v},i.shininess=y,i.specular=v}else if(n.category==="physical"){i=new fie;let y=new et((u=n.roughness)!=null?u:.3),v=new et((h=n.metalness)!=null?h:0),_=new et((m=n.reflectivity)!=null?m:.5);a={roughness:y,metalness:v,reflectivity:_},i.roughness=y,i.metalness=v,i.reflectivity=_}else{i=new die;let y=new et((g=n.shininess)!=null?g:30),v=new Nn((x=r.color(n.specular))!=null?x:1118481);a={shininess:y,specular:v},i.shininess=y,i.specular=v}return i.alpha=new et(1),i.shadingAlpha=s,i.shadingBlend=o,a.alpha=i.shadingAlpha,a.mode=i.shadingBlend,new ld(t,e,n,i,a)}};function Iie(t){let e=t instanceof Au?t.type:t;return e==="texture"||e==="displace_map"||e==="matcap"}function Die(t,e,n,r){var i,s,o,a,l,c,d,u,h,m,g,x,y,v,_,S,b,A,E,C,T,O,L,k,B,G,H,Y,te,Z,D,N,z,U,V,X,J,ee,q,re,ie,K,oe,ye,ne,Q,de,pe,ve,Re,Le,De,gt,je,j,F,_e,Ie,ke,Ve,ut,He,Ce,Ge,Je,qe,at,rt,Pt,Wt,pn,ae,be;switch(t.type){case"color":{let Me=new Nn((i=r.color)!=null?i:5855577),Ae=new et((s=r.alpha)!=null?s:1),ze=new vn("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");ze.keywords.alpha=Ae;let Ze=new on((o=r.mode)!=null?o:0);return Me.alpha=Ae,new zr(e,n,t,{color:Me,alpha:Ae,mode:Ze},Me,Ze,ze)}case"fresnel":{let Me=new Nn((a=r.color)!=null?a:16777215),Ae=new et((l=r.bias)!=null?l:.1),ze=new et((c=r.scale)!=null?c:1),Ze=new et((d=r.intensity)!=null?d:2),dt=new et((u=r.factor)!=null?u:1),bt=new et((h=r.alpha)!=null?h:1),Nt=new on((m=r.mode)!=null?m:0),ht=new Qk(Me,Ae,ze,Ze,dt,bt,Nt),zt=new vn(ht.calpha,"f");return new zr(e,n,t,{color:Me,bias:Ae,scale:ze,intensity:Ze,factor:dt,alpha:bt,mode:Nt},ht,Nt,zt)}case"rainbow":{let Me=new et((g=r.filmThickness)!=null?g:30),Ae=new et((x=r.movement)!=null?x:0),ze=new ts((y=r.wavelengths)!=null?y:new R(0,0,0)),Ze=new et((v=r.noiseStrength)!=null?v:0),dt=new et((_=r.noiseScale)!=null?_:1),bt=new ts((S=r.offset)!=null?S:new R(0,0,0)),Nt=new et((b=r.alpha)!=null?b:1),ht=new e5(Me,Ae,ze,Ze,dt,bt,Nt),zt=new vn(ht.calpha,"f"),Ot=new on((A=r.mode)!=null?A:0);return new zr(e,n,t,{filmThickness:Me,movement:Ae,wavelengths:ze,noiseStrength:Ze,noiseScale:dt,offset:bt,alpha:Nt,mode:Ot},ht,Ot,zt)}case"transmission":{let Me=new et((E=r.thickness)!=null?E:10),Ae=new et((C=r.ior)!=null?C:1.5),ze=new et((T=r.roughness)!=null?T:.5),Ze=ss.transmissionSize,dt=ss.transmissionRenderTarget,bt=ss.transmissionRenderTargetDepth,Nt=window.innerWidth,ht=window.innerHeight,zt=Nt>=ht?new is(ht/Nt,1):new is(1,Nt/ht),Ot=new et((O=r.alpha)!=null?O:1),Fn=new i5(Me,Ae,ze,Ze,dt,bt,zt,Ot),Vr=new vn(Fn.calpha,"f"),ar=new on((L=r.mode)!=null?L:0);return new zr(e,n,t,{thickness:Me,ior:Ae,roughness:ze,aspectRatio:zt,alpha:Ot,mode:ar},Fn,ar,Vr)}case"toon":{let Me=new on((k=r.positioning)!=null?k:0),Ae;r.colors?Ae=new nu(r.colors.length,r.colors):(Ae=new nu(10,new St(0,0,0,1)),Ae.value[1]=new St(1,1,1,1));let ze;r.steps?ze=new tu(r.steps.length,r.steps):(ze=new tu(10,1),ze.value[0]=0);let Ze=new ts((B=r.source)!=null?B:new R(0,0,0)),dt=new tf((G=r.isWorldSpace)!=null?G:!0),bt=new et((H=r.noiseStrength)!=null?H:0),Nt=new et((Y=r.noiseScale)!=null?Y:1),ht=new su(r.shadowColor),zt=new ts((te=r.offset)!=null?te:new R(0,0,0)),Ot=new et((Z=r.alpha)!=null?Z:1),Fn=new _5(Me,Ae,ze,Ze,dt,bt,Nt,ht,zt,Ot),Vr=new vn(Fn.calpha,"f"),ar=new on((D=r.mode)!=null?D:0);return new zr(e,n,t,{positioning:Me,colors:Ae,steps:ze,source:Ze,isWorldSpace:dt,noiseStrength:bt,noiseScale:Nt,shadowColor:ht,offset:zt,alpha:Ot,mode:ar},Fn,ar,Vr)}case"outline":{let Me=new Nn((N=r.outlineColor)!=null?N:16777215),Ae=new Nn((z=r.contourColor)!=null?z:16777215),ze=new et((U=r.outlineWidth)!=null?U:.1),Ze=new et((V=r.contourWidth)!=null?V:.1),dt=new et((X=r.outlineThreshold)!=null?X:.1),bt=new et((J=r.contourThreshold)!=null?J:.1),Nt=new et((ee=r.outlineSmoothing)!=null?ee:.1),ht=new et((q=r.contourFrequency)!=null?q:.1),zt=new ts((re=r.contourDirections)!=null?re:new R(0,1,0)),Ot=new tf((ie=r.positionalLines)!=null?ie:!1),Fn=new tf((K=r.compensation)!=null?K:!0),Vr=ss.normalRenderTarget,ar=ss.normalRenderTargetDepth,Fi=ss.pixelRatioNode,W=ss.resolution,ge=new et((oe=r.alpha)!=null?oe:1),Te=new n5(Me,Ae,ze,Ze,dt,bt,Nt,ht,zt,Ot,Fn,W,Vr,ar,Fi,ge),me=new vn(Te.calpha,"f"),Pe=new on((ye=r.mode)!=null?ye:0);return new zr(e,n,t,{outlineColor:Me,contourColor:Ae,outlineWidth:ze,contourWidth:Ze,outlineThreshold:dt,contourThreshold:bt,outlineSmoothing:Nt,contourFrequency:ht,contourDirection:zt,positionalLines:Ot,compensation:Fn,alpha:ge,mode:Pe},Te,Pe,me)}case"depth":{let Me=new on((ne=r.gradientType)!=null?ne:0),Ae=new tf((Q=r.smooth)!=null?Q:!1),ze=new et((de=r.near)!=null?de:50),Ze=new et((pe=r.far)!=null?pe:200),dt=new et((ve=r.isVector)!=null?ve:1),bt=new et((Re=r.isWorldSpace)!=null?Re:0),Nt=new ts((Le=r.origin)!=null?Le:new R),ht=new ts((De=r.direction)!=null?De:new R),zt;r.colors?zt=new nu(r.colors.length,r.colors):(zt=new nu(2,new St(0,0,0,1)),zt.value[1]=new St(1,1,1,1));let Ot;r.steps?Ot=new tu(r.steps.length,r.steps):(Ot=new tu(2,1),Ot.value[0]=0);let Fn=new et((gt=r.alpha)!=null?gt:1),Vr=new on((je=r.mode)!=null?je:0),ar=new s5(Me,Ae,ze,Ze,dt,bt,Nt,ht,zt,Ot,Fn),Fi=new vn(ar.calpha,"f");return new zr(e,n,t,{gradientType:Me,smooth:Ae,near:ze,far:Ze,isVector:dt,isWorldSpace:bt,origin:Nt,direction:ht,colors:zt,steps:Ot,alpha:Fn,mode:Vr},ar,Vr,Fi)}case"noise":{let Me=new et((j=r.scale)!=null?j:1),Ae=new ts((F=r.size)!=null?F:new R(100,100,100)),ze=new et((_e=r.move)!=null?_e:1),Ze=new is((Ie=r.fA)!=null?Ie:new se(1.7,9.2)),dt=new is((ke=r.fB)!=null?ke:new se(8.3,2.8)),bt=new is((Ve=r.distortion)!=null?Ve:new se(1,1)),Nt=new su(r.colorA),ht=new su(r.colorB),zt=new su(r.colorC),Ot=new su(r.colorD),Fn=new et((ut=r.alpha)!=null?ut:1),Vr=new on((He=r.mode)!=null?He:0),ar=new on((Ce=r.noiseType)!=null?Ce:0),Fi=new Zk(Me,Ae,ze,Ze,dt,bt,Nt,ht,zt,Ot,Fn,ar),W=new vn(Fi.calpha,"f");return new zr(e,n,t,{scale:Me,size:Ae,move:ze,fA:Ze,fB:dt,distortion:bt,colorA:Nt,colorB:ht,colorC:zt,colorD:Ot,alpha:Fn,mode:Vr,noiseType:ar},Fi,Vr,W)}case"normal":{let Me=new ts((Ge=r.cnormal)!=null?Ge:new R(1,1,1)),Ae=new et((Je=r.alpha)!=null?Je:1),ze=new on((qe=r.mode)!=null?qe:0),Ze=new h5(Me,Ae),dt=new vn("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");return dt.keywords.alpha=Ae,new zr(e,n,t,{cnormal:Me,alpha:Ae,mode:ze},Ze,ze,dt)}case"gradient":{let Me=new on((at=r.gradientType)!=null?at:0),Ae=new tf((rt=r.smooth)!=null?rt:!1),ze;r.colors?ze=new nu(r.colors.length,r.colors):(ze=new nu(10,new St(0,0,0,1)),ze.value[1]=new St(1,1,1,1));let Ze;r.steps?Ze=new tu(r.steps.length,r.steps):(Ze=new tu(10,1),Ze.value[0]=0);let dt=new is((Pt=r.offset)!=null?Pt:new se(0,0)),bt=new is((Wt=r.morph)!=null?Wt:new se(0,0)),Nt=new et((pn=r.angle)!=null?pn:0),ht=new et((ae=r.alpha)!=null?ae:1),zt=new on((be=r.mode)!=null?be:0),Ot=new u5(Me,Ae,ze,Ze,dt,bt,Nt,ht),Fn=new vn(Ot.calpha,"f");return new zr(e,n,t,{gradientType:Me,smooth:Ae,colors:ze,steps:Ze,offset:dt,morph:bt,angle:Nt,alpha:ht,mode:zt},Ot,zt,Fn)}default:{let Me=new Nn(1,0,0,1),Ae=new et(1),ze=new vn("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");ze.keywords.alpha=Ae;let Ze=new on(0);return Me.alpha=Ae,new zr(e,n,t,{color:Me,alpha:Ae,mode:Ze},Me,Ze,ze)}}}function Rie(t,e,n,r){let i=mie(n,r);return Die(n,t,e,i)}function S5(t,e,n){if(n.type==="displace"&&(t==="intensity"||t==="visible")){let r=e.uniforms[`f${e.id}_intensity`];return r?(r.value=n.intensity*(n.visible?1:0),r):void 0}if(n.type!=="displace"&&(t==="alpha"||t==="visible")){let r=e.uniforms[`f${e.id}_alpha`];if(!r)return;if(r.value=n.alpha*(n.visible?1:0),n.type==="outline"&&t==="visible"){let i=e.uniforms[`f${e.id}_compensation`];i&&(i.value=n.compensation&&n.visible)}return r}}var Fd=class extends $s{constructor(t,e){super(void 0),this.data=t,this.layerIdGen=0,this.type="NodeMaterial",this.uniformsBackup={},this.fog=!0,this.updaters=[],this.dithering=!0,this.vertexColors=!0,this.onBeforeCompile=this._onBeforeCompile,this.transparent=!0,this.reset(t,e)}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.data.category}reset(t,e){var r,i;let n=(r=t.layers)!=null?r:oa.defaultTwoLayerData("phong").layers;this.layers=n.map(s=>Au.create(this.layerIdGen++,s.id,s.data,e)),this.layers.reverse(),this.name=(i=t.name)!=null?i:"Untitled Material",this.onUpdate(e)}getLayersOfType(t){return this.layers.filter(e=>e.type===t)}getLayerByUuid(t){return this.layers.find(e=>e.uuid===t)}onUpdate(t){this.lightLayer=this.layers.find(e=>e instanceof ld),this.lightLayer===void 0&&(this.lightLayer=new ld(0,"",{...Ja.defaultData("light","phong"),visible:!1},new Xk,{})),this.dispose(),this.needsUpdate=!0,this.blendColors(),this.blendAfterColors(),this.blendPositions()}updateByOp(t,e,n){if(this.data=e,t.path[0]==="layers"){let r=t.path[1];if(r===void 0){if(this.layers.reverse(),t.type===4){let i=Au.create(this.layerIdGen++,t.id,t.data,n);this.layers.splice(t.localIndex,0,i)}else if(t.type===5)this.layers.splice(t.localIndex,1)[0].dispose();else if(t.type===6){let i=this.layers.findIndex(o=>o.uuid===t.id),s=this.layers[i];this.layers.splice(i,1),this.layers.splice(t.localIndex,0,s)}this.layers.reverse(),this.onUpdate(n)}else{let i=this.layers.find(s=>s.uuid===r);if(i){let s=e.layers.data(r);if(i.updateByOp({...t,path:t.path.slice(2)},s,n)){let o=Au.create(this.layerIdGen++,r,s,n);this.layers.splice(this.layers.findIndex(a=>a.uuid===r),1,o),this.onUpdate(n)}}}}}blendColors(){let t=this.layers.findIndex(n=>n instanceof zr),e=this.layers.findIndex(n=>n instanceof ld);if(t!==-1&&t<e){let n=this.layers[t].color;for(let r=t+1;r<e;++r){let i=this.layers[r];i instanceof zr&&(n=new IL(n,i.color,i.alpha,i.mode))}this.fragment.color=n}else this.fragment.color=void 0}blendAfterColors(){let t=new vn("outgoingLight","f"),e=this.layers.findIndex(n=>n instanceof ld);if(this.layers.length>e+1){for(let n=e+1;n<this.layers.length;++n){let r=this.layers[n];r instanceof zr&&(t=new IL(t,r.color,r.alpha,r.mode))}this.fragment.afterColor=t}else this.fragment.afterColor=void 0}blendPositions(){let t=this.layers.filter(e=>e instanceof w5);if(t.length>0){let e=t[0].position;for(let n=1;n<t.length;++n)t[n]&&(e=new _o(e,t[n].position,_o.ADD),e=new _o(e,new et(.5).setReadonly(!0),_o.MUL));this.fragment.position=e}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}_onBeforeCompile(t,e){this.build({renderer:e}),t.defines=this.defines,t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.extensionDerivatives=this.extensions.derivatives===!0,t.extensionFragDepth=this.extensions.fragDepth===!0,t.extensionDrawBuffers=this.extensions.drawBuffers===!0,t.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(t,e){let n=(r,i,s)=>Math.min(Math.max(r,i),s);for(let r of this.layers)if(r.type==="displace"){this.uniformsBackup[`f${r.id}_intensity`]=r.uniforms[`f${r.id}_intensity`].value;let i=n(r.uniforms[`f${r.id}_intensity`].value,t,e);r.uniforms[`f${r.id}_intensity`].value=i}}restoreClampedUniforms(){for(let t of this.layers)t.type==="displace"&&(t.uniforms[`f${t.id}_intensity`].value=this.uniformsBackup[`f${t.id}_intensity`])}customProgramCacheKey(){var e,n;let t="[";for(let{data:r}of this.data.layers)if(r.type==="light")t+=`"${r.visible?r.category.toUpperCase():"Basic"}"`;else{let i=((e=p5[r.type])!=null?e:[]).map(a=>r[a]),s=((n=m5[r.type])!=null?n:[]).map(a=>{var l,c;return(c=(l=r[a])==null?void 0:l.length)!=null?c:0}),o=[...i,...s];o.length?t+=`["${r.type}", "${o.join('","')}"],`:t+=`"${r.type}",`}return t=t.slice(0,-1)+"]",t}updateFrame(t){for(let e=0;e<this.updaters.length;++e)t.updateNode(this.updaters[e])}build(t){var n;t=t!=null?t:{};let e=(n=t.builder)!=null?n:new cie;return this.lights=this.lightLayer.data.visible,e.setMaterial(this,t.renderer),e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters,this.transparent=e.requires.transparent||this.blending>ll,this}dispose(){this.layers.forEach(t=>t.dispose()),super.dispose()}getHash(){let t="{";return t+='"fragment":'+this.fragment.getHash(),t+="}",t}};Object.defineProperties(Fd.prototype,{properties:{get:function(){return this.fragment.properties}},needsUpdate:{set:function(t){t===!0&&this.version++,this.needsCompile=t},get:function(){return this.needsCompile}}});function zie(t){var s,o;if(t.geometry.attributes.extrudeNormal||!t.geometry.attributes.position||!t.geometry.attributes.normal)return;let e=new Map,n=t.geometry.attributes.position.array,r=t.geometry.attributes.normal.array,i=new Float32Array(n.length);for(let a=0;a<n.length;a+=3){let l=`${n[a]}_${n[a+1]}_${n[a+2]}`,c=new R(r[a],r[a+1],r[a+2]);e.has(l)?(s=e.get(l))==null||s.normals.push(c):e.set(l,{normals:[c],result:new R})}e.forEach((a,l)=>{for(let c of a.normals)a.result.add(c);a.result.divideScalar(a.normals.length)});for(let a=0;a<n.length;a+=3){let l=`${n[a]}_${n[a+1]}_${n[a+2]}`,c=(o=e.get(l))==null?void 0:o.result;c&&(i[a]=c.x,i[a+1]=c.y,i[a+2]=c.z)}t.geometry.setAttribute("extrudeNormal",new Ne(i,3))}function Nie(t){if(t.geometry.attributes.extrudeNormals||!t.geometry.attributes.position)return;let e=t.geometry.attributes.position.array,n=new Float32Array(e.length),r=new R;for(let i=0;i<e.length;i+=3)r.set(e[i],e[i+1],e[i+2]).normalize(),n[i]=r.x,n[i+1]=r.y,n[i+2]=r.z;t.geometry.setAttribute("extrudeNormal",new Ne(n,3))}function Kp(t){var e,n;if(Array.isArray(t.material)){for(let r of t.material)if(r.getLayersOfType("outline").length===0)return}else if(!(t.material instanceof Fd)||t.material.getLayersOfType("outline").length===0)return;t.objectType==="Mesh2D"||t.objectType==="TextFrame"&&((n=(e=t.data)==null?void 0:e.geometry)==null?void 0:n.depth)===0?Nie(t):zie(t)}function em(t){if(!t.geometry.attributes.position)return;let e=t.geometry.attributes.position.array,n=new Float32Array(e.length),r=parseInt(t.uuid.replace(/\D/g,"")),i=[nn.seededRandom(r),nn.seededRandom(r+1e4),nn.seededRandom(r+2e4)];for(let s=0;s<e.length;s++)n[s]=i[s%3];t.geometry.setAttribute("randomColor",new vt(n,3))}var ga=class extends ah(Qn){constructor(t,e){var n,r;super(t,e),this.isAbstractMesh=!0,this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new nt,this.booleanExclude=null,Array.isArray(e)&&t.groups.length===0&&t.addGroup(0,Math.max((r=(n=t.getIndex())==null?void 0:n.count)!=null?r:0,t.getAttribute("position").count),0)}get isGroup(){var t;return((t=this._cloner)==null?void 0:t.parameters.hideBase)===!0}get isMesh(){return!this.isGroup}set isMesh(t){}get cloner(){return this._cloner}set cloner(t){this._cloner&&this.remove(this._cloner),t&&this.add(t),this._cloner=t}updateGeometry(t,e){let n=this.geometry,r=Vk[n.userData.type],i=this.objectType==="NonParametric"?Object.assign({},n.userData,{geometry:n}):n.userData,s=r.build(r.normalizeInputs(t,i)),o=n.uuid;this.geometry.dispose(),this.geometry=s,this.geometry.uuid=o,this.geometry.computeBoundingSphere(),Kp(this),n.getAttribute("randomColor")&&em(this)}clone(t){let e=this.objectType==="NonParametric"?Object.assign({},this.geometry.userData,{geometry:this.geometry.clone()}):this.geometry.userData,n=Lb(e),r=this.material;return new this.constructor(n,r).copy(this,t)}copy(t,e=!0){return super.copy(t,e),t.cloner&&(this.cloner=new bb(t,t.cloner.parameters),this.add(this.cloner)),this}setFromClonerState(t){t===null?this.cloner=void 0:(this.cloner===void 0&&(this.cloner=new bb(this)),this.cloner.fromClonerState(t))}fromState(t,e){var n,r,i;return super.fromState(t),t.type==="Mesh"&&(this.setFromClonerState(t.cloner),this.castShadow=(n=t.castShadow)!=null?n:!0,this.receiveShadow=(r=t.receiveShadow)!=null?r:!0,this.booleanExclude=(i=t.booleanExclude)!=null?i:null),this}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(Ha.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(t=!1){return t?this.booleanWasTransformed=!0:this.freeBooleanPointer(),Hu(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let t of this.children)Bd(t)&&(t.freeBooleanPointer(),Hu(t)&&t.invalidateUpstreamBooleanData())}},kie=new R(0,0,1),NL=new R,kL=new R,BL=new ir,b5=class extends ga{constructor(t=ma.create({}),e){var n;super(t,e),this.recursiveSelection=!1,this.objectType="VectorObject",this.eventDispatcher=new Ss,this._onShapeUpdate=()=>{this.updateGeometry({}),this.geometry.computeBoundingSphere(),this.geometry.computeBoundingBox()},this.castShadow=!0,this.receiveShadow=!0,this.forceComputeSize=!0,this.shape=t.userData.shape,(n=this.shape.eventDispatcher)==null||n.addEventListener("update",this._onShapeUpdate)}fromState(t){return super.fromState(t),this.shape.update(),this}setHelperVisibility(){}updateGeometry(t,e){if(super.updateGeometry(t,e),"userData"in this.geometry){let n=this.geometry.userData.parameters;this.eventDispatcher.dispatchEvent({type:"geometryUpdate",parameters:n})}}setShape(t){var e,n;this.shape&&((e=this.shape.eventDispatcher)==null||e.removeEventListener("update",this._onShapeUpdate)),this.shape=t,(n=this.shape.eventDispatcher)==null||n.addEventListener("update",this._onShapeUpdate)}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),BL.getNormalMatrix(this.matrixWorld),NL.copy(kie).applyMatrix3(BL).normalize(),kL.setFromMatrixPosition(this.matrixWorld),this.shape.plane.setFromNormalAndCoplanarPoint(NL,kL)}clone(t){let e=this.shape.clone(),n=this.material,r=this.geometry.userData,i=ma.create(Object.assign({},r,{shape:e})),s=new b5(i,n).copy(this,t);return s.shape=e,e.update(),s}raycast(t,e){ga.prototype.raycast.call(this,t,e)}},tm=(t,e)=>class extends t{constructor(){super(...arguments),this.objectHelper=new e(this)}get geometryHelper(){return e.geometryHelper}raycast(n,r){this.objectHelper.raycast(n,r)}fromLightState(n,r){if(this.objectType==="LightDirectional"||this.objectType==="LightPoint"||this.objectType==="LightSpot"){let i=this;n.color!==void 0&&(i.color=ui(n.color,r)),n.intensity!==void 0&&(i.intensity=n.intensity),n.depth!==void 0&&(i.shadow.camera.far=n.depth,i.shadow.needsUpdate=!0),n.shadows!==void 0&&(this.castShadow=n.shadows)}return this}},kc=new R,rw=new R,Bv=class extends tm(ah(Xu),Cne){constructor(t=window.innerWidth,e=window.innerHeight,n=45,r,i=1e5){super(),this.objectType="CombinedCamera",this._cameraType="OrthographicCamera",this.targetOffset=yp.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.width=t,this.height=e,this.orthoCamera=new El(t*-.5,t*.5,e*.5,e*-.5,r!=null?r:-5e4,i),this.perspCamera=new jn(n,t/e,r!=null?r:50,i),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.fov=this.perspCamera.fov,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.toOrthographic()}static createFromState(t,e){let n=new Bv().fromState(e);return n.objectHelper.update(),n.uuid=t,n}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}setNear(t,e){t==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}setZoom(t,e){e>=0&&(t==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}set cameraType(t){t==="PerspectiveCamera"?this.toPerspective():t==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(t){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(t){t>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}lookAt(t){super.lookAt(t),this.getWorldPosition(kc),this.targetOffset=kc.distanceTo(t)}getTarget(t=new R){return this.getWorldDirection(rw),this.getWorldPosition(kc),rw.multiplyScalar(this.targetOffset),t.copy(kc).add(rw),t}getDistanceToTarget(){let t=this.getTarget();return this.getWorldPosition(kc),kc.distanceTo(t)}updateUp(){let t=this.getWorldQuaternion(new Br),e=new R(0,0,1).applyQuaternion(t),n=new R().copy(Rt.DefaultUp);this.isUpVectorFlipped&&n.negate(),n.applyQuaternion(t);let r=new R().copy(Rt.DefaultUp).projectOnPlane(e),i=new R().crossVectors(r,n).dot(e)>=0?1:-1;this.angleOffsetFromUp=r.angleTo(n)*i}getViewFrontToObject(t){let e=t.getWorldPosition(new R),n=t.getWorldDirection(new R).multiplyScalar(this.targetOffset);return{position:e.clone().add(n),target:e}}getViewToObject(t){let e=t.getWorldPosition(new R),n=this.getWorldDirection(new R).multiplyScalar(this.targetOffset);return{position:e.clone().sub(n),target:e}}setViewplaneSize(t,e){this.left=-t*.5,this.right=t*.5,this.top=e*.5,this.bottom=-e*.5,this.aspect=t/e,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(t){this.perspCamera.setFocalLength(t),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(t,e,n,r,i,s){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(t,e,n,r,i,s):this.orthoCamera.setViewOffset(t,e,n,r,i,s)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(t,e){return super.copy(t,e),this.orthoCamera.copy(t.orthoCamera),this.perspCamera.copy(t.perspCamera),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.far=t.far,this.view=t.view===null?null:Object.assign({},t.view),this._cameraType=t._cameraType,this.aspect=t.aspect,this.fov=t.fov,this.focus=t.focus,this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this.targetOffset=t.targetOffset,this.updateProjectionMatrix(),this}toCameraState(t=[]){let e={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return vb(e,t)}fromCameraState(t){let{orthographic:e,perspective:n}=t;return t.type!==void 0&&(this.cameraType=t.type),t.far!==void 0&&(this.far=t.far),e!==void 0&&(e.near!==void 0&&(this.orthoCamera.near=e.near),e.zoom!==void 0&&(this.orthoCamera.zoom=e.zoom)),n!==void 0&&(n.near!==void 0&&(this.perspCamera.near=n.near),n.fov!==void 0&&(this.perspCamera.fov=n.fov),n.zoom!==void 0&&(this.perspCamera.zoom=n.zoom)),t.type==="PerspectiveCamera"?(this.zoom=this.perspCamera.zoom,this.fov=this.perspCamera.fov,this.near=this.perspCamera.near):(this.near=this.orthoCamera.near,this.zoom=this.orthoCamera.zoom),t.up!==void 0&&this.up.fromArray(t.up),t.targetOffset!==void 0&&(this.targetOffset=t.targetOffset),t.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=t.isUpVectorFlipped),this.updateProjectionMatrix(),this}toState(t){return{...super.toState(t),...this.toCameraState(t),type:this.cameraType}}fromState(t){return super.fromState(t),this.fromCameraState(t),this}},FL=new nt,Bie=class extends ga{constructor(t=new tt,e){super(t,e),this.booleanOp=2,this.phongAngle=35,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.objectType="BooleanObject",this.castShadow=!0,this.receiveShadow=!0,this.geometry.userData.parameters={width:0,height:0,depth:0},this.onAfterRender=this.recomputeBoolean.bind(this)}reInit(){this.objectType="BooleanObject",this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry.userData.parameters={width:0,height:0,depth:0},this.onAfterRender=this.recomputeBoolean.bind(this)}recomputeBoolean(t,e=!0){var r,i;if(this.booleanMeshSetAddress!==-1)return;for(let s=0;s<this.children.length;s++){let o=this.children[s];Hu(o)&&o.recomputeBoolean(t===!0,e)}this.meshSetAddresses=[];for(let s=0;s<this.children.length;s++){let o=this.children[s];if(Kre(o)&&o.booleanExclude===!1&&((r=o.geometry.attributes.position)==null?void 0:r.count)>0&&o.geometry.drawRange.count>0){if(o.booleanMeshSetAddress===-1){if(((i=o.geometry.index)!=null?i:o.geometry.getAttribute("position")).count/3<15e5&&(o.booleanMeshSetAddress=Ha.getMeshSet(o.geometry,t===!0,e)),o.booleanMeshSetAddress===-1)return;Ha.transformMeshSet(o.booleanMeshSetAddress,o.matrix),o.booleanMatrixInvOld.copy(o.matrix).invert(),o.booleanWasTransformed=!1}else Hu(o)&&o.needsTransformForDownstream===!0?(Ha.transformMeshSet(o.booleanMeshSetAddress,o.matrix),o.needsTransformForDownstream=!1):o.booleanWasTransformed===!0&&(FL.multiplyMatrices(o.matrix,o.booleanMatrixInvOld),Ha.transformMeshSet(o.booleanMeshSetAddress,FL),o.booleanMatrixInvOld.copy(o.matrix).invert(),o.booleanWasTransformed=!1);this.meshSetAddresses.push(o.booleanMeshSetAddress)}}if(this.meshSetAddresses.length===0){this.geometry.setDrawRange(0,0);return}if(t===!0)return Ha.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let n=this.geometry;n.dispose(),this.geometry=new tt,this.geometry.userData=n.userData,this.geometry.boundingSphere=n.boundingSphere;try{this.booleanMeshSetAddress=Ha.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(s){this.booleanMeshSetAddress=0,console.error(s)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,Kp(this),em(this)}updateGeometry(t,e){let n=t.parameters;n.operation!==void 0&&(this.booleanOp=n.operation),n.phongAngle!==void 0&&(this.phongAngle=n.phongAngle),this.invalidateDownstreamBooleanData().recomputeBoolean()}},Rb=class extends tm(ah(fu),vk){constructor(){super(...arguments),this.objectType="EmptyObject"}static createFromState(t,e){let n=new Rb().fromState(e);return n.uuid=t,n.objectHelper.update(),n}},M5=class extends tm(ah(x2),gk){constructor(...t){super(...t),this.objectType="LightDirectional",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let e=this.shadow.camera;e.top=1250,e.bottom=-1250,e.right=1250,e.left=-1250,e.near=-1e4,e.far=2500;let n=new ta(this.shadow.camera);n.visible=!1,this._gizmos.shadowmap=n,this.update()}static createFromState(t,e,n){let r=new M5().fromState(e,n);return r.uuid=t,r}get gizmos(){return this._gizmos}showGizmos(){for(let t in this._gizmos){let e=this._gizmos[t];e instanceof ta&&(e.visible=!0)}}hideGizmos(){for(let t in this._gizmos){let e=this._gizmos[t];e instanceof ta&&(e.visible=!1)}}update(){this.shadow.camera.updateProjectionMatrix();for(let t in this._gizmos){let e=this._gizmos[t];e instanceof ta&&e.update()}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.objectHelper&&this.objectHelper.update()}fromDirectionalLightState(t,e){let n=t.depth!==void 0&&t.depth!==this.shadow.camera.far||t.size!==void 0&&t.size/2!==this.shadow.camera.right;return super.fromLightState(t,e),t.size!==void 0&&Yre(this,t.size),t.shadowRadius!==void 0&&(this.shadow.radius=t.shadowRadius),t.shadowResolution!==void 0&&(this.shadow.mapSize.set(t.shadowResolution,t.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),n&&this.update(),this}fromState(t,e){return super.fromState(t),this.fromDirectionalLightState(t,e),this}},E5=class extends tm(ah(y2),yk){constructor(...t){super(...t),this.objectType="LightPoint",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let e=this.shadow.camera;e.fov=90,e.aspect=1,e.near=100,e.far=2500;let n=new R(-e.far+this.position.x,-e.far+this.position.y,-e.far+this.position.z),r=new R(e.far+this.position.x,e.far+this.position.y,e.far+this.position.z),i=new Ni(n,r),s=new cf(i,new We(16755200));s.visible=!1,this._gizmos.shadowmap=s,this.update()}static createFromState(t,e,n){let r=new E5().fromState(e,n);return r.uuid=t,r}get gizmos(){return this._gizmos}showGizmos(){for(let t in this._gizmos){let e=this._gizmos[t];e instanceof cf&&(e.visible=!0)}}hideGizmos(){for(let t in this._gizmos){let e=this._gizmos[t];e instanceof cf&&(e.visible=!1)}}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this._gizmos))for(let t in this._gizmos){let e=this._gizmos[t];if(e instanceof cf){let n=this.shadow.camera,r=new R(-n.far+this.position.x,-n.far+this.position.y,-n.far+this.position.z),i=new R(n.far+this.position.x,n.far+this.position.y,n.far+this.position.z);e.box.set(r,i),e.updateMatrixWorld(!0)}}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.objectHelper&&this.objectHelper.update()}fromPointLightState(t,e){return super.fromLightState(t,e),t.distance!==void 0&&(this.distance=t.distance),t.decay!==void 0&&(this.decay=t.decay),t.shadowRadius!==void 0&&(this.shadow.radius=t.shadowRadius),t.shadowResolution!==void 0&&(this.shadow.mapSize.set(t.shadowResolution,t.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),this}fromState(t,e){return super.fromState(t),this.fromPointLightState(t,e),this}},UL=new R,VL=new R,HL=new Br,T5=class extends tm(ah(v2),xk){constructor(...t){super(...t),this.objectType="LightSpot",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let e=this.shadow.camera;e.fov=nn.RAD2DEG*2*this.angle,e.aspect=1,e.near=100,e.far=2500;let n=new ta(this.shadow.camera);n.visible=!1,this._gizmos.shadowmap=n,this.update()}static createFromState(t,e,n){let r=new T5().fromState(e,n);return r.uuid=t,r}get gizmos(){return this._gizmos}showGizmos(){for(let t in this._gizmos){let e=this._gizmos[t];e instanceof ta&&(e.visible=!0)}}hideGizmos(){for(let t in this._gizmos){let e=this._gizmos[t];e instanceof ta&&(e.visible=!1)}}update(){this.shadow.camera.updateProjectionMatrix();for(let t in this._gizmos){let e=this._gizmos[t];e instanceof ta&&e.update()}}updateMatrixWorld(t){super.updateMatrixWorld(t),VL.setFromMatrixPosition(this.matrixWorld),HL.setFromRotationMatrix(this.matrixWorld),UL.copy(this.up).applyQuaternion(HL).negate().multiplyScalar(this.distance),this.target.position.copy(VL).add(UL),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}fromSpotLightState(t,e){return super.fromLightState(t,e),t.distance!==void 0&&(this.distance=t.distance),t.decay!==void 0&&(this.decay=t.decay),t.angle!==void 0&&(this.angle=t.angle),t.penumbra!==void 0&&(this.penumbra=t.penumbra),t.shadowRadius!==void 0&&(this.shadow.radius=t.shadowRadius),t.shadowResolution!==void 0&&(this.shadow.mapSize.set(t.shadowResolution,t.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),this}fromState(t,e){return super.fromState(t),this.fromSpotLightState(t,e),this}},GL=t=>t.tagName==="VIDEO",A5=class{static resize(t,e,n){let r=t/e,i;if(!n.image)return;let s=n.image;GL(s)?i=s.videoWidth/s.videoHeight:i=s.width/s.height,r>i&&(n.imageType=="WEBCAM"?n.repeat.set(-1,1*i/r):n.repeat.set(1,1*i/r)),r<i&&(n.imageType=="WEBCAM"?n.repeat.set(1*r/i*-1,1):n.repeat.set(1*r/i,1)),r==i&&(n.imageType=="WEBCAM"?n.repeat.set(-1,1):n.repeat.set(1,1))}static resizeTextureLayer(t,e,n){let r=t/e,i=n.image!==void 0?n.image.width/n.image.height:1,s;r>i?s={x:1,y:i/r}:r<i?s={x:r/i,y:1}:s={x:1,y:1},n.repeat.set(s.x,s.y),n.updateMatrix()}static resizeTextureLayers(t,e,n){let r=n.layers;for(let i=0;i<r.length;i++){let s=r[i];Iie(s)&&A5.resizeTextureLayer(t,e,s.uniforms[`f${s.id}_texture`].value)}}static resizeComplex(t,e,n,r){let i=t/e,s,o=n.image;GL(o)?s=o.videoWidth/o.videoHeight:s=o.width/o.height,r.geometry.type.includes("Shape")?(i>s&&(n.imageType=="WEBCAM"?n.repeat.set(1/t*-1,1/e*s/i):n.repeat.set(1/t,1/e*s/i)),i<s&&(n.imageType=="WEBCAM"?n.repeat.set(1/t*i/s*-1,1/e):n.repeat.set(1/t*i/s,1/e)),i==s&&(n.imageType=="WEBCAM"?n.repeat.set(1/t*-1,1/e):n.repeat.set(1/t,1/e))):(i>s&&(n.imageType=="WEBCAM"?n.repeat.set(-1,1*s/i):n.repeat.set(1,1*s/i)),i<s&&(n.imageType=="WEBCAM"?n.repeat.set(1*i/s*-1,1):n.repeat.set(1*i/s,1)),i==s&&(n.imageType=="WEBCAM"?n.repeat.set(-1,1):n.repeat.set(1,1)))}},Fie=class extends ga{constructor(t,e){super(t,e),this.objectType="Mesh2D",this.castShadow=!0,this.receiveShadow=!0}updateGeometry(t,e){super.updateGeometry(t,e),this.material.layers&&A5.resizeTextureLayers(this.geometry.userData.parameters.width,this.geometry.userData.parameters.height,this.material)}},C5=class extends ga{constructor(t,e){super(t,e),this.objectType="Mesh3D",this.castShadow=!0,this.receiveShadow=!0}},Uie=class extends C5{constructor(t,e){super(t,e),this.objectType="NonParametric"}},P5,zb=new Promise(t=>{P5=t}),WL=!1;async function Vie(){if(WL)return;let t=await vX(()=>import("./opentype.b764fcf5.js"),[],import.meta.url);P5(t),WL=!0}var Hie=class{async load(t,e,n=()=>{}){let{load:r}=await zb;r(t,(i,s)=>{i||!s?n(i!=null?i:"Something went wrong"):e(s)})}async parse(t){let{parse:e}=await zb;try{return e(t)}catch(n){console.error(n)}}};async function Gie(t){return await(await fetch(t)).arrayBuffer()}var Wie=new Hie;async function jL(t){let e,n,r=!1;if(t.url?(e=await Gie(t.url),n=t.url,r=t.url.startsWith("/")):t.data&&(e=t.data.buffer),e){let i=await Wie.parse(e);if(i)return{font:i,url:n,intercepted:r,arr:e}}}var $L=new R,qL=new nt,XL=new Sl;function jie(t){let e=!1;return t.scene.objects.traverse((n,r)=>{r.type==="Mesh"&&r.geometry.type==="TextGeometry"&&(e=!0)}),e}var $ie=class extends ga{constructor(t,e,n){super(new Rk(e.geometry,n),n.material(e.material)),this.data=e,this.objectType="TextFrame",this.wrappedText=[""],this.charWidths=[],this.charCoords=[],this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.name=e.name,this.uuid=t,this.updateState(e,n)}async updateGeometry(t,e){var a;let n=t.parameters,r={...this.geometry.userData.parameters,...n};this.geometry.userData={parameters:r,type:"TextGeometry"},e&&(n.font||!this.geometry.font&&e.getFont(r.font))&&await this.geometry.updateFont((a=n.font)!=null?a:r.font,e),await this.geometry.update(r),Kp(this),em(this);let{wrappedText:i,charCoords:s,charWidths:o}=this.geometry;this.wrappedText=i,this.charWidths=o,this.charCoords=s,this.resetBBoxNeedsUpdate()}updateState(t,e){this.data=t,this.material=e.material(t.material),this.fromState(t,e),this.updateGeometry({parameters:t.geometry},e)}get font(){return this.geometry.font}get initialOffsetY(){var t,e;return(e=(t=this.font)==null?void 0:t.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,this.geometry.userData.parameters.height,this.fontScale,this.geometry.userData.parameters.verticalAlign))!=null?e:0}get fontScale(){return this.font?this.geometry.userData.parameters.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var t,e;return((e=(t=this.font)==null?void 0:t.ascender)!=null?e:1)*this.fontScale}get descender(){var t,e;return((e=(t=this.font)==null?void 0:t.descender)!=null?e:1)*this.fontScale}get lineHeight(){return this.geometry.userData.parameters.fontSize*this.geometry.userData.parameters.lineHeight}raycast(t,e){let{matrixWorld:n}=this;if(qL.copy(n).invert(),XL.copy(t.ray).applyMatrix4(qL),XL.intersectBox(this.singleBBox,$L)){let r=$L.applyMatrix4(n),i=t.ray.origin.distanceTo(r);e.push({distance:i,point:r.clone(),object:this})}}},qie=f4(AX()),Nb;zk.then(t=>{Nb=t});var L5=new nt,Xie=new nt,Yie=new nt,Is=new Ni,Fa=new R,Zie=new nt,Jie=new nt,O5=class extends ga{constructor(t,e,n,r){super(n!=null?n:e,r),this.subdivPointer=t,this.originalGeometry=e,this.subdividedGeometry=n,this.objectType="SubdivObject",this.hiddenMatrixOld=new nt,this.smoothShading=!0,this.phongAngle=35,this.matrixWorldRigid=new nt,this.castShadow=!0,this.receiveShadow=!0,this.forceComputeSize=!1}static createFromState(t,e,n){let{subdivPointer:r,originalGeometry:i,subdividedGeometry:s}=ks.build(e.geometry,void 0,void 0,!e.flatShading),o=n.material(e.material),a=new O5(r,i,s||void 0,o);return e.geometry.phongAngle!==void 0&&(a.phongAngle=e.geometry.phongAngle),a.calcBoundingBox(),a.freeSubdivPointer(),a.uuid=t,a.fromState(e),a}buildFromStore(t,e){var s,o,a;let{originalGeometry:n,subdividedGeometry:r,subdivPointer:i}=ks.build(t,e,this.subdivPointer,this.smoothShading,this.shearScale);t.phongAngle!==void 0&&(this.phongAngle=t.phongAngle),this.subdivPointer=i,n!==void 0&&((s=this.originalGeometry)==null||s.dispose(),this.originalGeometry=n),r!==void 0&&((o=this.subdividedGeometry)==null||o.dispose(),this.subdividedGeometry=r!=null?r:void 0),this.geometry=(a=this.subdividedGeometry)!=null?a:this.originalGeometry,Kp(this),em(this),t.width&&(this.geometry.userData.parameters={width:t.width,height:t.height,depth:t.depth})}updateMesh(t=!1){ks.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,t?this.shearScaleInv:void 0),this.subdividedGeometry&&ks.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,t?this.shearScaleInv:void 0)}updateTopology(){var t;this.originalGeometry.dispose(),this.originalGeometry=ks.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=ks.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.geometry=(t=this.subdividedGeometry)!=null?t:this.originalGeometry}raycast(t,e){var n;this.geometry=this.originalGeometry,ga.prototype.raycast.call(this,t,e),this.geometry=(n=this.subdividedGeometry)!=null?n:this.originalGeometry}updateMatrixWorldSVD(){let t=this.matrixWorld.elements,e=[[t[0],t[4],t[8]],[t[1],t[5],t[9]],[t[2],t[6],t[10]]],{u:n,v:r,q:i}=(0,qie.SVD)(e),s=L5.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),o=Xie.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),a=Yie.copy(o).transpose();this.shearScale=Zie.makeScale(i[0],i[1],i[2]).multiply(a).premultiply(o),this.shearScaleInv=Jie.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(s,a),i.every(l=>Math.abs(i[0]-l)<.01)&&(this.shearScale=void 0,this.shearScaleInv=void 0)}activateSVDCompensation(){this.shearScale!==void 0&&(this.matrixAutoUpdate=!1,this.matrix.copy(this.matrixWorldRigid).copyPosition(this.matrixWorld),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){this.shearScale!==void 0&&(this.shearScale=void 0,this.shearScaleInv=void 0,this.matrixAutoUpdate=!0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let t=this.originalGeometry;t.boundingSphere===null&&(t.boundingSphere=new xs);let e=t.attributes.position,n=t.boundingSphere.center;Is.setFromBufferAttribute(e),Is.getCenter(n),t.boundingSphere.radius=n.distanceTo(Is.max),isNaN(t.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Is.getSize(Fa);let r={width:Fa.x,height:Fa.y,depth:Fa.z};return this.geometry.userData.parameters=r,r}updateBoundingBox(t){let e=this.originalGeometry;Is.min.set(t[0],t[2],t[4]),Is.max.set(t[1],t[3],t[5]),this.shearScaleInv&&(Is.min.applyMatrix4(this.shearScaleInv),Is.max.applyMatrix4(this.shearScaleInv)),e.boundingSphere===null&&(e.boundingSphere=new xs);let n=e.boundingSphere.center;Is.getCenter(n),e.boundingSphere.radius=n.distanceTo(Is.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Is.getSize(Fa);let r={width:Fa.x,height:Fa.y,depth:Fa.z};return this.geometry.userData.parameters=r,r}freeSubdivPointer(){this.subdivPointer&&(Nb.free_bvh(this.subdivPointer),Nb.free_subdivision_surface(this.subdivPointer),this.subdivPointer=0)}updateGeometry(t,e){this.geometry.userData.scale||(this.geometry.userData.scale=Array(3)),this.geometry.userData.scale[0]=this.geometry.userData.parameters.width===0?1:t.parameters.width/this.geometry.userData.parameters.width,this.geometry.userData.scale[1]=this.geometry.userData.parameters.height===0?1:t.parameters.height/this.geometry.userData.parameters.height,this.geometry.userData.scale[2]=this.geometry.userData.parameters.depth===0?1:t.parameters.depth/this.geometry.userData.parameters.depth,YL(this.originalGeometry.attributes,...this.geometry.userData.scale),this.originalGeometry.attributes.position.needsUpdate=!0,this.originalGeometry.attributes.normal.needsUpdate=!0,this.subdividedGeometry&&(YL(this.subdividedGeometry.attributes,...this.subdividedGeometry.userData.scale),this.subdividedGeometry.attributes.position.needsUpdate=!0,this.subdividedGeometry.attributes.normal.needsUpdate=!0),this.geometry.userData.parameters={...t.parameters}}};function YL(t,e,n,r){let i=t.position.array,s=t.normal.array,o=L5.makeScale(e,n,r).invert().elements,a,l,c;for(var d=0,u=i.length;d<u;d+=3)i[d]*=e,i[d+1]*=n,i[d+2]*=r,a=s[d],l=s[d+1],c=s[d+2],s[d]=o[0]*a+o[4]*l+o[8]*c,s[d+1]=o[1]*a+o[5]*l+o[9]*c,s[d+2]=o[2]*a+o[6]*l+o[10]*c}function ZL(t,e){e.flatShading!==void 0&&(t.flatShading=e.flatShading,t.needsUpdate=!0),e.wireframe!==void 0&&(t.wireframe=e.wireframe),e.side!==void 0&&(e.side===0?t.side=pl:e.side===1?t.side=pi:t.side=yo)}function Qie(t,e){if(Array.isArray(t.material))for(let n of t.material)ZL(n,e);else{let n=t.material;ZL(n,e)}t.objectType==="SubdivObject"&&e.flatShading!==void 0&&(t.material.flatShading=!1,t.smoothShading=!e.flatShading,t.updateMesh())}function Kie(t,e,n){let r;if(e.geometry.type==="SubdivGeometry")r=O5.createFromState(t,e,n);else{let i=e.geometry.type==="BooleanGeometry"?new tt:Nk(e.geometry),s="materials"in e?e.materials.map(o=>n.material(o)):n.material(e.material);cb.is2DParametricMesh(i.userData.type)?r=new Fie(i,s):(i==null?void 0:i.userData.type)==="VectorGeometry"?r=new b5(i,s):e.geometry.type==="NonParametricGeometry"?r=new Uie(i,s):e.geometry.type==="BooleanGeometry"?(r=new Bie(void 0,s),r.booleanOp=e.geometry.operation,e.geometry.phongAngle!==void 0&&(r.phongAngle=e.geometry.phongAngle)):r=new C5(i,s),r.uuid=t,r.fromState(e,n)}return Qie(r,e),r}function ese(t,e,n){return e.type==="Mesh"?e.geometry.type==="TextGeometry"?new $ie(t,e,n):Kie(t,e,n):e.type==="Empty"?Rb.createFromState(t,e):e.type==="PointLight"?E5.createFromState(t,e,n):e.type==="SpotLight"?T5.createFromState(t,e,n):e.type==="DirectionalLight"?M5.createFromState(t,e,n):Lv.is(e.type)?Bv.createFromState(t,e):(console.error(e),new Rb)}var kb=class extends Fd{};function JL(t,e){let n=!1,r=e.getLayersOfType("transmission"),i=e.getLayersOfType("outline");return i.length>0&&(t.layers.set(8),r.length>0&&t.layers.enable(3),n=!0,em(t),Kp(t)),r.length===0&&i.length===0&&t.layers.set(0),n}function QL(t,e){if(!e.layers)return!1;let n=!1,r=e.getLayersOfType("transmission"),i=e.getLayersOfType("outline");return r.length>0&&(t.layers.set(3),i.length>0&&t.layers.enable(8),n=!0),r.length===0&&i.length===0&&t.layers.set(0),n}function tse(t){let e=!1;return t.traverseEntity(n=>{if(n instanceof Qn)if(Array.isArray(n.material))for(let r=0;r<n.material.length;r++)JL(n,n.material[r])&&(e=!0);else JL(n,n.material)&&(e=!0)}),e}function nse(t){let e=!1;return t.traverseEntity(n=>{if(n instanceof Qn)if(Array.isArray(n.material))for(let r=0;r<n.material.length;r++)QL(n,n.material[r])&&(e=!0);else QL(n,n.material)&&(e=!0)}),e}function rse(t){"material"in t&&ise(t.material),"geometry"in t&&t.geometry.dispose()}function ise(t){rne(t).forEach(e=>{e instanceof kb||e.dispose()})}var sse=new E2,ose=new nt,ase=new Sl;function lse(t,e,n){let r=t.cloner;if(r)for(let i of r.children){let s=ose.copy(i.matrixWorld).invert(),o=ase.copy(e.ray).applyMatrix4(s),a=t.matrixWorld;o.applyMatrix4(a);let l=sse;l.set(o.origin,o.direction),l.near=e.near,l.far=e.far,l.intersectObject(t,!1).length>0&&n.push({object:t})}}var KL=new R,I5=class extends Gk(Ly){constructor(t,e){super(),this.objectType="Scene",this.backupFog=new zp(16777215,.1,2e3),this.fogUseBGColor=!1,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.bgColor=new Ws(1,1,1,1),this.entityByUuid={},this.ambientLight=new mp(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.personalCamera=this.createPersonalCamera(),this.activeCamera=this.personalCamera,this.postprocessing=t.postprocessing,this.init(t,e),this.matrixAutoUpdate=!1}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=nse(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=tse(this),this.needsNormalDirty=!1),this._needsNormal}find(t){if(t===""||t===void 0)return;let e=this.entityByUuid[t];return e===void 0?this.getObjectByProperty("uuid",t):e}get enableFog(){return this.fog!==null}set enableFog(t){this.fog=t===!0?this.backupFog:null}init(t,e){if(this.createChildrenObjects(t.objects,this,e),this.personalCamera.removeFromParent(),this.add(this.personalCamera),this.ambientLight.removeFromParent(),this.add(this.ambientLight),this.setBackgroundColor(ui(t.backgroundColor,e)),this.updateFog(t.fog,e),this.updateAmbientLight(t.environment.ambientLight,e),this.activeCamera=this.personalCamera,t.publish.playCamera!==null){let n=this.find(t.publish.playCamera);n instanceof Bv&&this.switchActiveCamera(n)}this.traverse(n=>{Hu(n)&&n.recomputeBoolean()})}clearScene(){this.traverseEntity(t=>{rse(t)});for(let t of this.children)Zo(t)&&t.removeFromParent()}resetAfterClear(t,e){this.init(t,e)}createPersonalCamera(){let t=Bv.createFromState(I5.PERSONAL_CAMERA_ID,{...xb.defaultData,name:"Personal Camera"});return t.objectHelper.visible=!1,delete t.isEntity,this.registerObjectCreatedInLegacy(t),t}raycast(t){let e=[],n=r=>{for(let i of r.children)Zo(i)&&!i.raycastLock&&i.visible&&((Bd(i)||Hk(i)&&this.enableHelpers&&i.objectHelper.visible)&&(t.intersectObject(i,!1,e),lse(i,t,e)),n(i))};return n(this),e}traverseEntity(t){for(let e of this.children)Zo(e)&&e.traverseEntity(t)}traverseVisibleEntity(t){for(let e of this.children)Zo(e)&&e.visible&&e.traverseVisibleEntity(t)}updateFog(t,e){this.enableFog=t.enabled,this.fogUseBGColor=t.useBackgroundColor,t.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=ui(t.color,e),this.backupFog.near=t.near,this.backupFog.far=t.far}dispose(){this.clearScene()}updateAmbientLight(t,e){Xre(this.ambientLight,t,e),t.groundColor!==void 0&&(this.ambientLight.groundColor=ui(t.groundColor,e)),t.enabled!==void 0&&(this.ambientLight.visible=t.enabled)}switchActiveCamera(t){this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=t,t.objectHelper.visible=!1}setBackgroundColor(t){this.bgColor=t,this.fogUseBGColor===!0&&(this.backupFog.color=t)}createChildrenObjects(t,e,n){for(let r of t)this.createChildObject(r.id,r.data,r.children,e,n)}registerObjectCreatedInLegacy(t){this.entityByUuid[t.uuid]=t}unregisterObject(t){delete this.entityByUuid[t.uuid];for(let e of t.children)this.unregisterObject(e)}createChildObject(t,e,n,r,i){let s=ese(t,e,i);return s&&(this.entityByUuid[t]=s,r.add(s),Hu(r)&&Bd(s)&&(s.prevBooleanObjectParent=r),this.createChildrenObjects(n,s,i)),s}getCenter(t){let e=[];for(let r=0,i=t.length;r<i;++r){let{id:s,recursive:o}=t[r],a=this.find(s),l=o?a.recursiveBBox:a.singleBBox;e.push(...l.vertices)}let n=new Ni;return n.setFromPoints(e),n.getCenter(KL),KL}copyMatrixWorld(t,e){if(t===null){e.identity();return}let n=this.find(t);n?e.copy(n.matrixWorld):e.identity()}copyParentMatrixWorld(t,e){var r;if(t===null){e.identity();return}let n=(r=this.find(t))==null?void 0:r.parent;n?e.copy(n.matrixWorld):e.identity()}traverseMaterial(t){this.traverseEntity(e=>{if(e instanceof ga)if(Array.isArray(e.material))for(let n=0;n<e.material.length;n++)e.material[n]instanceof Fd&&t(e.material[n]);else e.material instanceof Fd&&t(e.material)})}updateCanvasSize(t,e){this.activeCamera.setViewplaneSize(t,e);let n,r;t>=e?(n=e/t,r=1):(n=1,r=t/e),this.traverseMaterial(i=>{i.getLayersOfType("transmission").forEach(s=>{s.uniforms[`f${s.id}_aspectRatio`].value.x=n,s.uniforms[`f${s.id}_aspectRatio`].value.y=r})})}},D5=I5;D5.PERSONAL_CAMERA_ID="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera";var use=f4(CX()),eO=new Map;function cse(t){if(typeof t=="string")return t;let e=eO.get(t);return e||(e={url:URL.createObjectURL(new Blob([t]))},eO.set(t,e)),e.url}var iw=class{constructor({src:t,volume:e,delay:n,loop:r}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let i;typeof t=="string"?i={src:t}:i={src:cse(t),format:"wav"},this.sound=new use.Howl(i),this.sound.on("end",this.onEnd),this.src=t,e!==void 0&&(this.volume=e),n!==void 0&&(this.delay=n),r!==void 0&&(this.loop=r)}get status(){return this._status}get volume(){return this._volume}set volume(t){this._volume=t,this.sound.volume(t)}get loop(){return this._loop}set loop(t){this._loop=t,this.loopsRemaining=t}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(t,e=1e3){t?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,e),this.clearFade()},t)):this.sound.fade(this._volume,0,e)}on(t,e,n){this.sound.on(t,e,n)}off(t,e,n){this.sound.off(t,e,n)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(t=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},dse=class{constructor(){this.type="ShapePath",this.color=new We,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new Bu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){var n;return(n=this.currentPath)==null||n.lineTo(t,e),this}quadraticCurveTo(t,e,n,r){var i;return(i=this.currentPath)==null||i.quadraticCurveTo(t,e,n,r),this}bezierCurveTo(t,e,n,r,i,s){var o;return(o=this.currentPath)==null||o.bezierCurveTo(t,e,n,r,i,s),this}splineThru(t){var e;return(e=this.currentPath)==null||e.splineThru(t),this}toShapes(){let t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},e={loc:t.ORIGIN,t:0};function n(m,g,x,y){let v=m.x,_=g.x,S=x.x,b=y.x,A=m.y,E=g.y,C=x.y,T=y.y,O=(b-S)*(A-C)-(T-C)*(v-S),L=(_-v)*(A-C)-(E-A)*(v-S),k=(T-C)*(_-v)-(b-S)*(E-A),B=O/k,G=L/k;if(k===0&&O!==0||B<=0||B>=1||G<0||G>1)return null;if(O===0&&k===0){for(let H=0;H<2;H++)if(r(H===0?x:y,m,g),e.loc===t.ORIGIN){let Y=H===0?x:y;return{x:Y.x,y:Y.y,t:e.t}}else if(e.loc===t.BETWEEN){let Y=+(v+e.t*(_-v)).toPrecision(10),te=+(A+e.t*(E-A)).toPrecision(10);return{x:Y,y:te,t:e.t}}return null}else{for(let te=0;te<2;te++)if(r(te===0?x:y,m,g),e.loc===t.ORIGIN){let Z=te===0?x:y;return{x:Z.x,y:Z.y,t:e.t}}let H=+(v+B*(_-v)).toPrecision(10),Y=+(A+B*(E-A)).toPrecision(10);return{x:H,y:Y,t:B}}}function r(m,g,x){let y=x.x-g.x,v=x.y-g.y,_=m.x-g.x,S=m.y-g.y,b=y*S-_*v;if(m.x===g.x&&m.y===g.y){e.loc=t.ORIGIN,e.t=0;return}if(m.x===x.x&&m.y===x.y){e.loc=t.DESTINATION,e.t=1;return}if(b<-Number.EPSILON){e.loc=t.LEFT;return}if(b>Number.EPSILON){e.loc=t.RIGHT;return}if(y*_<0||v*S<0){e.loc=t.BEHIND;return}if(Math.sqrt(y*y+v*v)<Math.sqrt(_*_+S*S)){e.loc=t.BEYOND;return}let A;y!==0?A=_/y:A=S/v,e.loc=t.BETWEEN,e.t=A}function i(m,g){let x=[],y=[];for(let v=1;v<m.length;v++){let _=m[v-1],S=m[v];for(let b=1;b<g.length;b++){let A=g[b-1],E=g[b],C=n(_,S,A,E);C!==null&&x.find(T=>T.t<=C.t+Number.EPSILON&&T.t>=C.t-Number.EPSILON)===void 0&&(x.push(C),y.push(new se(C.x,C.y)))}}return y}function s(m,g,x){let y=new se;g.getCenter(y);let v=[];return x.forEach(_=>{_.boundingBox.containsPoint(y)&&i(m,_.points).forEach(S=>{v.push({identifier:_.identifier,isCW:_.isCW,point:S})})}),v.sort((_,S)=>_.point.x-S.point.x),v}function o(m,g,x,y,v){(v==null||v==="")&&(v="nonzero");let _=new se;m.boundingBox.getCenter(_);let S=[new se(x,_.y),new se(y,_.y)],b=s(S,m.boundingBox,g);b.sort((L,k)=>L.point.x-k.point.x);let A=[],E=[];b.forEach(L=>{L.identifier===m.identifier?A.push(L):E.push(L)});let C=A[0].point.x,T=[],O=0;for(;O<E.length&&E[O].point.x<C;)T.length>0&&T[T.length-1]===E[O].identifier?T.pop():T.push(E[O].identifier),O++;if(T.push(m.identifier),v==="evenodd"){let L=T.length%2===0,k=T[T.length-2];return{identifier:m.identifier,isHole:L,for:k}}else if(v==="nonzero"){let L=!0,k=null,B=null;for(let G=0;G<T.length;G++){let H=T[G];g[H]&&(L?(B=g[H].isCW,L=!1,k=H):B!==g[H].isCW&&(B=g[H].isCW,L=!0))}return{identifier:m.identifier,isHole:L,for:k}}else console.warn('fill-rule: "'+v+'" is currently not implemented.')}let a=0,l=999999999,c=-999999999,d=[];this.subPaths.forEach(m=>{let g=m.getPoints(),x=-999999999,y=999999999,v=-999999999,_=999999999;for(let S=0;S<g.length;S++){let b=g[S];b.y>x&&(x=b.y),b.y<y&&(y=b.y),b.x>v&&(v=b.x),b.x<_&&(_=b.x)}c<=v&&(c=v+1),l>=_&&(l=_-1),g.length&&d.push({curves:m.curves,points:g,isCW:Gs.isClockWise(g),identifier:a++,boundingBox:new LN(new se(_,y),new se(v,x))})});let u=d.map(m=>{var g;return o(m,d,l,c,(g=this.userData)==null?void 0:g.style.fillRule)}),h=[];return d.forEach(m=>{let g=u[m.identifier];if(g&&!g.isHole){let x=new Hs;x.curves=m.curves,u.filter(y=>(y==null?void 0:y.isHole)&&y.for===m.identifier).forEach(y=>{if(y){let v=d[y.identifier],_=new Bu;_.curves=v.curves,x.holes.push(_)}}),h.push(x)}}),h}},Ka;function hse(){return Ka||(Ka=new yX,Ka.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),Ka.decoderPending}async function fse(t){if(Ka){let e={attributeIDs:Ka.defaultAttributeIDs,attributeTypes:Ka.defaultAttributeTypes,useUniqueIDs:!1},n;try{n=await Ka.decodeGeometry(new Int8Array(t).buffer,e)}catch(r){console.error(r)}if(n)return{index:n.index?{array:n.index.array}:void 0,attributes:Object.entries(n.attributes).map(([r,i])=>({name:r,itemSize:i.itemSize,array:i.array}))}}return null}async function pse(t,e){let[n,r]=b4(nb.deserialize(new Uint8Array(t)));Mne(n);let i=[];n.scene.objects.traverse((s,o)=>{o.type==="Mesh"&&o.geometry.type==="NonParametricGeometry"&&o.geometry.data.draco!==void 0&&i.push(o)}),i.length&&await hse();for(let s of i){let o=await fse(ms(s.geometry.data.draco));if(o){o.index&&(s.geometry.data.index={array:o.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let a={};o.attributes.forEach(({name:l,array:c,itemSize:d})=>{a[l]={array:c,itemSize:d,type:"Float32Array",normalized:!1}}),s.geometry.data.attributes=a,s.geometry.data.draco=void 0}}return e&&e(n),r.result().data}function mse(t,e){return e.state.glyphIndex===t||e.state.fina===t||e.state.medi===t||e.state.init===t}var gse=class{constructor(t,e){var n;this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=(n=t.isUserFont)!=null?n:!1,this._loadingPromise=jL(t).then(r=>{r&&(this._arrayBuffer=r.arr,this._url=r.url,this.font=r.font,this._intercepted=r.intercepted,this._isLoaded=!0,e())})}update(t,e){var n;this._isLoaded=!1,this._isUserFont=(n=t.isUserFont)!=null?n:!1,this._loadingPromise=jL(t).then(r=>{r&&(this._arrayBuffer=r.arr,this._url=r.url,this.font=r.font,this._intercepted=r.intercepted,this._isLoaded=!0,e())})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}async reverseLigaturesTable(t,e,n){let{Bidi:r}=await zb,i=new r,s=d=>t.charToGlyphIndex(d.char);i.registerModifier("glyphIndex",null,s),i.applyFeatures(t,t.defaultRenderOptions.features),i.getTextGlyphs(e);let o=i.tokenizer.tokens,a=[],l=0,c=n.length===o.length;for(let d=0;d<n.length;d++){let u=n[d].index,h=String.fromCharCode(n[d].unicode),m=o[l];if(mse(u,m)||c)a.push({char:h,index:u,replacements:[m.state.glyphIndex],replacementChars:[m.char]}),l++;else{let g=m.char,x="",y=[m.state.glyphIndex],v=[],_=!1;for(;!_;)l++,x=e.charAt(l),g+=x,y.push(t.charToGlyphIndex(x)),v=t.stringToGlyphs(g),v.length===1&&v[0].index===u&&(_=!0),l>e.length&&(_=!0);a.push({char:h,index:u,replacements:y,replacementChars:Array.from(g)}),l++}}return a}async generateShapes(t,e){await this._loadingPromise;let n=this.font,r=e.fontSize/this.unitsPerEm,i=e.fontSize*e.lineHeight,s=t.map(v=>this.getTextWidth(v,e)),o=e.width,a=this.getCharWidth(`
`,e),l=e.horizontalAlign===1?a:0,c=this.computeSpaceWidthForLine(t,0,e),d=this.getLineInitialOffsetX(s[0],o,e.horizontalAlign,t[0],a),u=this.getLineInitialOffsetY(i,t.length,e.height,r,e.verticalAlign),h=[],m=t.map(v=>[]),g=t.map(v=>[]),x;for(let v=0;v<t.length;v++){let _=t[v],S={features:{liga:!0}},b=[];try{b=n.stringToGlyphs(_,S)}catch(E){console.warn(E)}d=this.getLineInitialOffsetX(s[v],o,e.horizontalAlign,_,a);let A=[];try{A=await this.reverseLigaturesTable(n,_,b)}catch(E){console.warn(E)}c=this.computeSpaceWidthForLine(t,v,e);for(let E=0;E<b.length;E++){let C=b[E],T=C.index===0?`
`:C.unicode?String.fromCharCode(C.unicode):void 0,O=A[E],L=0,k=0;E===0&&e.horizontalAlign===2&&C.leftSideBearing!==void 0&&(k=-C.leftSideBearing*r),x&&(L=n.getKerningValue(C,x)*r),d+=k+L;let B=0;if(T===`
`)B=l;else if(T===" ")B=c;else{let G=this.createPath(C,r,d,u,e);G&&(B=G.offsetX-(L+k),h.push(G.path))}if(O.replacements.length===1)g[v].push([d,u]),m[v].push(B);else{let G=O.replacements.map(Z=>{var D;return((D=n.glyphs.get(Z).advanceWidth)!=null?D:0)*r}),H=G.reduce((Z,D)=>Z+=D,0),Y=G.map(Z=>Z/H),te=d;for(let Z=0;Z<Y.length;Z++){let D=B*Y[Z];g[v].push([te,u]),m[v].push(D),te+=D}}d+=B,x=C}u-=i}let y=[];for(let v=0,_=h.length;v<_;v++)y.push(...h[v].toShapes());return{shapes:y,charWidths:m,lineWidths:s,charCoords:g}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var t,e;return(e=(t=this.font)==null?void 0:t.ascender)!=null?e:0}get descender(){var t,e;return(e=(t=this.font)==null?void 0:t.descender)!=null?e:0}get familyName(){var t,e;return(e=(t=this.font)==null?void 0:t.names.fontFamily)!=null?e:""}get subfamilyName(){var t,e;return(e=(t=this.font)==null?void 0:t.names.fontSubfamily)!=null?e:""}get unitsPerEm(){var t,e;return(e=(t=this.font)==null?void 0:t.unitsPerEm)!=null?e:1}getLineInitialOffsetX(t,e,n,r,i){return(n===3||n===2)&&r.indexOf(`
`)>=0&&(t-=i),n===3?e*.5-t*.5:n===2?e-t:0}getLineInitialOffsetY(t,e,n,r,i){let s=e*t,o=Math.abs(this.ascender-this.descender)*r,a=t-o,l=-this.ascender*r-a/2;return i===3?-(n-s-l):i===2?-(n*.5-s*.5-l):l}createPath(t,e,n,r,i){var l,c;let s=t.getPath(n,-r,i.fontSize,{kerning:!1,letterSpacing:i.letterSpacing});if(!s){console.error('THREE.Font: character "'+t+'" does not exists in font family '+this.familyName+".");return}let o=new dse,a=((l=t.advanceWidth)!=null?l:1)*e;if(t)for(let d of s.commands){let u=(c=o.currentPath)==null?void 0:c.currentPoint;if(!(u&&d.type!=="Z"&&u.x===d.x&&-u.y===d.y))switch(d.type){case"M":o.moveTo(d.x,-d.y);break;case"L":o.lineTo(d.x,-d.y);break;case"Q":o.quadraticCurveTo(d.x1,-d.y1,d.x,-d.y);break;case"C":o.bezierCurveTo(d.x1,-d.y1,d.x2,-d.y2,d.x,-d.y);break}}return o.subPaths.forEach(d=>{let u=vse(d.curves);u!==void 0&&d.currentPoint.distanceTo(u)>0&&d.lineTo(u.x,u.y)}),{offsetX:a+i.fontSize*i.letterSpacing,path:o}}getCharWidth(t,e){var n,r;return(r=(n=this.font)==null?void 0:n.getAdvanceWidth(t,e.fontSize,{kerning:!0,letterSpacing:e.letterSpacing}))!=null?r:0}getTextWidth(t,e){var n,r;return(r=(n=this.font)==null?void 0:n.getAdvanceWidth(t,e.fontSize,{kerning:!0,letterSpacing:e.letterSpacing}))!=null?r:0}computeSpaceWidthForLine(t,e,n){let r=this.getCharWidth(" ",n),i=t[e];if(i){let s=this.countSpaces(i.trimEnd());if(n.horizontalAlign===4&&e<t.length-1&&s){let o=n.width,a=this.getTextWidth(i,n);return(o-(a-s*r))/s}}return r}countSpaces(t){return(t.match(/ /g)||[]).length}};function vse(t){if(t.length){let e=t[0];if(e instanceof ps)return e.v1;if(e instanceof hs||e instanceof pa)return e.v0}}var R5=class{constructor(t,e={}){if(this.deletedMaterial=new kb(oa.defaultTwoLayerData("phong"),this),this.deletedImage=new Db(Sb.emptyImage),this.materials={},this.images={},this.colors={},this.audios={},this.fonts={},this.penumbraSize=[],this.onImageLoad=()=>{this._onImageLoad&&this._onImageLoad()},this.onFontLoad=()=>{this._onFontLoad&&this._onFontLoad()},e.images)for(let[n,r]of Object.entries(e.images))this.addImage(n,r);if(e.audios)for(let[n,r]of Object.entries(e.audios))this.addAudio(n,r.data);this.reset(t)}setOnImageLoad(t){this._onImageLoad=t}setOnFontLoad(t){this._onFontLoad=t}reset(t){for(let[e,n]of Object.entries(t.images))this.addImage(e,n);for(let[e,n]of Object.entries(t.colors))this.addColor(e,n);for(let[e,n]of Object.entries(t.materials))this.addMaterial(e,new kb(n,this));for(let[e,n]of Object.entries(t.audios))this.addAudio(e,n.data);for(let[e,n]of Object.entries(t.fonts))this.addFont(e,n);this.penumbraSize=t.penumbraSize}addMaterial(t,e){e.uuid=t,this.materials[t]=e}deleteMaterial(t){this.materials[t]&&(this.materials[t].dispose(),delete this.materials[t])}getMaterial(t){return this.materials[t]}getMaterialOrDeletedPlaceholder(t){var e;return(e=this.materials[t])!=null?e:this.deletedMaterial}material(t){return typeof t=="string"?this.getMaterialOrDeletedPlaceholder(t):new Fd(t,this)}getMaterials(){return this.materials}addImage(t,e){return this.images[t]?(this.images[t].updateSrc(e.data),!0):(this.images[t]=new Db(e,this.onImageLoad),!1)}deleteImage(t){this.images[t]&&delete this.images[t]}getDefaultImage(){return this.images.image_0}getImage(t){var e;return(e=this.images[t])!=null?e:this.deletedImage}image(t){return typeof t=="string"?this.getImage(t):new f5(t,this.onImageLoad)}getImages(){return this.images}addColor(t,e){return this.colors[t]?("a"in e?this.colors[t].setRGBA(e.r,e.g,e.b,e.a):this.colors[t].setRGBA(e.r,e.g,e.b,1),!0):("a"in e?this.colors[t]=new kv(e.r,e.g,e.b,e.a):this.colors[t]=new kv(e.r,e.g,e.b,1),!1)}updateColor(t,e){var n,r,i,s;if(this.colors[t]){let o=this.colors[t];return this.colors[t].r=(n=e.r)!=null?n:o.r,this.colors[t].g=(r=e.g)!=null?r:o.g,this.colors[t].b=(i=e.b)!=null?i:o.b,this.colors[t].a=(s=e.a)!=null?s:o.a,!0}return!1}deleteColor(t){this.colors[t]&&delete this.colors[t]}getColor(t){return this.colors[t]}color(t){let e;if(typeof t=="string"){let n=this.getColor(t);n?e=n:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),e=new Ws(0,0,0,0))}else return"a"in t?new Ws(t.r,t.g,t.b,t.a):new Ws(t.r,t.g,t.b,1);return e}addAudio(t,e){this.audios[t]=e}getAudio(t){let e=this.audios[t];if(e instanceof iw)return e;{let n=new iw({src:e});return this.audios[t]=n,n}}deleteAudio(t){this.audios[t]&&delete this.audios[t]}addFont(t,e){this.fonts[t]=new gse(e,this.onFontLoad)}getFont(t){return this.fonts[t]}deleteFont(t){this.fonts[t]&&delete this.fonts[t]}dispose(){Object.keys(this.materials).forEach(t=>this.deleteMaterial(t)),this._onImageLoad=void 0,Object.values(this.audios).forEach(t=>{t instanceof iw&&t.dispose()}),this.audios={}}};new R5(wb.emptyData());function yse(t){let e;if(t.index)for(let n=0;n<t.index.array.length;n+=3)e=t.index.array[n],t.index.array[n]=t.index.array[n+2],t.index.array[n+2]=e}function xse(t){let e=new Set;return t.traverse(n=>{if(Bd(n))if(qs(n.material))n.material.forEach(r=>{let i=r;e.has(i)||e.add(i)});else{let r=n.material;e.has(r)||e.add(r)}}),e.forEach(n=>{if(n instanceof Array)return;let r=n.onBeforeCompile.bind(n);if(_se(n)){Object.assign(n,{isMeshStandardMaterial:!0,isMeshPhysicalMaterial:!0,transmission:1,attenuationColor:new We,specularColor:new We});let i=0;n.onBeforeCompile=(s,o)=>{r&&r(s,o),s.uniforms=Object.assign({},ls.physical.uniforms,s.uniforms),n.getLayersOfType("transmission").forEach(a=>{if(s.uniforms.transmissionSamplerMap.value){let l=a.color;l&&(l.transmissionSamplerMap.value=s.uniforms.transmissionSamplerMap.value,l.transmissionSamplerSize.value=s.uniforms.transmissionSamplerSize.value)}else i++,i<2&&(n.needsUpdate=!0)})}}else wse(n)||(n.onBeforeCompile=(i,s)=>{r&&r(i,s),n.transparent=!1})}),t}function _se(t){return t.getLayersOfType("transmission").length>0}function wse(t){let e=0;return t.layers.forEach(n=>{if(n.type!=="light"&&n.type!=="fresnel"){let r=n.uniforms["f"+n.id+"_alpha"];r&&(e+=(1-e)*r.value)}}),e<1}function Sse(t){return t.traverse(e=>{if(e.type==="Camera"){let n=e;n.type=n.cameraType}}),t}function bse(t){let e=[],n=(r,i=0)=>{let s=i>0?r+i:r;return e.includes(s)?n(r,i+1):s};return t.traverse(r=>{if(e.includes(r.name)){let i=r.name,s=n(r.name);if(r.name=s,r.isMesh){let o=r;o.material instanceof Array?o.material.forEach(a=>{a.name=a.name.replace(i,s)}):o.material.isAsset||(o.material.name=o.material.name.replace(i,s))}}e.push(r.name)}),t}function Mse(t){let e=[];return t.traverse(n=>{n instanceof bb&&e.push(n)}),e.forEach(n=>{let r=n.object,i=n.children.map(o=>{o.updateMatrix();let a=o.geometry.clone().applyMatrix4(o.matrix);return o.matrix.determinant()<0&&yse(a),a}),s=d4(n.parameters.hideBase?i:[r.geometry,...i]);r.geometry=s,r.remove(n),r.cloner=void 0}),t}function Ese(t){return t.traverse(e=>{e.matrixAutoUpdate=!0}),t}function Tse(t){Object.values(t.shared.materials).forEach(e=>{sw(e)}),t.scene.objects.traverse((e,n)=>{"material"in n?sw(n.material):"materials"in n&&n.materials.forEach(r=>{sw(r)})})}function sw(t){if(typeof t=="string")return;let e=[];t.layers.forEach((n,r)=>{n.type==="outline"&&e.push(r)}),e.reverse().forEach(n=>{t.layers.delete(n)}),e.length&&console.warn("The Spline Loader currently does not support the outline layer.")}var tO="The SplineLoader only accepts .splinecode files that are generated from Spline export panel.",Ase=class extends Qr{load(t,e,n,r=console.error){let i=new ws(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),t.endsWith(".spline")?console.warn(tO+" The .spline files are only meant to be used by the Editor."):t.endsWith(".splinecode")||console.warn(tO),i.load(t,async s=>{try{if(typeof s=="string")throw new Error("The .spline file is not binary!");let o=await this.parse(s);e(o)}catch(o){r(o)}},n,r)}async parse(t){let e=await pse(t,Tse);jie(e)&&await Vie();let n=new R5(e.shared);Object.values(n.getMaterials()).forEach(s=>Object.assign(s,{isAsset:!0}));let r=new D5(e.scene,n);r.remove(r.personalCamera),e.scene.environment.ambientLight.enabled||r.remove(r.ambientLight);let i=e.scene.publish.playCamera;if(i){let s=r.find(i);s&&jre(s)&&Object.assign(s,{makeDefault:!0})}return r=Mse(r),r=xse(r),r=Sse(r),r=bse(r),r=Ese(r),r}};function Cse(t){const e=T2(Ase,t);return K$(e)}function Pse(t){const e=ue.exports.createContext(null);return[({children:i,value:s})=>fe(e.Provider,{value:s,children:i}),()=>{const i=ue.exports.useContext(e);if(i===null)throw new Error(t);return i}]}function z5(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=z5(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Lse(){for(var t=0,e,n,r="";t<arguments.length;)(e=arguments[t++])&&(n=z5(e))&&(r&&(r+=" "),r+=n);return r}const N5={dark:["#C1C2C5","#A6A7AB","#909296","#5c5f66","#373A40","#2C2E33","#25262b","#1A1B1E","#141517","#101113"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]};function Ose(t){return()=>({fontFamily:t.fontFamily||"sans-serif"})}function Ise(t){return e=>({WebkitTapHighlightColor:"transparent",[e||"&:focus"]:{outlineOffset:2,outline:t.focusRing==="always"||t.focusRing==="auto"?`2px solid ${t.colors[t.primaryColor][t.colorScheme==="dark"?7:5]}`:"none"},[e?e.replace(":focus",":focus:not(:focus-visible)"):"&:focus:not(:focus-visible)"]:{outline:t.focusRing==="auto"||t.focusRing==="never"?"none":void 0}})}function nm(t){return e=>typeof t.primaryShade=="number"?t.primaryShade:t.primaryShade[e||t.colorScheme]}function l3(t){const e=nm(t);return(n,r,i=!0,s=!0)=>{if(typeof n=="string"&&n.includes(".")){const[a,l]=n.split("."),c=parseInt(l,10);if(a in t.colors&&c>=0&&c<10)return t.colors[a][typeof r=="number"&&!s?r:c]}const o=typeof r=="number"?r:e();return n in t.colors?t.colors[n][o]:i?t.colors[t.primaryColor][o]:n}}function k5(t){let e="";for(let n=1;n<t.length-1;n+=1)e+=`${t[n]} ${n/(t.length-1)*100}%, `;return`${t[0]} 0%, ${e}${t[t.length-1]} 100%`}function Dse(t,...e){return`linear-gradient(${t}deg, ${k5(e)})`}function Rse(...t){return`radial-gradient(circle, ${k5(t)})`}function B5(t){const e=l3(t),n=nm(t);return r=>{const i={from:(r==null?void 0:r.from)||t.defaultGradient.from,to:(r==null?void 0:r.to)||t.defaultGradient.to,deg:(r==null?void 0:r.deg)||t.defaultGradient.deg};return`linear-gradient(${i.deg}deg, ${e(i.from,n(),!1)} 0%, ${e(i.to,n(),!1)} 100%)`}}function u3(t){if(typeof t.size=="number")return t.size;const e=t.sizes[t.size];return e!==void 0?e:t.size||t.sizes.md}function zse(t){return e=>`@media (min-width: ${u3({size:e,sizes:t.breakpoints})}px)`}function Nse(t){return e=>`@media (max-width: ${u3({size:e,sizes:t.breakpoints})-1}px)`}function kse(t){return/^#?([0-9A-F]{3}){1,2}$/i.test(t)}function Bse(t){let e=t.replace("#","");if(e.length===3){const o=e.split("");e=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}const n=parseInt(e,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function Fse(t){const[e,n,r,i]=t.replace(/[^0-9,.]/g,"").split(",").map(Number);return{r:e,g:n,b:r,a:i||1}}function c3(t){return kse(t)?Bse(t):t.startsWith("rgb")?Fse(t):{r:0,g:0,b:0,a:1}}function Gc(t,e){if(typeof t!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";const{r:n,g:r,b:i}=c3(t);return`rgba(${n}, ${r}, ${i}, ${e})`}function Use(t=0){return{position:"absolute",top:t,right:t,left:t,bottom:t}}function Vse(t,e){const{r:n,g:r,b:i,a:s}=c3(t),o=1-e,a=l=>Math.round(l*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function Hse(t,e){const{r:n,g:r,b:i,a:s}=c3(t),o=a=>Math.round(a+(255-a)*e);return`rgba(${o(n)}, ${o(r)}, ${o(i)}, ${s})`}function Gse(t){return e=>{if(typeof e=="number")return e;const n=typeof t.defaultRadius=="number"?t.defaultRadius:t.radius[t.defaultRadius]||t.defaultRadius;return t.radius[e]||e||n}}function Wse(t,e){if(typeof t=="string"&&t.includes(".")){const[n,r]=t.split("."),i=parseInt(r,10);if(n in e.colors&&i>=0&&i<10)return{isSplittedColor:!0,key:n,shade:i}}return{isSplittedColor:!1}}function jse(t){const e=l3(t),n=nm(t),r=B5(t);return({variant:i,color:s,gradient:o,primaryFallback:a})=>{const l=Wse(s,t);switch(i){case"light":return{border:"transparent",background:Gc(e(s,t.colorScheme==="dark"?8:0,a,!1),t.colorScheme==="dark"?.2:1),color:s==="dark"?t.colorScheme==="dark"?t.colors.dark[0]:t.colors.dark[9]:e(s,t.colorScheme==="dark"?2:n("light")),hover:Gc(e(s,t.colorScheme==="dark"?7:1,a,!1),t.colorScheme==="dark"?.25:.65)};case"subtle":return{border:"transparent",background:"transparent",color:s==="dark"?t.colorScheme==="dark"?t.colors.dark[0]:t.colors.dark[9]:e(s,t.colorScheme==="dark"?2:n("light")),hover:Gc(e(s,t.colorScheme==="dark"?8:0,a,!1),t.colorScheme==="dark"?.2:1)};case"outline":return{border:e(s,t.colorScheme==="dark"?5:n("light")),background:"transparent",color:e(s,t.colorScheme==="dark"?5:n("light")),hover:t.colorScheme==="dark"?Gc(e(s,5,a,!1),.05):Gc(e(s,0,a,!1),.35)};case"default":return{border:t.colorScheme==="dark"?t.colors.dark[4]:t.colors.gray[4],background:t.colorScheme==="dark"?t.colors.dark[6]:t.white,color:t.colorScheme==="dark"?t.white:t.black,hover:t.colorScheme==="dark"?t.colors.dark[5]:t.colors.gray[0]};case"white":return{border:"transparent",background:t.white,color:e(s,n()),hover:null};case"transparent":return{border:"transparent",color:s==="dark"?t.colorScheme==="dark"?t.colors.dark[0]:t.colors.dark[9]:e(s,t.colorScheme==="dark"?2:n("light")),background:"transparent",hover:null};case"gradient":return{background:r(o),color:t.white,border:"transparent",hover:null};default:{const c=n(),d=l.isSplittedColor?l.shade:c,u=l.isSplittedColor?l.key:s;return{border:"transparent",background:e(u,d,a),color:t.white,hover:e(u,d===9?8:d+1)}}}}}function $se(t){return e=>{const n=nm(t)(e);return t.colors[t.primaryColor][n]}}function qse(t){return{"@media (hover: hover)":{"&:hover":t},"@media (hover: none)":{"&:active":t}}}const fr={fontStyles:Ose,themeColor:l3,focusStyles:Ise,linearGradient:Dse,radialGradient:Rse,smallerThan:Nse,largerThan:zse,rgba:Gc,size:u3,cover:Use,darken:Vse,lighten:Hse,radius:Gse,variant:jse,primaryShade:nm,hover:qse,gradient:B5,primaryColor:$se};var Xse=Object.defineProperty,Yse=Object.defineProperties,Zse=Object.getOwnPropertyDescriptors,nO=Object.getOwnPropertySymbols,Jse=Object.prototype.hasOwnProperty,Qse=Object.prototype.propertyIsEnumerable,rO=(t,e,n)=>e in t?Xse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kse=(t,e)=>{for(var n in e||(e={}))Jse.call(e,n)&&rO(t,n,e[n]);if(nO)for(var n of nO(e))Qse.call(e,n)&&rO(t,n,e[n]);return t},eoe=(t,e)=>Yse(t,Zse(e));function F5(t){return eoe(Kse({},t),{fn:{fontStyles:fr.fontStyles(t),themeColor:fr.themeColor(t),focusStyles:fr.focusStyles(t),largerThan:fr.largerThan(t),smallerThan:fr.smallerThan(t),radialGradient:fr.radialGradient,linearGradient:fr.linearGradient,gradient:fr.gradient(t),rgba:fr.rgba,size:fr.size,cover:fr.cover,lighten:fr.lighten,darken:fr.darken,primaryShade:fr.primaryShade(t),radius:fr.radius(t),variant:fr.variant(t),hover:fr.hover,primaryColor:fr.primaryColor(t)}})}Object.keys(N5);const toe={dir:"ltr",primaryShade:{light:6,dark:8},focusRing:"auto",loader:"oval",dateFormat:"MMMM D, YYYY",colorScheme:"light",white:"#fff",black:"#000",defaultRadius:"sm",transitionTimingFunction:"ease",colors:N5,lineHeight:1.55,fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",primaryColor:"blue",respectReducedMotion:!0,cursorType:"default",defaultGradient:{from:"indigo",to:"cyan",deg:45},shadows:{xs:"0 1px 3px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.1)",sm:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 10px 15px -5px, rgba(0, 0, 0, 0.04) 0px 7px 7px -5px",md:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 20px 25px -5px, rgba(0, 0, 0, 0.04) 0px 10px 10px -5px",lg:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 28px 23px -7px, rgba(0, 0, 0, 0.04) 0px 12px 12px -7px",xl:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 36px 28px -7px, rgba(0, 0, 0, 0.04) 0px 17px 17px -7px"},fontSizes:{xs:12,sm:14,md:16,lg:18,xl:20},radius:{xs:2,sm:4,md:8,lg:16,xl:32},spacing:{xs:10,sm:12,md:16,lg:20,xl:24},breakpoints:{xs:576,sm:768,md:992,lg:1200,xl:1400},headings:{fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontWeight:700,sizes:{h1:{fontSize:34,lineHeight:1.3,fontWeight:void 0},h2:{fontSize:26,lineHeight:1.35,fontWeight:void 0},h3:{fontSize:22,lineHeight:1.4,fontWeight:void 0},h4:{fontSize:18,lineHeight:1.45,fontWeight:void 0},h5:{fontSize:16,lineHeight:1.5,fontWeight:void 0},h6:{fontSize:14,lineHeight:1.5,fontWeight:void 0}}},other:{},components:{},activeStyles:{transform:"translateY(1px)"},datesLocale:"en",globalStyles:void 0},d3=F5(toe);function noe(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function roe(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var ioe=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(roe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=noe(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Rr="-ms-",Fv="-moz-",Zt="-webkit-",U5="comm",h3="rule",f3="decl",soe="@import",V5="@keyframes",ooe=Math.abs,e1=String.fromCharCode,aoe=Object.assign;function loe(t,e){return _r(t,0)^45?(((e<<2^_r(t,0))<<2^_r(t,1))<<2^_r(t,2))<<2^_r(t,3):0}function H5(t){return t.trim()}function uoe(t,e){return(t=e.exec(t))?t[0]:t}function Kt(t,e,n){return t.replace(e,n)}function Bb(t,e){return t.indexOf(e)}function _r(t,e){return t.charCodeAt(e)|0}function bp(t,e,n){return t.slice(e,n)}function po(t){return t.length}function p3(t){return t.length}function p0(t,e){return e.push(t),t}function coe(t,e){return t.map(e).join("")}var t1=1,Ud=1,G5=0,gi=0,Zn=0,lh="";function n1(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:t1,column:Ud,length:o,return:""}}function nf(t,e){return aoe(n1("",null,null,"",null,null,0),t,{length:-t.length},e)}function doe(){return Zn}function hoe(){return Zn=gi>0?_r(lh,--gi):0,Ud--,Zn===10&&(Ud=1,t1--),Zn}function Oi(){return Zn=gi<G5?_r(lh,gi++):0,Ud++,Zn===10&&(Ud=1,t1++),Zn}function Mo(){return _r(lh,gi)}function W0(){return gi}function rm(t,e){return bp(lh,t,e)}function Mp(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function W5(t){return t1=Ud=1,G5=po(lh=t),gi=0,[]}function j5(t){return lh="",t}function j0(t){return H5(rm(gi-1,Fb(t===91?t+2:t===40?t+1:t)))}function foe(t){for(;(Zn=Mo())&&Zn<33;)Oi();return Mp(t)>2||Mp(Zn)>3?"":" "}function poe(t,e){for(;--e&&Oi()&&!(Zn<48||Zn>102||Zn>57&&Zn<65||Zn>70&&Zn<97););return rm(t,W0()+(e<6&&Mo()==32&&Oi()==32))}function Fb(t){for(;Oi();)switch(Zn){case t:return gi;case 34:case 39:t!==34&&t!==39&&Fb(Zn);break;case 40:t===41&&Fb(t);break;case 92:Oi();break}return gi}function moe(t,e){for(;Oi()&&t+Zn!==47+10;)if(t+Zn===42+42&&Mo()===47)break;return"/*"+rm(e,gi-1)+"*"+e1(t===47?t:Oi())}function goe(t){for(;!Mp(Mo());)Oi();return rm(t,gi)}function voe(t){return j5($0("",null,null,null,[""],t=W5(t),0,[0],t))}function $0(t,e,n,r,i,s,o,a,l){for(var c=0,d=0,u=o,h=0,m=0,g=0,x=1,y=1,v=1,_=0,S="",b=i,A=s,E=r,C=S;y;)switch(g=_,_=Oi()){case 40:if(g!=108&&_r(C,u-1)==58){Bb(C+=Kt(j0(_),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:C+=j0(_);break;case 9:case 10:case 13:case 32:C+=foe(g);break;case 92:C+=poe(W0()-1,7);continue;case 47:switch(Mo()){case 42:case 47:p0(yoe(moe(Oi(),W0()),e,n),l);break;default:C+="/"}break;case 123*x:a[c++]=po(C)*v;case 125*x:case 59:case 0:switch(_){case 0:case 125:y=0;case 59+d:m>0&&po(C)-u&&p0(m>32?sO(C+";",r,n,u-1):sO(Kt(C," ","")+";",r,n,u-2),l);break;case 59:C+=";";default:if(p0(E=iO(C,e,n,c,d,i,a,S,b=[],A=[],u),s),_===123)if(d===0)$0(C,e,E,E,b,s,u,a,A);else switch(h===99&&_r(C,3)===110?100:h){case 100:case 109:case 115:$0(t,E,E,r&&p0(iO(t,E,E,0,0,i,a,S,i,b=[],u),A),i,A,u,a,r?b:A);break;default:$0(C,E,E,E,[""],A,0,a,A)}}c=d=m=0,x=v=1,S=C="",u=o;break;case 58:u=1+po(C),m=g;default:if(x<1){if(_==123)--x;else if(_==125&&x++==0&&hoe()==125)continue}switch(C+=e1(_),_*x){case 38:v=d>0?1:(C+="\f",-1);break;case 44:a[c++]=(po(C)-1)*v,v=1;break;case 64:Mo()===45&&(C+=j0(Oi())),h=Mo(),d=u=po(S=C+=goe(W0())),_++;break;case 45:g===45&&po(C)==2&&(x=0)}}return s}function iO(t,e,n,r,i,s,o,a,l,c,d){for(var u=i-1,h=i===0?s:[""],m=p3(h),g=0,x=0,y=0;g<r;++g)for(var v=0,_=bp(t,u+1,u=ooe(x=o[g])),S=t;v<m;++v)(S=H5(x>0?h[v]+" "+_:Kt(_,/&\f/g,h[v])))&&(l[y++]=S);return n1(t,e,n,i===0?h3:a,l,c,d)}function yoe(t,e,n){return n1(t,e,n,U5,e1(doe()),bp(t,2,-2),0)}function sO(t,e,n,r){return n1(t,e,n,f3,bp(t,0,r),bp(t,r+1,-1),r)}function Md(t,e){for(var n="",r=p3(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function xoe(t,e,n,r){switch(t.type){case soe:case f3:return t.return=t.return||t.value;case U5:return"";case V5:return t.return=t.value+"{"+Md(t.children,r)+"}";case h3:t.value=t.props.join(",")}return po(n=Md(t.children,r))?t.return=t.value+"{"+n+"}":""}function _oe(t){var e=p3(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function woe(t){return function(e){e.root||(e=e.return)&&t(e)}}var oO=function(e){var n=new WeakMap;return function(r){if(n.has(r))return n.get(r);var i=e(r);return n.set(r,i),i}};function Soe(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var boe=function(e,n,r){for(var i=0,s=0;i=s,s=Mo(),i===38&&s===12&&(n[r]=1),!Mp(s);)Oi();return rm(e,gi)},Moe=function(e,n){var r=-1,i=44;do switch(Mp(i)){case 0:i===38&&Mo()===12&&(n[r]=1),e[r]+=boe(gi-1,n,r);break;case 2:e[r]+=j0(i);break;case 4:if(i===44){e[++r]=Mo()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=e1(i)}while(i=Oi());return e},Eoe=function(e,n){return j5(Moe(W5(e),n))},aO=new WeakMap,Toe=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!aO.get(r))&&!i){aO.set(e,!0);for(var s=[],o=Eoe(n,s),a=r.props,l=0,c=0;l<o.length;l++)for(var d=0;d<a.length;d++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[d]):a[d]+" "+o[l]}}},Aoe=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function $5(t,e){switch(loe(t,e)){case 5103:return Zt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Zt+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Zt+t+Fv+t+Rr+t+t;case 6828:case 4268:return Zt+t+Rr+t+t;case 6165:return Zt+t+Rr+"flex-"+t+t;case 5187:return Zt+t+Kt(t,/(\w+).+(:[^]+)/,Zt+"box-$1$2"+Rr+"flex-$1$2")+t;case 5443:return Zt+t+Rr+"flex-item-"+Kt(t,/flex-|-self/,"")+t;case 4675:return Zt+t+Rr+"flex-line-pack"+Kt(t,/align-content|flex-|-self/,"")+t;case 5548:return Zt+t+Rr+Kt(t,"shrink","negative")+t;case 5292:return Zt+t+Rr+Kt(t,"basis","preferred-size")+t;case 6060:return Zt+"box-"+Kt(t,"-grow","")+Zt+t+Rr+Kt(t,"grow","positive")+t;case 4554:return Zt+Kt(t,/([^-])(transform)/g,"$1"+Zt+"$2")+t;case 6187:return Kt(Kt(Kt(t,/(zoom-|grab)/,Zt+"$1"),/(image-set)/,Zt+"$1"),t,"")+t;case 5495:case 3959:return Kt(t,/(image-set\([^]*)/,Zt+"$1$`$1");case 4968:return Kt(Kt(t,/(.+:)(flex-)?(.*)/,Zt+"box-pack:$3"+Rr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Zt+t+t;case 4095:case 3583:case 4068:case 2532:return Kt(t,/(.+)-inline(.+)/,Zt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(po(t)-1-e>6)switch(_r(t,e+1)){case 109:if(_r(t,e+4)!==45)break;case 102:return Kt(t,/(.+:)(.+)-([^]+)/,"$1"+Zt+"$2-$3$1"+Fv+(_r(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Bb(t,"stretch")?$5(Kt(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(_r(t,e+1)!==115)break;case 6444:switch(_r(t,po(t)-3-(~Bb(t,"!important")&&10))){case 107:return Kt(t,":",":"+Zt)+t;case 101:return Kt(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Zt+(_r(t,14)===45?"inline-":"")+"box$3$1"+Zt+"$2$3$1"+Rr+"$2box$3")+t}break;case 5936:switch(_r(t,e+11)){case 114:return Zt+t+Rr+Kt(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Zt+t+Rr+Kt(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Zt+t+Rr+Kt(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Zt+t+Rr+t+t}return t}var Coe=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case f3:e.return=$5(e.value,e.length);break;case V5:return Md([nf(e,{value:Kt(e.value,"@","@"+Zt)})],i);case h3:if(e.length)return coe(e.props,function(s){switch(uoe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Md([nf(e,{props:[Kt(s,/:(read-\w+)/,":"+Fv+"$1")]})],i);case"::placeholder":return Md([nf(e,{props:[Kt(s,/:(plac\w+)/,":"+Zt+"input-$1")]}),nf(e,{props:[Kt(s,/:(plac\w+)/,":"+Fv+"$1")]}),nf(e,{props:[Kt(s,/:(plac\w+)/,Rr+"input-$1")]})],i)}return""})}},Poe=[Coe],q5=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(x){var y=x.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(x),x.setAttribute("data-s",""))})}var i=e.stylisPlugins||Poe,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(x){for(var y=x.getAttribute("data-emotion").split(" "),v=1;v<y.length;v++)s[y[v]]=!0;a.push(x)});var l,c=[Toe,Aoe];{var d,u=[xoe,woe(function(x){d.insert(x)})],h=_oe(c.concat(i,u)),m=function(y){return Md(voe(y),h)};l=function(y,v,_,S){d=_,m(y?y+"{"+v.styles+"}":v.styles),S&&(g.inserted[v.name]=!0)}}var g={key:n,sheet:new ioe({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return g.sheet.hydrate(a),g},X5={exports:{}},sn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vr=typeof Symbol=="function"&&Symbol.for,m3=vr?Symbol.for("react.element"):60103,g3=vr?Symbol.for("react.portal"):60106,r1=vr?Symbol.for("react.fragment"):60107,i1=vr?Symbol.for("react.strict_mode"):60108,s1=vr?Symbol.for("react.profiler"):60114,o1=vr?Symbol.for("react.provider"):60109,a1=vr?Symbol.for("react.context"):60110,v3=vr?Symbol.for("react.async_mode"):60111,l1=vr?Symbol.for("react.concurrent_mode"):60111,u1=vr?Symbol.for("react.forward_ref"):60112,c1=vr?Symbol.for("react.suspense"):60113,Loe=vr?Symbol.for("react.suspense_list"):60120,d1=vr?Symbol.for("react.memo"):60115,h1=vr?Symbol.for("react.lazy"):60116,Ooe=vr?Symbol.for("react.block"):60121,Ioe=vr?Symbol.for("react.fundamental"):60117,Doe=vr?Symbol.for("react.responder"):60118,Roe=vr?Symbol.for("react.scope"):60119;function Bi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case m3:switch(t=t.type,t){case v3:case l1:case r1:case s1:case i1:case c1:return t;default:switch(t=t&&t.$$typeof,t){case a1:case u1:case h1:case d1:case o1:return t;default:return e}}case g3:return e}}}function Y5(t){return Bi(t)===l1}sn.AsyncMode=v3;sn.ConcurrentMode=l1;sn.ContextConsumer=a1;sn.ContextProvider=o1;sn.Element=m3;sn.ForwardRef=u1;sn.Fragment=r1;sn.Lazy=h1;sn.Memo=d1;sn.Portal=g3;sn.Profiler=s1;sn.StrictMode=i1;sn.Suspense=c1;sn.isAsyncMode=function(t){return Y5(t)||Bi(t)===v3};sn.isConcurrentMode=Y5;sn.isContextConsumer=function(t){return Bi(t)===a1};sn.isContextProvider=function(t){return Bi(t)===o1};sn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===m3};sn.isForwardRef=function(t){return Bi(t)===u1};sn.isFragment=function(t){return Bi(t)===r1};sn.isLazy=function(t){return Bi(t)===h1};sn.isMemo=function(t){return Bi(t)===d1};sn.isPortal=function(t){return Bi(t)===g3};sn.isProfiler=function(t){return Bi(t)===s1};sn.isStrictMode=function(t){return Bi(t)===i1};sn.isSuspense=function(t){return Bi(t)===c1};sn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===r1||t===l1||t===s1||t===i1||t===c1||t===Loe||typeof t=="object"&&t!==null&&(t.$$typeof===h1||t.$$typeof===d1||t.$$typeof===o1||t.$$typeof===a1||t.$$typeof===u1||t.$$typeof===Ioe||t.$$typeof===Doe||t.$$typeof===Roe||t.$$typeof===Ooe)};sn.typeOf=Bi;(function(t){t.exports=sn})(X5);var Z5=X5.exports,zoe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Noe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},J5={};J5[Z5.ForwardRef]=zoe;J5[Z5.Memo]=Noe;var koe=!0;function Boe(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var Foe=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||koe===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},Q5=function(e,n,r){Foe(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Uoe(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Voe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Hoe=/[A-Z]|^ms/g,Goe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,K5=function(e){return e.charCodeAt(1)===45},lO=function(e){return e!=null&&typeof e!="boolean"},ow=Soe(function(t){return K5(t)?t:t.replace(Hoe,"-$&").toLowerCase()}),uO=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(Goe,function(r,i,s){return mo={name:i,styles:s,next:mo},i})}return Voe[e]!==1&&!K5(e)&&typeof n=="number"&&n!==0?n+"px":n};function Ep(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return mo={name:n.name,styles:n.styles,next:mo},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)mo={name:r.name,styles:r.styles,next:mo},r=r.next;var i=n.styles+";";return i}return Woe(t,e,n)}case"function":{if(t!==void 0){var s=mo,o=n(t);return mo=s,Ep(t,e,o)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function Woe(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Ep(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")e!=null&&e[o]!==void 0?r+=s+"{"+e[o]+"}":lO(o)&&(r+=ow(s)+":"+uO(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)lO(o[a])&&(r+=ow(s)+":"+uO(s,o[a])+";");else{var l=Ep(t,e,o);switch(s){case"animation":case"animationName":{r+=ow(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var cO=/label:\s*([^\s;\n{]+)\s*(;|$)/g,mo,eB=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";mo=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=Ep(r,n,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=Ep(r,n,e[a]),i&&(s+=o[a]);cO.lastIndex=0;for(var l="",c;(c=cO.exec(s))!==null;)l+="-"+c[1];var d=Uoe(s)+l;return{name:d,styles:s,next:mo}},joe=hT["useInsertionEffect"]?hT["useInsertionEffect"]:!1,dO=joe||ue.exports.useLayoutEffect,tB=ue.exports.createContext(typeof HTMLElement<"u"?q5({key:"css"}):null);tB.Provider;var $oe=function(e){return ue.exports.forwardRef(function(n,r){var i=ue.exports.useContext(tB);return e(n,i,r)})},Ub=ue.exports.createContext({}),qoe=function(e,n){if(typeof n=="function"){var r=n(e);return r}return lS({},e,n)},Xoe=oO(function(t){return oO(function(e){return qoe(t,e)})}),Yoe=function(e){var n=ue.exports.useContext(Ub);return e.theme!==n&&(n=Xoe(n)(e.theme)),ue.exports.createElement(Ub.Provider,{value:n},e.children)},f1=$oe(function(t,e){var n=t.styles,r=eB([n],void 0,ue.exports.useContext(Ub)),i=ue.exports.useRef();return dO(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),dO(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&Q5(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null}),Zoe=Object.defineProperty,Joe=Object.defineProperties,Qoe=Object.getOwnPropertyDescriptors,hO=Object.getOwnPropertySymbols,Koe=Object.prototype.hasOwnProperty,eae=Object.prototype.propertyIsEnumerable,fO=(t,e,n)=>e in t?Zoe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tae=(t,e)=>{for(var n in e||(e={}))Koe.call(e,n)&&fO(t,n,e[n]);if(hO)for(var n of hO(e))eae.call(e,n)&&fO(t,n,e[n]);return t},nae=(t,e)=>Joe(t,Qoe(e));function rae({theme:t}){return fe(f1,{styles:{"*, *::before, *::after":{boxSizing:"border-box"},html:{colorScheme:t.colorScheme==="dark"?"dark":"light"},body:nae(tae({},t.fn.fontStyles()),{backgroundColor:t.colorScheme==="dark"?t.colors.dark[7]:t.white,color:t.colorScheme==="dark"?t.colors.dark[0]:t.black,lineHeight:t.lineHeight,fontSize:t.fontSizes.md,WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"})}})}function m0(t,e,n){Object.keys(e).forEach(r=>{t[`--mantine-${n}-${r}`]=typeof e[r]=="number"?`${e[r]}px`:e[r]})}function iae({theme:t}){const e={"--mantine-color-white":t.white,"--mantine-color-black":t.black,"--mantine-transition-timing-function":t.transitionTimingFunction,"--mantine-line-height":`${t.lineHeight}`,"--mantine-font-family":t.fontFamily,"--mantine-font-family-monospace":t.fontFamilyMonospace,"--mantine-font-family-headings":t.headings.fontFamily,"--mantine-heading-font-weight":`${t.headings.fontWeight}`};m0(e,t.shadows,"shadow"),m0(e,t.fontSizes,"font-size"),m0(e,t.radius,"radius"),m0(e,t.spacing,"spacing"),Object.keys(t.colors).forEach(r=>{t.colors[r].forEach((i,s)=>{e[`--mantine-color-${r}-${s}`]=i})});const n=t.headings.sizes;return Object.keys(n).forEach(r=>{e[`--mantine-${r}-font-size`]=`${n[r].fontSize}px`,e[`--mantine-${r}-line-height`]=`${n[r].lineHeight}`}),fe(f1,{styles:{":root":e}})}var sae=Object.defineProperty,oae=Object.defineProperties,aae=Object.getOwnPropertyDescriptors,pO=Object.getOwnPropertySymbols,lae=Object.prototype.hasOwnProperty,uae=Object.prototype.propertyIsEnumerable,mO=(t,e,n)=>e in t?sae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xl=(t,e)=>{for(var n in e||(e={}))lae.call(e,n)&&mO(t,n,e[n]);if(pO)for(var n of pO(e))uae.call(e,n)&&mO(t,n,e[n]);return t},gO=(t,e)=>oae(t,aae(e));function cae(t,e){return e?Object.keys(t).reduce((n,r)=>{if(r==="headings"&&e.headings){const i=e.headings.sizes?Object.keys(t.headings.sizes).reduce((s,o)=>(s[o]=Xl(Xl({},t.headings.sizes[o]),e.headings.sizes[o]),s),{}):t.headings.sizes;return gO(Xl({},n),{headings:gO(Xl(Xl({},t.headings),e.headings),{sizes:i})})}return n[r]=typeof e[r]=="object"?Xl(Xl({},t[r]),e[r]):typeof e[r]=="number"||typeof e[r]=="boolean"||typeof e[r]=="function"?e[r]:e[r]||t[r],n},{}):t}function dae(t,e){return F5(cae(t,e))}function nB(t){return Object.keys(t).reduce((e,n)=>(t[n]!==void 0&&(e[n]=t[n]),e),{})}const hae={html:{fontFamily:"sans-serif",lineHeight:"1.15",textSizeAdjust:"100%"},body:{margin:0},"article, aside, footer, header, nav, section, figcaption, figure, main":{display:"block"},h1:{fontSize:"2em"},hr:{boxSizing:"content-box",height:0,overflow:"visible"},pre:{fontFamily:"monospace, monospace",fontSize:"1em"},a:{background:"transparent",textDecorationSkip:"objects"},"a:active, a:hover":{outlineWidth:0},"abbr[title]":{borderBottom:"none",textDecoration:"underline"},"b, strong":{fontWeight:"bolder"},"code, kbp, samp":{fontFamily:"monospace, monospace",fontSize:"1em"},dfn:{fontStyle:"italic"},mark:{backgroundColor:"#ff0",color:"#000"},small:{fontSize:"80%"},"sub, sup":{fontSize:"75%",lineHeight:0,position:"relative",verticalAlign:"baseline"},sup:{top:"-0.5em"},sub:{bottom:"-0.25em"},"audio, video":{display:"inline-block"},"audio:not([controls])":{display:"none",height:0},img:{borderStyle:"none",verticalAlign:"middle"},"svg:not(:root)":{overflow:"hidden"},"button, input, optgroup, select, textarea":{fontFamily:"sans-serif",fontSize:"100%",lineHeight:"1.15",margin:0},"button, input":{overflow:"visible"},"button, select":{textTransform:"none"},"button, [type=reset], [type=submit]":{WebkitAppearance:"button"},"button::-moz-focus-inner, [type=button]::-moz-focus-inner, [type=reset]::-moz-focus-inner, [type=submit]::-moz-focus-inner":{borderStyle:"none",padding:0},"button:-moz-focusring, [type=button]:-moz-focusring, [type=reset]:-moz-focusring, [type=submit]:-moz-focusring":{outline:"1px dotted ButtonText"},legend:{boxSizing:"border-box",color:"inherit",display:"table",maxWidth:"100%",padding:0,whiteSpace:"normal"},progress:{display:"inline-block",verticalAlign:"baseline"},textarea:{overflow:"auto"},"[type=checkbox], [type=radio]":{boxSizing:"border-box",padding:0},"[type=number]::-webkit-inner-spin-button, [type=number]::-webkit-outer-spin-button":{height:"auto"},"[type=search]":{appearance:"none"},"[type=search]::-webkit-search-cancel-button, [type=search]::-webkit-search-decoration":{appearance:"none"},"::-webkit-file-upload-button":{appearance:"button",font:"inherit"},"details, menu":{display:"block"},summary:{display:"list-item"},canvas:{display:"inline-block"},template:{display:"none"},"[hidden]":{display:"none"}};function fae(){return fe(f1,{styles:hae})}var pae=Object.defineProperty,vO=Object.getOwnPropertySymbols,mae=Object.prototype.hasOwnProperty,gae=Object.prototype.propertyIsEnumerable,yO=(t,e,n)=>e in t?pae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Df=(t,e)=>{for(var n in e||(e={}))mae.call(e,n)&&yO(t,n,e[n]);if(vO)for(var n of vO(e))gae.call(e,n)&&yO(t,n,e[n]);return t};const Uv=ue.exports.createContext({theme:d3});function uh(){var t;return((t=ue.exports.useContext(Uv))==null?void 0:t.theme)||d3}function vae(t){const e=uh(),n=r=>{var i,s;return{styles:((i=e.components[r])==null?void 0:i.styles)||{},classNames:((s=e.components[r])==null?void 0:s.classNames)||{}}};return Array.isArray(t)?t.map(n):[n(t)]}function rB(){var t;return(t=ue.exports.useContext(Uv))==null?void 0:t.emotionCache}function vi(t,e,n){var r;const s=(r=uh().components[t])==null?void 0:r.defaultProps;return Df(Df(Df({},e),s),nB(n))}function y3({theme:t,emotionCache:e,withNormalizeCSS:n=!1,withGlobalStyles:r=!1,withCSSVariables:i=!1,inherit:s=!1,children:o}){const a=ue.exports.useContext(Uv),l=dae(d3,s?Df(Df({},a.theme),t):t);return fe(Yoe,{theme:l,children:Yt(Uv.Provider,{value:{theme:l,emotionCache:e},children:[n&&fe(fae,{}),r&&fe(rae,{theme:l}),i&&fe(iae,{theme:l}),typeof l.globalStyles=="function"&&fe(f1,{styles:l.globalStyles(l)}),o]})})}y3.displayName="@mantine/core/MantineProvider";const iB=ue.exports.createContext({classNames:{},styles:{},unstyled:!1});function yae({children:t,classNames:e,unstyled:n,styles:r,staticSelector:i}){return fe(iB.Provider,{value:{classNames:e,styles:r,unstyled:n,staticSelector:i},children:t})}function xae(){return ue.exports.useContext(iB)}var xO=Object.getOwnPropertySymbols,_ae=Object.prototype.hasOwnProperty,wae=Object.prototype.propertyIsEnumerable,Sae=(t,e)=>{var n={};for(var r in t)_ae.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&xO)for(var r of xO(t))e.indexOf(r)<0&&wae.call(t,r)&&(n[r]=t[r]);return n};function bae(t){const e=t,{m:n,mx:r,my:i,mt:s,mb:o,ml:a,mr:l,p:c,px:d,py:u,pt:h,pb:m,pl:g,pr:x}=e,y=Sae(e,["m","mx","my","mt","mb","ml","mr","p","px","py","pt","pb","pl","pr"]);return{systemStyles:nB({m:n,mx:r,my:i,mt:s,mb:o,ml:a,mr:l,p:c,px:d,py:u,pt:h,pb:m,pl:g,pr:x}),rest:y}}function Mae(t,e){const n=ue.exports.useRef();return(!n.current||e.length!==n.current.prevDeps.length||n.current.prevDeps.map((r,i)=>r===e[i]).indexOf(!1)>=0)&&(n.current={v:t(),prevDeps:[...e]}),n.current.v}const Eae=q5({key:"mantine",prepend:!0});function Tae(){return rB()||Eae}var Aae=Object.defineProperty,_O=Object.getOwnPropertySymbols,Cae=Object.prototype.hasOwnProperty,Pae=Object.prototype.propertyIsEnumerable,wO=(t,e,n)=>e in t?Aae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lae=(t,e)=>{for(var n in e||(e={}))Cae.call(e,n)&&wO(t,n,e[n]);if(_O)for(var n of _O(e))Pae.call(e,n)&&wO(t,n,e[n]);return t};const aw="ref";function Oae(t){let e;if(t.length!==1)return{args:t,ref:e};const[n]=t;if(!(n instanceof Object))return{args:t,ref:e};if(!(aw in n))return{args:t,ref:e};e=n[aw];const r=Lae({},n);return delete r[aw],{args:[r],ref:e}}const{cssFactory:Iae}=(()=>{function t(n,r,i){const s=[],o=Boe(n,s,i);return s.length<2?i:o+r(s)}function e(n){const{cache:r}=n,i=(...o)=>{const{ref:a,args:l}=Oae(o),c=eB(l,r.registered);return Q5(r,c,!1),`${r.key}-${c.name}${a===void 0?"":` ${a}`}`};return{css:i,cx:(...o)=>t(r.registered,i,Lse(o))}}return{cssFactory:e}})();function sB(){const t=Tae();return Mae(()=>Iae({cache:t}),[t])}function Dae({cx:t,classes:e,context:n,classNames:r,name:i,cache:s}){const o=n.reduce((a,l)=>(Object.keys(l.classNames).forEach(c=>{typeof a[c]!="string"?a[c]=`${l.classNames[c]}`:a[c]=`${a[c]} ${l.classNames[c]}`}),a),{});return Object.keys(e).reduce((a,l)=>(a[l]=t(e[l],o[l],r!=null&&r[l],Array.isArray(i)?i.filter(Boolean).map(c=>`${(s==null?void 0:s.key)||"mantine"}-${c}-${l}`).join(" "):i?`${(s==null?void 0:s.key)||"mantine"}-${i}-${l}`:null),a),{})}var Rae=Object.defineProperty,SO=Object.getOwnPropertySymbols,zae=Object.prototype.hasOwnProperty,Nae=Object.prototype.propertyIsEnumerable,bO=(t,e,n)=>e in t?Rae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lw=(t,e)=>{for(var n in e||(e={}))zae.call(e,n)&&bO(t,n,e[n]);if(SO)for(var n of SO(e))Nae.call(e,n)&&bO(t,n,e[n]);return t};function kae(t){return`__mantine-ref-${t||""}`}function MO(t,e,n){const r=i=>typeof i=="function"?i(e,n||{}):i||{};return Array.isArray(t)?t.map(i=>r(i.styles)).reduce((i,s)=>(Object.keys(s).forEach(o=>{i[o]?i[o]=lw(lw({},i[o]),s[o]):i[o]=lw({},s[o])}),i),{}):r(t)}function Tr(t){const e=typeof t=="function"?t:()=>t;function n(r,i){const s=uh(),o=vae(i==null?void 0:i.name),a=rB(),{css:l,cx:c}=sB(),d=e(s,r,kae),u=MO(i==null?void 0:i.styles,s,r),h=MO(o,s,r),m=Object.fromEntries(Object.keys(d).map(g=>{const x=c({[l(d[g])]:!(i!=null&&i.unstyled)},l(h[g]),l(u[g]));return[g,x]}));return{classes:Dae({cx:c,classes:m,context:o,classNames:i==null?void 0:i.classNames,name:i==null?void 0:i.name,cache:a}),cx:c,theme:s}}return n}function Bae(t,e){try{return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}catch{return t.addListener(e),()=>t.removeListener(e)}}function Fae(t,e){return typeof e=="boolean"?e:typeof window<"u"&&"matchMedia"in window?window.matchMedia(t).matches:!1}function Uae(t,e,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=ue.exports.useState(n?!1:Fae(t,e)),s=ue.exports.useRef();return ue.exports.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(t),i(s.current.matches),Bae(s.current,o=>i(o.matches))},[t]),r}function Vae(t,e,n){return Math.min(Math.max(t,e),n)}function Hae(){const[t,e]=ue.exports.useState(!1),n=ue.exports.useRef(null),r=ue.exports.useCallback(()=>e(!0),[]),i=ue.exports.useCallback(()=>e(!1),[]);return ue.exports.useEffect(()=>{if(n.current)return n.current.addEventListener("mouseenter",r),n.current.addEventListener("mouseleave",i),()=>{var s,o;(s=n.current)==null||s.removeEventListener("mouseenter",r),(o=n.current)==null||o.removeEventListener("mouseleave",i)}},[]),{ref:n,hovered:t}}const EO={mt:"marginTop",mb:"marginBottom",ml:"marginLeft",mr:"marginRight",pt:"paddingTop",pb:"paddingBottom",pl:"paddingLeft",pr:"paddingRight"},Gae=["-xs","-sm","-md","-lg","-xl"];function Yl(t){return typeof t=="string"||typeof t=="number"}function Zl(t,e){return Gae.includes(t)?e.fn.size({size:t.replace("-",""),sizes:e.spacing})*-1:e.fn.size({size:t,sizes:e.spacing})}function TO(t,e){const n={};if(Yl(t.p)){const r=Zl(t.p,e);n.padding=r}if(Yl(t.m)){const r=Zl(t.m,e);n.margin=r}if(Yl(t.py)){const r=Zl(t.py,e);n.paddingTop=r,n.paddingBottom=r}if(Yl(t.px)){const r=Zl(t.px,e);n.paddingLeft=r,n.paddingRight=r}if(Yl(t.my)){const r=Zl(t.my,e);n.marginTop=r,n.marginBottom=r}if(Yl(t.mx)){const r=Zl(t.mx,e);n.marginLeft=r,n.marginRight=r}return Object.keys(EO).forEach(r=>{Yl(t[r])&&(n[EO[r]]=e.fn.size({size:Zl(t[r],e),sizes:e.spacing}))}),n}function AO(t,e){return typeof t=="function"?t(e):t}function Wae(t,e,n){const r=uh(),{css:i,cx:s}=sB();return Array.isArray(t)?s(n,i(TO(e,r)),t.map(o=>i(AO(o,r)))):s(n,i(AO(t,r)),i(TO(e,r)))}var jae=Object.defineProperty,Vv=Object.getOwnPropertySymbols,oB=Object.prototype.hasOwnProperty,aB=Object.prototype.propertyIsEnumerable,CO=(t,e,n)=>e in t?jae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$ae=(t,e)=>{for(var n in e||(e={}))oB.call(e,n)&&CO(t,n,e[n]);if(Vv)for(var n of Vv(e))aB.call(e,n)&&CO(t,n,e[n]);return t},qae=(t,e)=>{var n={};for(var r in t)oB.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Vv)for(var r of Vv(t))e.indexOf(r)<0&&aB.call(t,r)&&(n[r]=t[r]);return n};const lB=ue.exports.forwardRef((t,e)=>{var n=t,{className:r,component:i,style:s,sx:o}=n,a=qae(n,["className","component","style","sx"]);const{systemStyles:l,rest:c}=bae(a);return fe(i||"div",{...$ae({ref:e,className:Wae(o,l,r),style:s},c)})});lB.displayName="@mantine/core/Box";const bs=lB;var Xae=Object.defineProperty,Yae=Object.defineProperties,Zae=Object.getOwnPropertyDescriptors,PO=Object.getOwnPropertySymbols,Jae=Object.prototype.hasOwnProperty,Qae=Object.prototype.propertyIsEnumerable,LO=(t,e,n)=>e in t?Xae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,OO=(t,e)=>{for(var n in e||(e={}))Jae.call(e,n)&&LO(t,n,e[n]);if(PO)for(var n of PO(e))Qae.call(e,n)&&LO(t,n,e[n]);return t},Kae=(t,e)=>Yae(t,Zae(e)),ele=Tr(t=>({root:Kae(OO(OO({},t.fn.focusStyles()),t.fn.fontStyles()),{cursor:"pointer",border:0,padding:0,appearance:"none",fontSize:t.fontSizes.md,backgroundColor:"transparent",textAlign:"left",color:t.colorScheme==="dark"?t.colors.dark[0]:t.black,textDecoration:"none",boxSizing:"border-box"})}));const tle=ele;var nle=Object.defineProperty,Hv=Object.getOwnPropertySymbols,uB=Object.prototype.hasOwnProperty,cB=Object.prototype.propertyIsEnumerable,IO=(t,e,n)=>e in t?nle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rle=(t,e)=>{for(var n in e||(e={}))uB.call(e,n)&&IO(t,n,e[n]);if(Hv)for(var n of Hv(e))cB.call(e,n)&&IO(t,n,e[n]);return t},ile=(t,e)=>{var n={};for(var r in t)uB.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Hv)for(var r of Hv(t))e.indexOf(r)<0&&cB.call(t,r)&&(n[r]=t[r]);return n};const dB=ue.exports.forwardRef((t,e)=>{const n=vi("UnstyledButton",{},t),{className:r,component:i="button",unstyled:s}=n,o=ile(n,["className","component","unstyled"]),{classes:a,cx:l}=tle(null,{name:"UnstyledButton",unstyled:s});return fe(bs,{...rle({component:i,ref:e,className:l(a.root,r),type:i==="button"?"button":void 0},o)})});dB.displayName="@mantine/core/UnstyledButton";const Rf=dB;var sle=Object.defineProperty,DO=Object.getOwnPropertySymbols,ole=Object.prototype.hasOwnProperty,ale=Object.prototype.propertyIsEnumerable,RO=(t,e,n)=>e in t?sle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lle=(t,e)=>{for(var n in e||(e={}))ole.call(e,n)&&RO(t,n,e[n]);if(DO)for(var n of DO(e))ale.call(e,n)&&RO(t,n,e[n]);return t};function zO(t){return fe("svg",{...lle({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:16,height:16},t),children:fe("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var ule=Object.defineProperty,cle=Object.defineProperties,dle=Object.getOwnPropertyDescriptors,NO=Object.getOwnPropertySymbols,hle=Object.prototype.hasOwnProperty,fle=Object.prototype.propertyIsEnumerable,kO=(t,e,n)=>e in t?ule(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hB=(t,e)=>{for(var n in e||(e={}))hle.call(e,n)&&kO(t,n,e[n]);if(NO)for(var n of NO(e))fle.call(e,n)&&kO(t,n,e[n]);return t},ple=(t,e)=>cle(t,dle(e));const mf={xs:18,sm:22,md:28,lg:34,xl:44};function mle({variant:t,theme:e,color:n,gradient:r}){const i=e.fn.variant({color:n,variant:t,gradient:r});return t==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":e.fn.hover({backgroundSize:"200%"})}:hB({border:`1px solid ${i.border}`,backgroundColor:i.background,color:i.color},e.fn.hover({backgroundColor:i.hover}))}var gle=Tr((t,{color:e,size:n,radius:r,variant:i,gradient:s})=>({root:ple(hB({},mle({variant:i,theme:t,color:e,gradient:s})),{position:"relative",height:t.fn.size({size:n,sizes:mf}),minHeight:t.fn.size({size:n,sizes:mf}),width:t.fn.size({size:n,sizes:mf}),minWidth:t.fn.size({size:n,sizes:mf}),borderRadius:t.fn.radius(r),padding:0,lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center","&:active":t.activeStyles,"&:disabled, &[data-disabled]":{color:t.colors.gray[t.colorScheme==="dark"?6:4],cursor:"not-allowed",backgroundColor:i==="transparent"?void 0:t.fn.themeColor("gray",t.colorScheme==="dark"?8:1),borderColor:i==="transparent"?void 0:t.fn.themeColor("gray",t.colorScheme==="dark"?8:1),backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:t.colorScheme==="dark"?t.fn.rgba(t.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:t.fn.radius(r),cursor:"not-allowed"}}})}));const vle=gle;var yle=Object.defineProperty,Gv=Object.getOwnPropertySymbols,fB=Object.prototype.hasOwnProperty,pB=Object.prototype.propertyIsEnumerable,BO=(t,e,n)=>e in t?yle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xle=(t,e)=>{for(var n in e||(e={}))fB.call(e,n)&&BO(t,n,e[n]);if(Gv)for(var n of Gv(e))pB.call(e,n)&&BO(t,n,e[n]);return t},_le=(t,e)=>{var n={};for(var r in t)fB.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Gv)for(var r of Gv(t))e.indexOf(r)<0&&pB.call(t,r)&&(n[r]=t[r]);return n};function wle(t){var e=t,{size:n,color:r}=e,i=_le(e,["size","color"]);return Yt("svg",{...xle({viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg",fill:r,width:`${n}px`},i),children:[Yt("rect",{y:"10",width:"15",height:"120",rx:"6",children:[fe("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),fe("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]}),Yt("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6",children:[fe("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),fe("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]}),Yt("rect",{x:"60",width:"15",height:"140",rx:"6",children:[fe("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),fe("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]}),Yt("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6",children:[fe("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),fe("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]}),Yt("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6",children:[fe("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),fe("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]})]})}var Sle=Object.defineProperty,Wv=Object.getOwnPropertySymbols,mB=Object.prototype.hasOwnProperty,gB=Object.prototype.propertyIsEnumerable,FO=(t,e,n)=>e in t?Sle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ble=(t,e)=>{for(var n in e||(e={}))mB.call(e,n)&&FO(t,n,e[n]);if(Wv)for(var n of Wv(e))gB.call(e,n)&&FO(t,n,e[n]);return t},Mle=(t,e)=>{var n={};for(var r in t)mB.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Wv)for(var r of Wv(t))e.indexOf(r)<0&&gB.call(t,r)&&(n[r]=t[r]);return n};function Ele(t){var e=t,{size:n,color:r}=e,i=Mle(e,["size","color"]);return fe("svg",{...ble({width:`${n}px`,height:`${n}px`,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:r},i),children:fe("g",{fill:"none",fillRule:"evenodd",children:Yt("g",{transform:"translate(2.5 2.5)",strokeWidth:"5",children:[fe("circle",{strokeOpacity:".5",cx:"16",cy:"16",r:"16"}),fe("path",{d:"M32 16c0-9.94-8.06-16-16-16",children:fe("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"1s",repeatCount:"indefinite"})})]})})})}var Tle=Object.defineProperty,jv=Object.getOwnPropertySymbols,vB=Object.prototype.hasOwnProperty,yB=Object.prototype.propertyIsEnumerable,UO=(t,e,n)=>e in t?Tle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ale=(t,e)=>{for(var n in e||(e={}))vB.call(e,n)&&UO(t,n,e[n]);if(jv)for(var n of jv(e))yB.call(e,n)&&UO(t,n,e[n]);return t},Cle=(t,e)=>{var n={};for(var r in t)vB.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&jv)for(var r of jv(t))e.indexOf(r)<0&&yB.call(t,r)&&(n[r]=t[r]);return n};function Ple(t){var e=t,{size:n,color:r}=e,i=Cle(e,["size","color"]);return Yt("svg",{...Ale({width:`${n}px`,height:`${n/4}px`,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:r},i),children:[Yt("circle",{cx:"15",cy:"15",r:"15",children:[fe("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),fe("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]}),Yt("circle",{cx:"60",cy:"15",r:"9",fillOpacity:"0.3",children:[fe("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),fe("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]}),Yt("circle",{cx:"105",cy:"15",r:"15",children:[fe("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),fe("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]})]})}var Lle=Object.defineProperty,$v=Object.getOwnPropertySymbols,xB=Object.prototype.hasOwnProperty,_B=Object.prototype.propertyIsEnumerable,VO=(t,e,n)=>e in t?Lle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ole=(t,e)=>{for(var n in e||(e={}))xB.call(e,n)&&VO(t,n,e[n]);if($v)for(var n of $v(e))_B.call(e,n)&&VO(t,n,e[n]);return t},Ile=(t,e)=>{var n={};for(var r in t)xB.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&$v)for(var r of $v(t))e.indexOf(r)<0&&_B.call(t,r)&&(n[r]=t[r]);return n};const uw={bars:wle,oval:Ele,dots:Ple},Dle={xs:18,sm:22,md:36,lg:44,xl:58},Rle={size:"md"};function x3(t){const e=vi("Loader",Rle,t),{size:n,color:r,variant:i}=e,s=Ile(e,["size","color","variant"]),o=uh(),a=i in uw?i:o.loader;return fe(bs,{...Ole({role:"presentation",component:uw[a]||uw.bars,size:o.fn.size({size:n,sizes:Dle}),color:o.fn.variant({variant:"filled",primaryFallback:!1,color:r||o.primaryColor}).background},s)})}x3.displayName="@mantine/core/Loader";var zle=Object.defineProperty,qv=Object.getOwnPropertySymbols,wB=Object.prototype.hasOwnProperty,SB=Object.prototype.propertyIsEnumerable,HO=(t,e,n)=>e in t?zle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,GO=(t,e)=>{for(var n in e||(e={}))wB.call(e,n)&&HO(t,n,e[n]);if(qv)for(var n of qv(e))SB.call(e,n)&&HO(t,n,e[n]);return t},Nle=(t,e)=>{var n={};for(var r in t)wB.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&qv)for(var r of qv(t))e.indexOf(r)<0&&SB.call(t,r)&&(n[r]=t[r]);return n};const kle={color:"gray",size:"md",variant:"subtle",loading:!1},bB=ue.exports.forwardRef((t,e)=>{const n=vi("ActionIcon",kle,t),{className:r,color:i,children:s,radius:o,size:a,variant:l,gradient:c,disabled:d,loaderProps:u,loading:h,unstyled:m}=n,g=Nle(n,["className","color","children","radius","size","variant","gradient","disabled","loaderProps","loading","unstyled"]),{classes:x,cx:y,theme:v}=vle({size:a,radius:o,color:i,variant:l,gradient:c},{name:"ActionIcon",unstyled:m}),_=v.fn.variant({color:i,variant:l}),S=fe(x3,{...GO({color:_.color,size:v.fn.size({size:a,sizes:mf})-12},u)});return fe(Rf,{...GO({className:y(x.root,r),ref:e,disabled:d,"data-disabled":d||void 0,"data-loading":h||void 0,unstyled:m},g),children:h?S:s})});bB.displayName="@mantine/core/ActionIcon";const cw=bB;var Ble=Object.defineProperty,Fle=Object.defineProperties,Ule=Object.getOwnPropertyDescriptors,WO=Object.getOwnPropertySymbols,Vle=Object.prototype.hasOwnProperty,Hle=Object.prototype.propertyIsEnumerable,jO=(t,e,n)=>e in t?Ble(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,g0=(t,e)=>{for(var n in e||(e={}))Vle.call(e,n)&&jO(t,n,e[n]);if(WO)for(var n of WO(e))Hle.call(e,n)&&jO(t,n,e[n]);return t},Gle=(t,e)=>Fle(t,Ule(e));function Wle({underline:t,strikethrough:e}){const n=[];return t&&n.push("underline"),e&&n.push("line-through"),n.length>0?n.join(" "):"none"}function jle({theme:t,color:e,variant:n}){return e==="dimmed"?t.colorScheme==="dark"?t.colors.dark[2]:t.colors.gray[6]:typeof e=="string"&&(e in t.colors||e.split(".")[0]in t.colors)?t.fn.variant({variant:"filled",color:e}).background:n==="link"?t.colors[t.primaryColor][t.colorScheme==="dark"?4:7]:e||"inherit"}function $le(t){return typeof t=="number"?{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:t,WebkitBoxOrient:"vertical"}:null}var qle=Tr((t,{color:e,variant:n,size:r,lineClamp:i,inline:s,inherit:o,underline:a,gradient:l,weight:c,transform:d,align:u,strikethrough:h,italic:m})=>{const g=t.fn.variant({variant:"gradient",gradient:l});return{root:g0(Gle(g0(g0(g0({},t.fn.fontStyles()),t.fn.focusStyles()),$le(i)),{color:jle({color:e,theme:t,variant:n}),fontFamily:o?"inherit":t.fontFamily,fontSize:o||r===void 0?"inherit":t.fn.size({size:r,sizes:t.fontSizes}),lineHeight:o?"inherit":s?1:t.lineHeight,textDecoration:Wle({underline:a,strikethrough:h}),WebkitTapHighlightColor:"transparent",fontWeight:o?"inherit":c,textTransform:d,textAlign:u,fontStyle:m?"italic":void 0}),t.fn.hover(n==="link"&&a===void 0?{textDecoration:"underline"}:void 0)),gradient:{backgroundImage:g.background,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}}});const Xle=qle;var Yle=Object.defineProperty,Xv=Object.getOwnPropertySymbols,MB=Object.prototype.hasOwnProperty,EB=Object.prototype.propertyIsEnumerable,$O=(t,e,n)=>e in t?Yle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zle=(t,e)=>{for(var n in e||(e={}))MB.call(e,n)&&$O(t,n,e[n]);if(Xv)for(var n of Xv(e))EB.call(e,n)&&$O(t,n,e[n]);return t},Jle=(t,e)=>{var n={};for(var r in t)MB.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Xv)for(var r of Xv(t))e.indexOf(r)<0&&EB.call(t,r)&&(n[r]=t[r]);return n};const Qle={variant:"text"},TB=ue.exports.forwardRef((t,e)=>{const n=vi("Text",Qle,t),{className:r,size:i,weight:s,transform:o,color:a,align:l,variant:c,lineClamp:d,gradient:u,inline:h,inherit:m,underline:g,strikethrough:x,italic:y,classNames:v,styles:_,unstyled:S,span:b}=n,A=Jle(n,["className","size","weight","transform","color","align","variant","lineClamp","gradient","inline","inherit","underline","strikethrough","italic","classNames","styles","unstyled","span"]),{classes:E,cx:C}=Xle({variant:c,color:a,size:i,lineClamp:d,inline:h,inherit:m,underline:g,strikethrough:x,italic:y,weight:s,transform:o,align:l,gradient:u},{unstyled:S,name:"Text"});return fe(bs,{...Zle({ref:e,className:C(E.root,{[E.gradient]:c==="gradient"},r),component:b?"span":"div"},A)})});TB.displayName="@mantine/core/Text";const Vb=TB,rf={xs:30,sm:36,md:42,lg:50,xl:60};var Kle=Object.defineProperty,eue=Object.defineProperties,tue=Object.getOwnPropertyDescriptors,qO=Object.getOwnPropertySymbols,nue=Object.prototype.hasOwnProperty,rue=Object.prototype.propertyIsEnumerable,XO=(t,e,n)=>e in t?Kle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iue=(t,e)=>{for(var n in e||(e={}))nue.call(e,n)&&XO(t,n,e[n]);if(qO)for(var n of qO(e))rue.call(e,n)&&XO(t,n,e[n]);return t},sue=(t,e)=>eue(t,tue(e));function oue(t){return fe("svg",{...sue(iue({},t),{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),children:fe("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var aue=Object.defineProperty,lue=Object.defineProperties,uue=Object.getOwnPropertyDescriptors,YO=Object.getOwnPropertySymbols,cue=Object.prototype.hasOwnProperty,due=Object.prototype.propertyIsEnumerable,ZO=(t,e,n)=>e in t?aue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hue=(t,e)=>{for(var n in e||(e={}))cue.call(e,n)&&ZO(t,n,e[n]);if(YO)for(var n of YO(e))due.call(e,n)&&ZO(t,n,e[n]);return t},fue=(t,e)=>lue(t,uue(e));const AB=ue.exports.createContext(null);function pue({spacing:t,children:e}){return fe(AB.Provider,{value:{spacing:t},children:e})}function mue(){const t=ue.exports.useContext(AB);return t?fue(hue({},t),{withinGroup:!0}):{spacing:null,withinGroup:!1}}var gue=Tr((t,{spacing:e})=>({root:{display:"flex",paddingLeft:t.fn.size({size:e,sizes:t.spacing})}}));const vue=gue;var yue=Object.defineProperty,Yv=Object.getOwnPropertySymbols,CB=Object.prototype.hasOwnProperty,PB=Object.prototype.propertyIsEnumerable,JO=(t,e,n)=>e in t?yue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xue=(t,e)=>{for(var n in e||(e={}))CB.call(e,n)&&JO(t,n,e[n]);if(Yv)for(var n of Yv(e))PB.call(e,n)&&JO(t,n,e[n]);return t},_ue=(t,e)=>{var n={};for(var r in t)CB.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Yv)for(var r of Yv(t))e.indexOf(r)<0&&PB.call(t,r)&&(n[r]=t[r]);return n};const wue={},LB=ue.exports.forwardRef((t,e)=>{const n=vi("AvatarGroup",wue,t),{children:r,spacing:i="sm",unstyled:s,className:o}=n,a=_ue(n,["children","spacing","unstyled","className"]),{classes:l,cx:c}=vue({spacing:i},{name:"AvatarGroup",unstyled:s});return fe(pue,{spacing:i,children:fe(bs,{...xue({ref:e,className:c(l.root,o)},a),children:r})})});LB.displayName="@mantine/core/AvatarGroup";var Sue=Object.defineProperty,bue=Object.defineProperties,Mue=Object.getOwnPropertyDescriptors,QO=Object.getOwnPropertySymbols,Eue=Object.prototype.hasOwnProperty,Tue=Object.prototype.propertyIsEnumerable,KO=(t,e,n)=>e in t?Sue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dw=(t,e)=>{for(var n in e||(e={}))Eue.call(e,n)&&KO(t,n,e[n]);if(QO)for(var n of QO(e))Tue.call(e,n)&&KO(t,n,e[n]);return t},eI=(t,e)=>bue(t,Mue(e));const v0={xs:16,sm:26,md:38,lg:56,xl:84};function Aue({withinGroup:t,spacing:e,theme:n}){return t?{marginLeft:-n.fn.size({size:e,sizes:n.spacing}),backgroundColor:`${n.colorScheme==="dark"?n.colors.dark[7]:n.white}`,border:`2px solid ${n.colorScheme==="dark"?n.colors.dark[7]:n.white}`}:null}var Cue=Tr((t,{size:e,radius:n,color:r,withinGroup:i,spacing:s,variant:o,gradient:a})=>{const l=t.fn.variant({variant:o,color:r,gradient:a});return{root:dw(eI(dw({},t.fn.focusStyles()),{WebkitTapHighlightColor:"transparent",boxSizing:"border-box",position:"relative",display:"block",userSelect:"none",overflow:"hidden",width:t.fn.size({size:e,sizes:v0}),minWidth:t.fn.size({size:e,sizes:v0}),height:t.fn.size({size:e,sizes:v0}),borderRadius:t.fn.radius(n),textDecoration:"none",border:0,backgroundColor:"transparent",padding:0}),Aue({withinGroup:i,spacing:s,theme:t})),image:{objectFit:"cover",width:"100%",height:"100%",display:"block"},placeholder:eI(dw({},t.fn.fontStyles()),{fontSize:t.fn.size({size:e,sizes:v0})/2.5,color:l.color,fontWeight:700,backgroundColor:l.background,display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",userSelect:"none",backgroundImage:o==="gradient"?l.background:void 0,border:`${o==="gradient"?0:1}px solid ${l.border}`,borderRadius:t.fn.radius(n)}),placeholderIcon:{width:"70%",height:"70%",color:l.color}}});const Pue=Cue;var Lue=Object.defineProperty,Oue=Object.defineProperties,Iue=Object.getOwnPropertyDescriptors,Zv=Object.getOwnPropertySymbols,OB=Object.prototype.hasOwnProperty,IB=Object.prototype.propertyIsEnumerable,tI=(t,e,n)=>e in t?Lue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nI=(t,e)=>{for(var n in e||(e={}))OB.call(e,n)&&tI(t,n,e[n]);if(Zv)for(var n of Zv(e))IB.call(e,n)&&tI(t,n,e[n]);return t},Due=(t,e)=>Oue(t,Iue(e)),Rue=(t,e)=>{var n={};for(var r in t)OB.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Zv)for(var r of Zv(t))e.indexOf(r)<0&&IB.call(t,r)&&(n[r]=t[r]);return n};const zue={size:"md",color:"gray",variant:"light"},_3=ue.exports.forwardRef((t,e)=>{const n=vi("Avatar",zue,t),{className:r,size:i,src:s,alt:o,radius:a,children:l,color:c,variant:d,gradient:u,classNames:h,styles:m,imageProps:g,unstyled:x}=n,y=Rue(n,["className","size","src","alt","radius","children","color","variant","gradient","classNames","styles","imageProps","unstyled"]),v=mue(),[_,S]=ue.exports.useState(!s),{classes:b,cx:A}=Pue({color:c,radius:a,size:i,withinGroup:v.withinGroup,spacing:v.spacing,variant:d,gradient:u},{classNames:h,styles:m,unstyled:x,name:"Avatar"});return ue.exports.useEffect(()=>{S(!s)},[s]),fe(bs,{...nI({component:"div",className:A(b.root,r),ref:e},y),children:_?fe("div",{className:b.placeholder,title:o,children:l||fe(oue,{className:b.placeholderIcon})}):fe("img",{...Due(nI({},g),{className:b.image,src:s,alt:o,onError:()=>S(!0)})})})});_3.displayName="@mantine/core/Avatar";_3.Group=LB;const Nue=_3;var kue=Object.defineProperty,Bue=Object.defineProperties,Fue=Object.getOwnPropertyDescriptors,rI=Object.getOwnPropertySymbols,Uue=Object.prototype.hasOwnProperty,Vue=Object.prototype.propertyIsEnumerable,iI=(t,e,n)=>e in t?kue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hw=(t,e)=>{for(var n in e||(e={}))Uue.call(e,n)&&iI(t,n,e[n]);if(rI)for(var n of rI(e))Vue.call(e,n)&&iI(t,n,e[n]);return t},Hue=(t,e)=>Bue(t,Fue(e));const fw={xs:{fontSize:9,height:16},sm:{fontSize:10,height:18},md:{fontSize:11,height:20},lg:{fontSize:13,height:26},xl:{fontSize:16,height:32}},Gue={xs:4,sm:4,md:6,lg:8,xl:10};function Wue({theme:t,variant:e,color:n,size:r,gradient:i}){if(e==="dot"){const o=t.fn.size({size:r,sizes:Gue});return{backgroundColor:"transparent",color:t.colorScheme==="dark"?t.colors.dark[0]:t.colors.gray[7],border:`1px solid ${t.colorScheme==="dark"?t.colors.dark[3]:t.colors.gray[3]}`,paddingLeft:t.fn.size({size:r,sizes:t.spacing})/1.5-o/2,"&::before":{content:'""',display:"block",width:o,height:o,borderRadius:o,backgroundColor:t.fn.themeColor(n,t.colorScheme==="dark"?4:t.fn.primaryShade("light"),!0),marginRight:o}}}const s=t.fn.variant({color:n,variant:e,gradient:i});return{background:s.background,color:s.color,border:`${e==="gradient"?0:1}px solid ${s.border}`}}var jue=Tr((t,{color:e,size:n,radius:r,gradient:i,fullWidth:s,variant:o})=>{const{fontSize:a,height:l}=n in fw?fw[n]:fw.md;return{leftSection:{marginRight:`calc(${t.spacing.xs}px / 2)`},rightSection:{marginLeft:`calc(${t.spacing.xs}px / 2)`},inner:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},root:hw(Hue(hw(hw({},t.fn.focusStyles()),t.fn.fontStyles()),{fontSize:a,height:l,WebkitTapHighlightColor:"transparent",lineHeight:`${l-2}px`,textDecoration:"none",padding:`0 ${t.fn.size({size:n,sizes:t.spacing})/1.5}px`,boxSizing:"border-box",display:s?"flex":"inline-flex",alignItems:"center",justifyContent:"center",width:s?"100%":"auto",textTransform:"uppercase",borderRadius:t.fn.radius(r),fontWeight:700,letterSpacing:.25,cursor:"inherit",textOverflow:"ellipsis",overflow:"hidden"}),Wue({theme:t,variant:o,color:e,size:n,gradient:i}))}});const $ue=jue;var que=Object.defineProperty,Jv=Object.getOwnPropertySymbols,DB=Object.prototype.hasOwnProperty,RB=Object.prototype.propertyIsEnumerable,sI=(t,e,n)=>e in t?que(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xue=(t,e)=>{for(var n in e||(e={}))DB.call(e,n)&&sI(t,n,e[n]);if(Jv)for(var n of Jv(e))RB.call(e,n)&&sI(t,n,e[n]);return t},Yue=(t,e)=>{var n={};for(var r in t)DB.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Jv)for(var r of Jv(t))e.indexOf(r)<0&&RB.call(t,r)&&(n[r]=t[r]);return n};const Zue={variant:"light",size:"md",radius:"xl"},zB=ue.exports.forwardRef((t,e)=>{const n=vi("Badge",Zue,t),{className:r,color:i,variant:s,fullWidth:o,children:a,size:l,leftSection:c,rightSection:d,radius:u,gradient:h,classNames:m,styles:g,unstyled:x}=n,y=Yue(n,["className","color","variant","fullWidth","children","size","leftSection","rightSection","radius","gradient","classNames","styles","unstyled"]),{classes:v,cx:_}=$ue({size:l,fullWidth:o,color:i,radius:u,variant:s,gradient:h},{classNames:m,styles:g,name:"Badge",unstyled:x});return Yt(bs,{...Xue({className:_(v.root,r),ref:e},y),children:[c&&fe("span",{className:v.leftSection,children:c}),fe("span",{className:v.inner,children:a}),d&&fe("span",{className:v.rightSection,children:d})]})});zB.displayName="@mantine/core/Badge";const Jue=zB;var Que=Tr((t,{orientation:e,buttonBorderWidth:n})=>({root:{display:"flex",flexDirection:e==="vertical"?"column":"row","& [data-button]":{"&:first-of-type":{borderBottomRightRadius:0,[e==="vertical"?"borderBottomLeftRadius":"borderTopRightRadius"]:0,[e==="vertical"?"borderBottomWidth":"borderRightWidth"]:n/2},"&:last-of-type":{borderTopLeftRadius:0,[e==="vertical"?"borderTopRightRadius":"borderBottomLeftRadius"]:0,[e==="vertical"?"borderTopWidth":"borderLeftWidth"]:n/2},"&:not(:first-of-type):not(:last-of-type)":{borderRadius:0,[e==="vertical"?"borderTopWidth":"borderLeftWidth"]:n/2,[e==="vertical"?"borderBottomWidth":"borderRightWidth"]:n/2},"& + [data-button]":{[e==="vertical"?"marginTop":"marginLeft"]:-n,"@media (min-resolution: 192dpi)":{[e==="vertical"?"marginTop":"marginLeft"]:0}}}}}));const Kue=Que;var ece=Object.defineProperty,Qv=Object.getOwnPropertySymbols,NB=Object.prototype.hasOwnProperty,kB=Object.prototype.propertyIsEnumerable,oI=(t,e,n)=>e in t?ece(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tce=(t,e)=>{for(var n in e||(e={}))NB.call(e,n)&&oI(t,n,e[n]);if(Qv)for(var n of Qv(e))kB.call(e,n)&&oI(t,n,e[n]);return t},nce=(t,e)=>{var n={};for(var r in t)NB.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Qv)for(var r of Qv(t))e.indexOf(r)<0&&kB.call(t,r)&&(n[r]=t[r]);return n};const rce={orientation:"horizontal",buttonBorderWidth:1},BB=ue.exports.forwardRef((t,e)=>{const n=vi("ButtonGroup",rce,t),{className:r,orientation:i,buttonBorderWidth:s,unstyled:o}=n,a=nce(n,["className","orientation","buttonBorderWidth","unstyled"]),{classes:l,cx:c}=Kue({orientation:i,buttonBorderWidth:s},{name:"ButtonGroup",unstyled:o});return fe(bs,{...tce({className:c(l.root,r),ref:e},a)})});BB.displayName="@mantine/core/ButtonGroup";var ice=Object.defineProperty,sce=Object.defineProperties,oce=Object.getOwnPropertyDescriptors,aI=Object.getOwnPropertySymbols,ace=Object.prototype.hasOwnProperty,lce=Object.prototype.propertyIsEnumerable,lI=(t,e,n)=>e in t?ice(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ou=(t,e)=>{for(var n in e||(e={}))ace.call(e,n)&&lI(t,n,e[n]);if(aI)for(var n of aI(e))lce.call(e,n)&&lI(t,n,e[n]);return t},Hb=(t,e)=>sce(t,oce(e));const Gb={xs:{height:rf.xs,paddingLeft:14,paddingRight:14},sm:{height:rf.sm,paddingLeft:18,paddingRight:18},md:{height:rf.md,paddingLeft:22,paddingRight:22},lg:{height:rf.lg,paddingLeft:26,paddingRight:26},xl:{height:rf.xl,paddingLeft:32,paddingRight:32},"compact-xs":{height:22,paddingLeft:7,paddingRight:7},"compact-sm":{height:26,paddingLeft:8,paddingRight:8},"compact-md":{height:30,paddingLeft:10,paddingRight:10},"compact-lg":{height:34,paddingLeft:12,paddingRight:12},"compact-xl":{height:40,paddingLeft:14,paddingRight:14}};function uce({compact:t,size:e,withLeftIcon:n,withRightIcon:r}){if(t)return Gb[`compact-${e}`];const i=Gb[e];return Hb(ou({},i),{paddingLeft:n?i.paddingLeft/1.5:i.paddingLeft,paddingRight:r?i.paddingRight/1.5:i.paddingRight})}const cce=t=>({display:t?"block":"inline-block",width:t?"100%":"auto"});function dce({variant:t,theme:e,color:n,gradient:r}){const i=e.fn.variant({color:n,variant:t,gradient:r});return t==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":e.fn.hover({backgroundSize:"200%"})}:ou({border:`1px solid ${i.border}`,backgroundColor:i.background,color:i.color},e.fn.hover({backgroundColor:i.hover}))}var hce=Tr((t,{color:e,size:n,radius:r,fullWidth:i,compact:s,gradient:o,variant:a,withLeftIcon:l,withRightIcon:c})=>({root:Hb(ou(Hb(ou(ou(ou(ou({},uce({compact:s,size:n,withLeftIcon:l,withRightIcon:c})),t.fn.fontStyles()),t.fn.focusStyles()),cce(i)),{borderRadius:t.fn.radius(r),fontWeight:600,position:"relative",lineHeight:1,fontSize:t.fn.size({size:n,sizes:t.fontSizes}),userSelect:"none",cursor:"pointer"}),dce({variant:a,theme:t,color:e,gradient:o})),{"&:active":t.activeStyles,"&:disabled, &[data-disabled]":{borderColor:"transparent",backgroundColor:t.colorScheme==="dark"?t.colors.dark[4]:t.colors.gray[2],color:t.colorScheme==="dark"?t.colors.dark[6]:t.colors.gray[5],cursor:"not-allowed",backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:t.colorScheme==="dark"?t.fn.rgba(t.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:t.fn.radius(r),cursor:"not-allowed"}}}),icon:{display:"flex",alignItems:"center"},leftIcon:{marginRight:10},rightIcon:{marginLeft:10},inner:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",overflow:"visible"},label:{whiteSpace:"nowrap",height:"100%",overflow:"hidden",display:"flex",alignItems:"center"}}));const fce=hce;var pce=Object.defineProperty,Kv=Object.getOwnPropertySymbols,FB=Object.prototype.hasOwnProperty,UB=Object.prototype.propertyIsEnumerable,uI=(t,e,n)=>e in t?pce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cI=(t,e)=>{for(var n in e||(e={}))FB.call(e,n)&&uI(t,n,e[n]);if(Kv)for(var n of Kv(e))UB.call(e,n)&&uI(t,n,e[n]);return t},mce=(t,e)=>{var n={};for(var r in t)FB.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Kv)for(var r of Kv(t))e.indexOf(r)<0&&UB.call(t,r)&&(n[r]=t[r]);return n};const gce={size:"sm",type:"button",variant:"filled",loaderPosition:"left"},w3=ue.exports.forwardRef((t,e)=>{const n=vi("Button",gce,t),{className:r,size:i,color:s,type:o,disabled:a,children:l,leftIcon:c,rightIcon:d,fullWidth:u,variant:h,radius:m,uppercase:g,compact:x,loading:y,loaderPosition:v,loaderProps:_,gradient:S,classNames:b,styles:A,unstyled:E}=n,C=mce(n,["className","size","color","type","disabled","children","leftIcon","rightIcon","fullWidth","variant","radius","uppercase","compact","loading","loaderPosition","loaderProps","gradient","classNames","styles","unstyled"]),{classes:T,cx:O,theme:L}=fce({radius:m,color:s,size:i,fullWidth:u,compact:x,gradient:S,variant:h,withLeftIcon:!!c,withRightIcon:!!d},{name:"Button",unstyled:E,classNames:b,styles:A}),k=L.fn.variant({color:s,variant:h}),B=fe(x3,{...cI({color:k.color,size:L.fn.size({size:i,sizes:Gb}).height/2},_)});return fe(Rf,{...cI({className:O(T.root,r),type:o,disabled:a,"data-button":!0,"data-disabled":a||void 0,"data-loading":y||void 0,ref:e,unstyled:E},C),children:Yt("div",{className:T.inner,children:[(c||y&&v==="left")&&fe("span",{className:O(T.icon,T.leftIcon),children:y&&v==="left"?B:c}),fe("span",{className:T.label,style:{textTransform:g?"uppercase":void 0},children:l}),(d||y&&v==="right")&&fe("span",{className:O(T.icon,T.rightIcon),children:y&&v==="right"?B:d})]})})});w3.displayName="@mantine/core/Button";w3.Group=BB;const vce=w3;var yce=Tr((t,{radius:e,shadow:n,withBorder:r})=>({root:{outline:0,WebkitTapHighlightColor:"transparent",display:"block",textDecoration:"none",color:t.colorScheme==="dark"?t.colors.dark[0]:t.black,backgroundColor:t.colorScheme==="dark"?t.colors.dark[7]:t.white,boxSizing:"border-box",borderRadius:t.fn.radius(e),boxShadow:t.shadows[n]||n||"none",border:r?`1px solid ${t.colorScheme==="dark"?t.colors.dark[4]:t.colors.gray[3]}`:void 0}}));const xce=yce;var _ce=Object.defineProperty,ey=Object.getOwnPropertySymbols,VB=Object.prototype.hasOwnProperty,HB=Object.prototype.propertyIsEnumerable,dI=(t,e,n)=>e in t?_ce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wce=(t,e)=>{for(var n in e||(e={}))VB.call(e,n)&&dI(t,n,e[n]);if(ey)for(var n of ey(e))HB.call(e,n)&&dI(t,n,e[n]);return t},Sce=(t,e)=>{var n={};for(var r in t)VB.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ey)for(var r of ey(t))e.indexOf(r)<0&&HB.call(t,r)&&(n[r]=t[r]);return n};const bce={},GB=ue.exports.forwardRef((t,e)=>{const n=vi("Paper",bce,t),{className:r,children:i,radius:s,withBorder:o,shadow:a,unstyled:l}=n,c=Sce(n,["className","children","radius","withBorder","shadow","unstyled"]),{classes:d,cx:u}=xce({radius:s,shadow:a,withBorder:o},{name:"Paper",unstyled:l});return fe(bs,{...wce({className:u(d.root,r),ref:e},c),children:i})});GB.displayName="@mantine/core/Paper";const WB=GB,jB=ue.exports.createContext({padding:0}),Mce=jB.Provider,Ece=()=>ue.exports.useContext(jB).padding;var Tce=Tr((t,{padding:e,withBorder:n,inheritPadding:r})=>{const i=t.fn.size({size:e,sizes:t.spacing}),s=-1*i,o=t.colorScheme==="dark"?t.colors.dark[4]:t.colors.gray[3];return{cardSection:{display:"block",marginLeft:s,marginRight:s,paddingLeft:r?i:void 0,paddingRight:r?i:void 0,borderTop:n&&`1px solid ${o}`,borderBottom:n&&`1px solid ${o}`,"& + &":{borderTop:0},"&[data-first]":{marginTop:s,borderTop:0,borderBottom:n&&`1px solid ${o}`},"&[data-last]":{marginBottom:s,borderBottom:0}}}});const Ace=Tce;var Cce=Object.defineProperty,ty=Object.getOwnPropertySymbols,$B=Object.prototype.hasOwnProperty,qB=Object.prototype.propertyIsEnumerable,hI=(t,e,n)=>e in t?Cce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pce=(t,e)=>{for(var n in e||(e={}))$B.call(e,n)&&hI(t,n,e[n]);if(ty)for(var n of ty(e))qB.call(e,n)&&hI(t,n,e[n]);return t},Lce=(t,e)=>{var n={};for(var r in t)$B.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ty)for(var r of ty(t))e.indexOf(r)<0&&qB.call(t,r)&&(n[r]=t[r]);return n};const XB=ue.exports.forwardRef((t,e)=>{var n=t,{className:r,withBorder:i=!1,inheritPadding:s=!1,unstyled:o}=n,a=Lce(n,["className","withBorder","inheritPadding","unstyled"]);const{classes:l,cx:c}=Ace({padding:Ece(),withBorder:i,inheritPadding:s},{name:"Card",unstyled:o});return fe(bs,{...Pce({className:c(l.cardSection,r),ref:e},a)})});XB.displayName="@mantine/core/CardSection";const YB=XB;var Oce=Tr(t=>({root:{position:"relative",overflow:"hidden",backgroundColor:t.colorScheme==="dark"?t.colors.dark[6]:t.white}}));const Ice=Oce;var Dce=Object.defineProperty,ny=Object.getOwnPropertySymbols,ZB=Object.prototype.hasOwnProperty,JB=Object.prototype.propertyIsEnumerable,fI=(t,e,n)=>e in t?Dce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rce=(t,e)=>{for(var n in e||(e={}))ZB.call(e,n)&&fI(t,n,e[n]);if(ny)for(var n of ny(e))JB.call(e,n)&&fI(t,n,e[n]);return t},zce=(t,e)=>{var n={};for(var r in t)ZB.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ny)for(var r of ny(t))e.indexOf(r)<0&&JB.call(t,r)&&(n[r]=t[r]);return n};const Nce={p:"md"},S3=ue.exports.forwardRef((t,e)=>{const n=vi("Card",Nce,t),{className:r,p:i,radius:s,children:o,unstyled:a}=n,l=zce(n,["className","p","radius","children","unstyled"]),{classes:c,cx:d}=Ice(null,{name:"Card",unstyled:a}),u=ue.exports.Children.toArray(o),h=u.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===YB?ue.exports.cloneElement(m,{padding:i,"data-first":g===0||void 0,"data-last":g===u.length-1||void 0}):m);return fe(Mce,{value:{padding:i},children:fe(WB,{...Rce({className:d(c.root,r),radius:s,p:i,ref:e},l),children:h})})});S3.Section=YB;S3.displayName="@mantine/core/Card";const pI=S3;function kce(t){return ue.exports.Children.toArray(t).filter(Boolean)}const Bce={left:"flex-start",center:"center",right:"flex-end",apart:"space-between"};var Fce=Tr((t,{spacing:e,position:n,noWrap:r,grow:i,align:s,count:o})=>({root:{boxSizing:"border-box",display:"flex",flexDirection:"row",alignItems:s||"center",flexWrap:r?"nowrap":"wrap",justifyContent:Bce[n],gap:t.fn.size({size:e,sizes:t.spacing}),"& > *":{boxSizing:"border-box",maxWidth:i?`calc(${100/o}% - ${t.fn.size({size:e,sizes:t.spacing})-t.fn.size({size:e,sizes:t.spacing})/o}px)`:void 0,flexGrow:i?1:0}}}));const Uce=Fce;var Vce=Object.defineProperty,ry=Object.getOwnPropertySymbols,QB=Object.prototype.hasOwnProperty,KB=Object.prototype.propertyIsEnumerable,mI=(t,e,n)=>e in t?Vce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hce=(t,e)=>{for(var n in e||(e={}))QB.call(e,n)&&mI(t,n,e[n]);if(ry)for(var n of ry(e))KB.call(e,n)&&mI(t,n,e[n]);return t},Gce=(t,e)=>{var n={};for(var r in t)QB.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ry)for(var r of ry(t))e.indexOf(r)<0&&KB.call(t,r)&&(n[r]=t[r]);return n};const Wce={position:"left",spacing:"md"},eF=ue.exports.forwardRef((t,e)=>{const n=vi("Group",Wce,t),{className:r,position:i,align:s,children:o,noWrap:a,grow:l,spacing:c,unstyled:d}=n,u=Gce(n,["className","position","align","children","noWrap","grow","spacing","unstyled"]),h=kce(o),{classes:m,cx:g}=Uce({align:s,grow:l,noWrap:a,spacing:c,position:i,count:h.length},{unstyled:d,name:"Group"});return fe(bs,{...Hce({className:g(m.root,r),ref:e},u),children:h})});eF.displayName="@mantine/core/Group";function tF(t,e){if(e.length===0)return e;const n="maxWidth"in e[0]?"maxWidth":"minWidth",r=[...e].sort((i,s)=>t.fn.size({size:s[n],sizes:t.breakpoints})-t.fn.size({size:i[n],sizes:t.breakpoints}));return n==="minWidth"?r.reverse():r}var jce=Object.defineProperty,$ce=Object.defineProperties,qce=Object.getOwnPropertyDescriptors,gI=Object.getOwnPropertySymbols,Xce=Object.prototype.hasOwnProperty,Yce=Object.prototype.propertyIsEnumerable,vI=(t,e,n)=>e in t?jce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zce=(t,e)=>{for(var n in e||(e={}))Xce.call(e,n)&&vI(t,n,e[n]);if(gI)for(var n of gI(e))Yce.call(e,n)&&vI(t,n,e[n]);return t},Jce=(t,e)=>$ce(t,qce(e));function Qce(t,e,n){return typeof t<"u"?t in n.headings.sizes?n.headings.sizes[t].fontSize:t:n.headings.sizes[e].fontSize}function Kce(t,e,n){return typeof t<"u"&&t in n.headings.sizes?n.headings.sizes[t].lineHeight:n.headings.sizes[e].lineHeight}var ede=Tr((t,{element:e,weight:n,size:r,inline:i})=>({root:Jce(Zce({},t.fn.fontStyles()),{fontFamily:t.headings.fontFamily,fontWeight:n||t.headings.sizes[e].fontWeight||t.headings.fontWeight,fontSize:Qce(r,e,t),lineHeight:i?1:Kce(r,e,t),margin:0})}));const tde=ede;var nde=Object.defineProperty,iy=Object.getOwnPropertySymbols,nF=Object.prototype.hasOwnProperty,rF=Object.prototype.propertyIsEnumerable,yI=(t,e,n)=>e in t?nde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rde=(t,e)=>{for(var n in e||(e={}))nF.call(e,n)&&yI(t,n,e[n]);if(iy)for(var n of iy(e))rF.call(e,n)&&yI(t,n,e[n]);return t},ide=(t,e)=>{var n={};for(var r in t)nF.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&iy)for(var r of iy(t))e.indexOf(r)<0&&rF.call(t,r)&&(n[r]=t[r]);return n};const sde={order:1},iF=ue.exports.forwardRef((t,e)=>{const n=vi("Title",sde,t),{className:r,order:i,children:s,unstyled:o,size:a,weight:l,inline:c}=n,d=ide(n,["className","order","children","unstyled","size","weight","inline"]),{classes:u,cx:h}=tde({element:`h${i}`,weight:l,size:a,inline:c},{name:"Title",unstyled:o});return[1,2,3,4,5,6].includes(i)?fe(Vb,{...rde({component:`h${i}`,ref:e,className:h(u.root,r)},d),children:s}):null});iF.displayName="@mantine/core/Title";function Tp(){return Tp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tp.apply(this,arguments)}function b3(t,e){if(t==null)return{};var n,r,i=function(o,a){if(o==null)return{};var l,c,d={},u=Object.keys(o);for(c=0;c<u.length;c++)l=u[c],a.indexOf(l)>=0||(d[l]=o[l]);return d}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var ode=["size","color","stroke"];function ade(t){var e=t.size,n=e===void 0?24:e,r=t.color,i=r===void 0?"currentColor":r,s=t.stroke,o=s===void 0?2:s,a=b3(t,ode);return ue.exports.createElement("svg",Tp({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-brand-github",width:n,height:n,viewBox:"0 0 24 24",strokeWidth:o,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},a),ue.exports.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ue.exports.createElement("path",{d:"M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"}))}var lde=["size","color","stroke"];function ude(t){var e=t.size,n=e===void 0?24:e,r=t.color,i=r===void 0?"currentColor":r,s=t.stroke,o=s===void 0?2:s,a=b3(t,lde);return ue.exports.createElement("svg",Tp({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-brand-twitter",width:n,height:n,viewBox:"0 0 24 24",strokeWidth:o,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},a),ue.exports.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ue.exports.createElement("path",{d:"M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z"}))}var cde=["size","color","stroke"];function dde(t){var e=t.size,n=e===void 0?24:e,r=t.color,i=r===void 0?"currentColor":r,s=t.stroke,o=s===void 0?2:s,a=b3(t,cde);return ue.exports.createElement("svg",Tp({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-mail",width:n,height:n,viewBox:"0 0 24 24",strokeWidth:o,stroke:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},a),ue.exports.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),ue.exports.createElement("rect",{x:3,y:5,width:18,height:14,rx:2}),ue.exports.createElement("polyline",{points:"3 7 12 13 21 7"}))}function hde(t,e,n,r,i){return r+(i-r)*((t-e)/(n-e))}function M3(t){return typeof t=="number"}function Wb(t){return Object.prototype.toString.call(t)==="[object Object]"}function fde(t){return Array.isArray(t)}function xI(t){return Wb(t)||fde(t)}function kn(t){return Math.abs(t)}function E3(t){return t?t/kn(t):0}function gf(t,e){return kn(t-e)}function pde(t,e){if(t===0||e===0||kn(t)<=kn(e))return 0;var n=gf(kn(t),kn(e));return kn(n/t)}function mde(t){var e=Math.pow(10,t);return function(n){return Math.round(n*e)/e}}function Ap(t){return Cu(t).map(Number)}function aa(t){return t[p1(t)]}function p1(t){return Math.max(0,t.length-1)}function Cu(t){return Object.keys(t)}function sF(t,e){return[t,e].reduce(function(n,r){return Cu(r).forEach(function(i){var s=n[i],o=r[i],a=Wb(s)&&Wb(o);n[i]=a?sF(s,o):o}),n},{})}function oF(t,e){var n=Cu(t),r=Cu(e);return n.length!==r.length?!1:n.every(function(i){var s=t[i],o=e[i];return typeof s=="function"?"".concat(s)==="".concat(o):!xI(s)||!xI(o)?s===o:oF(s,o)})}function gde(t,e){var n={start:r,center:i,end:s};function r(){return 0}function i(c){return s(c)/2}function s(c){return e-c}function o(){return e*Number(t)}function a(c){return M3(t)?o():n[t](c)}var l={measure:a};return l}function vde(t){var e=0;function n(o,a){return function(){o===!!e&&a()}}function r(){e=window.requestAnimationFrame(t)}function i(){window.cancelAnimationFrame(e),e=0}var s={proceed:n(!0,r),start:n(!1,r),stop:n(!0,i)};return s}function yde(t,e){var n=t==="y"?"y":"x",r=t==="y"?"x":"y",i=a(),s=l();function o(d){var u=d.width,h=d.height;return n==="x"?u:h}function a(){return n==="y"?"top":e==="rtl"?"right":"left"}function l(){return n==="y"?"bottom":e==="rtl"?"left":"right"}var c={scroll:n,cross:r,startEdge:i,endEdge:s,measureSize:o};return c}function Vd(t,e){var n=kn(t-e);function r(c){return c<t}function i(c){return c>e}function s(c){return r(c)||i(c)}function o(c){return s(c)?r(c)?t:e:c}function a(c){return n?c-n*Math.ceil((c-e)/n):c}var l={length:n,max:e,min:t,constrain:o,reachedAny:s,reachedMax:i,reachedMin:r,removeOffset:a};return l}function aF(t,e,n){var r=Vd(0,t),i=r.min,s=r.constrain,o=t+1,a=l(e);function l(g){return n?kn((o+g)%o):s(g)}function c(){return a}function d(g){return a=l(g),m}function u(g){return d(c()+g)}function h(){return aF(t,c(),n)}var m={add:u,clone:h,get:c,set:d,min:i,max:t};return m}function xde(t){var e=t==="rtl"?-1:1;function n(i){return i*e}var r={apply:n};return r}function sy(){var t=[];function e(i,s,o,a){return a===void 0&&(a=!1),i.addEventListener(s,o,a),t.push(function(){return i.removeEventListener(s,o,a)}),r}function n(){return t=t.filter(function(i){return i()}),r}var r={add:e,removeAll:n};return r}function dl(t){var e=t;function n(){return e}function r(u){return e=c(u),d}function i(u){return e+=c(u),d}function s(u){return e-=c(u),d}function o(u){return e*=u,d}function a(u){return e/=u,d}function l(){return e!==0&&a(e),d}function c(u){return M3(u)?u:u.get()}var d={add:i,divide:a,get:n,multiply:o,normalize:l,set:r,subtract:s};return d}function _de(t,e,n,r,i,s,o,a,l,c,d,u,h,m,g,x){var y=t.cross,v=["INPUT","SELECT","TEXTAREA"],_=dl(0),S=sy(),b=sy(),A=h.measure(20),E={mouse:300,touch:400},C={mouse:500,touch:600},T=g?5:16,O=1,L=0,k=0,B=!1,G=!1,H=!1,Y=!1;function te(){var K=n;S.add(K,"touchmove",function(){}).add(K,"touchend",function(){}).add(K,"touchstart",V).add(K,"mousedown",V).add(K,"touchcancel",J).add(K,"contextmenu",J).add(K,"click",ee)}function Z(){var K=Y?document:n;b.add(K,"touchmove",X).add(K,"touchend",J).add(K,"mousemove",X).add(K,"mouseup",J)}function D(){S.removeAll(),b.removeAll()}function N(K){var oe=K.nodeName||"";return v.indexOf(oe)>-1}function z(){var K=g?C:E,oe=Y?"mouse":"touch";return K[oe]}function U(K,oe){var ye=d.clone().add(E3(K)*-1),ne=ye.get()===d.min||ye.get()===d.max,Q=c.byDistance(K,!g).distance;return g||kn(K)<A?Q:!m&&ne?Q*.4:x&&oe?Q*.5:c.byIndex(ye.get(),0).distance}function V(K){if(Y=K.type==="mousedown",!(Y&&K.button!==0)){var oe=gf(r.get(),s.get())>=2,ye=Y||!oe,ne=!N(K.target),Q=oe||Y&&ne;B=!0,i.pointerDown(K),_.set(r),r.set(s),l.useBaseMass().useSpeed(80),Z(),L=i.readPoint(K),k=i.readPoint(K,y),u.emit("pointerDown"),ye&&(H=!1),Q&&K.preventDefault()}}function X(K){if(!G&&!Y){if(!K.cancelable)return J(K);var oe=i.readPoint(K),ye=i.readPoint(K,y),ne=gf(oe,L),Q=gf(ye,k);if(G=ne>Q,!G&&!H)return J(K)}var de=i.pointerMove(K);!H&&de&&(H=!0),o.start(),r.add(e.apply(de)),K.preventDefault()}function J(K){var oe=c.byDistance(0,!1),ye=oe.index!==d.get(),ne=i.pointerUp(K)*z(),Q=U(e.apply(ne),ye),de=pde(ne,Q),pe=gf(r.get(),_.get())>=.5,ve=ye&&de>.75,Re=kn(ne)<A,Le=ve?10:T,De=ve?O+2.5*de:O;pe&&!Y&&(H=!0),G=!1,B=!1,b.removeAll(),l.useSpeed(Re?9:Le).useMass(De),a.distance(Q,!g),Y=!1,u.emit("pointerUp")}function ee(K){H&&K.preventDefault()}function q(){return!H}function re(){return B}var ie={addActivationEvents:te,clickAllowed:q,pointerDown:re,removeAllEvents:D};return ie}function wde(t){var e=170,n,r;function i(u){return typeof TouchEvent<"u"&&u instanceof TouchEvent}function s(u){return u.timeStamp}function o(u,h){var m=h||t.scroll,g="client".concat(m==="x"?"X":"Y");return(i(u)?u.touches[0]:u)[g]}function a(u){return n=u,r=u,o(u)}function l(u){var h=o(u)-o(r),m=s(u)-s(n)>e;return r=u,m&&(n=u),h}function c(u){if(!n||!r)return 0;var h=o(r)-o(n),m=s(u)-s(n),g=s(u)-s(r)>e,x=h/m,y=m&&!g&&kn(x)>.1;return y?x:0}var d={isTouchEvent:i,pointerDown:a,pointerMove:l,pointerUp:c,readPoint:o};return d}function Sde(t){function e(r){return t*(r/100)}var n={measure:e};return n}function bde(t,e,n){var r=mde(2),i=dl(0),s=dl(0),o=dl(0),a=0,l=e,c=n;function d(){i.add(s),t.add(i),s.multiply(0)}function u(b){b.divide(c),s.add(b)}function h(b){o.set(b).subtract(t);var A=hde(o.get(),0,100,0,l);return a=E3(o.get()),o.normalize().multiply(A).subtract(i),u(o),S}function m(b){var A=b.get()-t.get(),E=!r(A);return E&&t.set(b),E}function g(){return a}function x(){return v(e)}function y(){return _(n)}function v(b){return l=b,S}function _(b){return c=b,S}var S={direction:g,seek:h,settle:m,update:d,useBaseMass:y,useBaseSpeed:x,useMass:_,useSpeed:v};return S}function Mde(t,e,n,r,i){var s=i.measure(10),o=i.measure(50),a=.85,l=!1;function c(){return!(l||!t.reachedAny(n.get())||!t.reachedAny(e.get()))}function d(m){if(!!c()){var g=t.reachedMin(e.get())?"min":"max",x=kn(t[g]-e.get()),y=n.get()-e.get(),v=Math.min(x/o,a);n.subtract(y*v),!m&&kn(y)<s&&(n.set(t.constrain(n.get())),r.useSpeed(10).useMass(3))}}function u(m){l=!m}var h={constrain:d,toggleActive:u};return h}function Ede(t,e,n,r){var i=Vd(-e+t,n[0]),s=n.map(i.constrain),o=l();function a(){var d=s[0],u=aa(s),h=s.lastIndexOf(d),m=s.indexOf(u)+1;return Vd(h,m)}function l(){if(e<=t)return[i.max];if(r==="keepSnaps")return s;var d=a(),u=d.min,h=d.max;return s.slice(u,h)}var c={snapsContained:o};return c}function Tde(t,e,n){var r=i();function i(){var o=e[0],a=aa(e),l=n?o-t:a,c=o;return Vd(l,c)}var s={limit:r};return s}function Ade(t,e,n,r){var i=.1,s=e.min+i,o=e.max+i,a=Vd(s,o),l=a.reachedMin,c=a.reachedMax;function d(m){return m===1?c(n.get()):m===-1?l(n.get()):!1}function u(m){if(!!d(m)){var g=t*(m*-1);r.forEach(function(x){return x.add(g)})}}var h={loop:u};return h}function Cde(t){var e=t.max,n=t.length;function r(s){var o=s-e;return o/-n}var i={get:r};return i}function Pde(t,e,n,r,i,s,o){var a=t.startEdge,l=t.endEdge,c=s.groupSlides,d=m().map(e.measure),u=g(),h=x();function m(){return c(r).map(function(v){return aa(v)[l]-v[0][a]}).map(kn)}function g(){return r.map(function(v){return n[a]-v[a]}).map(function(v){return-kn(v)})}function x(){var v=0,_=aa(u)-aa(i);return c(u).map(function(S){return S[0]}).map(function(S,b,A){var E=!b,C=b===p1(A);return o&&E?v:o&&C?_:S+d[b]})}var y={snaps:u,snapsAligned:h};return y}function Lde(t,e,n,r,i){var s=r.reachedAny,o=r.removeOffset,a=r.constrain;function l(g){return g.concat().sort(function(x,y){return kn(x)-kn(y)})[0]}function c(g){var x=t?o(g):a(g),y=e.map(function(_){return _-x}).map(function(_){return d(_,0)}).map(function(_,S){return{diff:_,index:S}}).sort(function(_,S){return kn(_.diff)-kn(S.diff)}),v=y[0].index;return{index:v,distance:x}}function d(g,x){var y=[g,g+n,g-n];if(!t)return y[0];if(!x)return l(y);var v=y.filter(function(_){return E3(_)===x});return l(v)}function u(g,x){var y=e[g]-i.get(),v=d(y,x);return{index:g,distance:v}}function h(g,x){var y=i.get()+g,v=c(y),_=v.index,S=v.distance,b=!t&&s(y);if(!x||b)return{index:_,distance:g};var A=e[_]-S,E=g+d(A,0);return{index:_,distance:E}}var m={byDistance:h,byIndex:u,shortcut:d};return m}function Ode(t,e,n,r,i,s){function o(d){var u=d.distance,h=d.index!==e.get();u&&(t.start(),i.add(u)),h&&(n.set(e.get()),e.set(d.index),s.emit("select"))}function a(d,u){var h=r.byDistance(d,u);o(h)}function l(d,u){var h=e.clone().set(d),m=r.byIndex(h.get(),u);o(m)}var c={distance:a,index:l};return c}function lF(t,e,n){var r=t.scroll==="x"?o:a,i=n.style,s=!1;function o(h){return"translate3d(".concat(h,"px,0px,0px)")}function a(h){return"translate3d(0px,".concat(h,"px,0px)")}function l(h){s||(i.transform=r(e.apply(h.get())))}function c(h){s=!h}function d(){s||(i.transform="",n.getAttribute("style")||n.removeAttribute("style"))}var u={clear:d,to:l,toggleActive:c};return u}function Ide(t,e,n,r,i,s,o,a,l){var c=Ap(i),d=Ap(i).reverse(),u=x().concat(y());function h(A,E){return A.reduce(function(C,T){return C-i[T]},E)}function m(A,E){return A.reduce(function(C,T){var O=h(C,E);return O>0?C.concat([T]):C},[])}function g(A,E){var C=E==="start",T=C?-r:r,O=o.findSlideBounds([T]);return A.map(function(L){var k=C?0:-r,B=C?r:0,G=O.filter(function(N){return N.index===L})[0],H=G[C?"end":"start"],Y=dl(-1),te=dl(-1),Z=lF(t,e,l[L]),D=function(){return Y.set(a.get()>H?k:B)};return{index:L,location:te,translate:Z,target:D}})}function x(){var A=s[0]-1,E=m(d,A);return g(E,"end")}function y(){var A=n-s[0]-1,E=m(c,A);return g(E,"start")}function v(){return u.every(function(A){var E=A.index,C=c.filter(function(T){return T!==E});return h(C,n)<=.1})}function _(){u.forEach(function(A){var E=A.target,C=A.translate,T=A.location,O=E();O.get()!==T.get()&&(O.get()===0?C.clear():C.to(O),T.set(O))})}function S(){u.forEach(function(A){return A.translate.clear()})}var b={canLoop:v,clear:S,loop:_,loopPoints:u};return b}function Dde(t,e,n,r,i,s,o){var a=i.removeOffset,l=i.constrain,c=.5,d=s?[0,e,-e]:[0],u=m(d,o);function h(y){var v=y||0;return n.map(function(_){var S=Vd(c,_-c);return S.constrain(_*v)})}function m(y,v){var _=y||d,S=h(v);return _.reduce(function(b,A){var E=r.map(function(C,T){return{start:C-n[T]+S[T]+A,end:C+t-S[T]+A,index:T}});return b.concat(E)},[])}function g(y,v){var _=s?a(y):l(y),S=v||u;return S.reduce(function(b,A){var E=A.index,C=A.start,T=A.end,O=b.indexOf(E)!==-1,L=C<_&&T>_;return!O&&L?b.concat([E]):b},[])}var x={check:g,findSlideBounds:m};return x}function Rde(t,e,n,r,i){var s=t.measureSize,o=t.startEdge,a=t.endEdge,l=h(),c=m(),d=n.map(s),u=g();function h(){if(!i)return 0;var y=n[0];return kn(e[o]-y[o])}function m(){if(!i)return 0;var y=window.getComputedStyle(aa(r));return parseFloat(y.getPropertyValue("margin-".concat(a)))}function g(){return n.map(function(y,v,_){var S=!v,b=v===p1(_);return S?d[v]+l:b?d[v]+c:_[v+1][o]-y[o]}).map(kn)}var x={slideSizes:d,slideSizesWithGaps:u};return x}function zde(t,e,n){var r=M3(n);function i(l,c){return Ap(l).filter(function(d){return d%c===0}).map(function(d){return l.slice(d,d+c)})}function s(l){return Ap(l).reduce(function(c,d){var u=e.slice(aa(c),d+1),h=u.reduce(function(m,g){return m+g},0);return!d||h>t?c.concat(d):c},[]).map(function(c,d,u){return l.slice(c,u[d+1])})}function o(l){return r?i(l,n):s(l)}var a={groupSlides:o};return a}function Nde(t,e,n,r,i){var s=r.align,o=r.axis,a=r.direction,l=r.startIndex,c=r.inViewThreshold,d=r.loop,u=r.speed,h=r.dragFree,m=r.slidesToScroll,g=r.skipSnaps,x=r.containScroll,y=e.getBoundingClientRect(),v=n.map(function(de){return de.getBoundingClientRect()}),_=xde(a),S=yde(o,a),b=S.measureSize(y),A=Sde(b),E=gde(s,b),C=!d&&x!=="",T=d||x!=="",O=Rde(S,y,v,n,T),L=O.slideSizes,k=O.slideSizesWithGaps,B=zde(b,k,m),G=Pde(S,E,y,v,k,B,C),H=G.snaps,Y=G.snapsAligned,te=-aa(H)+aa(k),Z=Ede(b,te,Y,x).snapsContained,D=C?Z:Y,N=Tde(te,D,d).limit,z=aF(p1(D),l,d),U=z.clone(),V=Ap(n),X=function(){d||Q.scrollBounds.constrain(Q.dragHandler.pointerDown()),Q.scrollBody.seek(re).update();var de=Q.scrollBody.settle(re);de&&!Q.dragHandler.pointerDown()&&(Q.animation.stop(),i.emit("settle")),de||i.emit("scroll"),d&&(Q.scrollLooper.loop(Q.scrollBody.direction()),Q.slideLooper.loop()),Q.translate.to(q),Q.animation.proceed()},J=vde(X),ee=D[z.get()],q=dl(ee),re=dl(ee),ie=bde(q,u,1),K=Lde(d,D,te,N,re),oe=Ode(J,z,U,K,re,i),ye=Dde(b,te,L,H,N,d,c),ne=_de(S,_,t,re,wde(S),q,J,oe,ie,K,z,i,A,d,h,g),Q={containerRect:y,slideRects:v,animation:J,axis:S,direction:_,dragHandler:ne,eventStore:sy(),percentOfView:A,index:z,indexPrevious:U,limit:N,location:q,options:r,scrollBody:ie,scrollBounds:Mde(N,q,re,ie,A),scrollLooper:Ade(te,N,q,[q,re]),scrollProgress:Cde(N),scrollSnaps:D,scrollTarget:K,scrollTo:oe,slideLooper:Ide(S,_,b,te,k,D,ye,q,n),slidesToScroll:B,slidesInView:ye,slideIndexes:V,target:re,translate:lF(S,_,e)};return Q}function kde(){var t={};function e(o){return t[o]||[]}function n(o){return e(o).forEach(function(a){return a(o)}),s}function r(o,a){return t[o]=e(o).concat([a]),s}function i(o,a){return t[o]=e(o).filter(function(l){return l!==a}),s}var s={emit:n,off:i,on:r};return s}var Bde={align:"center",axis:"x",containScroll:"",direction:"ltr",slidesToScroll:1,breakpoints:{},dragFree:!1,draggable:!0,inViewThreshold:0,loop:!1,skipSnaps:!1,speed:10,startIndex:0,active:!0};function T3(){function t(i,s){return sF(i,s||{})}function e(i,s){var o=JSON.stringify(Cu(i.breakpoints||{})),a=JSON.stringify(Cu(s.breakpoints||{}));return o!==a?!1:oF(i,s)}function n(i){var s=i.breakpoints||{},o=Cu(s).filter(function(a){return window.matchMedia(a).matches}).map(function(a){return s[a]}).reduce(function(a,l){return t(a,l)},{});return t(i,o)}var r={merge:t,areEqual:e,atMedia:n};return r}function Fde(){var t=T3(),e=t.atMedia,n=t.areEqual,r=[],i=[];function s(){return i.some(function(d){return d()})}function o(d){var u=e(d.options);return function(){return!n(u,e(d.options))}}function a(d,u){return i=d.map(o),r=d.filter(function(h){return e(h.options).active}),r.forEach(function(h){return h.init(u)}),d.reduce(function(h,m){var g;return Object.assign(h,(g={},g[m.name]=m,g))},{})}function l(){r=r.filter(function(d){return d.destroy()})}var c={init:a,destroy:l,haveChanged:s};return c}function Pu(t,e,n){var r=sy(),i=T3(),s=Fde(),o=kde(),a=o.on,l=o.off,c=E,d=!1,u,h=i.merge(Bde,Pu.globalOptions),m=i.merge(h),g=[],x,y=0,v,_,S;function b(){var ie="container"in t&&t.container,K="slides"in t&&t.slides;v="root"in t?t.root:t,_=ie||v.children[0],S=K||[].slice.call(_.children)}function A(ie,K){if(!d){if(b(),h=i.merge(h,ie),m=i.atMedia(h),u=Nde(v,_,S,m,o),y=u.axis.measureSize(v.getBoundingClientRect()),!m.active)return C();if(u.translate.to(u.location),g=K||g,x=s.init(g,re),m.loop){if(!u.slideLooper.canLoop())return C(),A({loop:!1},K);u.slideLooper.loop()}m.draggable&&_.offsetParent&&S.length&&u.dragHandler.addActivationEvents()}}function E(ie,K){var oe=N();C(),A(i.merge({startIndex:oe},ie),K),o.emit("reInit")}function C(){u.dragHandler.removeAllEvents(),u.animation.stop(),u.eventStore.removeAll(),u.translate.clear(),u.slideLooper.clear(),s.destroy()}function T(){d||(d=!0,r.removeAll(),C(),o.emit("destroy"))}function O(){var ie=i.atMedia(h),K=!i.areEqual(ie,m),oe=u.axis.measureSize(v.getBoundingClientRect()),ye=y!==oe,ne=s.haveChanged();(ye||K||ne)&&E(),o.emit("resize")}function L(ie){var K=u[ie?"target":"location"].get(),oe=m.loop?"removeOffset":"constrain";return u.slidesInView.check(u.limit[oe](K))}function k(ie){var K=L(ie);return u.slideIndexes.filter(function(oe){return K.indexOf(oe)===-1})}function B(ie,K,oe){!m.active||d||(u.scrollBody.useBaseMass().useSpeed(K?100:m.speed),u.scrollTo.index(ie,oe||0))}function G(ie){var K=u.index.clone().add(1);B(K.get(),ie===!0,-1)}function H(ie){var K=u.index.clone().add(-1);B(K.get(),ie===!0,1)}function Y(){var ie=u.index.clone().add(1);return ie.get()!==N()}function te(){var ie=u.index.clone().add(-1);return ie.get()!==N()}function Z(){return u.scrollSnaps.map(u.scrollProgress.get)}function D(){return u.scrollProgress.get(u.location.get())}function N(){return u.index.get()}function z(){return u.indexPrevious.get()}function U(){return u.dragHandler.clickAllowed()}function V(){return x}function X(){return u}function J(){return v}function ee(){return _}function q(){return S}var re={canScrollNext:Y,canScrollPrev:te,clickAllowed:U,containerNode:ee,internalEngine:X,destroy:T,off:l,on:a,plugins:V,previousScrollSnap:z,reInit:c,rootNode:J,scrollNext:G,scrollPrev:H,scrollProgress:D,scrollSnapList:Z,scrollTo:B,selectedScrollSnap:N,slideNodes:q,slidesInView:L,slidesNotInView:k};return A(e,n),r.add(window,"resize",O),setTimeout(function(){return o.emit("init")},0),re}Pu.globalOptions=void 0;Pu.optionsHandler=T3;function Ude(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function _I(t){return t.concat().sort(function(e,n){return e.name>n.name?1:-1}).map(function(e){return e.options})}function Vde(t,e){if(t.length!==e.length)return!1;var n=Pu.optionsHandler().areEqual,r=_I(t),i=_I(e);return r.every(function(s,o){var a=i[o];return n(s,a)})}function A3(t,e){t===void 0&&(t={}),e===void 0&&(e=[]);var n=ue.exports.useRef(Pu.optionsHandler()),r=ue.exports.useRef(t),i=ue.exports.useRef(e),s=ue.exports.useState(),o=s[0],a=s[1],l=ue.exports.useState(),c=l[0],d=l[1],u=ue.exports.useCallback(function(){o&&o.reInit(r.current,i.current)},[o]);return ue.exports.useEffect(function(){if(Ude()&&c){Pu.globalOptions=A3.globalOptions;var h=Pu(c,r.current,i.current);return a(h),function(){return h.destroy()}}else a(void 0)},[c,a]),ue.exports.useEffect(function(){n.current.areEqual(r.current,t)||(r.current=t,u())},[t,u]),ue.exports.useEffect(function(){Vde(i.current,e)||(i.current=e,u())},[e,u]),[d,o]}A3.globalOptions=void 0;const Hde={context:"[@mantine/carousel] Carousel.Slide was rendered outside of Carousel context"},[Gde,Wde]=Pse(Hde.context);var jde=Object.defineProperty,wI=Object.getOwnPropertySymbols,$de=Object.prototype.hasOwnProperty,qde=Object.prototype.propertyIsEnumerable,SI=(t,e,n)=>e in t?jde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pw=(t,e)=>{for(var n in e||(e={}))$de.call(e,n)&&SI(t,n,e[n]);if(wI)for(var n of wI(e))qde.call(e,n)&&SI(t,n,e[n]);return t},Xde=Tr((t,{size:e,gap:n,orientation:r,includeGapInSize:i,breakpoints:s=[]})=>{const o=(c,d)=>{const u=t.fn.size({size:c,sizes:t.spacing}),h=typeof d=="number"?`${d}px`:d,m=i?{[r==="horizontal"?"paddingRight":"paddinBottom"]:u}:{[r==="horizontal"?"marginRight":"marginBottom"]:u};return pw({flex:`0 0 ${h}`},m)},l=s.some(c=>typeof c.slideGap<"u"||typeof c.slideSize<"u")?tF(t,s).reduce((c,d)=>{const u="maxWidth"in d?"max-width":"min-width",h=t.fn.size({size:u==="max-width"?d.maxWidth:d.minWidth,sizes:t.breakpoints}),m=typeof d.slideGap>"u"?n:d.slideGap;return c[`@media (${u}: ${h-(u==="max-width"?1:0)}px)`]=o(m,d.slideSize),c},{}):null;return{slide:pw(pw({position:"relative"},o(n,e)),l)}}),Yde=Object.defineProperty,oy=Object.getOwnPropertySymbols,uF=Object.prototype.hasOwnProperty,cF=Object.prototype.propertyIsEnumerable,bI=(t,e,n)=>e in t?Yde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zde=(t,e)=>{for(var n in e||(e={}))uF.call(e,n)&&bI(t,n,e[n]);if(oy)for(var n of oy(e))cF.call(e,n)&&bI(t,n,e[n]);return t},Jde=(t,e)=>{var n={};for(var r in t)uF.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&oy)for(var r of oy(t))e.indexOf(r)<0&&cF.call(t,r)&&(n[r]=t[r]);return n};const dF=ue.exports.forwardRef((t,e)=>{var n=t,{children:r,className:i,size:s,gap:o,onClick:a}=n,l=Jde(n,["children","className","size","gap","onClick"]);const c=Wde(),{classNames:d,styles:u,unstyled:h}=xae(),{classes:m,cx:g}=Xde({gap:typeof o>"u"?c.slideGap:o,size:typeof s>"u"?c.slideSize:s,orientation:c.orientation,includeGapInSize:c.includeGapInSize,breakpoints:c.breakpoints},{name:"Carousel",classNames:d,styles:u,unstyled:h}),x=ue.exports.useCallback(y=>{var v;(v=c.embla)!=null&&v.clickAllowed()&&(a==null||a(y))},[c.embla]);return fe(bs,{...Zde({className:g(m.slide,i),ref:e,onClick:x},l),children:r})});dF.displayName="@mantine/carousel/CarouselSlide";function MI({dir:t,orientation:e,direction:n}){return n==="previous"?e==="horizontal"?90*(t==="ltr"?1:-1):-180:e==="horizontal"?90*(t==="ltr"?-1:1):0}var Qde=Object.defineProperty,Kde=Object.defineProperties,ehe=Object.getOwnPropertyDescriptors,EI=Object.getOwnPropertySymbols,the=Object.prototype.hasOwnProperty,nhe=Object.prototype.propertyIsEnumerable,TI=(t,e,n)=>e in t?Qde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mw=(t,e)=>{for(var n in e||(e={}))the.call(e,n)&&TI(t,n,e[n]);if(EI)for(var n of EI(e))nhe.call(e,n)&&TI(t,n,e[n]);return t},rhe=(t,e)=>Kde(t,ehe(e)),ihe=Tr((t,{controlSize:e,controlsOffset:n,orientation:r,height:i,includeGapInSize:s,breakpoints:o=[],slideGap:a})=>{const l=r==="horizontal",c=h=>{if(!s)return{};const m=t.fn.size({size:h,sizes:t.spacing});return{[r==="horizontal"?"marginRight":"marginBottom"]:m*-1}},u=o.some(h=>typeof h.slideGap<"u"||typeof h.slideSize<"u")?tF(t,o).reduce((h,m)=>{var g;const x="maxWidth"in m?"max-width":"min-width",y=t.fn.size({size:x==="max-width"?m.maxWidth:m.minWidth,sizes:t.breakpoints}),v=(g=typeof m.slideGap>"u"?a:m.slideGap)!=null?g:0;return h[`@media (${x}: ${y-(x==="max-width"?1:0)}px)`]=c(v),h},{}):null;return{root:{position:"relative"},viewport:{height:i,overflow:"hidden"},container:mw(mw({display:"flex",flexDirection:l?"row":"column",height:i},c(a)),u),controls:{position:"absolute",zIndex:1,left:l?0:`calc(50% - ${e/2}px)`,right:l?0:void 0,top:l?`calc(50% - ${e/2}px)`:0,bottom:l?void 0:0,display:"flex",flexDirection:l?"row":"column",alignItems:"center",justifyContent:"space-between",paddingLeft:l?t.fn.size({size:n,sizes:t.spacing}):void 0,paddingRight:l?t.fn.size({size:n,sizes:t.spacing}):void 0,paddingTop:l?void 0:t.fn.size({size:n,sizes:t.spacing}),paddingBottom:l?void 0:t.fn.size({size:n,sizes:t.spacing}),pointerEvents:"none"},control:rhe(mw({display:"flex",justifyContent:"center",alignItems:"center",minWidth:e,minHeight:e,borderRadius:e,pointerEvents:"all",backgroundColor:t.white,color:t.black,boxShadow:t.shadows.md,opacity:t.colorScheme==="dark"?.65:.85,border:`1px solid ${t.colors.gray[3]}`,transition:`opacity 150ms ${t.transitionTimingFunction}`},t.fn.hover({opacity:1})),{"&:active":t.activeStyles}),indicators:{position:"absolute",bottom:l?t.spacing.md:0,top:l?void 0:0,left:l?0:void 0,right:l?0:t.spacing.md,display:"flex",flexDirection:l?"row":"column",justifyContent:"center",gap:8,pointerEvents:"none"},indicator:{pointerEvents:"all",width:l?25:5,height:l?5:25,borderRadius:1e4,backgroundColor:t.white,boxShadow:t.shadows.sm,opacity:.6,transition:`opacity 150ms ${t.transitionTimingFunction}`,"&[data-active]":{opacity:1}}}}),she=Object.defineProperty,ay=Object.getOwnPropertySymbols,hF=Object.prototype.hasOwnProperty,fF=Object.prototype.propertyIsEnumerable,AI=(t,e,n)=>e in t?she(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ohe=(t,e)=>{for(var n in e||(e={}))hF.call(e,n)&&AI(t,n,e[n]);if(ay)for(var n of ay(e))fF.call(e,n)&&AI(t,n,e[n]);return t},ahe=(t,e)=>{var n={};for(var r in t)hF.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ay)for(var r of ay(t))e.indexOf(r)<0&&fF.call(t,r)&&(n[r]=t[r]);return n};const lhe={controlSize:26,controlsOffset:"sm",slideSize:"100%",slideGap:0,orientation:"horizontal",align:"center",slidesToScroll:1,includeGapInSize:!0,draggable:!0,dragFree:!1,loop:!1,speed:10,initialSlide:0,inViewThreshold:0,withControls:!0,withIndicators:!1,skipSnaps:!1,containScroll:""},C3=ue.exports.forwardRef((t,e)=>{const n=vi("Carousel",lhe,t),{children:r,className:i,getEmblaApi:s,onNextSlide:o,onPreviousSlide:a,nextControlLabel:l,previousControlLabel:c,controlSize:d,controlsOffset:u,classNames:h,styles:m,unstyled:g,slideSize:x,slideGap:y,orientation:v,height:_,align:S,slidesToScroll:b,includeGapInSize:A,draggable:E,dragFree:C,loop:T,speed:O,initialSlide:L,inViewThreshold:k,withControls:B,withIndicators:G,plugins:H,nextControlIcon:Y,previousControlIcon:te,breakpoints:Z,skipSnaps:D,containScroll:N}=n,z=ahe(n,["children","className","getEmblaApi","onNextSlide","onPreviousSlide","nextControlLabel","previousControlLabel","controlSize","controlsOffset","classNames","styles","unstyled","slideSize","slideGap","orientation","height","align","slidesToScroll","includeGapInSize","draggable","dragFree","loop","speed","initialSlide","inViewThreshold","withControls","withIndicators","plugins","nextControlIcon","previousControlIcon","breakpoints","skipSnaps","containScroll"]),{classes:U,cx:V,theme:X}=ihe({controlSize:d,controlsOffset:u,orientation:v,height:_,includeGapInSize:A,breakpoints:Z,slideGap:y},{name:"Carousel",classNames:h,styles:m,unstyled:g}),[J,ee]=A3({axis:v==="horizontal"?"x":"y",direction:X.dir,startIndex:L,loop:T,align:S,slidesToScroll:b,draggable:E,dragFree:C,speed:O,inViewThreshold:k,skipSnaps:D,containScroll:N},H),[q,re]=ue.exports.useState(0),[ie,K]=ue.exports.useState(0),oe=ue.exports.useCallback(Le=>ee&&ee.scrollTo(Le),[ee]),ye=ue.exports.useCallback(()=>{!ee||re(ee.selectedScrollSnap())},[ee,re]),ne=ue.exports.useCallback(()=>{ee==null||ee.scrollPrev(),a==null||a()},[ee]),Q=ue.exports.useCallback(()=>{ee==null||ee.scrollNext(),o==null||o()},[ee]),de=ue.exports.useCallback(Le=>{Le.key==="ArrowRight"&&(Le.preventDefault(),Q()),Le.key==="ArrowLeft"&&(Le.preventDefault(),ne())},[ee]);ue.exports.useEffect(()=>{if(ee)return s==null||s(ee),ye(),K(ee.scrollSnapList().length),ee.on("select",ye),()=>{ee.off("select",ye)}},[ee]),ue.exports.useEffect(()=>{ee&&(ee.reInit(),K(ee.scrollSnapList().length),re(Le=>Vae(Le,0,ue.exports.Children.toArray(r).length-1)))},[ue.exports.Children.toArray(r).length]);const pe=(ee==null?void 0:ee.canScrollPrev())||!1,ve=(ee==null?void 0:ee.canScrollNext())||!1,Re=Array(ie).fill(0).map((Le,De)=>fe(Rf,{"data-active":De===q||void 0,className:U.indicator,"aria-hidden":!0,tabIndex:-1,onClick:()=>oe(De)},De));return fe(yae,{classNames:h,styles:m,unstyled:g,children:fe(Gde,{value:{slideGap:y,slideSize:x,embla:ee,orientation:v,includeGapInSize:A,breakpoints:Z},children:Yt(bs,{...ohe({className:V(U.root,i),ref:e,onKeyDownCapture:de},z),children:[fe("div",{className:U.viewport,ref:J,children:fe("div",{className:U.container,children:r})}),G&&fe("div",{className:U.indicators,children:Re}),B&&Yt("div",{className:U.controls,children:[fe(Rf,{onClick:ne,className:U.control,"aria-label":c,"data-inactive":!pe||void 0,tabIndex:pe?0:-1,children:typeof te<"u"?te:fe(zO,{style:{transform:`rotate(${MI({dir:X.dir,orientation:v,direction:"previous"})}deg)`}})}),fe(Rf,{onClick:Q,className:U.control,"aria-label":l,"data-inactive":!ve||void 0,tabIndex:ve?0:-1,children:typeof Y<"u"?Y:fe(zO,{style:{transform:`rotate(${MI({dir:X.dir,orientation:v,direction:"next"})}deg)`}})})]})]})})})});C3.Slide=dF;C3.displayName="@mantine/carousel/Carousel";const CI=C3,uhe=Tr((t,e,n)=>({card:{height:375,display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center",backgroundSize:"cover",backgroundPosition:"center",transition:"transform 1s","&:hover":{transform:"scale(1.05)"}},title:{fontFamily:`Raleway, ${t.fontFamily}`,fontWeight:500,color:t.white,lineHeight:1.15,fontSize:30,marginTop:t.spacing.xs},category:{color:t.colors.yellow[2],opacity:.85,fontWeight:700,lineHeight:1,fontSize:16,textTransform:"uppercase",backgroundColor:"#34bfff55"}}));function che({image:t,title:e,category:n,url:r}){const{classes:i}=uhe();return fe("a",{href:r,rel:"author",target:"_blank",children:fe(WB,{shadow:"md",p:"xl",radius:"lg",sx:{backgroundImage:`url(${t})`,cursor:"pointer"},className:i.card,children:Yt("div",{children:[fe(Jue,{className:i.category,size:"xs",children:n}),fe(iF,{order:3,className:i.title,children:e})]})})})}const dhe=[{image:"./static/images/cyber_sphere.png",title:"A Study in Shaders",category:"WebGL | Three.js | Shaders",url:"https://creative-ataraxia.github.io/cyberpunk-sphere/"},{image:"./static/images/portfolio_site.png",title:"Portfolio Site",category:"React.js | Typescript | WebGL | Shaders",url:"https://creative-ataraxia.github.io"},{image:"./static/images/helmet.png",title:"A Study in Lights and Shadows",category:"Three.js | WebGL | Javascript",url:"https://creative-ataraxia.github.io/sci-fi-gear-display/"},{image:"./static/images/birds_over_sunset.png",title:"A Study in WebGL",category:"Three.js | WebGL | Shaders",url:"https://creative-ataraxia.github.io/birds-over-sunset/"}];function hhe(){Hae();const t=uh();Uae(`(max-width: ${t.breakpoints.sm}px)`);const e=dhe.map(n=>fe(CI.Slide,{children:fe(che,{...n})},n.title));return fe(y3,{theme:{globalStyles:n=>({".mantine-Carousel-viewport":{transform:"scale(0.75)"}})},children:fe(CI,{slideSize:"50%",breakpoints:[{maxWidth:"sm",slideSize:"100%",slideGap:2}],slideGap:"xl",align:"start",slidesToScroll:1,loop:!0,draggable:!0,dragFree:!0,style:{position:"relative",top:"-2.5vh"},children:e})})}const fhe=Tr(t=>({card:{backgroundColor:t.colors.dark[4],color:t.white,border:"none"},avatar:{border:"2px solid white"}})),y0={image:"./static/images/wall.png",avatar:"./static/images/roy.jpg",name:"Roy Ma",job:"React Creative Developer"};function phe(){const{classes:t,theme:e}=fhe();return Yt(y3,{theme:{globalStyles:n=>({".mantine-Button-root:hover":{backgroundColor:"hsl(0, 0%, 75%)",color:"hsl(0, 0%, 0%)"},".mantine-Group-root a button&:hover":{backgroundColor:"#00000000"},".mantine-Group-root a button svg&:hover":{fill:"#00000000"}})},children:[Yt(pI,{withBorder:!0,p:"xl",radius:"md",className:t.card,children:[fe(pI.Section,{sx:{backgroundImage:`url${y0.image}`,width:375,height:180},children:fe("img",{src:"./static/images/wall.png",alt:"",width:"375px"})}),fe(Nue,{src:y0.avatar,size:120,radius:80,mx:"auto",mt:-30,className:t.avatar}),fe(Vb,{align:"center",size:"lg",weight:500,mt:"sm",style:{fontFamily:"Raleway, Helvetica, Arial, sans-serif",fontSize:"1.5rem"},children:y0.name}),fe(Vb,{align:"center",size:"sm",style:{fontFamily:'"Libre Baskerville", Helvetica, Arial, sans-serif',fontSize:"1rem",lineHeight:"2rem"},children:y0.job}),Yt(eF,{mt:"md",position:"center",spacing:30,children:[fe("a",{href:"https://github.com/Creative-Ataraxia",rel:"author",target:"_blank",children:fe(cw,{size:"lg",children:fe(ade,{size:35,stroke:1,fill:"#ffffffaa",color:"white"})})}),fe("a",{href:"https://mail.google.com/mail/u/0/?view=cm&fs=1&to=cycla4@gmail.com&su=SUBJECT&body=BODY&tf=1",rel:"author",target:"_blank",children:fe(cw,{size:"lg",children:fe(dde,{size:35,stroke:1,fill:"#dd4b39",color:"white"})})}),fe("a",{href:"https://twitter.com/mymemeismine",rel:"author",target:"_blank",children:fe(cw,{size:"lg",children:fe(ude,{size:35,stroke:1,fill:"#1da1f2",color:"white"})})})]}),fe("a",{href:"https://creative-ataraxia.github.io/static/social/Roy_Resume_Oct23_2022.pdf",rel:"author",target:"_blank",children:fe(vce,{radius:"md",mt:"xl",size:"md",color:"dark",style:{fontFamily:"Raleway, Helvetica, Arial, sans-serif",fontSize:"1.25rem",position:"relative",display:"block",marginLeft:"auto",marginRight:"auto"},children:"Resume"})})]}),fe(hhe,{})]})}function mhe({portal:t,...e}){let n=null;const r=new R,i=ue.exports.useRef(0),s=ue.exports.useRef(),[o,a]=ue.exports.useState(!1),{nodes:l}=Cse("../static/scroll.splinecode"),c=pX(1,!0);return ue.exports.useLayoutEffect(()=>{Object.values(l).forEach(d=>{d.material&&d.parent.name!=="hand-r"&&d.name!=="Cube3"&&d.name!=="Cube 8"&&d.name!=="Cube 17"&&d.name!=="Cube 24"&&Object.assign(d.material,c)})},[]),Uy(d=>{r.copy({x:d.pointer.x,y:d.pointer.y,z:0}),r.unproject(d.camera),s.current.rotation.x=nn.lerp(s.current.rotation.x,o?-.7:-.5,.2),s.current.position.lerp({x:r.x-100,y:i.current+r.y,z:r.z},.4),d.camera.zoom=nn.lerp(d.camera.zoom,o?.9:.7,o?.025:.15),d.camera.position.lerp({x:-d.pointer.x*400,y:-d.pointer.y*200,z:1e3},.1),d.camera.lookAt(0,0,0),d.camera.updateProjectionMatrix()}),Yt("group",{...e,dispose:null,children:[fe(jr,{object:l["Bg-stuff"]}),fe(jr,{object:l["Emoji-1"],position:[250,-100,0]})," ",fe(jr,{object:l["Emoji-1"]})," ",fe(jr,{object:l["Emoji-2"]})," ",fe(jr,{object:l["Emoji-2"],position:[-500,-250,150]})," ",fe(jr,{object:l["Emoji-4"],position:[0,500,0]})," ",fe(jr,{object:l["Emoji-4"]})," ",fe(jr,{object:l["Icon-text-1"]}),fe(jr,{object:l["Icon-text-1"],position:[-500,-0,50],scale:.75}),fe(jr,{object:l["Icon-text-2"]}),fe(jr,{object:l["Icon-like"]}),fe(jr,{object:l["Icon-star"],position:[-400,-150,150],scale:.5}),fe(jr,{object:l["Icon-star"],position:[350,-250,100],scale:1.25}),fe(jr,{object:l["Icon-play"]}),fe("group",{ref:s,children:fe(gu,{object:l["hand-r"],"rotation-y":.35})}),fe(gu,{object:l["Bubble-BG"],"position-z":-1e3,scale:1.5}),Yt(c4,{floatIntensity:100,rotationIntensity:.5,speed:1,children:[fe(jr,{intensity:100,rotation:.5,object:l["Bubble-LOGO"],position:[0,-0,0],scale:1.75}),Yt("group",{position:[0,-50,0],rotation:[-.15,0,0],children:[fe(gu,{object:l["hand-l"],position:[80,100,-150]}),Yt("group",{name:"phone",position:[-50,0,-68],children:[fe(gu,{object:[l["Rectangle 4"],l["Rectangle 3"],l["Boolean 2"]]}),fe(fX,{id:1,colorWrite:!1,depthWrite:!1,geometry:l.screen.geometry,castShadow:!0,receiveShadow:!0,position:[0,0,9.89],children:fe(Oq,{className:"content-embed",portal:t,scale:40,transform:!0,zIndexRange:[-1,0],children:fe(phe,{})})}),fe("mesh",{onWheel:d=>{i.current=-d.deltaY/2,clearTimeout(n),n=setTimeout(()=>i.current=0,100)},onPointerDown:d=>{d.target.setPointerCapture(d.pointerId),a(!0)},onPointerUp:d=>{d.target.releasePointerCapture(d.pointerId),a(!1)},receiveShadow:!0,geometry:l.screen.geometry,children:fe("meshStandardMaterial",{transparent:!0,opacity:.01})})]})]})]})]})}const jr=({object:t,intensity:e=300,rotation:n=1.25,...r})=>fe(c4,{floatIntensity:e,rotationIntensity:n,speed:5,children:fe(gu,{object:t,...r})});function ghe(){const t=ue.exports.useRef(),e=ue.exports.useRef();return Yt("div",{ref:t,className:"content-container",children:[fe("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden"},ref:e}),Yt(Sq,{shadows:!0,flat:!0,linear:!0,style:{pointerEvents:"none"},eventSource:t,eventPrefix:"page",children:[fe("directionalLight",{castShadow:!0,intensity:.4,position:[-10,50,300],"shadow-mapSize":[512,512],"shadow-bias":-.002,children:fe("orthographicCamera",{attach:"shadow-camera",args:[-2e3,2e3,2e3,-2e3,-1e4,1e4]})}),fe(hX,{makeDefault:!0,far:1e5,near:-1e5,position:[0,0,1e3]}),fe("hemisphereLight",{intensity:.5,color:"#eaeaea",position:[0,1,0]}),fe(mhe,{portal:e,position:[0,-50,0]})]})]})}FM(document.getElementById("root")).render(Yt(GN,{children:[fe(ue.exports.Suspense,{fallback:null,children:fe(ghe,{})}),fe(Rq,{})]}));
